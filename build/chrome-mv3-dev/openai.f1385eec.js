(function(define){var __define; typeof define === "function" && (__define=define,define=null);
// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles

(function (modules, entry, mainEntry, parcelRequireName, globalName) {
  /* eslint-disable no-undef */
  var globalObject =
    typeof globalThis !== 'undefined'
      ? globalThis
      : typeof self !== 'undefined'
      ? self
      : typeof window !== 'undefined'
      ? window
      : typeof global !== 'undefined'
      ? global
      : {};
  /* eslint-enable no-undef */

  // Save the require from previous bundle to this closure if any
  var previousRequire =
    typeof globalObject[parcelRequireName] === 'function' &&
    globalObject[parcelRequireName];

  var cache = previousRequire.cache || {};
  // Do not use `require` to prevent Webpack from trying to bundle this call
  var nodeRequire =
    typeof module !== 'undefined' &&
    typeof module.require === 'function' &&
    module.require.bind(module);

  function newRequire(name, jumped) {
    if (!cache[name]) {
      if (!modules[name]) {
        // if we cannot find the module within our internal map or
        // cache jump to the current global require ie. the last bundle
        // that was added to the page.
        var currentRequire =
          typeof globalObject[parcelRequireName] === 'function' &&
          globalObject[parcelRequireName];
        if (!jumped && currentRequire) {
          return currentRequire(name, true);
        }

        // If there are other bundles on this page the require from the
        // previous one is saved to 'previousRequire'. Repeat this as
        // many times as there are bundles until the module is found or
        // we exhaust the require chain.
        if (previousRequire) {
          return previousRequire(name, true);
        }

        // Try the node require function if it exists.
        if (nodeRequire && typeof name === 'string') {
          return nodeRequire(name);
        }

        var err = new Error("Cannot find module '" + name + "'");
        err.code = 'MODULE_NOT_FOUND';
        throw err;
      }

      localRequire.resolve = resolve;
      localRequire.cache = {};

      var module = (cache[name] = new newRequire.Module(name));

      modules[name][0].call(
        module.exports,
        localRequire,
        module,
        module.exports,
        this
      );
    }

    return cache[name].exports;

    function localRequire(x) {
      var res = localRequire.resolve(x);
      return res === false ? {} : newRequire(res);
    }

    function resolve(x) {
      var id = modules[name][1][x];
      return id != null ? id : x;
    }
  }

  function Module(moduleName) {
    this.id = moduleName;
    this.bundle = newRequire;
    this.exports = {};
  }

  newRequire.isParcelRequire = true;
  newRequire.Module = Module;
  newRequire.modules = modules;
  newRequire.cache = cache;
  newRequire.parent = previousRequire;
  newRequire.register = function (id, exports) {
    modules[id] = [
      function (require, module) {
        module.exports = exports;
      },
      {},
    ];
  };

  Object.defineProperty(newRequire, 'root', {
    get: function () {
      return globalObject[parcelRequireName];
    },
  });

  globalObject[parcelRequireName] = newRequire;

  for (var i = 0; i < entry.length; i++) {
    newRequire(entry[i]);
  }

  if (mainEntry) {
    // Expose entry point to Node, AMD or browser globals
    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
    var mainExports = newRequire(mainEntry);

    // CommonJS
    if (typeof exports === 'object' && typeof module !== 'undefined') {
      module.exports = mainExports;

      // RequireJS
    } else if (typeof define === 'function' && define.amd) {
      define(function () {
        return mainExports;
      });

      // <script>
    } else if (globalName) {
      this[globalName] = mainExports;
    }
  }
})({"3CxXH":[function(require,module,exports) {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
/**
 * Wrapper around OpenAI large language models that use the Chat endpoint.
 *
 * To use you should have the `openai` package installed, with the
 * `OPENAI_API_KEY` environment variable set.
 *
 * To use with Azure you should have the `openai` package installed, with the
 * `AZURE_OPENAI_API_KEY`,
 * `AZURE_OPENAI_API_INSTANCE_NAME`,
 * `AZURE_OPENAI_API_DEPLOYMENT_NAME`
 * and `AZURE_OPENAI_API_VERSION` environment variable set.
 * `AZURE_OPENAI_BASE_PATH` is optional and will override `AZURE_OPENAI_API_INSTANCE_NAME` if you need to use a custom endpoint.
 *
 * @remarks
 * Any parameters that are valid to be passed to {@link
 * https://platform.openai.com/docs/api-reference/chat/create |
 * `openai.createChatCompletion`} can be passed through {@link modelKwargs}, even
 * if not explicitly available on this class.
 */ parcelHelpers.export(exports, "ChatOpenAI", ()=>ChatOpenAI);
parcelHelpers.export(exports, "PromptLayerChatOpenAI", ()=>PromptLayerChatOpenAI);
var _openai = require("openai");
var _countTokensJs = require("../base_language/count_tokens.js");
var _indexJs = require("../schema/index.js");
var _convertToOpenaiJs = require("../tools/convert_to_openai.js");
var _azureJs = require("../util/azure.js");
var _envJs = require("../util/env.js");
var _promptLayerJs = require("../util/prompt-layer.js");
var _baseJs = require("./base.js");
var _openaiJs = require("../util/openai.js");
var process = require("9f469e39cc583f0c");
function extractGenericMessageCustomRole(message) {
    if (message.role !== "system" && message.role !== "assistant" && message.role !== "user" && message.role !== "function") console.warn(`Unknown message role: ${message.role}`);
    return message.role;
}
function messageToOpenAIRole(message) {
    const type = message._getType();
    switch(type){
        case "system":
            return "system";
        case "ai":
            return "assistant";
        case "human":
            return "user";
        case "function":
            return "function";
        case "generic":
            if (!(0, _indexJs.ChatMessage).isInstance(message)) throw new Error("Invalid generic chat message");
            return extractGenericMessageCustomRole(message);
        default:
            throw new Error(`Unknown message type: ${type}`);
    }
}
function openAIResponseToChatMessage(message) {
    switch(message.role){
        case "user":
            return new (0, _indexJs.HumanMessage)(message.content || "");
        case "assistant":
            return new (0, _indexJs.AIMessage)(message.content || "", {
                function_call: message.function_call
            });
        case "system":
            return new (0, _indexJs.SystemMessage)(message.content || "");
        default:
            return new (0, _indexJs.ChatMessage)(message.content || "", message.role ?? "unknown");
    }
}
function _convertDeltaToMessageChunk(// eslint-disable-next-line @typescript-eslint/no-explicit-any
delta, defaultRole) {
    const role = delta.role ?? defaultRole;
    const content = delta.content ?? "";
    let additional_kwargs;
    if (delta.function_call) additional_kwargs = {
        function_call: delta.function_call
    };
    else additional_kwargs = {};
    if (role === "user") return new (0, _indexJs.HumanMessageChunk)({
        content
    });
    else if (role === "assistant") return new (0, _indexJs.AIMessageChunk)({
        content,
        additional_kwargs
    });
    else if (role === "system") return new (0, _indexJs.SystemMessageChunk)({
        content
    });
    else if (role === "function") return new (0, _indexJs.FunctionMessageChunk)({
        content,
        additional_kwargs,
        name: delta.name
    });
    else return new (0, _indexJs.ChatMessageChunk)({
        content,
        role
    });
}
class ChatOpenAI extends (0, _baseJs.BaseChatModel) {
    static lc_name() {
        return "ChatOpenAI";
    }
    get callKeys() {
        return [
            ...super.callKeys,
            "options",
            "function_call",
            "functions",
            "tools",
            "promptIndex"
        ];
    }
    get lc_secrets() {
        return {
            openAIApiKey: "OPENAI_API_KEY",
            azureOpenAIApiKey: "AZURE_OPENAI_API_KEY",
            organization: "OPENAI_ORGANIZATION"
        };
    }
    get lc_aliases() {
        return {
            modelName: "model",
            openAIApiKey: "openai_api_key",
            azureOpenAIApiVersion: "azure_openai_api_version",
            azureOpenAIApiKey: "azure_openai_api_key",
            azureOpenAIApiInstanceName: "azure_openai_api_instance_name",
            azureOpenAIApiDeploymentName: "azure_openai_api_deployment_name"
        };
    }
    constructor(fields, /** @deprecated */ configuration){
        super(fields ?? {});
        Object.defineProperty(this, "lc_serializable", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: true
        });
        Object.defineProperty(this, "temperature", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 1
        });
        Object.defineProperty(this, "topP", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 1
        });
        Object.defineProperty(this, "frequencyPenalty", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 0
        });
        Object.defineProperty(this, "presencePenalty", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 0
        });
        Object.defineProperty(this, "n", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 1
        });
        Object.defineProperty(this, "logitBias", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "modelName", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: "gpt-3.5-turbo"
        });
        Object.defineProperty(this, "modelKwargs", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "stop", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "user", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "timeout", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "streaming", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: false
        });
        Object.defineProperty(this, "maxTokens", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "openAIApiKey", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "azureOpenAIApiVersion", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "azureOpenAIApiKey", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "azureOpenAIApiInstanceName", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "azureOpenAIApiDeploymentName", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "azureOpenAIBasePath", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "organization", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "client", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "clientConfig", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.openAIApiKey = fields?.openAIApiKey ?? (0, _envJs.getEnvironmentVariable)("OPENAI_API_KEY");
        this.azureOpenAIApiKey = fields?.azureOpenAIApiKey ?? (0, _envJs.getEnvironmentVariable)("AZURE_OPENAI_API_KEY");
        if (!this.azureOpenAIApiKey && !this.openAIApiKey) throw new Error("OpenAI or Azure OpenAI API key not found");
        this.azureOpenAIApiInstanceName = fields?.azureOpenAIApiInstanceName ?? (0, _envJs.getEnvironmentVariable)("AZURE_OPENAI_API_INSTANCE_NAME");
        this.azureOpenAIApiDeploymentName = fields?.azureOpenAIApiDeploymentName ?? (0, _envJs.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME");
        this.azureOpenAIApiVersion = fields?.azureOpenAIApiVersion ?? (0, _envJs.getEnvironmentVariable)("AZURE_OPENAI_API_VERSION");
        this.azureOpenAIBasePath = fields?.azureOpenAIBasePath ?? (0, _envJs.getEnvironmentVariable)("AZURE_OPENAI_BASE_PATH");
        this.organization = fields?.configuration?.organization ?? (0, _envJs.getEnvironmentVariable)("OPENAI_ORGANIZATION");
        this.modelName = fields?.modelName ?? this.modelName;
        this.modelKwargs = fields?.modelKwargs ?? {};
        this.timeout = fields?.timeout;
        this.temperature = fields?.temperature ?? this.temperature;
        this.topP = fields?.topP ?? this.topP;
        this.frequencyPenalty = fields?.frequencyPenalty ?? this.frequencyPenalty;
        this.presencePenalty = fields?.presencePenalty ?? this.presencePenalty;
        this.maxTokens = fields?.maxTokens;
        this.n = fields?.n ?? this.n;
        this.logitBias = fields?.logitBias;
        this.stop = fields?.stop;
        this.user = fields?.user;
        this.streaming = fields?.streaming ?? false;
        if (this.azureOpenAIApiKey) {
            if (!this.azureOpenAIApiInstanceName && !this.azureOpenAIBasePath) throw new Error("Azure OpenAI API instance name not found");
            if (!this.azureOpenAIApiDeploymentName) throw new Error("Azure OpenAI API deployment name not found");
            if (!this.azureOpenAIApiVersion) throw new Error("Azure OpenAI API version not found");
            this.openAIApiKey = this.openAIApiKey ?? "";
        }
        this.clientConfig = {
            apiKey: this.openAIApiKey,
            organization: this.organization,
            baseURL: configuration?.basePath ?? fields?.configuration?.basePath,
            dangerouslyAllowBrowser: true,
            defaultHeaders: configuration?.baseOptions?.headers ?? fields?.configuration?.baseOptions?.headers,
            defaultQuery: configuration?.baseOptions?.params ?? fields?.configuration?.baseOptions?.params,
            ...configuration,
            ...fields?.configuration
        };
    }
    /**
     * Get the parameters used to invoke the model
     */ invocationParams(options) {
        return {
            model: this.modelName,
            temperature: this.temperature,
            top_p: this.topP,
            frequency_penalty: this.frequencyPenalty,
            presence_penalty: this.presencePenalty,
            max_tokens: this.maxTokens === -1 ? undefined : this.maxTokens,
            n: this.n,
            logit_bias: this.logitBias,
            stop: options?.stop ?? this.stop,
            user: this.user,
            stream: this.streaming,
            functions: options?.functions ?? (options?.tools ? options?.tools.map((0, _convertToOpenaiJs.formatToOpenAIFunction)) : undefined),
            function_call: options?.function_call,
            ...this.modelKwargs
        };
    }
    /** @ignore */ _identifyingParams() {
        return {
            model_name: this.modelName,
            ...this.invocationParams(),
            ...this.clientConfig
        };
    }
    async *_streamResponseChunks(messages, options, runManager) {
        const messagesMapped = messages.map((message)=>({
                role: messageToOpenAIRole(message),
                content: message.content,
                name: message.name,
                function_call: message.additional_kwargs.function_call
            }));
        const params = {
            ...this.invocationParams(options),
            messages: messagesMapped,
            stream: true
        };
        let defaultRole;
        const streamIterable = await this.completionWithRetry(params, options);
        for await (const data of streamIterable){
            const choice = data?.choices[0];
            if (!choice) continue;
            const { delta } = choice;
            const chunk = _convertDeltaToMessageChunk(delta, defaultRole);
            defaultRole = delta.role ?? defaultRole;
            const newTokenIndices = {
                prompt: options.promptIndex ?? 0,
                completion: choice.index ?? 0
            };
            const generationChunk = new (0, _indexJs.ChatGenerationChunk)({
                message: chunk,
                text: chunk.content,
                generationInfo: newTokenIndices
            });
            yield generationChunk;
            runManager?.handleLLMNewToken(generationChunk.text ?? "", newTokenIndices, undefined, undefined, undefined, {
                chunk: generationChunk
            });
        }
        if (options.signal?.aborted) throw new Error("AbortError");
    }
    /**
     * Get the identifying parameters for the model
     */ identifyingParams() {
        return this._identifyingParams();
    }
    /** @ignore */ async _generate(messages, options, runManager) {
        const tokenUsage = {};
        const params = this.invocationParams(options);
        const messagesMapped = messages.map((message)=>({
                role: messageToOpenAIRole(message),
                content: message.content,
                name: message.name,
                function_call: message.additional_kwargs.function_call
            }));
        if (params.stream) {
            const stream = await this._streamResponseChunks(messages, options, runManager);
            const finalChunks = {};
            for await (const chunk of stream){
                const index = chunk.generationInfo?.completion ?? 0;
                if (finalChunks[index] === undefined) finalChunks[index] = chunk;
                else finalChunks[index] = finalChunks[index].concat(chunk);
            }
            const generations = Object.entries(finalChunks).sort(([aKey], [bKey])=>parseInt(aKey, 10) - parseInt(bKey, 10)).map(([_, value])=>value);
            return {
                generations
            };
        } else {
            const data = await this.completionWithRetry({
                ...params,
                stream: false,
                messages: messagesMapped
            }, {
                signal: options?.signal,
                ...options?.options
            });
            const { completion_tokens: completionTokens, prompt_tokens: promptTokens, total_tokens: totalTokens } = data?.usage ?? {};
            if (completionTokens) tokenUsage.completionTokens = (tokenUsage.completionTokens ?? 0) + completionTokens;
            if (promptTokens) tokenUsage.promptTokens = (tokenUsage.promptTokens ?? 0) + promptTokens;
            if (totalTokens) tokenUsage.totalTokens = (tokenUsage.totalTokens ?? 0) + totalTokens;
            const generations = [];
            for (const part of data?.choices ?? []){
                const text = part.message?.content ?? "";
                const generation = {
                    text,
                    message: openAIResponseToChatMessage(part.message ?? {
                        role: "assistant"
                    })
                };
                if (part.finish_reason) generation.generationInfo = {
                    finish_reason: part.finish_reason
                };
                generations.push(generation);
            }
            return {
                generations,
                llmOutput: {
                    tokenUsage
                }
            };
        }
    }
    async getNumTokensFromMessages(messages) {
        let totalCount = 0;
        let tokensPerMessage = 0;
        let tokensPerName = 0;
        // From: https://github.com/openai/openai-cookbook/blob/main/examples/How_to_format_inputs_to_ChatGPT_models.ipynb
        if ((0, _countTokensJs.getModelNameForTiktoken)(this.modelName) === "gpt-3.5-turbo") {
            tokensPerMessage = 4;
            tokensPerName = -1;
        } else if ((0, _countTokensJs.getModelNameForTiktoken)(this.modelName).startsWith("gpt-4")) {
            tokensPerMessage = 3;
            tokensPerName = 1;
        }
        const countPerMessage = await Promise.all(messages.map(async (message)=>{
            const textCount = await this.getNumTokens(message.content);
            const roleCount = await this.getNumTokens(messageToOpenAIRole(message));
            const nameCount = message.name !== undefined ? tokensPerName + await this.getNumTokens(message.name) : 0;
            const count = textCount + tokensPerMessage + roleCount + nameCount;
            totalCount += count;
            return count;
        }));
        totalCount += 3; // every reply is primed with <|start|>assistant<|message|>
        return {
            totalCount,
            countPerMessage
        };
    }
    async completionWithRetry(request, options) {
        const requestOptions = this._getClientOptions(options);
        return this.caller.call(async ()=>{
            try {
                const res = await this.client.chat.completions.create(request, requestOptions);
                return res;
            } catch (e) {
                const error = (0, _openaiJs.wrapOpenAIClientError)(e);
                throw error;
            }
        });
    }
    _getClientOptions(options) {
        if (!this.client) {
            const openAIEndpointConfig = {
                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,
                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,
                azureOpenAIApiKey: this.azureOpenAIApiKey,
                azureOpenAIBasePath: this.azureOpenAIBasePath,
                baseURL: this.clientConfig.baseURL
            };
            const endpoint = (0, _azureJs.getEndpoint)(openAIEndpointConfig);
            const params = {
                ...this.clientConfig,
                baseURL: endpoint,
                timeout: this.timeout,
                maxRetries: 0
            };
            if (!params.baseURL) delete params.baseURL;
            this.client = new (0, _openai.OpenAI)(params);
        }
        const requestOptions = {
            ...this.clientConfig,
            ...options
        };
        if (this.azureOpenAIApiKey) {
            requestOptions.headers = {
                "api-key": this.azureOpenAIApiKey,
                ...requestOptions.headers
            };
            requestOptions.query = {
                "api-version": this.azureOpenAIApiVersion,
                ...requestOptions.query
            };
        }
        return requestOptions;
    }
    _llmType() {
        return "openai";
    }
    /** @ignore */ _combineLLMOutput(...llmOutputs) {
        return llmOutputs.reduce((acc, llmOutput)=>{
            if (llmOutput && llmOutput.tokenUsage) {
                acc.tokenUsage.completionTokens += llmOutput.tokenUsage.completionTokens ?? 0;
                acc.tokenUsage.promptTokens += llmOutput.tokenUsage.promptTokens ?? 0;
                acc.tokenUsage.totalTokens += llmOutput.tokenUsage.totalTokens ?? 0;
            }
            return acc;
        }, {
            tokenUsage: {
                completionTokens: 0,
                promptTokens: 0,
                totalTokens: 0
            }
        });
    }
}
class PromptLayerChatOpenAI extends ChatOpenAI {
    constructor(fields){
        super(fields);
        Object.defineProperty(this, "promptLayerApiKey", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "plTags", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "returnPromptLayerId", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.promptLayerApiKey = fields?.promptLayerApiKey ?? (typeof process !== "undefined" ? process.env?.PROMPTLAYER_API_KEY : undefined);
        this.plTags = fields?.plTags ?? [];
        this.returnPromptLayerId = fields?.returnPromptLayerId ?? false;
    }
    async _generate(messages, options, runManager) {
        const requestStartTime = Date.now();
        let parsedOptions;
        if (Array.isArray(options)) parsedOptions = {
            stop: options
        };
        else if (options?.timeout && !options.signal) parsedOptions = {
            ...options,
            signal: AbortSignal.timeout(options.timeout)
        };
        else parsedOptions = options ?? {};
        const generatedResponses = await super._generate(messages, parsedOptions, runManager);
        const requestEndTime = Date.now();
        const _convertMessageToDict = (message)=>{
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            let messageDict;
            if (message._getType() === "human") messageDict = {
                role: "user",
                content: message.content
            };
            else if (message._getType() === "ai") messageDict = {
                role: "assistant",
                content: message.content
            };
            else if (message._getType() === "function") messageDict = {
                role: "assistant",
                content: message.content
            };
            else if (message._getType() === "system") messageDict = {
                role: "system",
                content: message.content
            };
            else if (message._getType() === "generic") messageDict = {
                role: message.role,
                content: message.content
            };
            else throw new Error(`Got unknown type ${message}`);
            return messageDict;
        };
        const _createMessageDicts = (messages, callOptions)=>{
            const params = {
                ...this.invocationParams(),
                model: this.modelName
            };
            if (callOptions?.stop) {
                if (Object.keys(params).includes("stop")) throw new Error("`stop` found in both the input and default params.");
            }
            const messageDicts = messages.map((message)=>_convertMessageToDict(message));
            return messageDicts;
        };
        for(let i = 0; i < generatedResponses.generations.length; i += 1){
            const generation = generatedResponses.generations[i];
            const messageDicts = _createMessageDicts(messages, parsedOptions);
            let promptLayerRequestId;
            const parsedResp = [
                {
                    content: generation.text,
                    role: messageToOpenAIRole(generation.message)
                }
            ];
            const promptLayerRespBody = await (0, _promptLayerJs.promptLayerTrackRequest)(this.caller, "langchain.PromptLayerChatOpenAI", {
                ...this._identifyingParams(),
                messages: messageDicts,
                stream: false
            }, this.plTags, parsedResp, requestStartTime, requestEndTime, this.promptLayerApiKey);
            if (this.returnPromptLayerId === true) {
                if (promptLayerRespBody.success === true) promptLayerRequestId = promptLayerRespBody.request_id;
                if (!generation.generationInfo || typeof generation.generationInfo !== "object") generation.generationInfo = {};
                generation.generationInfo.promptLayerRequestId = promptLayerRequestId;
            }
        }
        return generatedResponses;
    }
}

},{"9f469e39cc583f0c":"eZ6Ew","openai":"iP1Oi","../base_language/count_tokens.js":"jFSyu","../schema/index.js":"d5Hnz","../tools/convert_to_openai.js":"eFbNC","../util/azure.js":"5jgA5","../util/env.js":"hJTOE","../util/prompt-layer.js":"ekfqP","./base.js":"eRVSH","../util/openai.js":"1K7lA","@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"iP1Oi":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
var __createBinding = this && this.__createBinding || (Object.create ? function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) desc = {
        enumerable: true,
        get: function() {
            return m[k];
        }
    };
    Object.defineProperty(o, k2, desc);
} : function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function(o, v) {
    Object.defineProperty(o, "default", {
        enumerable: true,
        value: v
    });
} : function(o, v) {
    o["default"] = v;
});
var __importStar = this && this.__importStar || function(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) {
        for(var k in mod)if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    }
    __setModuleDefault(result, mod);
    return result;
};
var _a;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.fileFromPath = exports.toFile = exports.UnprocessableEntityError = exports.PermissionDeniedError = exports.InternalServerError = exports.AuthenticationError = exports.BadRequestError = exports.RateLimitError = exports.ConflictError = exports.NotFoundError = exports.APIUserAbortError = exports.APIConnectionTimeoutError = exports.APIConnectionError = exports.APIError = exports.OpenAI = void 0;
const Core = __importStar(require("8b041fcbdc7431bd"));
const Pagination = __importStar(require("cd897b8f46a77d8a"));
const API = __importStar(require("8aea7c79de1aec9c"));
const Errors = __importStar(require("47ef5d088cc0765d"));
const Uploads = __importStar(require("eb906106f729627d"));
/** API Client for interfacing with the OpenAI API. */ class OpenAI extends Core.APIClient {
    /**
   * API Client for interfacing with the OpenAI API.
   *
   * @param {string} [opts.apiKey=process.env['OPENAI_API_KEY']] - The API Key to send to the API.
   * @param {string} [opts.baseURL] - Override the default base URL for the API.
   * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.
   * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.
   * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.
   * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.
   * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.
   * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.
   * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.
   * @param {string | null} [opts.organization]
   */ constructor(_b){
        var _c, _d;
        var { apiKey = Core.readEnv("OPENAI_API_KEY"), organization = (_c = Core.readEnv("OPENAI_ORG_ID")) !== null && _c !== void 0 ? _c : null, ...opts } = _b === void 0 ? {} : _b;
        if (apiKey === undefined) throw new Error("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' }).");
        const options = {
            apiKey,
            organization,
            baseURL: `https://api.openai.com/v1`,
            ...opts
        };
        if (!options.dangerouslyAllowBrowser && Core.isRunningInBrowser()) throw new Error("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");
        super({
            baseURL: options.baseURL,
            timeout: (_d = options.timeout) !== null && _d !== void 0 ? _d : 600000 /* 10 minutes */ ,
            httpAgent: options.httpAgent,
            maxRetries: options.maxRetries,
            fetch: options.fetch
        });
        this.completions = new API.Completions(this);
        this.chat = new API.Chat(this);
        this.edits = new API.Edits(this);
        this.embeddings = new API.Embeddings(this);
        this.files = new API.Files(this);
        this.images = new API.Images(this);
        this.audio = new API.Audio(this);
        this.moderations = new API.Moderations(this);
        this.models = new API.Models(this);
        this.fineTuning = new API.FineTuning(this);
        this.fineTunes = new API.FineTunes(this);
        this._options = options;
        this.apiKey = apiKey;
        this.organization = organization;
    }
    defaultQuery() {
        return this._options.defaultQuery;
    }
    defaultHeaders(opts) {
        return {
            ...super.defaultHeaders(opts),
            "OpenAI-Organization": this.organization,
            ...this._options.defaultHeaders
        };
    }
    authHeaders(opts) {
        return {
            Authorization: `Bearer ${this.apiKey}`
        };
    }
}
exports.OpenAI = OpenAI;
_a = OpenAI;
OpenAI.OpenAI = _a;
OpenAI.APIError = Errors.APIError;
OpenAI.APIConnectionError = Errors.APIConnectionError;
OpenAI.APIConnectionTimeoutError = Errors.APIConnectionTimeoutError;
OpenAI.APIUserAbortError = Errors.APIUserAbortError;
OpenAI.NotFoundError = Errors.NotFoundError;
OpenAI.ConflictError = Errors.ConflictError;
OpenAI.RateLimitError = Errors.RateLimitError;
OpenAI.BadRequestError = Errors.BadRequestError;
OpenAI.AuthenticationError = Errors.AuthenticationError;
OpenAI.InternalServerError = Errors.InternalServerError;
OpenAI.PermissionDeniedError = Errors.PermissionDeniedError;
OpenAI.UnprocessableEntityError = Errors.UnprocessableEntityError;
exports.APIError = Errors.APIError, exports.APIConnectionError = Errors.APIConnectionError, exports.APIConnectionTimeoutError = Errors.APIConnectionTimeoutError, exports.APIUserAbortError = Errors.APIUserAbortError, exports.NotFoundError = Errors.NotFoundError, exports.ConflictError = Errors.ConflictError, exports.RateLimitError = Errors.RateLimitError, exports.BadRequestError = Errors.BadRequestError, exports.AuthenticationError = Errors.AuthenticationError, exports.InternalServerError = Errors.InternalServerError, exports.PermissionDeniedError = Errors.PermissionDeniedError, exports.UnprocessableEntityError = Errors.UnprocessableEntityError;
exports.toFile = Uploads.toFile;
exports.fileFromPath = Uploads.fileFromPath;
(function(OpenAI) {
    // Helper functions
    OpenAI.toFile = Uploads.toFile;
    OpenAI.fileFromPath = Uploads.fileFromPath;
    OpenAI.Page = Pagination.Page;
    OpenAI.CursorPage = Pagination.CursorPage;
    OpenAI.Completions = API.Completions;
    OpenAI.Chat = API.Chat;
    OpenAI.Edits = API.Edits;
    OpenAI.Embeddings = API.Embeddings;
    OpenAI.Files = API.Files;
    OpenAI.FileObjectsPage = API.FileObjectsPage;
    OpenAI.Images = API.Images;
    OpenAI.Audio = API.Audio;
    OpenAI.Moderations = API.Moderations;
    OpenAI.Models = API.Models;
    OpenAI.ModelsPage = API.ModelsPage;
    OpenAI.FineTuning = API.FineTuning;
    OpenAI.FineTunes = API.FineTunes;
    OpenAI.FineTunesPage = API.FineTunesPage;
})(OpenAI = exports.OpenAI || (exports.OpenAI = {}));
exports = module.exports = OpenAI;
exports.default = OpenAI;

},{"8b041fcbdc7431bd":"7czzY","cd897b8f46a77d8a":"ceAFb","8aea7c79de1aec9c":"gvuVs","47ef5d088cc0765d":"4ac1J","eb906106f729627d":"7GN5A"}],"7czzY":[function(require,module,exports) {
var Buffer = require("92d07612dc77f074").Buffer;
var process = require("d25b0187515c8f9");
"use strict";
var __classPrivateFieldSet = this && this.__classPrivateFieldSet || function(receiver, state, value, kind, f) {
    if (kind === "m") throw new TypeError("Private method is not writable");
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet = this && this.__classPrivateFieldGet || function(receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _AbstractPage_client;
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.toBase64 = exports.getHeader = exports.isHeadersProtocol = exports.isRunningInBrowser = exports.debug = exports.hasOwn = exports.isEmptyObj = exports.maybeCoerceBoolean = exports.maybeCoerceFloat = exports.maybeCoerceInteger = exports.coerceBoolean = exports.coerceFloat = exports.coerceInteger = exports.readEnv = exports.ensurePresent = exports.castToError = exports.safeJSON = exports.isRequestOptions = exports.createResponseHeaders = exports.PagePromise = exports.AbstractPage = exports.APIResource = exports.APIClient = exports.APIPromise = exports.createForm = exports.multipartFormRequestOptions = exports.maybeMultipartFormRequestOptions = void 0;
const version_1 = require("bf191d2f96c5cc36");
const streaming_1 = require("bb492a3efe77aed9");
const error_1 = require("6aabbb06c09fbcb6");
const agent_1 = require("d8ebd037d56cc49a");
const fetch_1 = require("c5690b1758fcd5ba");
const uploads_1 = require("8e9338988722379e");
var uploads_2 = require("8e9338988722379e");
Object.defineProperty(exports, "maybeMultipartFormRequestOptions", {
    enumerable: true,
    get: function() {
        return uploads_2.maybeMultipartFormRequestOptions;
    }
});
Object.defineProperty(exports, "multipartFormRequestOptions", {
    enumerable: true,
    get: function() {
        return uploads_2.multipartFormRequestOptions;
    }
});
Object.defineProperty(exports, "createForm", {
    enumerable: true,
    get: function() {
        return uploads_2.createForm;
    }
});
const MAX_RETRIES = 2;
async function defaultParseResponse(props) {
    const { response } = props;
    if (props.options.stream) // Note: there is an invariant here that isn't represented in the type system
    // that if you set `stream: true` the response type must also be `Stream<T>`
    return new streaming_1.Stream(response, props.controller);
    const contentType = response.headers.get("content-type");
    if (contentType === null || contentType === void 0 ? void 0 : contentType.includes("application/json")) {
        const json = await response.json();
        debug("response", response.status, response.url, response.headers, json);
        return json;
    }
    // TODO handle blob, arraybuffer, other content types, etc.
    const text = await response.text();
    debug("response", response.status, response.url, response.headers, text);
    return text;
}
/**
 * A subclass of `Promise` providing additional helper methods
 * for interacting with the SDK.
 */ class APIPromise extends Promise {
    constructor(responsePromise, parseResponse = defaultParseResponse){
        super((resolve)=>{
            // this is maybe a bit weird but this has to be a no-op to not implicitly
            // parse the response body; instead .then, .catch, .finally are overridden
            // to parse the response
            resolve(null);
        });
        this.responsePromise = responsePromise;
        this.parseResponse = parseResponse;
    }
    _thenUnwrap(transform) {
        return new APIPromise(this.responsePromise, async (props)=>transform(await this.parseResponse(props)));
    }
    /**
   * Gets the raw `Response` instance instead of parsing the response
   * data.
   *
   * If you want to parse the response body but still get the `Response`
   * instance, you can use {@link withResponse()}.
   */ asResponse() {
        return this.responsePromise.then((p)=>p.response);
    }
    /**
   * Gets the parsed response data and the raw `Response` instance.
   *
   * If you just want to get the raw `Response` instance without parsing it,
   * you can use {@link asResponse()}.
   */ async withResponse() {
        const [data, response] = await Promise.all([
            this.parse(),
            this.asResponse()
        ]);
        return {
            data,
            response
        };
    }
    parse() {
        if (!this.parsedPromise) this.parsedPromise = this.responsePromise.then(this.parseResponse);
        return this.parsedPromise;
    }
    then(onfulfilled, onrejected) {
        return this.parse().then(onfulfilled, onrejected);
    }
    catch(onrejected) {
        return this.parse().catch(onrejected);
    }
    finally(onfinally) {
        return this.parse().finally(onfinally);
    }
}
exports.APIPromise = APIPromise;
class APIClient {
    constructor({ baseURL, maxRetries, timeout = 600000, httpAgent, fetch: overridenFetch }){
        this.baseURL = baseURL;
        this.maxRetries = validatePositiveInteger("maxRetries", maxRetries !== null && maxRetries !== void 0 ? maxRetries : MAX_RETRIES);
        this.timeout = validatePositiveInteger("timeout", timeout);
        this.httpAgent = httpAgent;
        this.fetch = overridenFetch !== null && overridenFetch !== void 0 ? overridenFetch : fetch_1.fetch;
    }
    authHeaders(opts) {
        return {};
    }
    /**
   * Override this to add your own default headers, for example:
   *
   *  {
   *    ...super.defaultHeaders(),
   *    Authorization: 'Bearer 123',
   *  }
   */ defaultHeaders(opts) {
        return {
            Accept: "application/json",
            "Content-Type": "application/json",
            "User-Agent": this.getUserAgent(),
            ...getPlatformHeaders(),
            ...this.authHeaders(opts)
        };
    }
    /**
   * Override this to add your own headers validation:
   */ validateHeaders(headers, customHeaders) {}
    defaultIdempotencyKey() {
        return `stainless-node-retry-${uuid4()}`;
    }
    get(path, opts) {
        return this.methodRequest("get", path, opts);
    }
    post(path, opts) {
        return this.methodRequest("post", path, opts);
    }
    patch(path, opts) {
        return this.methodRequest("patch", path, opts);
    }
    put(path, opts) {
        return this.methodRequest("put", path, opts);
    }
    delete(path, opts) {
        return this.methodRequest("delete", path, opts);
    }
    methodRequest(method, path, opts) {
        return this.request(Promise.resolve(opts).then((opts)=>({
                method,
                path,
                ...opts
            })));
    }
    getAPIList(path, Page, opts) {
        return this.requestAPIList(Page, {
            method: "get",
            path,
            ...opts
        });
    }
    calculateContentLength(body) {
        if (typeof body === "string") {
            if (typeof Buffer !== "undefined") return Buffer.byteLength(body, "utf8").toString();
            if (typeof TextEncoder !== "undefined") {
                const encoder = new TextEncoder();
                const encoded = encoder.encode(body);
                return encoded.length.toString();
            }
        }
        return null;
    }
    buildRequest(options) {
        var _a, _b, _c, _d, _e, _f;
        const { method, path, query, headers: headers = {} } = options;
        const body = (0, uploads_1.isMultipartBody)(options.body) ? options.body.body : options.body ? JSON.stringify(options.body, null, 2) : null;
        const contentLength = this.calculateContentLength(body);
        const url = this.buildURL(path, query);
        if ("timeout" in options) validatePositiveInteger("timeout", options.timeout);
        const timeout = (_a = options.timeout) !== null && _a !== void 0 ? _a : this.timeout;
        const httpAgent = (_c = (_b = options.httpAgent) !== null && _b !== void 0 ? _b : this.httpAgent) !== null && _c !== void 0 ? _c : (0, agent_1.getDefaultAgent)(url);
        const minAgentTimeout = timeout + 1000;
        if (typeof ((_d = httpAgent === null || httpAgent === void 0 ? void 0 : httpAgent.options) === null || _d === void 0 ? void 0 : _d.timeout) === "number" && minAgentTimeout > ((_e = httpAgent.options.timeout) !== null && _e !== void 0 ? _e : 0)) // Allow any given request to bump our agent active socket timeout.
        // This may seem strange, but leaking active sockets should be rare and not particularly problematic,
        // and without mutating agent we would need to create more of them.
        // This tradeoff optimizes for performance.
        httpAgent.options.timeout = minAgentTimeout;
        if (this.idempotencyHeader && method !== "get") {
            if (!options.idempotencyKey) options.idempotencyKey = this.defaultIdempotencyKey();
            headers[this.idempotencyHeader] = options.idempotencyKey;
        }
        const reqHeaders = {
            ...contentLength && {
                "Content-Length": contentLength
            },
            ...this.defaultHeaders(options),
            ...headers
        };
        // let builtin fetch set the Content-Type for multipart bodies
        if ((0, uploads_1.isMultipartBody)(options.body) && !fetch_1.isPolyfilled) delete reqHeaders["Content-Type"];
        // Strip any headers being explicitly omitted with null
        Object.keys(reqHeaders).forEach((key)=>reqHeaders[key] === null && delete reqHeaders[key]);
        const req = {
            method,
            ...body && {
                body: body
            },
            headers: reqHeaders,
            ...httpAgent && {
                agent: httpAgent
            },
            // @ts-ignore node-fetch uses a custom AbortSignal type that is
            // not compatible with standard web types
            signal: (_f = options.signal) !== null && _f !== void 0 ? _f : null
        };
        this.validateHeaders(reqHeaders, headers);
        return {
            req,
            url,
            timeout
        };
    }
    /**
   * Used as a callback for mutating the given `RequestInit` object.
   *
   * This is useful for cases where you want to add certain headers based off of
   * the request properties, e.g. `method` or `url`.
   */ async prepareRequest(request, { url, options }) {}
    parseHeaders(headers) {
        return !headers ? {} : Symbol.iterator in headers ? Object.fromEntries(Array.from(headers).map((header)=>[
                ...header
            ])) : {
            ...headers
        };
    }
    makeStatusError(status, error, message, headers) {
        return error_1.APIError.generate(status, error, message, headers);
    }
    request(options, remainingRetries = null) {
        return new APIPromise(this.makeRequest(options, remainingRetries));
    }
    async makeRequest(optionsInput, retriesRemaining) {
        var _a, _b, _c;
        const options = await optionsInput;
        if (retriesRemaining == null) retriesRemaining = (_a = options.maxRetries) !== null && _a !== void 0 ? _a : this.maxRetries;
        const { req, url, timeout } = this.buildRequest(options);
        await this.prepareRequest(req, {
            url,
            options
        });
        debug("request", url, options, req.headers);
        if ((_b = options.signal) === null || _b === void 0 ? void 0 : _b.aborted) throw new error_1.APIUserAbortError();
        const controller = new AbortController();
        const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(exports.castToError);
        if (response instanceof Error) {
            if ((_c = options.signal) === null || _c === void 0 ? void 0 : _c.aborted) throw new error_1.APIUserAbortError();
            if (retriesRemaining) return this.retryRequest(options, retriesRemaining);
            if (response.name === "AbortError") throw new error_1.APIConnectionTimeoutError();
            throw new error_1.APIConnectionError({
                cause: response
            });
        }
        const responseHeaders = (0, exports.createResponseHeaders)(response.headers);
        if (!response.ok) {
            if (retriesRemaining && this.shouldRetry(response)) return this.retryRequest(options, retriesRemaining, responseHeaders);
            const errText = await response.text().catch(()=>"Unknown");
            const errJSON = (0, exports.safeJSON)(errText);
            const errMessage = errJSON ? undefined : errText;
            debug("response", response.status, url, responseHeaders, errMessage);
            const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);
            throw err;
        }
        return {
            response,
            options,
            controller
        };
    }
    requestAPIList(Page, options) {
        const request = this.makeRequest(options, null);
        return new PagePromise(this, request, Page);
    }
    buildURL(path, query) {
        const url = isAbsoluteURL(path) ? new URL(path) : new URL(this.baseURL + (this.baseURL.endsWith("/") && path.startsWith("/") ? path.slice(1) : path));
        const defaultQuery = this.defaultQuery();
        if (!isEmptyObj(defaultQuery)) query = {
            ...defaultQuery,
            ...query
        };
        if (query) url.search = this.stringifyQuery(query);
        return url.toString();
    }
    stringifyQuery(query) {
        return Object.entries(query).filter(([_, value])=>typeof value !== "undefined").map(([key, value])=>{
            if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
            if (value === null) return `${encodeURIComponent(key)}=`;
            throw new Error(`Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`);
        }).join("&");
    }
    async fetchWithTimeout(url, init, ms, controller) {
        const { signal, ...options } = init || {};
        if (signal) signal.addEventListener("abort", ()=>controller.abort());
        const timeout = setTimeout(()=>controller.abort(), ms);
        return this.getRequestClient().fetch(url, {
            signal: controller.signal,
            ...options
        }).finally(()=>{
            clearTimeout(timeout);
        });
    }
    getRequestClient() {
        return {
            fetch: this.fetch
        };
    }
    shouldRetry(response) {
        // Note this is not a standard header.
        const shouldRetryHeader = response.headers.get("x-should-retry");
        // If the server explicitly says whether or not to retry, obey.
        if (shouldRetryHeader === "true") return true;
        if (shouldRetryHeader === "false") return false;
        // Retry on lock timeouts.
        if (response.status === 409) return true;
        // Retry on rate limits.
        if (response.status === 429) return true;
        // Retry internal errors.
        if (response.status >= 500) return true;
        return false;
    }
    async retryRequest(options, retriesRemaining, responseHeaders) {
        var _a;
        retriesRemaining -= 1;
        // About the Retry-After header: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After
        //
        // TODO: we may want to handle the case where the header is using the http-date syntax: "Retry-After: <http-date>".
        // See https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After#syntax for details.
        const retryAfter = parseInt((responseHeaders === null || responseHeaders === void 0 ? void 0 : responseHeaders["retry-after"]) || "");
        const maxRetries = (_a = options.maxRetries) !== null && _a !== void 0 ? _a : this.maxRetries;
        const timeout = this.calculateRetryTimeoutSeconds(retriesRemaining, retryAfter, maxRetries) * 1000;
        await sleep(timeout);
        return this.makeRequest(options, retriesRemaining);
    }
    calculateRetryTimeoutSeconds(retriesRemaining, retryAfter, maxRetries) {
        const initialRetryDelay = 0.5;
        const maxRetryDelay = 2;
        // If the API asks us to wait a certain amount of time (and it's a reasonable amount),
        // just do what it says.
        if (Number.isInteger(retryAfter) && retryAfter <= 60) return retryAfter;
        const numRetries = maxRetries - retriesRemaining;
        // Apply exponential backoff, but not more than the max.
        const sleepSeconds = Math.min(initialRetryDelay * Math.pow(numRetries - 1, 2), maxRetryDelay);
        // Apply some jitter, plus-or-minus half a second.
        const jitter = Math.random() - 0.5;
        return sleepSeconds + jitter;
    }
    getUserAgent() {
        return `${this.constructor.name}/JS ${version_1.VERSION}`;
    }
}
exports.APIClient = APIClient;
class APIResource {
    constructor(client){
        this.client = client;
        this.get = client.get.bind(client);
        this.post = client.post.bind(client);
        this.patch = client.patch.bind(client);
        this.put = client.put.bind(client);
        this.delete = client.delete.bind(client);
        this.getAPIList = client.getAPIList.bind(client);
    }
}
exports.APIResource = APIResource;
class AbstractPage {
    constructor(client, response, body, options){
        _AbstractPage_client.set(this, void 0);
        __classPrivateFieldSet(this, _AbstractPage_client, client, "f");
        this.options = options;
        this.response = response;
        this.body = body;
    }
    hasNextPage() {
        const items = this.getPaginatedItems();
        if (!items.length) return false;
        return this.nextPageInfo() != null;
    }
    async getNextPage() {
        const nextInfo = this.nextPageInfo();
        if (!nextInfo) throw new Error("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");
        const nextOptions = {
            ...this.options
        };
        if ("params" in nextInfo) nextOptions.query = {
            ...nextOptions.query,
            ...nextInfo.params
        };
        else if ("url" in nextInfo) {
            const params = [
                ...Object.entries(nextOptions.query || {}),
                ...nextInfo.url.searchParams.entries()
            ];
            for (const [key, value] of params)nextInfo.url.searchParams.set(key, value);
            nextOptions.query = undefined;
            nextOptions.path = nextInfo.url.toString();
        }
        return await __classPrivateFieldGet(this, _AbstractPage_client, "f").requestAPIList(this.constructor, nextOptions);
    }
    async *iterPages() {
        // eslint-disable-next-line @typescript-eslint/no-this-alias
        let page = this;
        yield page;
        while(page.hasNextPage()){
            page = await page.getNextPage();
            yield page;
        }
    }
    async *[(_AbstractPage_client = new WeakMap(), Symbol.asyncIterator)]() {
        for await (const page of this.iterPages())for (const item of page.getPaginatedItems())yield item;
    }
}
exports.AbstractPage = AbstractPage;
/**
 * This subclass of Promise will resolve to an instantiated Page once the request completes.
 *
 * It also implements AsyncIterable to allow auto-paginating iteration on an unawaited list call, eg:
 *
 *    for await (const item of client.items.list()) {
 *      console.log(item)
 *    }
 */ class PagePromise extends APIPromise {
    constructor(client, request, Page){
        super(request, async (props)=>new Page(client, props.response, await defaultParseResponse(props), props.options));
    }
    /**
   * Allow auto-paginating iteration on an unawaited list call, eg:
   *
   *    for await (const item of client.items.list()) {
   *      console.log(item)
   *    }
   */ async *[Symbol.asyncIterator]() {
        const page = await this;
        for await (const item of page)yield item;
    }
}
exports.PagePromise = PagePromise;
const createResponseHeaders = (headers)=>{
    return new Proxy(Object.fromEntries(// @ts-ignore
    headers.entries()), {
        get (target, name) {
            const key = name.toString();
            return target[key.toLowerCase()] || target[key];
        }
    });
};
exports.createResponseHeaders = createResponseHeaders;
// This is required so that we can determine if a given object matches the RequestOptions
// type at runtime. While this requires duplication, it is enforced by the TypeScript
// compiler such that any missing / extraneous keys will cause an error.
const requestOptionsKeys = {
    method: true,
    path: true,
    query: true,
    body: true,
    headers: true,
    maxRetries: true,
    stream: true,
    timeout: true,
    httpAgent: true,
    signal: true,
    idempotencyKey: true
};
const isRequestOptions = (obj)=>{
    return typeof obj === "object" && obj !== null && !isEmptyObj(obj) && Object.keys(obj).every((k)=>hasOwn(requestOptionsKeys, k));
};
exports.isRequestOptions = isRequestOptions;
const getPlatformProperties = ()=>{
    if (typeof Deno !== "undefined" && Deno.build != null) return {
        "X-Stainless-Lang": "js",
        "X-Stainless-Package-Version": version_1.VERSION,
        "X-Stainless-OS": normalizePlatform(Deno.build.os),
        "X-Stainless-Arch": normalizeArch(Deno.build.arch),
        "X-Stainless-Runtime": "deno",
        "X-Stainless-Runtime-Version": Deno.version
    };
    if (typeof EdgeRuntime !== "undefined") return {
        "X-Stainless-Lang": "js",
        "X-Stainless-Package-Version": version_1.VERSION,
        "X-Stainless-OS": "Unknown",
        "X-Stainless-Arch": `other:${EdgeRuntime}`,
        "X-Stainless-Runtime": "edge",
        "X-Stainless-Runtime-Version": process.version
    };
    // Check if Node.js
    if (Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]") return {
        "X-Stainless-Lang": "js",
        "X-Stainless-Package-Version": version_1.VERSION,
        "X-Stainless-OS": normalizePlatform(process.platform),
        "X-Stainless-Arch": normalizeArch(process.arch),
        "X-Stainless-Runtime": "node",
        "X-Stainless-Runtime-Version": process.version
    };
    const browserInfo = getBrowserInfo();
    if (browserInfo) return {
        "X-Stainless-Lang": "js",
        "X-Stainless-Package-Version": version_1.VERSION,
        "X-Stainless-OS": "Unknown",
        "X-Stainless-Arch": "unknown",
        "X-Stainless-Runtime": `browser:${browserInfo.browser}`,
        "X-Stainless-Runtime-Version": browserInfo.version
    };
    // TODO add support for Cloudflare workers, etc.
    return {
        "X-Stainless-Lang": "js",
        "X-Stainless-Package-Version": version_1.VERSION,
        "X-Stainless-OS": "Unknown",
        "X-Stainless-Arch": "unknown",
        "X-Stainless-Runtime": "unknown",
        "X-Stainless-Runtime-Version": "unknown"
    };
};
// Note: modified from https://github.com/JS-DevTools/host-environment/blob/b1ab79ecde37db5d6e163c050e54fe7d287d7c92/src/isomorphic.browser.ts
function getBrowserInfo() {
    if (typeof navigator === "undefined" || !navigator) return null;
    // NOTE: The order matters here!
    const browserPatterns = [
        {
            key: "edge",
            pattern: /Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/
        },
        {
            key: "ie",
            pattern: /MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/
        },
        {
            key: "ie",
            pattern: /Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/
        },
        {
            key: "chrome",
            pattern: /Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/
        },
        {
            key: "firefox",
            pattern: /Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/
        },
        {
            key: "safari",
            pattern: /(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/
        }
    ];
    // Find the FIRST matching browser
    for (const { key, pattern } of browserPatterns){
        const match = pattern.exec(navigator.userAgent);
        if (match) {
            const major = match[1] || 0;
            const minor = match[2] || 0;
            const patch = match[3] || 0;
            return {
                browser: key,
                version: `${major}.${minor}.${patch}`
            };
        }
    }
    return null;
}
const normalizeArch = (arch)=>{
    // Node docs:
    // - https://nodejs.org/api/process.html#processarch
    // Deno docs:
    // - https://doc.deno.land/deno/stable/~/Deno.build
    if (arch === "x32") return "x32";
    if (arch === "x86_64" || arch === "x64") return "x64";
    if (arch === "arm") return "arm";
    if (arch === "aarch64" || arch === "arm64") return "arm64";
    if (arch) return `other:${arch}`;
    return "unknown";
};
const normalizePlatform = (platform)=>{
    // Node platforms:
    // - https://nodejs.org/api/process.html#processplatform
    // Deno platforms:
    // - https://doc.deno.land/deno/stable/~/Deno.build
    // - https://github.com/denoland/deno/issues/14799
    platform = platform.toLowerCase();
    // NOTE: this iOS check is untested and may not work
    // Node does not work natively on IOS, there is a fork at
    // https://github.com/nodejs-mobile/nodejs-mobile
    // however it is unknown at the time of writing how to detect if it is running
    if (platform.includes("ios")) return "iOS";
    if (platform === "android") return "Android";
    if (platform === "darwin") return "MacOS";
    if (platform === "win32") return "Windows";
    if (platform === "freebsd") return "FreeBSD";
    if (platform === "openbsd") return "OpenBSD";
    if (platform === "linux") return "Linux";
    if (platform) return `Other:${platform}`;
    return "Unknown";
};
let _platformHeaders;
const getPlatformHeaders = ()=>{
    return _platformHeaders !== null && _platformHeaders !== void 0 ? _platformHeaders : _platformHeaders = getPlatformProperties();
};
const safeJSON = (text)=>{
    try {
        return JSON.parse(text);
    } catch (err) {
        return undefined;
    }
};
exports.safeJSON = safeJSON;
// https://stackoverflow.com/a/19709846
const startsWithSchemeRegexp = new RegExp("^(?:[a-z]+:)?//", "i");
const isAbsoluteURL = (url)=>{
    return startsWithSchemeRegexp.test(url);
};
const sleep = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));
const validatePositiveInteger = (name, n)=>{
    if (typeof n !== "number" || !Number.isInteger(n)) throw new Error(`${name} must be an integer`);
    if (n < 0) throw new Error(`${name} must be a positive integer`);
    return n;
};
const castToError = (err)=>{
    if (err instanceof Error) return err;
    return new Error(err);
};
exports.castToError = castToError;
const ensurePresent = (value)=>{
    if (value == null) throw new Error(`Expected a value to be given but received ${value} instead.`);
    return value;
};
exports.ensurePresent = ensurePresent;
/**
 * Read an environment variable.
 *
 * Will return undefined if the environment variable doesn't exist or cannot be accessed.
 */ const readEnv = (env)=>{
    var _a, _b, _c, _d;
    if (typeof process !== "undefined") return (_b = (_a = {}, _a === void 0) ? void 0 : _a[env]) !== null && _b !== void 0 ? _b : undefined;
    if (typeof Deno !== "undefined") return (_d = (_c = Deno.env) === null || _c === void 0 ? void 0 : _c.get) === null || _d === void 0 ? void 0 : _d.call(_c, env);
    return undefined;
};
exports.readEnv = readEnv;
const coerceInteger = (value)=>{
    if (typeof value === "number") return Math.round(value);
    if (typeof value === "string") return parseInt(value, 10);
    throw new Error(`Could not coerce ${value} (type: ${typeof value}) into a number`);
};
exports.coerceInteger = coerceInteger;
const coerceFloat = (value)=>{
    if (typeof value === "number") return value;
    if (typeof value === "string") return parseFloat(value);
    throw new Error(`Could not coerce ${value} (type: ${typeof value}) into a number`);
};
exports.coerceFloat = coerceFloat;
const coerceBoolean = (value)=>{
    if (typeof value === "boolean") return value;
    if (typeof value === "string") return value === "true";
    return Boolean(value);
};
exports.coerceBoolean = coerceBoolean;
const maybeCoerceInteger = (value)=>{
    if (value === undefined) return undefined;
    return (0, exports.coerceInteger)(value);
};
exports.maybeCoerceInteger = maybeCoerceInteger;
const maybeCoerceFloat = (value)=>{
    if (value === undefined) return undefined;
    return (0, exports.coerceFloat)(value);
};
exports.maybeCoerceFloat = maybeCoerceFloat;
const maybeCoerceBoolean = (value)=>{
    if (value === undefined) return undefined;
    return (0, exports.coerceBoolean)(value);
};
exports.maybeCoerceBoolean = maybeCoerceBoolean;
// https://stackoverflow.com/a/34491287
function isEmptyObj(obj) {
    if (!obj) return true;
    for(const _k in obj)return false;
    return true;
}
exports.isEmptyObj = isEmptyObj;
// https://eslint.org/docs/latest/rules/no-prototype-builtins
function hasOwn(obj, key) {
    return Object.prototype.hasOwnProperty.call(obj, key);
}
exports.hasOwn = hasOwn;
function debug(action, ...args) {
    typeof process;
}
exports.debug = debug;
/**
 * https://stackoverflow.com/a/2117523
 */ const uuid4 = ()=>{
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c)=>{
        const r = Math.random() * 16 | 0;
        const v = c === "x" ? r : r & 0x3 | 0x8;
        return v.toString(16);
    });
};
const isRunningInBrowser = ()=>{
    return(// @ts-ignore
    typeof window !== "undefined" && // @ts-ignore
    typeof window.document !== "undefined" && // @ts-ignore
    typeof navigator !== "undefined");
};
exports.isRunningInBrowser = isRunningInBrowser;
const isHeadersProtocol = (headers)=>{
    return typeof (headers === null || headers === void 0 ? void 0 : headers.get) === "function";
};
exports.isHeadersProtocol = isHeadersProtocol;
const getHeader = (headers, key)=>{
    const lowerKey = key.toLowerCase();
    if ((0, exports.isHeadersProtocol)(headers)) return headers.get(key) || headers.get(lowerKey);
    const value = headers[key] || headers[lowerKey];
    if (Array.isArray(value)) {
        if (value.length <= 1) return value[0];
        console.warn(`Received ${value.length} entries for the ${key} header, using the first entry.`);
        return value[0];
    }
    return value;
};
exports.getHeader = getHeader;
/**
 * Encodes a string to Base64 format.
 */ const toBase64 = (str)=>{
    if (!str) return "";
    if (typeof Buffer !== "undefined") return Buffer.from(str).toString("base64");
    if (typeof btoa !== "undefined") return btoa(str);
    throw new Error("Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined");
};
exports.toBase64 = toBase64;

},{"92d07612dc77f074":"jd6EY","d25b0187515c8f9":"eZ6Ew","bf191d2f96c5cc36":"exMpD","bb492a3efe77aed9":"jqL0M","6aabbb06c09fbcb6":"4ac1J","d8ebd037d56cc49a":"agFYr","c5690b1758fcd5ba":"7PHTQ","8e9338988722379e":"7GN5A"}],"jd6EY":[function(require,module,exports) {
var Er = Object.create;
var N = Object.defineProperty;
var dr = Object.getOwnPropertyDescriptor;
var gr = Object.getOwnPropertyNames;
var mr = Object.getPrototypeOf, Ir = Object.prototype.hasOwnProperty;
var $ = (i, r)=>()=>(r || i((r = {
            exports: {}
        }).exports, r), r.exports), Fr = (i, r)=>{
    for(var t in r)N(i, t, {
        get: r[t],
        enumerable: !0
    });
}, L = (i, r, t, n)=>{
    if (r && typeof r == "object" || typeof r == "function") for (let e of gr(r))!Ir.call(i, e) && e !== t && N(i, e, {
        get: ()=>r[e],
        enumerable: !(n = dr(r, e)) || n.enumerable
    });
    return i;
}, S = (i, r, t)=>(L(i, r, "default"), t && L(t, r, "default")), J = (i, r, t)=>(t = i != null ? Er(mr(i)) : {}, L(r || !i || !i.__esModule ? N(t, "default", {
        value: i,
        enumerable: !0
    }) : t, i)), Ar = (i)=>L(N({}, "__esModule", {
        value: !0
    }), i);
var Q = $((M)=>{
    "use strict";
    M.byteLength = Rr;
    M.toByteArray = Cr;
    M.fromByteArray = Lr;
    var B = [], w = [], Ur = typeof Uint8Array < "u" ? Uint8Array : Array, P = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    for(m = 0, K = P.length; m < K; ++m)B[m] = P[m], w[P.charCodeAt(m)] = m;
    var m, K;
    w["-".charCodeAt(0)] = 62;
    w["_".charCodeAt(0)] = 63;
    function Z(i) {
        var r = i.length;
        if (r % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
        var t = i.indexOf("=");
        t === -1 && (t = r);
        var n = t === r ? 0 : 4 - t % 4;
        return [
            t,
            n
        ];
    }
    function Rr(i) {
        var r = Z(i), t = r[0], n = r[1];
        return (t + n) * 3 / 4 - n;
    }
    function Tr(i, r, t) {
        return (r + t) * 3 / 4 - t;
    }
    function Cr(i) {
        var r, t = Z(i), n = t[0], e = t[1], o = new Ur(Tr(i, n, e)), u = 0, f = e > 0 ? n - 4 : n, c;
        for(c = 0; c < f; c += 4)r = w[i.charCodeAt(c)] << 18 | w[i.charCodeAt(c + 1)] << 12 | w[i.charCodeAt(c + 2)] << 6 | w[i.charCodeAt(c + 3)], o[u++] = r >> 16 & 255, o[u++] = r >> 8 & 255, o[u++] = r & 255;
        return e === 2 && (r = w[i.charCodeAt(c)] << 2 | w[i.charCodeAt(c + 1)] >> 4, o[u++] = r & 255), e === 1 && (r = w[i.charCodeAt(c)] << 10 | w[i.charCodeAt(c + 1)] << 4 | w[i.charCodeAt(c + 2)] >> 2, o[u++] = r >> 8 & 255, o[u++] = r & 255), o;
    }
    function Sr(i) {
        return B[i >> 18 & 63] + B[i >> 12 & 63] + B[i >> 6 & 63] + B[i & 63];
    }
    function _r(i, r, t) {
        for(var n, e = [], o = r; o < t; o += 3)n = (i[o] << 16 & 16711680) + (i[o + 1] << 8 & 65280) + (i[o + 2] & 255), e.push(Sr(n));
        return e.join("");
    }
    function Lr(i) {
        for(var r, t = i.length, n = t % 3, e = [], o = 16383, u = 0, f = t - n; u < f; u += o)e.push(_r(i, u, u + o > f ? f : u + o));
        return n === 1 ? (r = i[t - 1], e.push(B[r >> 2] + B[r << 4 & 63] + "==")) : n === 2 && (r = (i[t - 2] << 8) + i[t - 1], e.push(B[r >> 10] + B[r >> 4 & 63] + B[r << 2 & 63] + "=")), e.join("");
    }
});
var v = $((O)=>{
    O.read = function(i, r, t, n, e) {
        var o, u, f = e * 8 - n - 1, c = (1 << f) - 1, l = c >> 1, s = -7, p = t ? e - 1 : 0, F = t ? -1 : 1, x = i[r + p];
        for(p += F, o = x & (1 << -s) - 1, x >>= -s, s += f; s > 0; o = o * 256 + i[r + p], p += F, s -= 8);
        for(u = o & (1 << -s) - 1, o >>= -s, s += n; s > 0; u = u * 256 + i[r + p], p += F, s -= 8);
        if (o === 0) o = 1 - l;
        else {
            if (o === c) return u ? NaN : (x ? -1 : 1) * (1 / 0);
            u = u + Math.pow(2, n), o = o - l;
        }
        return (x ? -1 : 1) * u * Math.pow(2, o - n);
    };
    O.write = function(i, r, t, n, e, o) {
        var u, f, c, l = o * 8 - e - 1, s = (1 << l) - 1, p = s >> 1, F = e === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, x = n ? 0 : o - 1, b = n ? 1 : -1, Br = r < 0 || r === 0 && 1 / r < 0 ? 1 : 0;
        for(r = Math.abs(r), isNaN(r) || r === 1 / 0 ? (f = isNaN(r) ? 1 : 0, u = s) : (u = Math.floor(Math.log(r) / Math.LN2), r * (c = Math.pow(2, -u)) < 1 && (u--, c *= 2), u + p >= 1 ? r += F / c : r += F * Math.pow(2, 1 - p), r * c >= 2 && (u++, c /= 2), u + p >= s ? (f = 0, u = s) : u + p >= 1 ? (f = (r * c - 1) * Math.pow(2, e), u = u + p) : (f = r * Math.pow(2, p - 1) * Math.pow(2, e), u = 0)); e >= 8; i[t + x] = f & 255, x += b, f /= 256, e -= 8);
        for(u = u << e | f, l += e; l > 0; i[t + x] = u & 255, x += b, u /= 256, l -= 8);
        i[t + x - b] |= Br * 128;
    };
});
var z = $((T)=>{
    "use strict";
    var G = Q(), U = v(), rr = typeof Symbol == "function" && typeof Symbol.for == "function" ? Symbol.for("nodejs.util.inspect.custom") : null;
    T.Buffer = h;
    T.SlowBuffer = $r;
    T.INSPECT_MAX_BYTES = 50;
    var k = 2147483647;
    T.kMaxLength = k;
    h.TYPED_ARRAY_SUPPORT = Nr();
    !h.TYPED_ARRAY_SUPPORT && typeof console < "u" && typeof console.error == "function" && console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
    function Nr() {
        try {
            let i = new Uint8Array(1), r = {
                foo: function() {
                    return 42;
                }
            };
            return Object.setPrototypeOf(r, Uint8Array.prototype), Object.setPrototypeOf(i, r), i.foo() === 42;
        } catch (i) {
            return !1;
        }
    }
    Object.defineProperty(h.prototype, "parent", {
        enumerable: !0,
        get: function() {
            if (h.isBuffer(this)) return this.buffer;
        }
    });
    Object.defineProperty(h.prototype, "offset", {
        enumerable: !0,
        get: function() {
            if (h.isBuffer(this)) return this.byteOffset;
        }
    });
    function d(i) {
        if (i > k) throw new RangeError('The value "' + i + '" is invalid for option "size"');
        let r = new Uint8Array(i);
        return Object.setPrototypeOf(r, h.prototype), r;
    }
    function h(i, r, t) {
        if (typeof i == "number") {
            if (typeof r == "string") throw new TypeError('The "string" argument must be of type string. Received type number');
            return j(i);
        }
        return er(i, r, t);
    }
    h.poolSize = 8192;
    function er(i, r, t) {
        if (typeof i == "string") return kr(i, r);
        if (ArrayBuffer.isView(i)) return Dr(i);
        if (i == null) throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof i);
        if (E(i, ArrayBuffer) || i && E(i.buffer, ArrayBuffer) || typeof SharedArrayBuffer < "u" && (E(i, SharedArrayBuffer) || i && E(i.buffer, SharedArrayBuffer))) return q(i, r, t);
        if (typeof i == "number") throw new TypeError('The "value" argument must not be of type number. Received type number');
        let n = i.valueOf && i.valueOf();
        if (n != null && n !== i) return h.from(n, r, t);
        let e = br(i);
        if (e) return e;
        if (typeof Symbol < "u" && Symbol.toPrimitive != null && typeof i[Symbol.toPrimitive] == "function") return h.from(i[Symbol.toPrimitive]("string"), r, t);
        throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof i);
    }
    h.from = function(i, r, t) {
        return er(i, r, t);
    };
    Object.setPrototypeOf(h.prototype, Uint8Array.prototype);
    Object.setPrototypeOf(h, Uint8Array);
    function or(i) {
        if (typeof i != "number") throw new TypeError('"size" argument must be of type number');
        if (i < 0) throw new RangeError('The value "' + i + '" is invalid for option "size"');
    }
    function Mr(i, r, t) {
        return or(i), i <= 0 ? d(i) : r !== void 0 ? typeof t == "string" ? d(i).fill(r, t) : d(i).fill(r) : d(i);
    }
    h.alloc = function(i, r, t) {
        return Mr(i, r, t);
    };
    function j(i) {
        return or(i), d(i < 0 ? 0 : H(i) | 0);
    }
    h.allocUnsafe = function(i) {
        return j(i);
    };
    h.allocUnsafeSlow = function(i) {
        return j(i);
    };
    function kr(i, r) {
        if ((typeof r != "string" || r === "") && (r = "utf8"), !h.isEncoding(r)) throw new TypeError("Unknown encoding: " + r);
        let t = ur(i, r) | 0, n = d(t), e = n.write(i, r);
        return e !== t && (n = n.slice(0, e)), n;
    }
    function Y(i) {
        let r = i.length < 0 ? 0 : H(i.length) | 0, t = d(r);
        for(let n = 0; n < r; n += 1)t[n] = i[n] & 255;
        return t;
    }
    function Dr(i) {
        if (E(i, Uint8Array)) {
            let r = new Uint8Array(i);
            return q(r.buffer, r.byteOffset, r.byteLength);
        }
        return Y(i);
    }
    function q(i, r, t) {
        if (r < 0 || i.byteLength < r) throw new RangeError('"offset" is outside of buffer bounds');
        if (i.byteLength < r + (t || 0)) throw new RangeError('"length" is outside of buffer bounds');
        let n;
        return r === void 0 && t === void 0 ? n = new Uint8Array(i) : t === void 0 ? n = new Uint8Array(i, r) : n = new Uint8Array(i, r, t), Object.setPrototypeOf(n, h.prototype), n;
    }
    function br(i) {
        if (h.isBuffer(i)) {
            let r = H(i.length) | 0, t = d(r);
            return t.length === 0 || i.copy(t, 0, 0, r), t;
        }
        if (i.length !== void 0) return typeof i.length != "number" || X(i.length) ? d(0) : Y(i);
        if (i.type === "Buffer" && Array.isArray(i.data)) return Y(i.data);
    }
    function H(i) {
        if (i >= k) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + k.toString(16) + " bytes");
        return i | 0;
    }
    function $r(i) {
        return +i != i && (i = 0), h.alloc(+i);
    }
    h.isBuffer = function(r) {
        return r != null && r._isBuffer === !0 && r !== h.prototype;
    };
    h.compare = function(r, t) {
        if (E(r, Uint8Array) && (r = h.from(r, r.offset, r.byteLength)), E(t, Uint8Array) && (t = h.from(t, t.offset, t.byteLength)), !h.isBuffer(r) || !h.isBuffer(t)) throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
        if (r === t) return 0;
        let n = r.length, e = t.length;
        for(let o = 0, u = Math.min(n, e); o < u; ++o)if (r[o] !== t[o]) {
            n = r[o], e = t[o];
            break;
        }
        return n < e ? -1 : e < n ? 1 : 0;
    };
    h.isEncoding = function(r) {
        switch(String(r).toLowerCase()){
            case "hex":
            case "utf8":
            case "utf-8":
            case "ascii":
            case "latin1":
            case "binary":
            case "base64":
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
                return !0;
            default:
                return !1;
        }
    };
    h.concat = function(r, t) {
        if (!Array.isArray(r)) throw new TypeError('"list" argument must be an Array of Buffers');
        if (r.length === 0) return h.alloc(0);
        let n;
        if (t === void 0) for(t = 0, n = 0; n < r.length; ++n)t += r[n].length;
        let e = h.allocUnsafe(t), o = 0;
        for(n = 0; n < r.length; ++n){
            let u = r[n];
            if (E(u, Uint8Array)) o + u.length > e.length ? (h.isBuffer(u) || (u = h.from(u)), u.copy(e, o)) : Uint8Array.prototype.set.call(e, u, o);
            else if (h.isBuffer(u)) u.copy(e, o);
            else throw new TypeError('"list" argument must be an Array of Buffers');
            o += u.length;
        }
        return e;
    };
    function ur(i, r) {
        if (h.isBuffer(i)) return i.length;
        if (ArrayBuffer.isView(i) || E(i, ArrayBuffer)) return i.byteLength;
        if (typeof i != "string") throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof i);
        let t = i.length, n = arguments.length > 2 && arguments[2] === !0;
        if (!n && t === 0) return 0;
        let e = !1;
        for(;;)switch(r){
            case "ascii":
            case "latin1":
            case "binary":
                return t;
            case "utf8":
            case "utf-8":
                return W(i).length;
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
                return t * 2;
            case "hex":
                return t >>> 1;
            case "base64":
                return wr(i).length;
            default:
                if (e) return n ? -1 : W(i).length;
                r = ("" + r).toLowerCase(), e = !0;
        }
    }
    h.byteLength = ur;
    function Pr(i, r, t) {
        let n = !1;
        if ((r === void 0 || r < 0) && (r = 0), r > this.length || ((t === void 0 || t > this.length) && (t = this.length), t <= 0) || (t >>>= 0, r >>>= 0, t <= r)) return "";
        for(i || (i = "utf8");;)switch(i){
            case "hex":
                return zr(this, r, t);
            case "utf8":
            case "utf-8":
                return fr(this, r, t);
            case "ascii":
                return Vr(this, r, t);
            case "latin1":
            case "binary":
                return Xr(this, r, t);
            case "base64":
                return jr(this, r, t);
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
                return Jr(this, r, t);
            default:
                if (n) throw new TypeError("Unknown encoding: " + i);
                i = (i + "").toLowerCase(), n = !0;
        }
    }
    h.prototype._isBuffer = !0;
    function I(i, r, t) {
        let n = i[r];
        i[r] = i[t], i[t] = n;
    }
    h.prototype.swap16 = function() {
        let r = this.length;
        if (r % 2 !== 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
        for(let t = 0; t < r; t += 2)I(this, t, t + 1);
        return this;
    };
    h.prototype.swap32 = function() {
        let r = this.length;
        if (r % 4 !== 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
        for(let t = 0; t < r; t += 4)I(this, t, t + 3), I(this, t + 1, t + 2);
        return this;
    };
    h.prototype.swap64 = function() {
        let r = this.length;
        if (r % 8 !== 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
        for(let t = 0; t < r; t += 8)I(this, t, t + 7), I(this, t + 1, t + 6), I(this, t + 2, t + 5), I(this, t + 3, t + 4);
        return this;
    };
    h.prototype.toString = function() {
        let r = this.length;
        return r === 0 ? "" : arguments.length === 0 ? fr(this, 0, r) : Pr.apply(this, arguments);
    };
    h.prototype.toLocaleString = h.prototype.toString;
    h.prototype.equals = function(r) {
        if (!h.isBuffer(r)) throw new TypeError("Argument must be a Buffer");
        return this === r ? !0 : h.compare(this, r) === 0;
    };
    h.prototype.inspect = function() {
        let r = "", t = T.INSPECT_MAX_BYTES;
        return r = this.toString("hex", 0, t).replace(/(.{2})/g, "$1 ").trim(), this.length > t && (r += " ... "), "<Buffer " + r + ">";
    };
    rr && (h.prototype[rr] = h.prototype.inspect);
    h.prototype.compare = function(r, t, n, e, o) {
        if (E(r, Uint8Array) && (r = h.from(r, r.offset, r.byteLength)), !h.isBuffer(r)) throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof r);
        if (t === void 0 && (t = 0), n === void 0 && (n = r ? r.length : 0), e === void 0 && (e = 0), o === void 0 && (o = this.length), t < 0 || n > r.length || e < 0 || o > this.length) throw new RangeError("out of range index");
        if (e >= o && t >= n) return 0;
        if (e >= o) return -1;
        if (t >= n) return 1;
        if (t >>>= 0, n >>>= 0, e >>>= 0, o >>>= 0, this === r) return 0;
        let u = o - e, f = n - t, c = Math.min(u, f), l = this.slice(e, o), s = r.slice(t, n);
        for(let p = 0; p < c; ++p)if (l[p] !== s[p]) {
            u = l[p], f = s[p];
            break;
        }
        return u < f ? -1 : f < u ? 1 : 0;
    };
    function hr(i, r, t, n, e) {
        if (i.length === 0) return -1;
        if (typeof t == "string" ? (n = t, t = 0) : t > 2147483647 ? t = 2147483647 : t < -2147483648 && (t = -2147483648), t = +t, X(t) && (t = e ? 0 : i.length - 1), t < 0 && (t = i.length + t), t >= i.length) {
            if (e) return -1;
            t = i.length - 1;
        } else if (t < 0) {
            if (e) t = 0;
            else return -1;
        }
        if (typeof r == "string" && (r = h.from(r, n)), h.isBuffer(r)) return r.length === 0 ? -1 : tr(i, r, t, n, e);
        if (typeof r == "number") return r = r & 255, typeof Uint8Array.prototype.indexOf == "function" ? e ? Uint8Array.prototype.indexOf.call(i, r, t) : Uint8Array.prototype.lastIndexOf.call(i, r, t) : tr(i, [
            r
        ], t, n, e);
        throw new TypeError("val must be string, number or Buffer");
    }
    function tr(i, r, t, n, e) {
        let o = 1, u = i.length, f = r.length;
        if (n !== void 0 && (n = String(n).toLowerCase(), n === "ucs2" || n === "ucs-2" || n === "utf16le" || n === "utf-16le")) {
            if (i.length < 2 || r.length < 2) return -1;
            o = 2, u /= 2, f /= 2, t /= 2;
        }
        function c(s, p) {
            return o === 1 ? s[p] : s.readUInt16BE(p * o);
        }
        let l;
        if (e) {
            let s = -1;
            for(l = t; l < u; l++)if (c(i, l) === c(r, s === -1 ? 0 : l - s)) {
                if (s === -1 && (s = l), l - s + 1 === f) return s * o;
            } else s !== -1 && (l -= l - s), s = -1;
        } else for(t + f > u && (t = u - f), l = t; l >= 0; l--){
            let s = !0;
            for(let p = 0; p < f; p++)if (c(i, l + p) !== c(r, p)) {
                s = !1;
                break;
            }
            if (s) return l;
        }
        return -1;
    }
    h.prototype.includes = function(r, t, n) {
        return this.indexOf(r, t, n) !== -1;
    };
    h.prototype.indexOf = function(r, t, n) {
        return hr(this, r, t, n, !0);
    };
    h.prototype.lastIndexOf = function(r, t, n) {
        return hr(this, r, t, n, !1);
    };
    function Or(i, r, t, n) {
        t = Number(t) || 0;
        let e = i.length - t;
        n ? (n = Number(n), n > e && (n = e)) : n = e;
        let o = r.length;
        n > o / 2 && (n = o / 2);
        let u;
        for(u = 0; u < n; ++u){
            let f = parseInt(r.substr(u * 2, 2), 16);
            if (X(f)) return u;
            i[t + u] = f;
        }
        return u;
    }
    function Gr(i, r, t, n) {
        return D(W(r, i.length - t), i, t, n);
    }
    function Yr(i, r, t, n) {
        return D(vr(r), i, t, n);
    }
    function qr(i, r, t, n) {
        return D(wr(r), i, t, n);
    }
    function Wr(i, r, t, n) {
        return D(rt(r, i.length - t), i, t, n);
    }
    h.prototype.write = function(r, t, n, e) {
        if (t === void 0) e = "utf8", n = this.length, t = 0;
        else if (n === void 0 && typeof t == "string") e = t, n = this.length, t = 0;
        else if (isFinite(t)) t = t >>> 0, isFinite(n) ? (n = n >>> 0, e === void 0 && (e = "utf8")) : (e = n, n = void 0);
        else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
        let o = this.length - t;
        if ((n === void 0 || n > o) && (n = o), r.length > 0 && (n < 0 || t < 0) || t > this.length) throw new RangeError("Attempt to write outside buffer bounds");
        e || (e = "utf8");
        let u = !1;
        for(;;)switch(e){
            case "hex":
                return Or(this, r, t, n);
            case "utf8":
            case "utf-8":
                return Gr(this, r, t, n);
            case "ascii":
            case "latin1":
            case "binary":
                return Yr(this, r, t, n);
            case "base64":
                return qr(this, r, t, n);
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
                return Wr(this, r, t, n);
            default:
                if (u) throw new TypeError("Unknown encoding: " + e);
                e = ("" + e).toLowerCase(), u = !0;
        }
    };
    h.prototype.toJSON = function() {
        return {
            type: "Buffer",
            data: Array.prototype.slice.call(this._arr || this, 0)
        };
    };
    function jr(i, r, t) {
        return r === 0 && t === i.length ? G.fromByteArray(i) : G.fromByteArray(i.slice(r, t));
    }
    function fr(i, r, t) {
        t = Math.min(i.length, t);
        let n = [], e = r;
        for(; e < t;){
            let o = i[e], u = null, f = o > 239 ? 4 : o > 223 ? 3 : o > 191 ? 2 : 1;
            if (e + f <= t) {
                let c, l, s, p;
                switch(f){
                    case 1:
                        o < 128 && (u = o);
                        break;
                    case 2:
                        c = i[e + 1], (c & 192) === 128 && (p = (o & 31) << 6 | c & 63, p > 127 && (u = p));
                        break;
                    case 3:
                        c = i[e + 1], l = i[e + 2], (c & 192) === 128 && (l & 192) === 128 && (p = (o & 15) << 12 | (c & 63) << 6 | l & 63, p > 2047 && (p < 55296 || p > 57343) && (u = p));
                        break;
                    case 4:
                        c = i[e + 1], l = i[e + 2], s = i[e + 3], (c & 192) === 128 && (l & 192) === 128 && (s & 192) === 128 && (p = (o & 15) << 18 | (c & 63) << 12 | (l & 63) << 6 | s & 63, p > 65535 && p < 1114112 && (u = p));
                }
            }
            u === null ? (u = 65533, f = 1) : u > 65535 && (u -= 65536, n.push(u >>> 10 & 1023 | 55296), u = 56320 | u & 1023), n.push(u), e += f;
        }
        return Hr(n);
    }
    var ir = 4096;
    function Hr(i) {
        let r = i.length;
        if (r <= ir) return String.fromCharCode.apply(String, i);
        let t = "", n = 0;
        for(; n < r;)t += String.fromCharCode.apply(String, i.slice(n, n += ir));
        return t;
    }
    function Vr(i, r, t) {
        let n = "";
        t = Math.min(i.length, t);
        for(let e = r; e < t; ++e)n += String.fromCharCode(i[e] & 127);
        return n;
    }
    function Xr(i, r, t) {
        let n = "";
        t = Math.min(i.length, t);
        for(let e = r; e < t; ++e)n += String.fromCharCode(i[e]);
        return n;
    }
    function zr(i, r, t) {
        let n = i.length;
        (!r || r < 0) && (r = 0), (!t || t < 0 || t > n) && (t = n);
        let e = "";
        for(let o = r; o < t; ++o)e += tt[i[o]];
        return e;
    }
    function Jr(i, r, t) {
        let n = i.slice(r, t), e = "";
        for(let o = 0; o < n.length - 1; o += 2)e += String.fromCharCode(n[o] + n[o + 1] * 256);
        return e;
    }
    h.prototype.slice = function(r, t) {
        let n = this.length;
        r = ~~r, t = t === void 0 ? n : ~~t, r < 0 ? (r += n, r < 0 && (r = 0)) : r > n && (r = n), t < 0 ? (t += n, t < 0 && (t = 0)) : t > n && (t = n), t < r && (t = r);
        let e = this.subarray(r, t);
        return Object.setPrototypeOf(e, h.prototype), e;
    };
    function a(i, r, t) {
        if (i % 1 !== 0 || i < 0) throw new RangeError("offset is not uint");
        if (i + r > t) throw new RangeError("Trying to access beyond buffer length");
    }
    h.prototype.readUintLE = h.prototype.readUIntLE = function(r, t, n) {
        r = r >>> 0, t = t >>> 0, n || a(r, t, this.length);
        let e = this[r], o = 1, u = 0;
        for(; ++u < t && (o *= 256);)e += this[r + u] * o;
        return e;
    };
    h.prototype.readUintBE = h.prototype.readUIntBE = function(r, t, n) {
        r = r >>> 0, t = t >>> 0, n || a(r, t, this.length);
        let e = this[r + --t], o = 1;
        for(; t > 0 && (o *= 256);)e += this[r + --t] * o;
        return e;
    };
    h.prototype.readUint8 = h.prototype.readUInt8 = function(r, t) {
        return r = r >>> 0, t || a(r, 1, this.length), this[r];
    };
    h.prototype.readUint16LE = h.prototype.readUInt16LE = function(r, t) {
        return r = r >>> 0, t || a(r, 2, this.length), this[r] | this[r + 1] << 8;
    };
    h.prototype.readUint16BE = h.prototype.readUInt16BE = function(r, t) {
        return r = r >>> 0, t || a(r, 2, this.length), this[r] << 8 | this[r + 1];
    };
    h.prototype.readUint32LE = h.prototype.readUInt32LE = function(r, t) {
        return r = r >>> 0, t || a(r, 4, this.length), (this[r] | this[r + 1] << 8 | this[r + 2] << 16) + this[r + 3] * 16777216;
    };
    h.prototype.readUint32BE = h.prototype.readUInt32BE = function(r, t) {
        return r = r >>> 0, t || a(r, 4, this.length), this[r] * 16777216 + (this[r + 1] << 16 | this[r + 2] << 8 | this[r + 3]);
    };
    h.prototype.readBigUInt64LE = g(function(r) {
        r = r >>> 0, R(r, "offset");
        let t = this[r], n = this[r + 7];
        (t === void 0 || n === void 0) && _(r, this.length - 8);
        let e = t + this[++r] * 256 + this[++r] * 2 ** 16 + this[++r] * 2 ** 24, o = this[++r] + this[++r] * 256 + this[++r] * 2 ** 16 + n * 2 ** 24;
        return BigInt(e) + (BigInt(o) << BigInt(32));
    });
    h.prototype.readBigUInt64BE = g(function(r) {
        r = r >>> 0, R(r, "offset");
        let t = this[r], n = this[r + 7];
        (t === void 0 || n === void 0) && _(r, this.length - 8);
        let e = t * 2 ** 24 + this[++r] * 2 ** 16 + this[++r] * 256 + this[++r], o = this[++r] * 2 ** 24 + this[++r] * 2 ** 16 + this[++r] * 256 + n;
        return (BigInt(e) << BigInt(32)) + BigInt(o);
    });
    h.prototype.readIntLE = function(r, t, n) {
        r = r >>> 0, t = t >>> 0, n || a(r, t, this.length);
        let e = this[r], o = 1, u = 0;
        for(; ++u < t && (o *= 256);)e += this[r + u] * o;
        return o *= 128, e >= o && (e -= Math.pow(2, 8 * t)), e;
    };
    h.prototype.readIntBE = function(r, t, n) {
        r = r >>> 0, t = t >>> 0, n || a(r, t, this.length);
        let e = t, o = 1, u = this[r + --e];
        for(; e > 0 && (o *= 256);)u += this[r + --e] * o;
        return o *= 128, u >= o && (u -= Math.pow(2, 8 * t)), u;
    };
    h.prototype.readInt8 = function(r, t) {
        return r = r >>> 0, t || a(r, 1, this.length), this[r] & 128 ? (255 - this[r] + 1) * -1 : this[r];
    };
    h.prototype.readInt16LE = function(r, t) {
        r = r >>> 0, t || a(r, 2, this.length);
        let n = this[r] | this[r + 1] << 8;
        return n & 32768 ? n | 4294901760 : n;
    };
    h.prototype.readInt16BE = function(r, t) {
        r = r >>> 0, t || a(r, 2, this.length);
        let n = this[r + 1] | this[r] << 8;
        return n & 32768 ? n | 4294901760 : n;
    };
    h.prototype.readInt32LE = function(r, t) {
        return r = r >>> 0, t || a(r, 4, this.length), this[r] | this[r + 1] << 8 | this[r + 2] << 16 | this[r + 3] << 24;
    };
    h.prototype.readInt32BE = function(r, t) {
        return r = r >>> 0, t || a(r, 4, this.length), this[r] << 24 | this[r + 1] << 16 | this[r + 2] << 8 | this[r + 3];
    };
    h.prototype.readBigInt64LE = g(function(r) {
        r = r >>> 0, R(r, "offset");
        let t = this[r], n = this[r + 7];
        (t === void 0 || n === void 0) && _(r, this.length - 8);
        let e = this[r + 4] + this[r + 5] * 256 + this[r + 6] * 2 ** 16 + (n << 24);
        return (BigInt(e) << BigInt(32)) + BigInt(t + this[++r] * 256 + this[++r] * 2 ** 16 + this[++r] * 2 ** 24);
    });
    h.prototype.readBigInt64BE = g(function(r) {
        r = r >>> 0, R(r, "offset");
        let t = this[r], n = this[r + 7];
        (t === void 0 || n === void 0) && _(r, this.length - 8);
        let e = (t << 24) + this[++r] * 2 ** 16 + this[++r] * 256 + this[++r];
        return (BigInt(e) << BigInt(32)) + BigInt(this[++r] * 2 ** 24 + this[++r] * 2 ** 16 + this[++r] * 256 + n);
    });
    h.prototype.readFloatLE = function(r, t) {
        return r = r >>> 0, t || a(r, 4, this.length), U.read(this, r, !0, 23, 4);
    };
    h.prototype.readFloatBE = function(r, t) {
        return r = r >>> 0, t || a(r, 4, this.length), U.read(this, r, !1, 23, 4);
    };
    h.prototype.readDoubleLE = function(r, t) {
        return r = r >>> 0, t || a(r, 8, this.length), U.read(this, r, !0, 52, 8);
    };
    h.prototype.readDoubleBE = function(r, t) {
        return r = r >>> 0, t || a(r, 8, this.length), U.read(this, r, !1, 52, 8);
    };
    function y(i, r, t, n, e, o) {
        if (!h.isBuffer(i)) throw new TypeError('"buffer" argument must be a Buffer instance');
        if (r > e || r < o) throw new RangeError('"value" argument is out of bounds');
        if (t + n > i.length) throw new RangeError("Index out of range");
    }
    h.prototype.writeUintLE = h.prototype.writeUIntLE = function(r, t, n, e) {
        if (r = +r, t = t >>> 0, n = n >>> 0, !e) {
            let f = Math.pow(2, 8 * n) - 1;
            y(this, r, t, n, f, 0);
        }
        let o = 1, u = 0;
        for(this[t] = r & 255; ++u < n && (o *= 256);)this[t + u] = r / o & 255;
        return t + n;
    };
    h.prototype.writeUintBE = h.prototype.writeUIntBE = function(r, t, n, e) {
        if (r = +r, t = t >>> 0, n = n >>> 0, !e) {
            let f = Math.pow(2, 8 * n) - 1;
            y(this, r, t, n, f, 0);
        }
        let o = n - 1, u = 1;
        for(this[t + o] = r & 255; --o >= 0 && (u *= 256);)this[t + o] = r / u & 255;
        return t + n;
    };
    h.prototype.writeUint8 = h.prototype.writeUInt8 = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 1, 255, 0), this[t] = r & 255, t + 1;
    };
    h.prototype.writeUint16LE = h.prototype.writeUInt16LE = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 2, 65535, 0), this[t] = r & 255, this[t + 1] = r >>> 8, t + 2;
    };
    h.prototype.writeUint16BE = h.prototype.writeUInt16BE = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 2, 65535, 0), this[t] = r >>> 8, this[t + 1] = r & 255, t + 2;
    };
    h.prototype.writeUint32LE = h.prototype.writeUInt32LE = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 4, 4294967295, 0), this[t + 3] = r >>> 24, this[t + 2] = r >>> 16, this[t + 1] = r >>> 8, this[t] = r & 255, t + 4;
    };
    h.prototype.writeUint32BE = h.prototype.writeUInt32BE = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 4, 4294967295, 0), this[t] = r >>> 24, this[t + 1] = r >>> 16, this[t + 2] = r >>> 8, this[t + 3] = r & 255, t + 4;
    };
    function cr(i, r, t, n, e) {
        yr(r, n, e, i, t, 7);
        let o = Number(r & BigInt(4294967295));
        i[t++] = o, o = o >> 8, i[t++] = o, o = o >> 8, i[t++] = o, o = o >> 8, i[t++] = o;
        let u = Number(r >> BigInt(32) & BigInt(4294967295));
        return i[t++] = u, u = u >> 8, i[t++] = u, u = u >> 8, i[t++] = u, u = u >> 8, i[t++] = u, t;
    }
    function pr(i, r, t, n, e) {
        yr(r, n, e, i, t, 7);
        let o = Number(r & BigInt(4294967295));
        i[t + 7] = o, o = o >> 8, i[t + 6] = o, o = o >> 8, i[t + 5] = o, o = o >> 8, i[t + 4] = o;
        let u = Number(r >> BigInt(32) & BigInt(4294967295));
        return i[t + 3] = u, u = u >> 8, i[t + 2] = u, u = u >> 8, i[t + 1] = u, u = u >> 8, i[t] = u, t + 8;
    }
    h.prototype.writeBigUInt64LE = g(function(r, t = 0) {
        return cr(this, r, t, BigInt(0), BigInt("0xffffffffffffffff"));
    });
    h.prototype.writeBigUInt64BE = g(function(r, t = 0) {
        return pr(this, r, t, BigInt(0), BigInt("0xffffffffffffffff"));
    });
    h.prototype.writeIntLE = function(r, t, n, e) {
        if (r = +r, t = t >>> 0, !e) {
            let c = Math.pow(2, 8 * n - 1);
            y(this, r, t, n, c - 1, -c);
        }
        let o = 0, u = 1, f = 0;
        for(this[t] = r & 255; ++o < n && (u *= 256);)r < 0 && f === 0 && this[t + o - 1] !== 0 && (f = 1), this[t + o] = (r / u >> 0) - f & 255;
        return t + n;
    };
    h.prototype.writeIntBE = function(r, t, n, e) {
        if (r = +r, t = t >>> 0, !e) {
            let c = Math.pow(2, 8 * n - 1);
            y(this, r, t, n, c - 1, -c);
        }
        let o = n - 1, u = 1, f = 0;
        for(this[t + o] = r & 255; --o >= 0 && (u *= 256);)r < 0 && f === 0 && this[t + o + 1] !== 0 && (f = 1), this[t + o] = (r / u >> 0) - f & 255;
        return t + n;
    };
    h.prototype.writeInt8 = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 1, 127, -128), r < 0 && (r = 255 + r + 1), this[t] = r & 255, t + 1;
    };
    h.prototype.writeInt16LE = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 2, 32767, -32768), this[t] = r & 255, this[t + 1] = r >>> 8, t + 2;
    };
    h.prototype.writeInt16BE = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 2, 32767, -32768), this[t] = r >>> 8, this[t + 1] = r & 255, t + 2;
    };
    h.prototype.writeInt32LE = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 4, 2147483647, -2147483648), this[t] = r & 255, this[t + 1] = r >>> 8, this[t + 2] = r >>> 16, this[t + 3] = r >>> 24, t + 4;
    };
    h.prototype.writeInt32BE = function(r, t, n) {
        return r = +r, t = t >>> 0, n || y(this, r, t, 4, 2147483647, -2147483648), r < 0 && (r = 4294967295 + r + 1), this[t] = r >>> 24, this[t + 1] = r >>> 16, this[t + 2] = r >>> 8, this[t + 3] = r & 255, t + 4;
    };
    h.prototype.writeBigInt64LE = g(function(r, t = 0) {
        return cr(this, r, t, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
    });
    h.prototype.writeBigInt64BE = g(function(r, t = 0) {
        return pr(this, r, t, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
    });
    function sr(i, r, t, n, e, o) {
        if (t + n > i.length) throw new RangeError("Index out of range");
        if (t < 0) throw new RangeError("Index out of range");
    }
    function lr(i, r, t, n, e) {
        return r = +r, t = t >>> 0, e || sr(i, r, t, 4, 34028234663852886e22, -340282346638528860000000000000000000000), U.write(i, r, t, n, 23, 4), t + 4;
    }
    h.prototype.writeFloatLE = function(r, t, n) {
        return lr(this, r, t, !0, n);
    };
    h.prototype.writeFloatBE = function(r, t, n) {
        return lr(this, r, t, !1, n);
    };
    function ar(i, r, t, n, e) {
        return r = +r, t = t >>> 0, e || sr(i, r, t, 8, 17976931348623157e292, -179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000), U.write(i, r, t, n, 52, 8), t + 8;
    }
    h.prototype.writeDoubleLE = function(r, t, n) {
        return ar(this, r, t, !0, n);
    };
    h.prototype.writeDoubleBE = function(r, t, n) {
        return ar(this, r, t, !1, n);
    };
    h.prototype.copy = function(r, t, n, e) {
        if (!h.isBuffer(r)) throw new TypeError("argument should be a Buffer");
        if (n || (n = 0), !e && e !== 0 && (e = this.length), t >= r.length && (t = r.length), t || (t = 0), e > 0 && e < n && (e = n), e === n || r.length === 0 || this.length === 0) return 0;
        if (t < 0) throw new RangeError("targetStart out of bounds");
        if (n < 0 || n >= this.length) throw new RangeError("Index out of range");
        if (e < 0) throw new RangeError("sourceEnd out of bounds");
        e > this.length && (e = this.length), r.length - t < e - n && (e = r.length - t + n);
        let o = e - n;
        return this === r && typeof Uint8Array.prototype.copyWithin == "function" ? this.copyWithin(t, n, e) : Uint8Array.prototype.set.call(r, this.subarray(n, e), t), o;
    };
    h.prototype.fill = function(r, t, n, e) {
        if (typeof r == "string") {
            if (typeof t == "string" ? (e = t, t = 0, n = this.length) : typeof n == "string" && (e = n, n = this.length), e !== void 0 && typeof e != "string") throw new TypeError("encoding must be a string");
            if (typeof e == "string" && !h.isEncoding(e)) throw new TypeError("Unknown encoding: " + e);
            if (r.length === 1) {
                let u = r.charCodeAt(0);
                (e === "utf8" && u < 128 || e === "latin1") && (r = u);
            }
        } else typeof r == "number" ? r = r & 255 : typeof r == "boolean" && (r = Number(r));
        if (t < 0 || this.length < t || this.length < n) throw new RangeError("Out of range index");
        if (n <= t) return this;
        t = t >>> 0, n = n === void 0 ? this.length : n >>> 0, r || (r = 0);
        let o;
        if (typeof r == "number") for(o = t; o < n; ++o)this[o] = r;
        else {
            let u = h.isBuffer(r) ? r : h.from(r, e), f = u.length;
            if (f === 0) throw new TypeError('The value "' + r + '" is invalid for argument "value"');
            for(o = 0; o < n - t; ++o)this[o + t] = u[o % f];
        }
        return this;
    };
    var A = {};
    function V(i, r, t) {
        A[i] = class extends t {
            constructor(){
                super(), Object.defineProperty(this, "message", {
                    value: r.apply(this, arguments),
                    writable: !0,
                    configurable: !0
                }), this.name = `${this.name} [${i}]`, this.stack, delete this.name;
            }
            get code() {
                return i;
            }
            set code(e) {
                Object.defineProperty(this, "code", {
                    configurable: !0,
                    enumerable: !0,
                    value: e,
                    writable: !0
                });
            }
            toString() {
                return `${this.name} [${i}]: ${this.message}`;
            }
        };
    }
    V("ERR_BUFFER_OUT_OF_BOUNDS", function(i) {
        return i ? `${i} is outside of buffer bounds` : "Attempt to access memory outside buffer bounds";
    }, RangeError);
    V("ERR_INVALID_ARG_TYPE", function(i, r) {
        return `The "${i}" argument must be of type number. Received type ${typeof r}`;
    }, TypeError);
    V("ERR_OUT_OF_RANGE", function(i, r, t) {
        let n = `The value of "${i}" is out of range.`, e = t;
        return Number.isInteger(t) && Math.abs(t) > 2 ** 32 ? e = nr(String(t)) : typeof t == "bigint" && (e = String(t), (t > BigInt(2) ** BigInt(32) || t < -(BigInt(2) ** BigInt(32))) && (e = nr(e)), e += "n"), n += ` It must be ${r}. Received ${e}`, n;
    }, RangeError);
    function nr(i) {
        let r = "", t = i.length, n = i[0] === "-" ? 1 : 0;
        for(; t >= n + 4; t -= 3)r = `_${i.slice(t - 3, t)}${r}`;
        return `${i.slice(0, t)}${r}`;
    }
    function Kr(i, r, t) {
        R(r, "offset"), (i[r] === void 0 || i[r + t] === void 0) && _(r, i.length - (t + 1));
    }
    function yr(i, r, t, n, e, o) {
        if (i > t || i < r) {
            let u = typeof r == "bigint" ? "n" : "", f;
            throw o > 3 ? r === 0 || r === BigInt(0) ? f = `>= 0${u} and < 2${u} ** ${(o + 1) * 8}${u}` : f = `>= -(2${u} ** ${(o + 1) * 8 - 1}${u}) and < 2 ** ${(o + 1) * 8 - 1}${u}` : f = `>= ${r}${u} and <= ${t}${u}`, new A.ERR_OUT_OF_RANGE("value", f, i);
        }
        Kr(n, e, o);
    }
    function R(i, r) {
        if (typeof i != "number") throw new A.ERR_INVALID_ARG_TYPE(r, "number", i);
    }
    function _(i, r, t) {
        throw Math.floor(i) !== i ? (R(i, t), new A.ERR_OUT_OF_RANGE(t || "offset", "an integer", i)) : r < 0 ? new A.ERR_BUFFER_OUT_OF_BOUNDS : new A.ERR_OUT_OF_RANGE(t || "offset", `>= ${t ? 1 : 0} and <= ${r}`, i);
    }
    var Zr = /[^+/0-9A-Za-z-_]/g;
    function Qr(i) {
        if (i = i.split("=")[0], i = i.trim().replace(Zr, ""), i.length < 2) return "";
        for(; i.length % 4 !== 0;)i = i + "=";
        return i;
    }
    function W(i, r) {
        r = r || 1 / 0;
        let t, n = i.length, e = null, o = [];
        for(let u = 0; u < n; ++u){
            if (t = i.charCodeAt(u), t > 55295 && t < 57344) {
                if (!e) {
                    if (t > 56319) {
                        (r -= 3) > -1 && o.push(239, 191, 189);
                        continue;
                    } else if (u + 1 === n) {
                        (r -= 3) > -1 && o.push(239, 191, 189);
                        continue;
                    }
                    e = t;
                    continue;
                }
                if (t < 56320) {
                    (r -= 3) > -1 && o.push(239, 191, 189), e = t;
                    continue;
                }
                t = (e - 55296 << 10 | t - 56320) + 65536;
            } else e && (r -= 3) > -1 && o.push(239, 191, 189);
            if (e = null, t < 128) {
                if ((r -= 1) < 0) break;
                o.push(t);
            } else if (t < 2048) {
                if ((r -= 2) < 0) break;
                o.push(t >> 6 | 192, t & 63 | 128);
            } else if (t < 65536) {
                if ((r -= 3) < 0) break;
                o.push(t >> 12 | 224, t >> 6 & 63 | 128, t & 63 | 128);
            } else if (t < 1114112) {
                if ((r -= 4) < 0) break;
                o.push(t >> 18 | 240, t >> 12 & 63 | 128, t >> 6 & 63 | 128, t & 63 | 128);
            } else throw new Error("Invalid code point");
        }
        return o;
    }
    function vr(i) {
        let r = [];
        for(let t = 0; t < i.length; ++t)r.push(i.charCodeAt(t) & 255);
        return r;
    }
    function rt(i, r) {
        let t, n, e, o = [];
        for(let u = 0; u < i.length && !((r -= 2) < 0); ++u)t = i.charCodeAt(u), n = t >> 8, e = t % 256, o.push(e), o.push(n);
        return o;
    }
    function wr(i) {
        return G.toByteArray(Qr(i));
    }
    function D(i, r, t, n) {
        let e;
        for(e = 0; e < n && !(e + t >= r.length || e >= i.length); ++e)r[e + t] = i[e];
        return e;
    }
    function E(i, r) {
        return i instanceof r || i != null && i.constructor != null && i.constructor.name != null && i.constructor.name === r.name;
    }
    function X(i) {
        return i !== i;
    }
    var tt = function() {
        let i = "0123456789abcdef", r = new Array(256);
        for(let t = 0; t < 16; ++t){
            let n = t * 16;
            for(let e = 0; e < 16; ++e)r[n + e] = i[t] + i[e];
        }
        return r;
    }();
    function g(i) {
        return typeof BigInt > "u" ? it : i;
    }
    function it() {
        throw new Error("BigInt not supported");
    }
});
var C = {};
Fr(C, {
    default: ()=>nt
});
module.exports = Ar(C);
var xr = J(z());
S(C, J(z()), module.exports);
var nt = xr.default; /*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/ 

},{}],"exMpD":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.VERSION = void 0;
exports.VERSION = "4.4.0"; // x-release-please-version

},{}],"jqL0M":[function(require,module,exports) {
var Buffer = require("327394ab24d2882c").Buffer;
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Stream = void 0;
class Stream {
    constructor(response, controller){
        this.response = response;
        this.controller = controller;
        this.decoder = new SSEDecoder();
    }
    async *iterMessages() {
        if (!this.response.body) {
            this.controller.abort();
            throw new Error(`Attempted to iterate over a response with no body`);
        }
        const lineDecoder = new LineDecoder();
        const iter = readableStreamAsyncIterable(this.response.body);
        for await (const chunk of iter)for (const line of lineDecoder.decode(chunk)){
            const sse = this.decoder.decode(line);
            if (sse) yield sse;
        }
        for (const line of lineDecoder.flush()){
            const sse = this.decoder.decode(line);
            if (sse) yield sse;
        }
    }
    async *[Symbol.asyncIterator]() {
        let done = false;
        try {
            for await (const sse of this.iterMessages()){
                if (done) continue;
                if (sse.data.startsWith("[DONE]")) {
                    done = true;
                    continue;
                }
                if (sse.event === null) try {
                    yield JSON.parse(sse.data);
                } catch (e) {
                    console.error(`Could not parse message into JSON:`, sse.data);
                    console.error(`From chunk:`, sse.raw);
                    throw e;
                }
            }
            done = true;
        } catch (e) {
            // If the user calls `stream.controller.abort()`, we should exit without throwing.
            if (e instanceof Error && e.name === "AbortError") return;
            throw e;
        } finally{
            // If the user `break`s, abort the ongoing request.
            if (!done) this.controller.abort();
        }
    }
}
exports.Stream = Stream;
class SSEDecoder {
    constructor(){
        this.event = null;
        this.data = [];
        this.chunks = [];
    }
    decode(line) {
        if (line.endsWith("\r")) line = line.substring(0, line.length - 1);
        if (!line) {
            // empty line and we didn't previously encounter any messages
            if (!this.event && !this.data.length) return null;
            const sse = {
                event: this.event,
                data: this.data.join("\n"),
                raw: this.chunks
            };
            this.event = null;
            this.data = [];
            this.chunks = [];
            return sse;
        }
        this.chunks.push(line);
        if (line.startsWith(":")) return null;
        let [fieldname, _, value] = partition(line, ":");
        if (value.startsWith(" ")) value = value.substring(1);
        if (fieldname === "event") this.event = value;
        else if (fieldname === "data") this.data.push(value);
        return null;
    }
}
/**
 * A re-implementation of httpx's `LineDecoder` in Python that handles incrementally
 * reading lines from text.
 *
 * https://github.com/encode/httpx/blob/920333ea98118e9cf617f246905d7b202510941c/httpx/_decoders.py#L258
 */ class LineDecoder {
    constructor(){
        this.buffer = [];
        this.trailingCR = false;
    }
    decode(chunk) {
        let text = this.decodeText(chunk);
        if (this.trailingCR) {
            text = "\r" + text;
            this.trailingCR = false;
        }
        if (text.endsWith("\r")) {
            this.trailingCR = true;
            text = text.slice(0, -1);
        }
        if (!text) return [];
        const trailingNewline = LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || "");
        let lines = text.split(LineDecoder.NEWLINE_REGEXP);
        if (lines.length === 1 && !trailingNewline) {
            this.buffer.push(lines[0]);
            return [];
        }
        if (this.buffer.length > 0) {
            lines = [
                this.buffer.join("") + lines[0],
                ...lines.slice(1)
            ];
            this.buffer = [];
        }
        if (!trailingNewline) this.buffer = [
            lines.pop() || ""
        ];
        return lines;
    }
    decodeText(bytes) {
        var _a;
        if (bytes == null) return "";
        if (typeof bytes === "string") return bytes;
        // Node:
        if (typeof Buffer !== "undefined") {
            if (bytes instanceof Buffer) return bytes.toString();
            if (bytes instanceof Uint8Array) return Buffer.from(bytes).toString();
            throw new Error(`Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`);
        }
        // Browser
        if (typeof TextDecoder !== "undefined") {
            if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {
                (_a = this.textDecoder) !== null && _a !== void 0 ? _a : this.textDecoder = new TextDecoder("utf8");
                return this.textDecoder.decode(bytes);
            }
            throw new Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`);
        }
        throw new Error(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`);
    }
    flush() {
        if (!this.buffer.length && !this.trailingCR) return [];
        const lines = [
            this.buffer.join("")
        ];
        this.buffer = [];
        this.trailingCR = false;
        return lines;
    }
}
// prettier-ignore
LineDecoder.NEWLINE_CHARS = new Set([
    "\n",
    "\r",
    "\v",
    "\f",
    "\x1c",
    "\x1d",
    "\x1e",
    "\x85",
    "\u2028",
    "\u2029"
]);
LineDecoder.NEWLINE_REGEXP = /\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;
function partition(str, delimiter) {
    const index = str.indexOf(delimiter);
    if (index !== -1) return [
        str.substring(0, index),
        delimiter,
        str.substring(index + delimiter.length)
    ];
    return [
        str,
        "",
        ""
    ];
}
/**
 * Most browsers don't yet have async iterable support for ReadableStream,
 * and Node has a very different way of reading bytes from its "ReadableStream".
 *
 * This polyfill was pulled from https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490
 */ function readableStreamAsyncIterable(stream) {
    if (stream[Symbol.asyncIterator]) return stream;
    const reader = stream.getReader();
    return {
        async next () {
            try {
                const result = await reader.read();
                if (result === null || result === void 0 ? void 0 : result.done) reader.releaseLock(); // release lock when stream becomes closed
                return result;
            } catch (e) {
                reader.releaseLock(); // release lock when stream becomes errored
                throw e;
            }
        },
        async return () {
            const cancelPromise = reader.cancel();
            reader.releaseLock();
            await cancelPromise;
            return {
                done: true,
                value: undefined
            };
        },
        [Symbol.asyncIterator] () {
            return this;
        }
    };
}

},{"327394ab24d2882c":"jd6EY"}],"4ac1J":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.InternalServerError = exports.RateLimitError = exports.UnprocessableEntityError = exports.ConflictError = exports.NotFoundError = exports.PermissionDeniedError = exports.AuthenticationError = exports.BadRequestError = exports.APIConnectionTimeoutError = exports.APIConnectionError = exports.APIUserAbortError = exports.APIError = void 0;
const core_1 = require("9c411729f7abad89");
class APIError extends Error {
    constructor(status, error, message, headers){
        super(APIError.makeMessage(error, message));
        this.status = status;
        this.headers = headers;
        const data = error;
        this.error = data;
        this.code = data === null || data === void 0 ? void 0 : data["code"];
        this.param = data === null || data === void 0 ? void 0 : data["param"];
        this.type = data === null || data === void 0 ? void 0 : data["type"];
    }
    static makeMessage(error, message) {
        return (error === null || error === void 0 ? void 0 : error.message) ? typeof error.message === "string" ? error.message : JSON.stringify(error.message) : error ? JSON.stringify(error) : message || "Unknown error occurred";
    }
    static generate(status, errorResponse, message, headers) {
        if (!status) return new APIConnectionError({
            cause: (0, core_1.castToError)(errorResponse)
        });
        const error = errorResponse === null || errorResponse === void 0 ? void 0 : errorResponse["error"];
        if (status === 400) return new BadRequestError(status, error, message, headers);
        if (status === 401) return new AuthenticationError(status, error, message, headers);
        if (status === 403) return new PermissionDeniedError(status, error, message, headers);
        if (status === 404) return new NotFoundError(status, error, message, headers);
        if (status === 409) return new ConflictError(status, error, message, headers);
        if (status === 422) return new UnprocessableEntityError(status, error, message, headers);
        if (status === 429) return new RateLimitError(status, error, message, headers);
        if (status >= 500) return new InternalServerError(status, error, message, headers);
        return new APIError(status, error, message, headers);
    }
}
exports.APIError = APIError;
class APIUserAbortError extends APIError {
    constructor({ message } = {}){
        super(undefined, undefined, message || "Request was aborted.", undefined);
        this.status = undefined;
    }
}
exports.APIUserAbortError = APIUserAbortError;
class APIConnectionError extends APIError {
    constructor({ message, cause }){
        super(undefined, undefined, message || "Connection error.", undefined);
        this.status = undefined;
        // in some environments the 'cause' property is already declared
        // @ts-ignore
        if (cause) this.cause = cause;
    }
}
exports.APIConnectionError = APIConnectionError;
class APIConnectionTimeoutError extends APIConnectionError {
    constructor(){
        super({
            message: "Request timed out."
        });
    }
}
exports.APIConnectionTimeoutError = APIConnectionTimeoutError;
class BadRequestError extends APIError {
    constructor(){
        super(...arguments);
        this.status = 400;
    }
}
exports.BadRequestError = BadRequestError;
class AuthenticationError extends APIError {
    constructor(){
        super(...arguments);
        this.status = 401;
    }
}
exports.AuthenticationError = AuthenticationError;
class PermissionDeniedError extends APIError {
    constructor(){
        super(...arguments);
        this.status = 403;
    }
}
exports.PermissionDeniedError = PermissionDeniedError;
class NotFoundError extends APIError {
    constructor(){
        super(...arguments);
        this.status = 404;
    }
}
exports.NotFoundError = NotFoundError;
class ConflictError extends APIError {
    constructor(){
        super(...arguments);
        this.status = 409;
    }
}
exports.ConflictError = ConflictError;
class UnprocessableEntityError extends APIError {
    constructor(){
        super(...arguments);
        this.status = 422;
    }
}
exports.UnprocessableEntityError = UnprocessableEntityError;
class RateLimitError extends APIError {
    constructor(){
        super(...arguments);
        this.status = 429;
    }
}
exports.RateLimitError = RateLimitError;
class InternalServerError extends APIError {
}
exports.InternalServerError = InternalServerError;

},{"9c411729f7abad89":"7czzY"}],"agFYr":[function(require,module,exports) {
"use strict";
/**
 * Disclaimer: modules in _shims aren't intended to be imported by SDK users.
 *
 * This is a stub for non-node environments.
 * In node environments, it gets replaced agent.node.ts by the package export map
 */ Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getDefaultAgent = void 0;
const getDefaultAgent = (url)=>{
    return undefined;
};
exports.getDefaultAgent = getDefaultAgent;

},{}],"7PHTQ":[function(require,module,exports) {
/**
 * Disclaimer: modules in _shims aren't intended to be imported by SDK users.
 */ // If we accidentally call fetch with the wrong this binding,
// in the browser it would throw:
//   TypeError: Failed to execute 'fetch' on 'Window': Illegal invocation
exports.fetch = fetch.bind(undefined);
exports.Request = Request;
exports.Response = Response;
exports.Headers = Headers;
exports.isPolyfilled = false;

},{}],"7GN5A":[function(require,module,exports) {
var Buffer = require("4cb7c4afe4b16824").Buffer;
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.createForm = exports.multipartFormRequestOptions = exports.maybeMultipartFormRequestOptions = exports.isMultipartBody = exports.MultipartBody = exports.toFile = exports.isUploadable = exports.isBlobLike = exports.isFileLike = exports.isResponseLike = exports.fileFromPath = void 0;
const formdata_1 = require("ca6642aea8209f89");
const getMultipartRequestOptions_1 = require("ff15ca6b6d4dbf11");
const fileFromPath_1 = require("faebefbc614f45c2");
Object.defineProperty(exports, "fileFromPath", {
    enumerable: true,
    get: function() {
        return fileFromPath_1.fileFromPath;
    }
});
const node_readable_1 = require("5caf6bed479fd895");
const isResponseLike = (value)=>value != null && typeof value === "object" && typeof value.url === "string" && typeof value.blob === "function";
exports.isResponseLike = isResponseLike;
const isFileLike = (value)=>value != null && typeof value === "object" && typeof value.name === "string" && typeof value.lastModified === "number" && (0, exports.isBlobLike)(value);
exports.isFileLike = isFileLike;
/**
 * The BlobLike type omits arrayBuffer() because @types/node-fetch@^2.6.4 lacks it; but this check
 * adds the arrayBuffer() method type because it is available and used at runtime
 */ const isBlobLike = (value)=>value != null && typeof value === "object" && typeof value.size === "number" && typeof value.type === "string" && typeof value.text === "function" && typeof value.slice === "function" && typeof value.arrayBuffer === "function";
exports.isBlobLike = isBlobLike;
const isUploadable = (value)=>{
    return (0, exports.isFileLike)(value) || (0, exports.isResponseLike)(value) || (0, node_readable_1.isFsReadStream)(value);
};
exports.isUploadable = isUploadable;
/**
 * Helper for creating a {@link File} to pass to an SDK upload method from a variety of different data formats
 * @param value the raw content of the file.  Can be an {@link Uploadable}, {@link BlobLikePart}, or {@link AsyncIterable} of {@link BlobLikePart}s
 * @param {string=} name the name of the file. If omitted, toFile will try to determine a file name from bits if possible
 * @param {Object=} options additional properties
 * @param {string=} options.type the MIME type of the content
 * @param {number=} options.lastModified the last modified timestamp
 * @returns a {@link File} with the given properties
 */ async function toFile(value, name, options = {}) {
    var _a, _b, _c;
    // If it's a promise, resolve it.
    value = await value;
    if ((0, exports.isResponseLike)(value)) {
        const blob = await value.blob();
        name || (name = (_a = new URL(value.url).pathname.split(/[\\/]/).pop()) !== null && _a !== void 0 ? _a : "unknown_file");
        return new formdata_1.File([
            blob
        ], name, options);
    }
    const bits = await getBytes(value);
    name || (name = (_b = getName(value)) !== null && _b !== void 0 ? _b : "unknown_file");
    if (!options.type) {
        const type = (_c = bits[0]) === null || _c === void 0 ? void 0 : _c.type;
        if (typeof type === "string") options = {
            ...options,
            type
        };
    }
    return new formdata_1.File(bits, name, options);
}
exports.toFile = toFile;
async function getBytes(value) {
    var _a;
    let parts = [];
    if (typeof value === "string" || ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.
    value instanceof ArrayBuffer) parts.push(value);
    else if ((0, exports.isBlobLike)(value)) parts.push(await value.arrayBuffer());
    else if (isAsyncIterableIterator(value) // includes Readable, ReadableStream, etc.
    ) for await (const chunk of value)parts.push(chunk); // TODO, consider validating?
    else throw new Error(`Unexpected data type: ${typeof value}; constructor: ${(_a = value === null || value === void 0 ? void 0 : value.constructor) === null || _a === void 0 ? void 0 : _a.name}; props: ${propsForError(value)}`);
    return parts;
}
function propsForError(value) {
    const props = Object.getOwnPropertyNames(value);
    return `[${props.map((p)=>`"${p}"`).join(", ")}]`;
}
function getName(value) {
    var _a;
    return getStringFromMaybeBuffer(value.name) || getStringFromMaybeBuffer(value.filename) || // For fs.ReadStream
    ((_a = getStringFromMaybeBuffer(value.path)) === null || _a === void 0 ? void 0 : _a.split(/[\\/]/).pop());
}
const getStringFromMaybeBuffer = (x)=>{
    if (typeof x === "string") return x;
    if (typeof Buffer !== "undefined" && x instanceof Buffer) return String(x);
    return undefined;
};
const isAsyncIterableIterator = (value)=>value != null && typeof value === "object" && typeof value[Symbol.asyncIterator] === "function";
class MultipartBody {
    constructor(body){
        this.body = body;
    }
    get [Symbol.toStringTag]() {
        return "MultipartBody";
    }
}
exports.MultipartBody = MultipartBody;
const isMultipartBody = (body)=>body && typeof body === "object" && body.body && body[Symbol.toStringTag] === "MultipartBody";
exports.isMultipartBody = isMultipartBody;
/**
 * Returns a multipart/form-data request if any part of the given request body contains a File / Blob value.
 * Otherwise returns the request as is.
 */ const maybeMultipartFormRequestOptions = async (opts)=>{
    if (!hasUploadableValue(opts.body)) return opts;
    const form = await (0, exports.createForm)(opts.body);
    return (0, getMultipartRequestOptions_1.getMultipartRequestOptions)(form, opts);
};
exports.maybeMultipartFormRequestOptions = maybeMultipartFormRequestOptions;
const multipartFormRequestOptions = async (opts)=>{
    const form = await (0, exports.createForm)(opts.body);
    return (0, getMultipartRequestOptions_1.getMultipartRequestOptions)(form, opts);
};
exports.multipartFormRequestOptions = multipartFormRequestOptions;
const createForm = async (body)=>{
    const form = new formdata_1.FormData();
    await Promise.all(Object.entries(body || {}).map(([key, value])=>addFormValue(form, key, value)));
    return form;
};
exports.createForm = createForm;
const hasUploadableValue = (value)=>{
    if ((0, exports.isUploadable)(value)) return true;
    if (Array.isArray(value)) return value.some(hasUploadableValue);
    if (value && typeof value === "object") for(const k in value){
        if (hasUploadableValue(value[k])) return true;
    }
    return false;
};
const addFormValue = async (form, key, value)=>{
    if (value === undefined) return;
    if (value == null) throw new TypeError(`Received null for "${key}"; to pass null in FormData, you must use the string 'null'`);
    // TODO: make nested formats configurable
    if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") form.append(key, String(value));
    else if ((0, exports.isUploadable)(value)) {
        const file = await toFile(value);
        form.append(key, file);
    } else if (Array.isArray(value)) await Promise.all(value.map((entry)=>addFormValue(form, key + "[]", entry)));
    else if (typeof value === "object") await Promise.all(Object.entries(value).map(([name, prop])=>addFormValue(form, `${key}[${name}]`, prop)));
    else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${value} instead`);
};

},{"4cb7c4afe4b16824":"jd6EY","ca6642aea8209f89":"ejTjs","ff15ca6b6d4dbf11":"1z9ax","faebefbc614f45c2":"6yv83","5caf6bed479fd895":"90E71"}],"ejTjs":[function(require,module,exports) {
/**
 * Disclaimer: modules in _shims aren't intended to be imported by SDK users.
 */ exports.FormData = FormData;
exports.Blob = Blob;
exports.File = typeof File !== "undefined" ? File : // Bun doesn't implement File yet, so just make a shim that throws a helpful error message
class File1 extends Blob {
    constructor(){
        throw new Error(`file uploads aren't supported in this environment yet as 'File' is not defined`);
    }
};
exports.isPolyfilled = false;

},{}],"1z9ax":[function(require,module,exports) {
"use strict";
/**
 * Disclaimer: modules in _shims aren't intended to be imported by SDK users.
 */ Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getMultipartRequestOptions = void 0;
const uploads_1 = require("8d163a90fc1fc154");
async function getMultipartRequestOptions(form, opts) {
    return {
        ...opts,
        body: new uploads_1.MultipartBody(form)
    };
}
exports.getMultipartRequestOptions = getMultipartRequestOptions;

},{"8d163a90fc1fc154":"7GN5A"}],"6yv83":[function(require,module,exports) {
"use strict";
/**
 * Disclaimer: modules in _shims aren't intended to be imported by SDK users.
 *
 * This is a stub that gets replaced by fileFromPath.node.js for node environments
 * in the package export map
 */ Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.fileFromPath = void 0;
async function fileFromPath() {
    throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads");
}
exports.fileFromPath = fileFromPath;

},{}],"90E71":[function(require,module,exports) {
"use strict";
/**
 * Disclaimer: modules in _shims aren't intended to be imported by SDK users.
 */ Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.isFsReadStream = void 0;
function isFsReadStream(value) {
    return false;
}
exports.isFsReadStream = isFsReadStream;

},{}],"ceAFb":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.CursorPage = exports.Page = void 0;
const core_1 = require("fae246791787361c");
/**
 * Note: no pagination actually occurs yet, this is for forwards-compatibility.
 */ class Page extends core_1.AbstractPage {
    constructor(client, response, body, options){
        super(client, response, body, options);
        this.object = body.object;
        this.data = body.data;
    }
    getPaginatedItems() {
        return this.data;
    }
    // @deprecated Please use `nextPageInfo()` instead
    /**
   * This page represents a response that isn't actually paginated at the API level
   * so there will never be any next page params.
   */ nextPageParams() {
        return null;
    }
    nextPageInfo() {
        return null;
    }
}
exports.Page = Page;
class CursorPage extends core_1.AbstractPage {
    constructor(client, response, body, options){
        super(client, response, body, options);
        this.data = body.data;
    }
    getPaginatedItems() {
        return this.data;
    }
    // @deprecated Please use `nextPageInfo()` instead
    nextPageParams() {
        const info = this.nextPageInfo();
        if (!info) return null;
        if ("params" in info) return info.params;
        const params = Object.fromEntries(info.url.searchParams);
        if (!Object.keys(params).length) return null;
        return params;
    }
    nextPageInfo() {
        var _a, _b;
        if (!((_a = this.data) === null || _a === void 0 ? void 0 : _a.length)) return null;
        const next = (_b = this.data[this.data.length - 1]) === null || _b === void 0 ? void 0 : _b.id;
        if (!next) return null;
        return {
            params: {
                after: next
            }
        };
    }
}
exports.CursorPage = CursorPage;

},{"fae246791787361c":"7czzY"}],"gvuVs":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Moderations = exports.Models = exports.ModelsPage = exports.Images = exports.FineTuning = exports.FineTunes = exports.FineTunesPage = exports.Files = exports.FileObjectsPage = exports.Edits = exports.Embeddings = exports.Completions = exports.Chat = exports.Audio = void 0;
var audio_1 = require("c8f0fe747493ffc5");
Object.defineProperty(exports, "Audio", {
    enumerable: true,
    get: function() {
        return audio_1.Audio;
    }
});
var chat_1 = require("d4ed1db1306c462b");
Object.defineProperty(exports, "Chat", {
    enumerable: true,
    get: function() {
        return chat_1.Chat;
    }
});
var completions_1 = require("b7c46bac5a1a42ac");
Object.defineProperty(exports, "Completions", {
    enumerable: true,
    get: function() {
        return completions_1.Completions;
    }
});
var embeddings_1 = require("5f86c181c1de0738");
Object.defineProperty(exports, "Embeddings", {
    enumerable: true,
    get: function() {
        return embeddings_1.Embeddings;
    }
});
var edits_1 = require("169b358a8710725c");
Object.defineProperty(exports, "Edits", {
    enumerable: true,
    get: function() {
        return edits_1.Edits;
    }
});
var files_1 = require("d7a8a8476dad715f");
Object.defineProperty(exports, "FileObjectsPage", {
    enumerable: true,
    get: function() {
        return files_1.FileObjectsPage;
    }
});
Object.defineProperty(exports, "Files", {
    enumerable: true,
    get: function() {
        return files_1.Files;
    }
});
var fine_tunes_1 = require("d9d9a7fbd268927a");
Object.defineProperty(exports, "FineTunesPage", {
    enumerable: true,
    get: function() {
        return fine_tunes_1.FineTunesPage;
    }
});
Object.defineProperty(exports, "FineTunes", {
    enumerable: true,
    get: function() {
        return fine_tunes_1.FineTunes;
    }
});
var fine_tuning_1 = require("5b19a7dfebade90a");
Object.defineProperty(exports, "FineTuning", {
    enumerable: true,
    get: function() {
        return fine_tuning_1.FineTuning;
    }
});
var images_1 = require("b179cd967851c952");
Object.defineProperty(exports, "Images", {
    enumerable: true,
    get: function() {
        return images_1.Images;
    }
});
var models_1 = require("c002450239dc9a86");
Object.defineProperty(exports, "ModelsPage", {
    enumerable: true,
    get: function() {
        return models_1.ModelsPage;
    }
});
Object.defineProperty(exports, "Models", {
    enumerable: true,
    get: function() {
        return models_1.Models;
    }
});
var moderations_1 = require("5e776a641453caf5");
Object.defineProperty(exports, "Moderations", {
    enumerable: true,
    get: function() {
        return moderations_1.Moderations;
    }
});

},{"c8f0fe747493ffc5":"aaJOt","d4ed1db1306c462b":"i5GwG","b7c46bac5a1a42ac":"gJikp","5f86c181c1de0738":"5oyQl","169b358a8710725c":"5SoOW","d7a8a8476dad715f":"4OLuj","d9d9a7fbd268927a":"7g5lz","5b19a7dfebade90a":"3KV87","b179cd967851c952":"foOt4","c002450239dc9a86":"dzJK1","5e776a641453caf5":"7iRIl"}],"aaJOt":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
var __createBinding = this && this.__createBinding || (Object.create ? function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) desc = {
        enumerable: true,
        get: function() {
            return m[k];
        }
    };
    Object.defineProperty(o, k2, desc);
} : function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function(o, v) {
    Object.defineProperty(o, "default", {
        enumerable: true,
        value: v
    });
} : function(o, v) {
    o["default"] = v;
});
var __importStar = this && this.__importStar || function(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) {
        for(var k in mod)if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    }
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Audio = void 0;
const resource_1 = require("8aaa477c0aa826b7");
const transcriptions_1 = require("a9bb50e5c0f57376");
const translations_1 = require("6f0ab5e73e736544");
const API = __importStar(require("81d277f8cd614e19"));
class Audio extends resource_1.APIResource {
    constructor(){
        super(...arguments);
        this.transcriptions = new transcriptions_1.Transcriptions(this.client);
        this.translations = new translations_1.Translations(this.client);
    }
}
exports.Audio = Audio;
(function(Audio) {
    Audio.Transcriptions = API.Transcriptions;
    Audio.Translations = API.Translations;
})(Audio = exports.Audio || (exports.Audio = {}));

},{"8aaa477c0aa826b7":"gXWmq","a9bb50e5c0f57376":"egV16","6f0ab5e73e736544":"PzfLy","81d277f8cd614e19":"b3gsv"}],"gXWmq":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.APIResource = void 0;
class APIResource {
    constructor(client){
        this.client = client;
        this.get = client.get.bind(client);
        this.post = client.post.bind(client);
        this.patch = client.patch.bind(client);
        this.put = client.put.bind(client);
        this.delete = client.delete.bind(client);
        this.getAPIList = client.getAPIList.bind(client);
    }
}
exports.APIResource = APIResource;

},{}],"egV16":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Transcriptions = void 0;
const resource_1 = require("b421e31553a7deb3");
const core_1 = require("cba5067e2d867cd2");
class Transcriptions extends resource_1.APIResource {
    /**
   * Transcribes audio into the input language.
   */ create(body, options) {
        return this.post("/audio/transcriptions", (0, core_1.multipartFormRequestOptions)({
            body,
            ...options
        }));
    }
}
exports.Transcriptions = Transcriptions;
Transcriptions = exports.Transcriptions || (exports.Transcriptions = {});

},{"b421e31553a7deb3":"gXWmq","cba5067e2d867cd2":"7czzY"}],"PzfLy":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Translations = void 0;
const resource_1 = require("e0b20d2f5eb321a6");
const core_1 = require("68531a430b4161ec");
class Translations extends resource_1.APIResource {
    /**
   * Translates audio into English.
   */ create(body, options) {
        return this.post("/audio/translations", (0, core_1.multipartFormRequestOptions)({
            body,
            ...options
        }));
    }
}
exports.Translations = Translations;
Translations = exports.Translations || (exports.Translations = {});

},{"e0b20d2f5eb321a6":"gXWmq","68531a430b4161ec":"7czzY"}],"b3gsv":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Translations = exports.Transcriptions = exports.Audio = void 0;
var audio_1 = require("73eabe26dad280a5");
Object.defineProperty(exports, "Audio", {
    enumerable: true,
    get: function() {
        return audio_1.Audio;
    }
});
var transcriptions_1 = require("ed4abc30533d1fff");
Object.defineProperty(exports, "Transcriptions", {
    enumerable: true,
    get: function() {
        return transcriptions_1.Transcriptions;
    }
});
var translations_1 = require("3c9f664ff7b3ac45");
Object.defineProperty(exports, "Translations", {
    enumerable: true,
    get: function() {
        return translations_1.Translations;
    }
});

},{"73eabe26dad280a5":"aaJOt","ed4abc30533d1fff":"egV16","3c9f664ff7b3ac45":"PzfLy"}],"i5GwG":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
var __createBinding = this && this.__createBinding || (Object.create ? function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) desc = {
        enumerable: true,
        get: function() {
            return m[k];
        }
    };
    Object.defineProperty(o, k2, desc);
} : function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function(o, v) {
    Object.defineProperty(o, "default", {
        enumerable: true,
        value: v
    });
} : function(o, v) {
    o["default"] = v;
});
var __importStar = this && this.__importStar || function(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) {
        for(var k in mod)if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    }
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Chat = void 0;
const resource_1 = require("c790d3248293be0f");
const completions_1 = require("5575f8849bb9c070");
const API = __importStar(require("ffd3a592313b5521"));
class Chat extends resource_1.APIResource {
    constructor(){
        super(...arguments);
        this.completions = new completions_1.Completions(this.client);
    }
}
exports.Chat = Chat;
(function(Chat) {
    Chat.Completions = API.Completions;
})(Chat = exports.Chat || (exports.Chat = {}));

},{"c790d3248293be0f":"gXWmq","5575f8849bb9c070":"V3DV6","ffd3a592313b5521":"9qAV2"}],"V3DV6":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Completions = void 0;
const resource_1 = require("6b75ade42e7dc652");
class Completions extends resource_1.APIResource {
    create(body, options) {
        var _a;
        return this.post("/chat/completions", {
            body,
            ...options,
            stream: (_a = body.stream) !== null && _a !== void 0 ? _a : false
        });
    }
}
exports.Completions = Completions;
Completions = exports.Completions || (exports.Completions = {});

},{"6b75ade42e7dc652":"gXWmq"}],"9qAV2":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Completions = exports.Chat = void 0;
var chat_1 = require("f56b384bcd5c5cb7");
Object.defineProperty(exports, "Chat", {
    enumerable: true,
    get: function() {
        return chat_1.Chat;
    }
});
var completions_1 = require("217457d1a3c5e13a");
Object.defineProperty(exports, "Completions", {
    enumerable: true,
    get: function() {
        return completions_1.Completions;
    }
});

},{"f56b384bcd5c5cb7":"i5GwG","217457d1a3c5e13a":"V3DV6"}],"gJikp":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Completions = void 0;
const resource_1 = require("9eebdf97e24b5650");
class Completions extends resource_1.APIResource {
    create(body, options) {
        var _a;
        return this.post("/completions", {
            body,
            ...options,
            stream: (_a = body.stream) !== null && _a !== void 0 ? _a : false
        });
    }
}
exports.Completions = Completions;
Completions = exports.Completions || (exports.Completions = {});

},{"9eebdf97e24b5650":"gXWmq"}],"5oyQl":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Embeddings = void 0;
const resource_1 = require("8fbc7f4d9acfb5f");
class Embeddings extends resource_1.APIResource {
    /**
   * Creates an embedding vector representing the input text.
   */ create(body, options) {
        return this.post("/embeddings", {
            body,
            ...options
        });
    }
}
exports.Embeddings = Embeddings;
Embeddings = exports.Embeddings || (exports.Embeddings = {});

},{"8fbc7f4d9acfb5f":"gXWmq"}],"5SoOW":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Edits = void 0;
const resource_1 = require("e894729fd80da401");
class Edits extends resource_1.APIResource {
    /**
   * Creates a new edit for the provided input, instruction, and parameters.
   *
   * @deprecated The Edits API is deprecated; please use Chat Completions instead.
   *
   * https://openai.com/blog/gpt-4-api-general-availability#deprecation-of-the-edits-api
   */ create(body, options) {
        return this.post("/edits", {
            body,
            ...options
        });
    }
}
exports.Edits = Edits;
Edits = exports.Edits || (exports.Edits = {});

},{"e894729fd80da401":"gXWmq"}],"4OLuj":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.FileObjectsPage = exports.Files = void 0;
const resource_1 = require("17076562a8124f79");
const core_1 = require("4bdb6a95984ca6c");
const pagination_1 = require("effa52194eee247a");
class Files extends resource_1.APIResource {
    /**
   * Upload a file that contains document(s) to be used across various
   * endpoints/features. Currently, the size of all the files uploaded by one
   * organization can be up to 1 GB. Please contact us if you need to increase the
   * storage limit.
   */ create(body, options) {
        return this.post("/files", (0, core_1.multipartFormRequestOptions)({
            body,
            ...options
        }));
    }
    /**
   * Returns information about a specific file.
   */ retrieve(fileId, options) {
        return this.get(`/files/${fileId}`, options);
    }
    /**
   * Returns a list of files that belong to the user's organization.
   */ list(options) {
        return this.getAPIList("/files", FileObjectsPage, options);
    }
    /**
   * Delete a file.
   */ del(fileId, options) {
        return this.delete(`/files/${fileId}`, options);
    }
    /**
   * Returns the contents of the specified file
   */ retrieveContent(fileId, options) {
        return this.get(`/files/${fileId}/content`, {
            ...options,
            headers: {
                Accept: "application/json",
                ...options === null || options === void 0 ? void 0 : options.headers
            }
        });
    }
}
exports.Files = Files;
/**
 * Note: no pagination actually occurs yet, this is for forwards-compatibility.
 */ class FileObjectsPage extends pagination_1.Page {
}
exports.FileObjectsPage = FileObjectsPage;
Files = exports.Files || (exports.Files = {});

},{"17076562a8124f79":"gXWmq","4bdb6a95984ca6c":"7czzY","effa52194eee247a":"ceAFb"}],"7g5lz":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.FineTunesPage = exports.FineTunes = void 0;
const resource_1 = require("6b5991a95701787");
const pagination_1 = require("336a26b10cb63385");
class FineTunes extends resource_1.APIResource {
    /**
   * Creates a job that fine-tunes a specified model from a given dataset.
   *
   * Response includes details of the enqueued job including job status and the name
   * of the fine-tuned models once complete.
   *
   * [Learn more about fine-tuning](/docs/guides/legacy-fine-tuning)
   */ create(body, options) {
        return this.post("/fine-tunes", {
            body,
            ...options
        });
    }
    /**
   * Gets info about the fine-tune job.
   *
   * [Learn more about fine-tuning](/docs/guides/legacy-fine-tuning)
   */ retrieve(fineTuneId, options) {
        return this.get(`/fine-tunes/${fineTuneId}`, options);
    }
    /**
   * List your organization's fine-tuning jobs
   */ list(options) {
        return this.getAPIList("/fine-tunes", FineTunesPage, options);
    }
    /**
   * Immediately cancel a fine-tune job.
   */ cancel(fineTuneId, options) {
        return this.post(`/fine-tunes/${fineTuneId}/cancel`, options);
    }
    listEvents(fineTuneId, query, options) {
        var _a;
        return this.get(`/fine-tunes/${fineTuneId}/events`, {
            query,
            timeout: 86400000,
            ...options,
            stream: (_a = query === null || query === void 0 ? void 0 : query.stream) !== null && _a !== void 0 ? _a : false
        });
    }
}
exports.FineTunes = FineTunes;
/**
 * Note: no pagination actually occurs yet, this is for forwards-compatibility.
 */ class FineTunesPage extends pagination_1.Page {
}
exports.FineTunesPage = FineTunesPage;
FineTunes = exports.FineTunes || (exports.FineTunes = {});

},{"6b5991a95701787":"gXWmq","336a26b10cb63385":"ceAFb"}],"3KV87":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
var __createBinding = this && this.__createBinding || (Object.create ? function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) desc = {
        enumerable: true,
        get: function() {
            return m[k];
        }
    };
    Object.defineProperty(o, k2, desc);
} : function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function(o, v) {
    Object.defineProperty(o, "default", {
        enumerable: true,
        value: v
    });
} : function(o, v) {
    o["default"] = v;
});
var __importStar = this && this.__importStar || function(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) {
        for(var k in mod)if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    }
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.FineTuning = void 0;
const resource_1 = require("f597bef836e70ff7");
const jobs_1 = require("4e88160c342f3bf0");
const API = __importStar(require("cc4d6b034ec71a3"));
class FineTuning extends resource_1.APIResource {
    constructor(){
        super(...arguments);
        this.jobs = new jobs_1.Jobs(this.client);
    }
}
exports.FineTuning = FineTuning;
(function(FineTuning) {
    FineTuning.Jobs = API.Jobs;
    FineTuning.FineTuningJobsPage = API.FineTuningJobsPage;
    FineTuning.FineTuningJobEventsPage = API.FineTuningJobEventsPage;
})(FineTuning = exports.FineTuning || (exports.FineTuning = {}));

},{"f597bef836e70ff7":"gXWmq","4e88160c342f3bf0":"8Jy99","cc4d6b034ec71a3":"dwCiP"}],"8Jy99":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.FineTuningJobEventsPage = exports.FineTuningJobsPage = exports.Jobs = void 0;
const resource_1 = require("db48e52e1b96fa39");
const core_1 = require("3496ae1575febc2f");
const pagination_1 = require("f0890482bcbdc9f");
class Jobs extends resource_1.APIResource {
    /**
   * Creates a job that fine-tunes a specified model from a given dataset.
   *
   * Response includes details of the enqueued job including job status and the name
   * of the fine-tuned models once complete.
   *
   * [Learn more about fine-tuning](/docs/guides/fine-tuning)
   */ create(body, options) {
        return this.post("/fine_tuning/jobs", {
            body,
            ...options
        });
    }
    /**
   * Get info about a fine-tuning job.
   *
   * [Learn more about fine-tuning](/docs/guides/fine-tuning)
   */ retrieve(fineTuningJobId, options) {
        return this.get(`/fine_tuning/jobs/${fineTuningJobId}`, options);
    }
    list(query = {}, options) {
        if ((0, core_1.isRequestOptions)(query)) return this.list({}, query);
        return this.getAPIList("/fine_tuning/jobs", FineTuningJobsPage, {
            query,
            ...options
        });
    }
    /**
   * Immediately cancel a fine-tune job.
   */ cancel(fineTuningJobId, options) {
        return this.post(`/fine_tuning/jobs/${fineTuningJobId}/cancel`, options);
    }
    listEvents(fineTuningJobId, query = {}, options) {
        if ((0, core_1.isRequestOptions)(query)) return this.listEvents(fineTuningJobId, {}, query);
        return this.getAPIList(`/fine_tuning/jobs/${fineTuningJobId}/events`, FineTuningJobEventsPage, {
            query,
            ...options
        });
    }
}
exports.Jobs = Jobs;
class FineTuningJobsPage extends pagination_1.CursorPage {
}
exports.FineTuningJobsPage = FineTuningJobsPage;
class FineTuningJobEventsPage extends pagination_1.CursorPage {
}
exports.FineTuningJobEventsPage = FineTuningJobEventsPage;
Jobs = exports.Jobs || (exports.Jobs = {});

},{"db48e52e1b96fa39":"gXWmq","3496ae1575febc2f":"7czzY","f0890482bcbdc9f":"ceAFb"}],"dwCiP":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Jobs = exports.FineTuningJobEventsPage = exports.FineTuningJobsPage = exports.FineTuning = void 0;
var fine_tuning_1 = require("474e3399a126ffe5");
Object.defineProperty(exports, "FineTuning", {
    enumerable: true,
    get: function() {
        return fine_tuning_1.FineTuning;
    }
});
var jobs_1 = require("549ef624956729d5");
Object.defineProperty(exports, "FineTuningJobsPage", {
    enumerable: true,
    get: function() {
        return jobs_1.FineTuningJobsPage;
    }
});
Object.defineProperty(exports, "FineTuningJobEventsPage", {
    enumerable: true,
    get: function() {
        return jobs_1.FineTuningJobEventsPage;
    }
});
Object.defineProperty(exports, "Jobs", {
    enumerable: true,
    get: function() {
        return jobs_1.Jobs;
    }
});

},{"474e3399a126ffe5":"3KV87","549ef624956729d5":"8Jy99"}],"foOt4":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Images = void 0;
const resource_1 = require("dd22a9c190c9468d");
const core_1 = require("534a3a3de673d21f");
class Images extends resource_1.APIResource {
    /**
   * Creates a variation of a given image.
   */ createVariation(body, options) {
        return this.post("/images/variations", (0, core_1.multipartFormRequestOptions)({
            body,
            ...options
        }));
    }
    /**
   * Creates an edited or extended image given an original image and a prompt.
   */ edit(body, options) {
        return this.post("/images/edits", (0, core_1.multipartFormRequestOptions)({
            body,
            ...options
        }));
    }
    /**
   * Creates an image given a prompt.
   */ generate(body, options) {
        return this.post("/images/generations", {
            body,
            ...options
        });
    }
}
exports.Images = Images;
Images = exports.Images || (exports.Images = {});

},{"dd22a9c190c9468d":"gXWmq","534a3a3de673d21f":"7czzY"}],"dzJK1":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ModelsPage = exports.Models = void 0;
const resource_1 = require("48de9273d8964908");
const pagination_1 = require("cc6abfa458a91097");
class Models extends resource_1.APIResource {
    /**
   * Retrieves a model instance, providing basic information about the model such as
   * the owner and permissioning.
   */ retrieve(model, options) {
        return this.get(`/models/${model}`, options);
    }
    /**
   * Lists the currently available models, and provides basic information about each
   * one such as the owner and availability.
   */ list(options) {
        return this.getAPIList("/models", ModelsPage, options);
    }
    /**
   * Delete a fine-tuned model. You must have the Owner role in your organization.
   */ del(model, options) {
        return this.delete(`/models/${model}`, options);
    }
}
exports.Models = Models;
/**
 * Note: no pagination actually occurs yet, this is for forwards-compatibility.
 */ class ModelsPage extends pagination_1.Page {
}
exports.ModelsPage = ModelsPage;
Models = exports.Models || (exports.Models = {});

},{"48de9273d8964908":"gXWmq","cc6abfa458a91097":"ceAFb"}],"7iRIl":[function(require,module,exports) {
"use strict";
// File generated from our OpenAPI spec by Stainless.
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Moderations = void 0;
const resource_1 = require("10db349ac521103d");
class Moderations extends resource_1.APIResource {
    /**
   * Classifies if text violates OpenAI's Content Policy
   */ create(body, options) {
        return this.post("/moderations", {
            body,
            ...options
        });
    }
}
exports.Moderations = Moderations;
Moderations = exports.Moderations || (exports.Moderations = {});

},{"10db349ac521103d":"gXWmq"}],"jFSyu":[function(require,module,exports) {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
parcelHelpers.export(exports, "getModelNameForTiktoken", ()=>getModelNameForTiktoken);
parcelHelpers.export(exports, "getEmbeddingContextSize", ()=>getEmbeddingContextSize);
parcelHelpers.export(exports, "getModelContextSize", ()=>getModelContextSize);
parcelHelpers.export(exports, "calculateMaxTokens", ()=>calculateMaxTokens);
var _tiktokenJs = require("../util/tiktoken.js");
const getModelNameForTiktoken = (modelName)=>{
    if (modelName.startsWith("gpt-3.5-turbo-16k")) return "gpt-3.5-turbo-16k";
    if (modelName.startsWith("gpt-3.5-turbo-")) return "gpt-3.5-turbo";
    if (modelName.startsWith("gpt-4-32k")) return "gpt-4-32k";
    if (modelName.startsWith("gpt-4-")) return "gpt-4";
    return modelName;
};
const getEmbeddingContextSize = (modelName)=>{
    switch(modelName){
        case "text-embedding-ada-002":
            return 8191;
        default:
            return 2046;
    }
};
const getModelContextSize = (modelName)=>{
    switch(getModelNameForTiktoken(modelName)){
        case "gpt-3.5-turbo-16k":
            return 16384;
        case "gpt-3.5-turbo":
            return 4096;
        case "gpt-4-32k":
            return 32768;
        case "gpt-4":
            return 8192;
        case "text-davinci-003":
            return 4097;
        case "text-curie-001":
            return 2048;
        case "text-babbage-001":
            return 2048;
        case "text-ada-001":
            return 2048;
        case "code-davinci-002":
            return 8000;
        case "code-cushman-001":
            return 2048;
        default:
            return 4097;
    }
};
const calculateMaxTokens = async ({ prompt, modelName })=>{
    let numTokens;
    try {
        numTokens = (await (0, _tiktokenJs.encodingForModel)(modelName)).encode(prompt).length;
    } catch (error) {
        console.warn("Failed to calculate number of tokens, falling back to approximate count");
        // fallback to approximate calculation if tiktoken is not available
        numTokens = Math.ceil(prompt.length / 4);
    }
    const maxTokens = getModelContextSize(modelName);
    return maxTokens - numTokens;
};

},{"../util/tiktoken.js":"eAyCb","@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"eAyCb":[function(require,module,exports) {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
parcelHelpers.export(exports, "getEncoding", ()=>getEncoding);
parcelHelpers.export(exports, "encodingForModel", ()=>encodingForModel);
var _lite = require("js-tiktoken/lite");
var _asyncCallerJs = require("./async_caller.js");
const cache = {};
const caller = /* #__PURE__ */ new (0, _asyncCallerJs.AsyncCaller)({});
async function getEncoding(encoding, options) {
    if (!(encoding in cache)) cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`, {
        signal: options?.signal
    }).then((res)=>res.json()).catch((e)=>{
        delete cache[encoding];
        throw e;
    });
    return new (0, _lite.Tiktoken)(await cache[encoding], options?.extendedSpecialTokens);
}
async function encodingForModel(model, options) {
    return getEncoding((0, _lite.getEncodingNameForModel)(model), options);
}

},{"js-tiktoken/lite":"4lFci","./async_caller.js":"laXWJ","@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"4lFci":[function(require,module,exports) {
module.exports = require("cc83d56081b2a18f");

},{"cc83d56081b2a18f":"5AfZE"}],"5AfZE":[function(require,module,exports) {
"use strict";
var base64 = require("2536dcb6897e483e");
function _interopDefault(e) {
    return e && e.__esModule ? e : {
        default: e
    };
}
var base64__default = /*#__PURE__*/ _interopDefault(base64);
var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {
        enumerable: true,
        configurable: true,
        writable: true,
        value
    }) : obj[key] = value;
var __publicField = (obj, key, value)=>{
    __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
    return value;
};
// src/core.ts
function bytePairMerge(piece, ranks) {
    let parts = Array.from({
        length: piece.length
    }, (_, i)=>({
            start: i,
            end: i + 1
        }));
    while(parts.length > 1){
        let minRank = null;
        for(let i = 0; i < parts.length - 1; i++){
            const slice = piece.slice(parts[i].start, parts[i + 1].end);
            const rank = ranks.get(slice.join(","));
            if (rank == null) continue;
            if (minRank == null || rank < minRank[0]) minRank = [
                rank,
                i
            ];
        }
        if (minRank != null) {
            const i = minRank[1];
            parts[i] = {
                start: parts[i].start,
                end: parts[i + 1].end
            };
            parts.splice(i + 1, 1);
        } else break;
    }
    return parts;
}
function bytePairEncode(piece, ranks) {
    if (piece.length === 1) return [
        ranks.get(piece.join(","))
    ];
    return bytePairMerge(piece, ranks).map((p)=>ranks.get(piece.slice(p.start, p.end).join(","))).filter((x)=>x != null);
}
function escapeRegex(str) {
    return str.replace(/[\\^$*+?.()|[\]{}]/g, "\\$&");
}
var _Tiktoken = class {
    /** @internal */ specialTokens;
    /** @internal */ inverseSpecialTokens;
    /** @internal */ patStr;
    /** @internal */ textEncoder = new TextEncoder();
    /** @internal */ textDecoder = new TextDecoder("utf-8");
    /** @internal */ rankMap = /* @__PURE__ */ new Map();
    /** @internal */ textMap = /* @__PURE__ */ new Map();
    constructor(ranks, extendedSpecialTokens){
        this.patStr = ranks.pat_str;
        const uncompressed = ranks.bpe_ranks.split("\n").filter(Boolean).reduce((memo, x)=>{
            const [_, offsetStr, ...tokens] = x.split(" ");
            const offset = Number.parseInt(offsetStr, 10);
            tokens.forEach((token, i)=>memo[token] = offset + i);
            return memo;
        }, {});
        for (const [token, rank] of Object.entries(uncompressed)){
            const bytes = base64__default.default.toByteArray(token);
            this.rankMap.set(bytes.join(","), rank);
            this.textMap.set(rank, bytes);
        }
        this.specialTokens = {
            ...ranks.special_tokens,
            ...extendedSpecialTokens
        };
        this.inverseSpecialTokens = Object.entries(this.specialTokens).reduce((memo, [text, rank])=>{
            memo[rank] = this.textEncoder.encode(text);
            return memo;
        }, {});
    }
    encode(text, allowedSpecial = [], disallowedSpecial = "all") {
        const regexes = new RegExp(this.patStr, "ug");
        const specialRegex = _Tiktoken.specialTokenRegex(Object.keys(this.specialTokens));
        const ret = [];
        const allowedSpecialSet = new Set(allowedSpecial === "all" ? Object.keys(this.specialTokens) : allowedSpecial);
        const disallowedSpecialSet = new Set(disallowedSpecial === "all" ? Object.keys(this.specialTokens).filter((x)=>!allowedSpecialSet.has(x)) : disallowedSpecial);
        if (disallowedSpecialSet.size > 0) {
            const disallowedSpecialRegex = _Tiktoken.specialTokenRegex([
                ...disallowedSpecialSet
            ]);
            const specialMatch = text.match(disallowedSpecialRegex);
            if (specialMatch != null) throw new Error(`The text contains a special token that is not allowed: ${specialMatch[0]}`);
        }
        let start = 0;
        while(true){
            let nextSpecial = null;
            let startFind = start;
            while(true){
                specialRegex.lastIndex = startFind;
                nextSpecial = specialRegex.exec(text);
                if (nextSpecial == null || allowedSpecialSet.has(nextSpecial[0])) break;
                startFind = nextSpecial.index + 1;
            }
            const end = nextSpecial?.index ?? text.length;
            for (const match of text.substring(start, end).matchAll(regexes)){
                const piece = this.textEncoder.encode(match[0]);
                const token2 = this.rankMap.get(piece.join(","));
                if (token2 != null) {
                    ret.push(token2);
                    continue;
                }
                ret.push(...bytePairEncode(piece, this.rankMap));
            }
            if (nextSpecial == null) break;
            let token = this.specialTokens[nextSpecial[0]];
            ret.push(token);
            start = nextSpecial.index + nextSpecial[0].length;
        }
        return ret;
    }
    decode(tokens) {
        const res = [];
        let length = 0;
        for(let i2 = 0; i2 < tokens.length; ++i2){
            const token = tokens[i2];
            const bytes = this.textMap.get(token) ?? this.inverseSpecialTokens[token];
            if (bytes != null) {
                res.push(bytes);
                length += bytes.length;
            }
        }
        const mergedArray = new Uint8Array(length);
        let i = 0;
        for (const bytes of res){
            mergedArray.set(bytes, i);
            i += bytes.length;
        }
        return this.textDecoder.decode(mergedArray);
    }
};
var Tiktoken = _Tiktoken;
__publicField(Tiktoken, "specialTokenRegex", (tokens)=>{
    return new RegExp(tokens.map((i)=>escapeRegex(i)).join("|"), "g");
});
function getEncodingNameForModel(model) {
    switch(model){
        case "gpt2":
            return "gpt2";
        case "code-cushman-001":
        case "code-cushman-002":
        case "code-davinci-001":
        case "code-davinci-002":
        case "cushman-codex":
        case "davinci-codex":
        case "text-davinci-002":
        case "text-davinci-003":
            return "p50k_base";
        case "code-davinci-edit-001":
        case "text-davinci-edit-001":
            return "p50k_edit";
        case "ada":
        case "babbage":
        case "code-search-ada-code-001":
        case "code-search-babbage-code-001":
        case "curie":
        case "davinci":
        case "text-ada-001":
        case "text-babbage-001":
        case "text-curie-001":
        case "text-davinci-001":
        case "text-search-ada-doc-001":
        case "text-search-babbage-doc-001":
        case "text-search-curie-doc-001":
        case "text-search-davinci-doc-001":
        case "text-similarity-ada-001":
        case "text-similarity-babbage-001":
        case "text-similarity-curie-001":
        case "text-similarity-davinci-001":
            return "r50k_base";
        case "gpt-3.5-turbo-16k-0613":
        case "gpt-3.5-turbo-16k":
        case "gpt-3.5-turbo-0613":
        case "gpt-3.5-turbo-0301":
        case "gpt-3.5-turbo":
        case "gpt-4-32k-0613":
        case "gpt-4-32k-0314":
        case "gpt-4-32k":
        case "gpt-4-0613":
        case "gpt-4-0314":
        case "gpt-4":
        case "text-embedding-ada-002":
            return "cl100k_base";
        default:
            throw new Error("Unknown model");
    }
}
exports.Tiktoken = Tiktoken;
exports.getEncodingNameForModel = getEncodingNameForModel;

},{"2536dcb6897e483e":"xAz0h"}],"xAz0h":[function(require,module,exports) {
"use strict";
exports.byteLength = byteLength;
exports.toByteArray = toByteArray;
exports.fromByteArray = fromByteArray;
var lookup = [];
var revLookup = [];
var Arr = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
var code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
for(var i = 0, len = code.length; i < len; ++i){
    lookup[i] = code[i];
    revLookup[code.charCodeAt(i)] = i;
}
// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup["-".charCodeAt(0)] = 62;
revLookup["_".charCodeAt(0)] = 63;
function getLens(b64) {
    var len = b64.length;
    if (len % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
    // Trim off extra bytes after placeholder bytes are found
    // See: https://github.com/beatgammit/base64-js/issues/42
    var validLen = b64.indexOf("=");
    if (validLen === -1) validLen = len;
    var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;
    return [
        validLen,
        placeHoldersLen
    ];
}
// base64 is 4/3 + up to two characters of the original data
function byteLength(b64) {
    var lens = getLens(b64);
    var validLen = lens[0];
    var placeHoldersLen = lens[1];
    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}
function _byteLength(b64, validLen, placeHoldersLen) {
    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}
function toByteArray(b64) {
    var tmp;
    var lens = getLens(b64);
    var validLen = lens[0];
    var placeHoldersLen = lens[1];
    var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));
    var curByte = 0;
    // if there are placeholders, only get up to the last complete 4 chars
    var len = placeHoldersLen > 0 ? validLen - 4 : validLen;
    var i;
    for(i = 0; i < len; i += 4){
        tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];
        arr[curByte++] = tmp >> 16 & 0xFF;
        arr[curByte++] = tmp >> 8 & 0xFF;
        arr[curByte++] = tmp & 0xFF;
    }
    if (placeHoldersLen === 2) {
        tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;
        arr[curByte++] = tmp & 0xFF;
    }
    if (placeHoldersLen === 1) {
        tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;
        arr[curByte++] = tmp >> 8 & 0xFF;
        arr[curByte++] = tmp & 0xFF;
    }
    return arr;
}
function tripletToBase64(num) {
    return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];
}
function encodeChunk(uint8, start, end) {
    var tmp;
    var output = [];
    for(var i = start; i < end; i += 3){
        tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);
        output.push(tripletToBase64(tmp));
    }
    return output.join("");
}
function fromByteArray(uint8) {
    var tmp;
    var len = uint8.length;
    var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
    ;
    var parts = [];
    var maxChunkLength = 16383 // must be multiple of 3
    ;
    // go through the array every three bytes, we'll deal with trailing stuff later
    for(var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength)parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));
    // pad the end with zeros, but make sure to not forget the extra bytes
    if (extraBytes === 1) {
        tmp = uint8[len - 1];
        parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + "==");
    } else if (extraBytes === 2) {
        tmp = (uint8[len - 2] << 8) + uint8[len - 1];
        parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + "=");
    }
    return parts.join("");
}

},{}],"eFbNC":[function(require,module,exports) {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
/**
 * Formats a `StructuredTool` instance into a format that is compatible
 * with OpenAI's ChatCompletionFunctions. It uses the `zodToJsonSchema`
 * function to convert the schema of the `StructuredTool` into a JSON
 * schema, which is then used as the parameters for the OpenAI function.
 */ parcelHelpers.export(exports, "formatToOpenAIFunction", ()=>formatToOpenAIFunction);
var _zodToJsonSchema = require("zod-to-json-schema");
function formatToOpenAIFunction(tool) {
    return {
        name: tool.name,
        description: tool.description,
        parameters: (0, _zodToJsonSchema.zodToJsonSchema)(tool.schema)
    };
}

},{"zod-to-json-schema":"kC7M2","@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"kC7M2":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.zodToJsonSchema = void 0;
const zodToJsonSchema_1 = require("70f30b61f0654084");
Object.defineProperty(exports, "zodToJsonSchema", {
    enumerable: true,
    get: function() {
        return zodToJsonSchema_1.zodToJsonSchema;
    }
});
exports.default = zodToJsonSchema_1.zodToJsonSchema;

},{"70f30b61f0654084":"SGO5x"}],"SGO5x":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.zodToJsonSchema = void 0;
const parseDef_1 = require("d4963639494c5111");
const Refs_1 = require("47d4a9f097be6be7");
const zodToJsonSchema = (schema, options)=>{
    var _a;
    const refs = (0, Refs_1.getRefs)(options);
    const definitions = typeof options === "object" && options.definitions ? Object.entries(options.definitions).reduce((acc, [name, schema])=>{
        var _a;
        return Object.assign(Object.assign({}, acc), {
            [name]: (_a = (0, parseDef_1.parseDef)(schema._def, Object.assign(Object.assign({}, refs), {
                currentPath: [
                    ...refs.basePath,
                    refs.definitionPath,
                    name
                ]
            }), true)) !== null && _a !== void 0 ? _a : {}
        });
    }, {}) : undefined;
    const name = typeof options === "string" ? options : options === null || options === void 0 ? void 0 : options.name;
    const main = (_a = (0, parseDef_1.parseDef)(schema._def, name === undefined ? refs : Object.assign(Object.assign({}, refs), {
        currentPath: [
            ...refs.basePath,
            refs.definitionPath,
            name
        ]
    }), false)) !== null && _a !== void 0 ? _a : {};
    const combined = name === undefined ? definitions ? Object.assign(Object.assign({}, main), {
        [refs.definitionPath]: definitions
    }) : main : {
        $ref: [
            ...refs.$refStrategy === "relative" ? [] : refs.basePath,
            refs.definitionPath,
            name
        ].join("/"),
        [refs.definitionPath]: Object.assign(Object.assign({}, definitions), {
            [name]: main
        })
    };
    if (refs.target === "jsonSchema7") combined.$schema = "http://json-schema.org/draft-07/schema#";
    else if (refs.target === "jsonSchema2019-09") combined.$schema = "https://json-schema.org/draft/2019-09/schema#";
    return combined;
};
exports.zodToJsonSchema = zodToJsonSchema;

},{"d4963639494c5111":"4IhsI","47d4a9f097be6be7":"5Lg9p"}],"4IhsI":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseDef = void 0;
const zod_1 = require("4321360738da6f04");
const any_1 = require("72d3288e5f819ff5");
const array_1 = require("b93d2243882f9ef6");
const bigint_1 = require("b5f56c09eb221fc8");
const boolean_1 = require("61602a50d3e78e6");
const branded_1 = require("1cc90126f8b4a077");
const catch_1 = require("7c022ca2e3d818a2");
const date_1 = require("ae5a048e327844f6");
const default_1 = require("4ccea3b28b111d58");
const effects_1 = require("f0c300a68a47bb04");
const enum_1 = require("39ca5f8db45de1a5");
const intersection_1 = require("7647b975bd7642d4");
const literal_1 = require("bf4fa58eb8f99226");
const map_1 = require("6bcbf681f4ee9746");
const nativeEnum_1 = require("a81a223faf04962c");
const never_1 = require("fa63cc362d5c60a4");
const null_1 = require("71143023aa2198cf");
const nullable_1 = require("ee6b7c3770b3a66b");
const number_1 = require("4cbfe635c4552e14");
const object_1 = require("8fec03a2840806cd");
const optional_1 = require("11324eeb9f075229");
const pipeline_1 = require("888ff3a3b103af54");
const promise_1 = require("7e70f6717155af57");
const record_1 = require("9f22f75e457df3f8");
const set_1 = require("d4ff061f1ca1cdf7");
const string_1 = require("ef9e4bef092ef094");
const tuple_1 = require("a9f80bd8c9c44ebf");
const undefined_1 = require("a055b5ba6f5b37d9");
const union_1 = require("1fcf41578daa3387");
const unknown_1 = require("e9a70eccbc3b4bf5");
function parseDef(def, refs, forceResolution = false // Forces a new schema to be instantiated even though its def has been seen. Used for improving refs in definitions. See https://github.com/StefanTerdell/zod-to-json-schema/pull/61.
) {
    const seenItem = refs.seen.get(def);
    if (seenItem && !forceResolution) {
        const seenSchema = get$ref(seenItem, refs);
        if (seenSchema !== undefined) return seenSchema;
    }
    const newItem = {
        def,
        path: refs.currentPath,
        jsonSchema: undefined
    };
    refs.seen.set(def, newItem);
    const jsonSchema = selectParser(def, def.typeName, refs);
    if (jsonSchema) addMeta(def, refs, jsonSchema);
    newItem.jsonSchema = jsonSchema;
    return jsonSchema;
}
exports.parseDef = parseDef;
const get$ref = (item, refs)=>{
    switch(refs.$refStrategy){
        case "root":
            return {
                $ref: item.path.length === 0 ? "" : item.path.length === 1 ? `${item.path[0]}/` : item.path.join("/")
            };
        case "relative":
            return {
                $ref: getRelativePath(refs.currentPath, item.path)
            };
        case "none":
            if (item.path.length < refs.currentPath.length && item.path.every((value, index)=>refs.currentPath[index] === value)) {
                console.warn(`Recursive reference detected at ${refs.currentPath.join("/")}! Defaulting to any`);
                return {};
            }
            return undefined;
        case "seen":
            if (item.path.length < refs.currentPath.length && item.path.every((value, index)=>refs.currentPath[index] === value)) {
                console.warn(`Recursive reference detected at ${refs.currentPath.join("/")}! Defaulting to any`);
                return {};
            } else return item.jsonSchema;
    }
};
const getRelativePath = (pathA, pathB)=>{
    let i = 0;
    for(; i < pathA.length && i < pathB.length; i++){
        if (pathA[i] !== pathB[i]) break;
    }
    return [
        (pathA.length - i).toString(),
        ...pathB.slice(i)
    ].join("/");
};
const selectParser = (def, typeName, refs)=>{
    switch(typeName){
        case zod_1.ZodFirstPartyTypeKind.ZodString:
            return (0, string_1.parseStringDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodNumber:
            return (0, number_1.parseNumberDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodObject:
            return (0, object_1.parseObjectDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodBigInt:
            return (0, bigint_1.parseBigintDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodBoolean:
            return (0, boolean_1.parseBooleanDef)();
        case zod_1.ZodFirstPartyTypeKind.ZodDate:
            return (0, date_1.parseDateDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodUndefined:
            return (0, undefined_1.parseUndefinedDef)();
        case zod_1.ZodFirstPartyTypeKind.ZodNull:
            return (0, null_1.parseNullDef)(refs);
        case zod_1.ZodFirstPartyTypeKind.ZodArray:
            return (0, array_1.parseArrayDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodUnion:
        case zod_1.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:
            return (0, union_1.parseUnionDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodIntersection:
            return (0, intersection_1.parseIntersectionDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodTuple:
            return (0, tuple_1.parseTupleDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodRecord:
            return (0, record_1.parseRecordDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodLiteral:
            return (0, literal_1.parseLiteralDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodEnum:
            return (0, enum_1.parseEnumDef)(def);
        case zod_1.ZodFirstPartyTypeKind.ZodNativeEnum:
            return (0, nativeEnum_1.parseNativeEnumDef)(def);
        case zod_1.ZodFirstPartyTypeKind.ZodNullable:
            return (0, nullable_1.parseNullableDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodOptional:
            return (0, optional_1.parseOptionalDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodMap:
            return (0, map_1.parseMapDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodSet:
            return (0, set_1.parseSetDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodLazy:
            return parseDef(def.getter()._def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodPromise:
            return (0, promise_1.parsePromiseDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodNaN:
        case zod_1.ZodFirstPartyTypeKind.ZodNever:
            return (0, never_1.parseNeverDef)();
        case zod_1.ZodFirstPartyTypeKind.ZodEffects:
            return (0, effects_1.parseEffectsDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodAny:
            return (0, any_1.parseAnyDef)();
        case zod_1.ZodFirstPartyTypeKind.ZodUnknown:
            return (0, unknown_1.parseUnknownDef)();
        case zod_1.ZodFirstPartyTypeKind.ZodDefault:
            return (0, default_1.parseDefaultDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodBranded:
            return (0, branded_1.parseBrandedDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodCatch:
            return (0, catch_1.parseCatchDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodPipeline:
            return (0, pipeline_1.parsePipelineDef)(def, refs);
        case zod_1.ZodFirstPartyTypeKind.ZodFunction:
        case zod_1.ZodFirstPartyTypeKind.ZodVoid:
        case zod_1.ZodFirstPartyTypeKind.ZodSymbol:
            return undefined;
        default:
            return ((_)=>undefined)(typeName);
    }
};
const addMeta = (def, refs, jsonSchema)=>{
    if (def.description) {
        jsonSchema.description = def.description;
        if (refs.markdownDescription) jsonSchema.markdownDescription = def.description;
    }
    return jsonSchema;
};

},{"4321360738da6f04":"fCaTr","72d3288e5f819ff5":"72W9U","b93d2243882f9ef6":"97Kb7","b5f56c09eb221fc8":"5dM0r","61602a50d3e78e6":"1WHfS","1cc90126f8b4a077":"luaaW","7c022ca2e3d818a2":"f78t4","ae5a048e327844f6":"jSMLl","4ccea3b28b111d58":"4x4ii","f0c300a68a47bb04":"hBCKv","39ca5f8db45de1a5":"65lgD","7647b975bd7642d4":"gpAQe","bf4fa58eb8f99226":"a9N3B","6bcbf681f4ee9746":"1jaDz","a81a223faf04962c":"lF4Ew","fa63cc362d5c60a4":"brkWT","71143023aa2198cf":"55HHe","ee6b7c3770b3a66b":"fqZ7A","4cbfe635c4552e14":"65oXZ","8fec03a2840806cd":"jF8IM","11324eeb9f075229":"fxrPL","888ff3a3b103af54":"5sor9","7e70f6717155af57":"kKzYo","9f22f75e457df3f8":"4T7Gd","d4ff061f1ca1cdf7":"5sqla","ef9e4bef092ef094":"7k6J4","a9f80bd8c9c44ebf":"eqHq4","a055b5ba6f5b37d9":"8Strh","1fcf41578daa3387":"b9WFY","e9a70eccbc3b4bf5":"2xfCQ"}],"fCaTr":[function(require,module,exports) {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
parcelHelpers.export(exports, "BRAND", ()=>BRAND);
parcelHelpers.export(exports, "DIRTY", ()=>DIRTY);
parcelHelpers.export(exports, "EMPTY_PATH", ()=>EMPTY_PATH);
parcelHelpers.export(exports, "INVALID", ()=>INVALID);
parcelHelpers.export(exports, "NEVER", ()=>NEVER);
parcelHelpers.export(exports, "OK", ()=>OK);
parcelHelpers.export(exports, "ParseStatus", ()=>ParseStatus);
parcelHelpers.export(exports, "Schema", ()=>ZodType);
parcelHelpers.export(exports, "ZodAny", ()=>ZodAny);
parcelHelpers.export(exports, "ZodArray", ()=>ZodArray);
parcelHelpers.export(exports, "ZodBigInt", ()=>ZodBigInt);
parcelHelpers.export(exports, "ZodBoolean", ()=>ZodBoolean);
parcelHelpers.export(exports, "ZodBranded", ()=>ZodBranded);
parcelHelpers.export(exports, "ZodCatch", ()=>ZodCatch);
parcelHelpers.export(exports, "ZodDate", ()=>ZodDate);
parcelHelpers.export(exports, "ZodDefault", ()=>ZodDefault);
parcelHelpers.export(exports, "ZodDiscriminatedUnion", ()=>ZodDiscriminatedUnion);
parcelHelpers.export(exports, "ZodEffects", ()=>ZodEffects);
parcelHelpers.export(exports, "ZodEnum", ()=>ZodEnum);
parcelHelpers.export(exports, "ZodError", ()=>ZodError);
parcelHelpers.export(exports, "ZodFirstPartyTypeKind", ()=>ZodFirstPartyTypeKind);
parcelHelpers.export(exports, "ZodFunction", ()=>ZodFunction);
parcelHelpers.export(exports, "ZodIntersection", ()=>ZodIntersection);
parcelHelpers.export(exports, "ZodIssueCode", ()=>ZodIssueCode);
parcelHelpers.export(exports, "ZodLazy", ()=>ZodLazy);
parcelHelpers.export(exports, "ZodLiteral", ()=>ZodLiteral);
parcelHelpers.export(exports, "ZodMap", ()=>ZodMap);
parcelHelpers.export(exports, "ZodNaN", ()=>ZodNaN);
parcelHelpers.export(exports, "ZodNativeEnum", ()=>ZodNativeEnum);
parcelHelpers.export(exports, "ZodNever", ()=>ZodNever);
parcelHelpers.export(exports, "ZodNull", ()=>ZodNull);
parcelHelpers.export(exports, "ZodNullable", ()=>ZodNullable);
parcelHelpers.export(exports, "ZodNumber", ()=>ZodNumber);
parcelHelpers.export(exports, "ZodObject", ()=>ZodObject);
parcelHelpers.export(exports, "ZodOptional", ()=>ZodOptional);
parcelHelpers.export(exports, "ZodParsedType", ()=>ZodParsedType);
parcelHelpers.export(exports, "ZodPipeline", ()=>ZodPipeline);
parcelHelpers.export(exports, "ZodPromise", ()=>ZodPromise);
parcelHelpers.export(exports, "ZodReadonly", ()=>ZodReadonly);
parcelHelpers.export(exports, "ZodRecord", ()=>ZodRecord);
parcelHelpers.export(exports, "ZodSchema", ()=>ZodType);
parcelHelpers.export(exports, "ZodSet", ()=>ZodSet);
parcelHelpers.export(exports, "ZodString", ()=>ZodString);
parcelHelpers.export(exports, "ZodSymbol", ()=>ZodSymbol);
parcelHelpers.export(exports, "ZodTransformer", ()=>ZodEffects);
parcelHelpers.export(exports, "ZodTuple", ()=>ZodTuple);
parcelHelpers.export(exports, "ZodType", ()=>ZodType);
parcelHelpers.export(exports, "ZodUndefined", ()=>ZodUndefined);
parcelHelpers.export(exports, "ZodUnion", ()=>ZodUnion);
parcelHelpers.export(exports, "ZodUnknown", ()=>ZodUnknown);
parcelHelpers.export(exports, "ZodVoid", ()=>ZodVoid);
parcelHelpers.export(exports, "addIssueToContext", ()=>addIssueToContext);
parcelHelpers.export(exports, "any", ()=>anyType);
parcelHelpers.export(exports, "array", ()=>arrayType);
parcelHelpers.export(exports, "bigint", ()=>bigIntType);
parcelHelpers.export(exports, "boolean", ()=>booleanType);
parcelHelpers.export(exports, "coerce", ()=>coerce);
parcelHelpers.export(exports, "custom", ()=>custom);
parcelHelpers.export(exports, "date", ()=>dateType);
parcelHelpers.export(exports, "default", ()=>z);
parcelHelpers.export(exports, "defaultErrorMap", ()=>errorMap);
parcelHelpers.export(exports, "discriminatedUnion", ()=>discriminatedUnionType);
parcelHelpers.export(exports, "effect", ()=>effectsType);
parcelHelpers.export(exports, "enum", ()=>enumType);
parcelHelpers.export(exports, "function", ()=>functionType);
parcelHelpers.export(exports, "getErrorMap", ()=>getErrorMap);
parcelHelpers.export(exports, "getParsedType", ()=>getParsedType);
parcelHelpers.export(exports, "instanceof", ()=>instanceOfType);
parcelHelpers.export(exports, "intersection", ()=>intersectionType);
parcelHelpers.export(exports, "isAborted", ()=>isAborted);
parcelHelpers.export(exports, "isAsync", ()=>isAsync);
parcelHelpers.export(exports, "isDirty", ()=>isDirty);
parcelHelpers.export(exports, "isValid", ()=>isValid);
parcelHelpers.export(exports, "late", ()=>late);
parcelHelpers.export(exports, "lazy", ()=>lazyType);
parcelHelpers.export(exports, "literal", ()=>literalType);
parcelHelpers.export(exports, "makeIssue", ()=>makeIssue);
parcelHelpers.export(exports, "map", ()=>mapType);
parcelHelpers.export(exports, "nan", ()=>nanType);
parcelHelpers.export(exports, "nativeEnum", ()=>nativeEnumType);
parcelHelpers.export(exports, "never", ()=>neverType);
parcelHelpers.export(exports, "null", ()=>nullType);
parcelHelpers.export(exports, "nullable", ()=>nullableType);
parcelHelpers.export(exports, "number", ()=>numberType);
parcelHelpers.export(exports, "object", ()=>objectType);
parcelHelpers.export(exports, "objectUtil", ()=>objectUtil);
parcelHelpers.export(exports, "oboolean", ()=>oboolean);
parcelHelpers.export(exports, "onumber", ()=>onumber);
parcelHelpers.export(exports, "optional", ()=>optionalType);
parcelHelpers.export(exports, "ostring", ()=>ostring);
parcelHelpers.export(exports, "pipeline", ()=>pipelineType);
parcelHelpers.export(exports, "preprocess", ()=>preprocessType);
parcelHelpers.export(exports, "promise", ()=>promiseType);
parcelHelpers.export(exports, "quotelessJson", ()=>quotelessJson);
parcelHelpers.export(exports, "record", ()=>recordType);
parcelHelpers.export(exports, "set", ()=>setType);
parcelHelpers.export(exports, "setErrorMap", ()=>setErrorMap);
parcelHelpers.export(exports, "strictObject", ()=>strictObjectType);
parcelHelpers.export(exports, "string", ()=>stringType);
parcelHelpers.export(exports, "symbol", ()=>symbolType);
parcelHelpers.export(exports, "transformer", ()=>effectsType);
parcelHelpers.export(exports, "tuple", ()=>tupleType);
parcelHelpers.export(exports, "undefined", ()=>undefinedType);
parcelHelpers.export(exports, "union", ()=>unionType);
parcelHelpers.export(exports, "unknown", ()=>unknownType);
parcelHelpers.export(exports, "util", ()=>util);
parcelHelpers.export(exports, "void", ()=>voidType);
parcelHelpers.export(exports, "z", ()=>z);
var util;
(function(util) {
    util.assertEqual = (val)=>val;
    function assertIs(_arg) {}
    util.assertIs = assertIs;
    function assertNever(_x) {
        throw new Error();
    }
    util.assertNever = assertNever;
    util.arrayToEnum = (items)=>{
        const obj = {};
        for (const item of items)obj[item] = item;
        return obj;
    };
    util.getValidEnumValues = (obj)=>{
        const validKeys = util.objectKeys(obj).filter((k)=>typeof obj[obj[k]] !== "number");
        const filtered = {};
        for (const k of validKeys)filtered[k] = obj[k];
        return util.objectValues(filtered);
    };
    util.objectValues = (obj)=>{
        return util.objectKeys(obj).map(function(e) {
            return obj[e];
        });
    };
    util.objectKeys = typeof Object.keys === "function" // eslint-disable-line ban/ban
     ? (obj)=>Object.keys(obj) // eslint-disable-line ban/ban
     : (object)=>{
        const keys = [];
        for(const key in object)if (Object.prototype.hasOwnProperty.call(object, key)) keys.push(key);
        return keys;
    };
    util.find = (arr, checker)=>{
        for (const item of arr){
            if (checker(item)) return item;
        }
        return undefined;
    };
    util.isInteger = typeof Number.isInteger === "function" ? (val)=>Number.isInteger(val) // eslint-disable-line ban/ban
     : (val)=>typeof val === "number" && isFinite(val) && Math.floor(val) === val;
    function joinValues(array, separator = " | ") {
        return array.map((val)=>typeof val === "string" ? `'${val}'` : val).join(separator);
    }
    util.joinValues = joinValues;
    util.jsonStringifyReplacer = (_, value)=>{
        if (typeof value === "bigint") return value.toString();
        return value;
    };
})(util || (util = {}));
var objectUtil;
(function(objectUtil) {
    objectUtil.mergeShapes = (first, second)=>{
        return {
            ...first,
            ...second
        };
    };
})(objectUtil || (objectUtil = {}));
const ZodParsedType = util.arrayToEnum([
    "string",
    "nan",
    "number",
    "integer",
    "float",
    "boolean",
    "date",
    "bigint",
    "symbol",
    "function",
    "undefined",
    "null",
    "array",
    "object",
    "unknown",
    "promise",
    "void",
    "never",
    "map",
    "set"
]);
const getParsedType = (data)=>{
    const t = typeof data;
    switch(t){
        case "undefined":
            return ZodParsedType.undefined;
        case "string":
            return ZodParsedType.string;
        case "number":
            return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;
        case "boolean":
            return ZodParsedType.boolean;
        case "function":
            return ZodParsedType.function;
        case "bigint":
            return ZodParsedType.bigint;
        case "symbol":
            return ZodParsedType.symbol;
        case "object":
            if (Array.isArray(data)) return ZodParsedType.array;
            if (data === null) return ZodParsedType.null;
            if (data.then && typeof data.then === "function" && data.catch && typeof data.catch === "function") return ZodParsedType.promise;
            if (typeof Map !== "undefined" && data instanceof Map) return ZodParsedType.map;
            if (typeof Set !== "undefined" && data instanceof Set) return ZodParsedType.set;
            if (typeof Date !== "undefined" && data instanceof Date) return ZodParsedType.date;
            return ZodParsedType.object;
        default:
            return ZodParsedType.unknown;
    }
};
const ZodIssueCode = util.arrayToEnum([
    "invalid_type",
    "invalid_literal",
    "custom",
    "invalid_union",
    "invalid_union_discriminator",
    "invalid_enum_value",
    "unrecognized_keys",
    "invalid_arguments",
    "invalid_return_type",
    "invalid_date",
    "invalid_string",
    "too_small",
    "too_big",
    "invalid_intersection_types",
    "not_multiple_of",
    "not_finite"
]);
const quotelessJson = (obj)=>{
    const json = JSON.stringify(obj, null, 2);
    return json.replace(/"([^"]+)":/g, "$1:");
};
class ZodError extends Error {
    constructor(issues){
        super();
        this.issues = [];
        this.addIssue = (sub)=>{
            this.issues = [
                ...this.issues,
                sub
            ];
        };
        this.addIssues = (subs = [])=>{
            this.issues = [
                ...this.issues,
                ...subs
            ];
        };
        const actualProto = new.target.prototype;
        if (Object.setPrototypeOf) // eslint-disable-next-line ban/ban
        Object.setPrototypeOf(this, actualProto);
        else this.__proto__ = actualProto;
        this.name = "ZodError";
        this.issues = issues;
    }
    get errors() {
        return this.issues;
    }
    format(_mapper) {
        const mapper = _mapper || function(issue) {
            return issue.message;
        };
        const fieldErrors = {
            _errors: []
        };
        const processError = (error)=>{
            for (const issue of error.issues){
                if (issue.code === "invalid_union") issue.unionErrors.map(processError);
                else if (issue.code === "invalid_return_type") processError(issue.returnTypeError);
                else if (issue.code === "invalid_arguments") processError(issue.argumentsError);
                else if (issue.path.length === 0) fieldErrors._errors.push(mapper(issue));
                else {
                    let curr = fieldErrors;
                    let i = 0;
                    while(i < issue.path.length){
                        const el = issue.path[i];
                        const terminal = i === issue.path.length - 1;
                        if (!terminal) curr[el] = curr[el] || {
                            _errors: []
                        };
                        else {
                            curr[el] = curr[el] || {
                                _errors: []
                            };
                            curr[el]._errors.push(mapper(issue));
                        }
                        curr = curr[el];
                        i++;
                    }
                }
            }
        };
        processError(this);
        return fieldErrors;
    }
    toString() {
        return this.message;
    }
    get message() {
        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);
    }
    get isEmpty() {
        return this.issues.length === 0;
    }
    flatten(mapper = (issue)=>issue.message) {
        const fieldErrors = {};
        const formErrors = [];
        for (const sub of this.issues)if (sub.path.length > 0) {
            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];
            fieldErrors[sub.path[0]].push(mapper(sub));
        } else formErrors.push(mapper(sub));
        return {
            formErrors,
            fieldErrors
        };
    }
    get formErrors() {
        return this.flatten();
    }
}
ZodError.create = (issues)=>{
    const error = new ZodError(issues);
    return error;
};
const errorMap = (issue, _ctx)=>{
    let message;
    switch(issue.code){
        case ZodIssueCode.invalid_type:
            if (issue.received === ZodParsedType.undefined) message = "Required";
            else message = `Expected ${issue.expected}, received ${issue.received}`;
            break;
        case ZodIssueCode.invalid_literal:
            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;
            break;
        case ZodIssueCode.unrecognized_keys:
            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, ", ")}`;
            break;
        case ZodIssueCode.invalid_union:
            message = `Invalid input`;
            break;
        case ZodIssueCode.invalid_union_discriminator:
            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;
            break;
        case ZodIssueCode.invalid_enum_value:
            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;
            break;
        case ZodIssueCode.invalid_arguments:
            message = `Invalid function arguments`;
            break;
        case ZodIssueCode.invalid_return_type:
            message = `Invalid function return type`;
            break;
        case ZodIssueCode.invalid_date:
            message = `Invalid date`;
            break;
        case ZodIssueCode.invalid_string:
            if (typeof issue.validation === "object") {
                if ("includes" in issue.validation) {
                    message = `Invalid input: must include "${issue.validation.includes}"`;
                    if (typeof issue.validation.position === "number") message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;
                } else if ("startsWith" in issue.validation) message = `Invalid input: must start with "${issue.validation.startsWith}"`;
                else if ("endsWith" in issue.validation) message = `Invalid input: must end with "${issue.validation.endsWith}"`;
                else util.assertNever(issue.validation);
            } else if (issue.validation !== "regex") message = `Invalid ${issue.validation}`;
            else message = "Invalid";
            break;
        case ZodIssueCode.too_small:
            if (issue.type === "array") message = `Array must contain ${issue.exact ? "exactly" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;
            else if (issue.type === "string") message = `String must contain ${issue.exact ? "exactly" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;
            else if (issue.type === "number") message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;
            else if (issue.type === "date") message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;
            else message = "Invalid input";
            break;
        case ZodIssueCode.too_big:
            if (issue.type === "array") message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;
            else if (issue.type === "string") message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;
            else if (issue.type === "number") message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;
            else if (issue.type === "bigint") message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;
            else if (issue.type === "date") message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;
            else message = "Invalid input";
            break;
        case ZodIssueCode.custom:
            message = `Invalid input`;
            break;
        case ZodIssueCode.invalid_intersection_types:
            message = `Intersection results could not be merged`;
            break;
        case ZodIssueCode.not_multiple_of:
            message = `Number must be a multiple of ${issue.multipleOf}`;
            break;
        case ZodIssueCode.not_finite:
            message = "Number must be finite";
            break;
        default:
            message = _ctx.defaultError;
            util.assertNever(issue);
    }
    return {
        message
    };
};
let overrideErrorMap = errorMap;
function setErrorMap(map) {
    overrideErrorMap = map;
}
function getErrorMap() {
    return overrideErrorMap;
}
const makeIssue = (params)=>{
    const { data, path, errorMaps, issueData } = params;
    const fullPath = [
        ...path,
        ...issueData.path || []
    ];
    const fullIssue = {
        ...issueData,
        path: fullPath
    };
    let errorMessage = "";
    const maps = errorMaps.filter((m)=>!!m).slice().reverse();
    for (const map of maps)errorMessage = map(fullIssue, {
        data,
        defaultError: errorMessage
    }).message;
    return {
        ...issueData,
        path: fullPath,
        message: issueData.message || errorMessage
    };
};
const EMPTY_PATH = [];
function addIssueToContext(ctx, issueData) {
    const issue = makeIssue({
        issueData: issueData,
        data: ctx.data,
        path: ctx.path,
        errorMaps: [
            ctx.common.contextualErrorMap,
            ctx.schemaErrorMap,
            getErrorMap(),
            errorMap
        ].filter((x)=>!!x)
    });
    ctx.common.issues.push(issue);
}
class ParseStatus {
    constructor(){
        this.value = "valid";
    }
    dirty() {
        if (this.value === "valid") this.value = "dirty";
    }
    abort() {
        if (this.value !== "aborted") this.value = "aborted";
    }
    static mergeArray(status, results) {
        const arrayValue = [];
        for (const s of results){
            if (s.status === "aborted") return INVALID;
            if (s.status === "dirty") status.dirty();
            arrayValue.push(s.value);
        }
        return {
            status: status.value,
            value: arrayValue
        };
    }
    static async mergeObjectAsync(status, pairs) {
        const syncPairs = [];
        for (const pair of pairs)syncPairs.push({
            key: await pair.key,
            value: await pair.value
        });
        return ParseStatus.mergeObjectSync(status, syncPairs);
    }
    static mergeObjectSync(status, pairs) {
        const finalObject = {};
        for (const pair of pairs){
            const { key, value } = pair;
            if (key.status === "aborted") return INVALID;
            if (value.status === "aborted") return INVALID;
            if (key.status === "dirty") status.dirty();
            if (value.status === "dirty") status.dirty();
            if (key.value !== "__proto__" && (typeof value.value !== "undefined" || pair.alwaysSet)) finalObject[key.value] = value.value;
        }
        return {
            status: status.value,
            value: finalObject
        };
    }
}
const INVALID = Object.freeze({
    status: "aborted"
});
const DIRTY = (value)=>({
        status: "dirty",
        value
    });
const OK = (value)=>({
        status: "valid",
        value
    });
const isAborted = (x)=>x.status === "aborted";
const isDirty = (x)=>x.status === "dirty";
const isValid = (x)=>x.status === "valid";
const isAsync = (x)=>typeof Promise !== "undefined" && x instanceof Promise;
var errorUtil;
(function(errorUtil) {
    errorUtil.errToObj = (message)=>typeof message === "string" ? {
            message
        } : message || {};
    errorUtil.toString = (message)=>typeof message === "string" ? message : message === null || message === void 0 ? void 0 : message.message;
})(errorUtil || (errorUtil = {}));
class ParseInputLazyPath {
    constructor(parent, value, path, key){
        this._cachedPath = [];
        this.parent = parent;
        this.data = value;
        this._path = path;
        this._key = key;
    }
    get path() {
        if (!this._cachedPath.length) {
            if (this._key instanceof Array) this._cachedPath.push(...this._path, ...this._key);
            else this._cachedPath.push(...this._path, this._key);
        }
        return this._cachedPath;
    }
}
const handleResult = (ctx, result)=>{
    if (isValid(result)) return {
        success: true,
        data: result.value
    };
    else {
        if (!ctx.common.issues.length) throw new Error("Validation failed but no issues detected.");
        return {
            success: false,
            get error () {
                if (this._error) return this._error;
                const error = new ZodError(ctx.common.issues);
                this._error = error;
                return this._error;
            }
        };
    }
};
function processCreateParams(params) {
    if (!params) return {};
    const { errorMap, invalid_type_error, required_error, description } = params;
    if (errorMap && (invalid_type_error || required_error)) throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
    if (errorMap) return {
        errorMap: errorMap,
        description
    };
    const customMap = (iss, ctx)=>{
        if (iss.code !== "invalid_type") return {
            message: ctx.defaultError
        };
        if (typeof ctx.data === "undefined") return {
            message: required_error !== null && required_error !== void 0 ? required_error : ctx.defaultError
        };
        return {
            message: invalid_type_error !== null && invalid_type_error !== void 0 ? invalid_type_error : ctx.defaultError
        };
    };
    return {
        errorMap: customMap,
        description
    };
}
class ZodType {
    constructor(def){
        /** Alias of safeParseAsync */ this.spa = this.safeParseAsync;
        this._def = def;
        this.parse = this.parse.bind(this);
        this.safeParse = this.safeParse.bind(this);
        this.parseAsync = this.parseAsync.bind(this);
        this.safeParseAsync = this.safeParseAsync.bind(this);
        this.spa = this.spa.bind(this);
        this.refine = this.refine.bind(this);
        this.refinement = this.refinement.bind(this);
        this.superRefine = this.superRefine.bind(this);
        this.optional = this.optional.bind(this);
        this.nullable = this.nullable.bind(this);
        this.nullish = this.nullish.bind(this);
        this.array = this.array.bind(this);
        this.promise = this.promise.bind(this);
        this.or = this.or.bind(this);
        this.and = this.and.bind(this);
        this.transform = this.transform.bind(this);
        this.brand = this.brand.bind(this);
        this.default = this.default.bind(this);
        this.catch = this.catch.bind(this);
        this.describe = this.describe.bind(this);
        this.pipe = this.pipe.bind(this);
        this.readonly = this.readonly.bind(this);
        this.isNullable = this.isNullable.bind(this);
        this.isOptional = this.isOptional.bind(this);
    }
    get description() {
        return this._def.description;
    }
    _getType(input) {
        return getParsedType(input.data);
    }
    _getOrReturnCtx(input, ctx) {
        return ctx || {
            common: input.parent.common,
            data: input.data,
            parsedType: getParsedType(input.data),
            schemaErrorMap: this._def.errorMap,
            path: input.path,
            parent: input.parent
        };
    }
    _processInputParams(input) {
        return {
            status: new ParseStatus(),
            ctx: {
                common: input.parent.common,
                data: input.data,
                parsedType: getParsedType(input.data),
                schemaErrorMap: this._def.errorMap,
                path: input.path,
                parent: input.parent
            }
        };
    }
    _parseSync(input) {
        const result = this._parse(input);
        if (isAsync(result)) throw new Error("Synchronous parse encountered promise.");
        return result;
    }
    _parseAsync(input) {
        const result = this._parse(input);
        return Promise.resolve(result);
    }
    parse(data, params) {
        const result = this.safeParse(data, params);
        if (result.success) return result.data;
        throw result.error;
    }
    safeParse(data, params) {
        var _a;
        const ctx = {
            common: {
                issues: [],
                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,
                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap
            },
            path: (params === null || params === void 0 ? void 0 : params.path) || [],
            schemaErrorMap: this._def.errorMap,
            parent: null,
            data,
            parsedType: getParsedType(data)
        };
        const result = this._parseSync({
            data,
            path: ctx.path,
            parent: ctx
        });
        return handleResult(ctx, result);
    }
    async parseAsync(data, params) {
        const result = await this.safeParseAsync(data, params);
        if (result.success) return result.data;
        throw result.error;
    }
    async safeParseAsync(data, params) {
        const ctx = {
            common: {
                issues: [],
                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,
                async: true
            },
            path: (params === null || params === void 0 ? void 0 : params.path) || [],
            schemaErrorMap: this._def.errorMap,
            parent: null,
            data,
            parsedType: getParsedType(data)
        };
        const maybeAsyncResult = this._parse({
            data,
            path: ctx.path,
            parent: ctx
        });
        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));
        return handleResult(ctx, result);
    }
    refine(check, message) {
        const getIssueProperties = (val)=>{
            if (typeof message === "string" || typeof message === "undefined") return {
                message
            };
            else if (typeof message === "function") return message(val);
            else return message;
        };
        return this._refinement((val, ctx)=>{
            const result = check(val);
            const setError = ()=>ctx.addIssue({
                    code: ZodIssueCode.custom,
                    ...getIssueProperties(val)
                });
            if (typeof Promise !== "undefined" && result instanceof Promise) return result.then((data)=>{
                if (!data) {
                    setError();
                    return false;
                } else return true;
            });
            if (!result) {
                setError();
                return false;
            } else return true;
        });
    }
    refinement(check, refinementData) {
        return this._refinement((val, ctx)=>{
            if (!check(val)) {
                ctx.addIssue(typeof refinementData === "function" ? refinementData(val, ctx) : refinementData);
                return false;
            } else return true;
        });
    }
    _refinement(refinement) {
        return new ZodEffects({
            schema: this,
            typeName: ZodFirstPartyTypeKind.ZodEffects,
            effect: {
                type: "refinement",
                refinement
            }
        });
    }
    superRefine(refinement) {
        return this._refinement(refinement);
    }
    optional() {
        return ZodOptional.create(this, this._def);
    }
    nullable() {
        return ZodNullable.create(this, this._def);
    }
    nullish() {
        return this.nullable().optional();
    }
    array() {
        return ZodArray.create(this, this._def);
    }
    promise() {
        return ZodPromise.create(this, this._def);
    }
    or(option) {
        return ZodUnion.create([
            this,
            option
        ], this._def);
    }
    and(incoming) {
        return ZodIntersection.create(this, incoming, this._def);
    }
    transform(transform) {
        return new ZodEffects({
            ...processCreateParams(this._def),
            schema: this,
            typeName: ZodFirstPartyTypeKind.ZodEffects,
            effect: {
                type: "transform",
                transform
            }
        });
    }
    default(def) {
        const defaultValueFunc = typeof def === "function" ? def : ()=>def;
        return new ZodDefault({
            ...processCreateParams(this._def),
            innerType: this,
            defaultValue: defaultValueFunc,
            typeName: ZodFirstPartyTypeKind.ZodDefault
        });
    }
    brand() {
        return new ZodBranded({
            typeName: ZodFirstPartyTypeKind.ZodBranded,
            type: this,
            ...processCreateParams(this._def)
        });
    }
    catch(def) {
        const catchValueFunc = typeof def === "function" ? def : ()=>def;
        return new ZodCatch({
            ...processCreateParams(this._def),
            innerType: this,
            catchValue: catchValueFunc,
            typeName: ZodFirstPartyTypeKind.ZodCatch
        });
    }
    describe(description) {
        const This = this.constructor;
        return new This({
            ...this._def,
            description
        });
    }
    pipe(target) {
        return ZodPipeline.create(this, target);
    }
    readonly() {
        return ZodReadonly.create(this);
    }
    isOptional() {
        return this.safeParse(undefined).success;
    }
    isNullable() {
        return this.safeParse(null).success;
    }
}
const cuidRegex = /^c[^\s-]{8,}$/i;
const cuid2Regex = /^[a-z][a-z0-9]*$/;
const ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/;
// const uuidRegex =
//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;
const uuidRegex = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i;
// from https://stackoverflow.com/a/46181/1550155
// old version: too slow, didn't support unicode
// const emailRegex = /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;
//old email regex
// const emailRegex = /^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@((?!-)([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{1,})[^-<>()[\].,;:\s@"]$/i;
// eslint-disable-next-line
// const emailRegex =
//   /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/;
// const emailRegex =
//   /^[a-zA-Z0-9\.\!\#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\~\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
// const emailRegex =
//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;
const emailRegex = /^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;
// const emailRegex =
//   /^[a-z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\.[a-z0-9\-]+)*$/i;
// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression
const _emojiRegex = `^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`;
let emojiRegex;
const ipv4Regex = /^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/;
const ipv6Regex = /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;
// Adapted from https://stackoverflow.com/a/3143231
const datetimeRegex = (args)=>{
    if (args.precision) {
        if (args.offset) return new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${args.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`);
        else return new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${args.precision}}Z$`);
    } else if (args.precision === 0) {
        if (args.offset) return new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$`);
        else return new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$`);
    } else {
        if (args.offset) return new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$`);
        else return new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$`);
    }
};
function isValidIP(ip, version) {
    if ((version === "v4" || !version) && ipv4Regex.test(ip)) return true;
    if ((version === "v6" || !version) && ipv6Regex.test(ip)) return true;
    return false;
}
class ZodString extends ZodType {
    _parse(input) {
        if (this._def.coerce) input.data = String(input.data);
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.string) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.string,
                received: ctx.parsedType
            });
            return INVALID;
        }
        const status = new ParseStatus();
        let ctx = undefined;
        for (const check of this._def.checks){
            if (check.kind === "min") {
                if (input.data.length < check.value) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_small,
                        minimum: check.value,
                        type: "string",
                        inclusive: true,
                        exact: false,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "max") {
                if (input.data.length > check.value) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_big,
                        maximum: check.value,
                        type: "string",
                        inclusive: true,
                        exact: false,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "length") {
                const tooBig = input.data.length > check.value;
                const tooSmall = input.data.length < check.value;
                if (tooBig || tooSmall) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    if (tooBig) addIssueToContext(ctx, {
                        code: ZodIssueCode.too_big,
                        maximum: check.value,
                        type: "string",
                        inclusive: true,
                        exact: true,
                        message: check.message
                    });
                    else if (tooSmall) addIssueToContext(ctx, {
                        code: ZodIssueCode.too_small,
                        minimum: check.value,
                        type: "string",
                        inclusive: true,
                        exact: true,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "email") {
                if (!emailRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "email",
                        code: ZodIssueCode.invalid_string,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "emoji") {
                if (!emojiRegex) emojiRegex = new RegExp(_emojiRegex, "u");
                if (!emojiRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "emoji",
                        code: ZodIssueCode.invalid_string,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "uuid") {
                if (!uuidRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "uuid",
                        code: ZodIssueCode.invalid_string,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "cuid") {
                if (!cuidRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "cuid",
                        code: ZodIssueCode.invalid_string,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "cuid2") {
                if (!cuid2Regex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "cuid2",
                        code: ZodIssueCode.invalid_string,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "ulid") {
                if (!ulidRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "ulid",
                        code: ZodIssueCode.invalid_string,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "url") try {
                new URL(input.data);
            } catch (_a) {
                ctx = this._getOrReturnCtx(input, ctx);
                addIssueToContext(ctx, {
                    validation: "url",
                    code: ZodIssueCode.invalid_string,
                    message: check.message
                });
                status.dirty();
            }
            else if (check.kind === "regex") {
                check.regex.lastIndex = 0;
                const testResult = check.regex.test(input.data);
                if (!testResult) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "regex",
                        code: ZodIssueCode.invalid_string,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "trim") input.data = input.data.trim();
            else if (check.kind === "includes") {
                if (!input.data.includes(check.value, check.position)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: {
                            includes: check.value,
                            position: check.position
                        },
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "toLowerCase") input.data = input.data.toLowerCase();
            else if (check.kind === "toUpperCase") input.data = input.data.toUpperCase();
            else if (check.kind === "startsWith") {
                if (!input.data.startsWith(check.value)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: {
                            startsWith: check.value
                        },
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "endsWith") {
                if (!input.data.endsWith(check.value)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: {
                            endsWith: check.value
                        },
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "datetime") {
                const regex = datetimeRegex(check);
                if (!regex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: "datetime",
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "ip") {
                if (!isValidIP(input.data, check.version)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "ip",
                        code: ZodIssueCode.invalid_string,
                        message: check.message
                    });
                    status.dirty();
                }
            } else util.assertNever(check);
        }
        return {
            status: status.value,
            value: input.data
        };
    }
    _regex(regex, validation, message) {
        return this.refinement((data)=>regex.test(data), {
            validation,
            code: ZodIssueCode.invalid_string,
            ...errorUtil.errToObj(message)
        });
    }
    _addCheck(check) {
        return new ZodString({
            ...this._def,
            checks: [
                ...this._def.checks,
                check
            ]
        });
    }
    email(message) {
        return this._addCheck({
            kind: "email",
            ...errorUtil.errToObj(message)
        });
    }
    url(message) {
        return this._addCheck({
            kind: "url",
            ...errorUtil.errToObj(message)
        });
    }
    emoji(message) {
        return this._addCheck({
            kind: "emoji",
            ...errorUtil.errToObj(message)
        });
    }
    uuid(message) {
        return this._addCheck({
            kind: "uuid",
            ...errorUtil.errToObj(message)
        });
    }
    cuid(message) {
        return this._addCheck({
            kind: "cuid",
            ...errorUtil.errToObj(message)
        });
    }
    cuid2(message) {
        return this._addCheck({
            kind: "cuid2",
            ...errorUtil.errToObj(message)
        });
    }
    ulid(message) {
        return this._addCheck({
            kind: "ulid",
            ...errorUtil.errToObj(message)
        });
    }
    ip(options) {
        return this._addCheck({
            kind: "ip",
            ...errorUtil.errToObj(options)
        });
    }
    datetime(options) {
        var _a;
        if (typeof options === "string") return this._addCheck({
            kind: "datetime",
            precision: null,
            offset: false,
            message: options
        });
        return this._addCheck({
            kind: "datetime",
            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === "undefined" ? null : options === null || options === void 0 ? void 0 : options.precision,
            offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,
            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message)
        });
    }
    regex(regex, message) {
        return this._addCheck({
            kind: "regex",
            regex: regex,
            ...errorUtil.errToObj(message)
        });
    }
    includes(value, options) {
        return this._addCheck({
            kind: "includes",
            value: value,
            position: options === null || options === void 0 ? void 0 : options.position,
            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message)
        });
    }
    startsWith(value, message) {
        return this._addCheck({
            kind: "startsWith",
            value: value,
            ...errorUtil.errToObj(message)
        });
    }
    endsWith(value, message) {
        return this._addCheck({
            kind: "endsWith",
            value: value,
            ...errorUtil.errToObj(message)
        });
    }
    min(minLength, message) {
        return this._addCheck({
            kind: "min",
            value: minLength,
            ...errorUtil.errToObj(message)
        });
    }
    max(maxLength, message) {
        return this._addCheck({
            kind: "max",
            value: maxLength,
            ...errorUtil.errToObj(message)
        });
    }
    length(len, message) {
        return this._addCheck({
            kind: "length",
            value: len,
            ...errorUtil.errToObj(message)
        });
    }
    /**
     * @deprecated Use z.string().min(1) instead.
     * @see {@link ZodString.min}
     */ nonempty(message) {
        return this.min(1, errorUtil.errToObj(message));
    }
    trim() {
        return new ZodString({
            ...this._def,
            checks: [
                ...this._def.checks,
                {
                    kind: "trim"
                }
            ]
        });
    }
    toLowerCase() {
        return new ZodString({
            ...this._def,
            checks: [
                ...this._def.checks,
                {
                    kind: "toLowerCase"
                }
            ]
        });
    }
    toUpperCase() {
        return new ZodString({
            ...this._def,
            checks: [
                ...this._def.checks,
                {
                    kind: "toUpperCase"
                }
            ]
        });
    }
    get isDatetime() {
        return !!this._def.checks.find((ch)=>ch.kind === "datetime");
    }
    get isEmail() {
        return !!this._def.checks.find((ch)=>ch.kind === "email");
    }
    get isURL() {
        return !!this._def.checks.find((ch)=>ch.kind === "url");
    }
    get isEmoji() {
        return !!this._def.checks.find((ch)=>ch.kind === "emoji");
    }
    get isUUID() {
        return !!this._def.checks.find((ch)=>ch.kind === "uuid");
    }
    get isCUID() {
        return !!this._def.checks.find((ch)=>ch.kind === "cuid");
    }
    get isCUID2() {
        return !!this._def.checks.find((ch)=>ch.kind === "cuid2");
    }
    get isULID() {
        return !!this._def.checks.find((ch)=>ch.kind === "ulid");
    }
    get isIP() {
        return !!this._def.checks.find((ch)=>ch.kind === "ip");
    }
    get minLength() {
        let min = null;
        for (const ch of this._def.checks){
            if (ch.kind === "min") {
                if (min === null || ch.value > min) min = ch.value;
            }
        }
        return min;
    }
    get maxLength() {
        let max = null;
        for (const ch of this._def.checks){
            if (ch.kind === "max") {
                if (max === null || ch.value < max) max = ch.value;
            }
        }
        return max;
    }
}
ZodString.create = (params)=>{
    var _a;
    return new ZodString({
        checks: [],
        typeName: ZodFirstPartyTypeKind.ZodString,
        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,
        ...processCreateParams(params)
    });
};
// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034
function floatSafeRemainder(val, step) {
    const valDecCount = (val.toString().split(".")[1] || "").length;
    const stepDecCount = (step.toString().split(".")[1] || "").length;
    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;
    const valInt = parseInt(val.toFixed(decCount).replace(".", ""));
    const stepInt = parseInt(step.toFixed(decCount).replace(".", ""));
    return valInt % stepInt / Math.pow(10, decCount);
}
class ZodNumber extends ZodType {
    constructor(){
        super(...arguments);
        this.min = this.gte;
        this.max = this.lte;
        this.step = this.multipleOf;
    }
    _parse(input) {
        if (this._def.coerce) input.data = Number(input.data);
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.number) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.number,
                received: ctx.parsedType
            });
            return INVALID;
        }
        let ctx = undefined;
        const status = new ParseStatus();
        for (const check of this._def.checks){
            if (check.kind === "int") {
                if (!util.isInteger(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_type,
                        expected: "integer",
                        received: "float",
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "min") {
                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;
                if (tooSmall) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_small,
                        minimum: check.value,
                        type: "number",
                        inclusive: check.inclusive,
                        exact: false,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "max") {
                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;
                if (tooBig) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_big,
                        maximum: check.value,
                        type: "number",
                        inclusive: check.inclusive,
                        exact: false,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "multipleOf") {
                if (floatSafeRemainder(input.data, check.value) !== 0) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.not_multiple_of,
                        multipleOf: check.value,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "finite") {
                if (!Number.isFinite(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.not_finite,
                        message: check.message
                    });
                    status.dirty();
                }
            } else util.assertNever(check);
        }
        return {
            status: status.value,
            value: input.data
        };
    }
    gte(value, message) {
        return this.setLimit("min", value, true, errorUtil.toString(message));
    }
    gt(value, message) {
        return this.setLimit("min", value, false, errorUtil.toString(message));
    }
    lte(value, message) {
        return this.setLimit("max", value, true, errorUtil.toString(message));
    }
    lt(value, message) {
        return this.setLimit("max", value, false, errorUtil.toString(message));
    }
    setLimit(kind, value, inclusive, message) {
        return new ZodNumber({
            ...this._def,
            checks: [
                ...this._def.checks,
                {
                    kind,
                    value,
                    inclusive,
                    message: errorUtil.toString(message)
                }
            ]
        });
    }
    _addCheck(check) {
        return new ZodNumber({
            ...this._def,
            checks: [
                ...this._def.checks,
                check
            ]
        });
    }
    int(message) {
        return this._addCheck({
            kind: "int",
            message: errorUtil.toString(message)
        });
    }
    positive(message) {
        return this._addCheck({
            kind: "min",
            value: 0,
            inclusive: false,
            message: errorUtil.toString(message)
        });
    }
    negative(message) {
        return this._addCheck({
            kind: "max",
            value: 0,
            inclusive: false,
            message: errorUtil.toString(message)
        });
    }
    nonpositive(message) {
        return this._addCheck({
            kind: "max",
            value: 0,
            inclusive: true,
            message: errorUtil.toString(message)
        });
    }
    nonnegative(message) {
        return this._addCheck({
            kind: "min",
            value: 0,
            inclusive: true,
            message: errorUtil.toString(message)
        });
    }
    multipleOf(value, message) {
        return this._addCheck({
            kind: "multipleOf",
            value: value,
            message: errorUtil.toString(message)
        });
    }
    finite(message) {
        return this._addCheck({
            kind: "finite",
            message: errorUtil.toString(message)
        });
    }
    safe(message) {
        return this._addCheck({
            kind: "min",
            inclusive: true,
            value: Number.MIN_SAFE_INTEGER,
            message: errorUtil.toString(message)
        })._addCheck({
            kind: "max",
            inclusive: true,
            value: Number.MAX_SAFE_INTEGER,
            message: errorUtil.toString(message)
        });
    }
    get minValue() {
        let min = null;
        for (const ch of this._def.checks){
            if (ch.kind === "min") {
                if (min === null || ch.value > min) min = ch.value;
            }
        }
        return min;
    }
    get maxValue() {
        let max = null;
        for (const ch of this._def.checks){
            if (ch.kind === "max") {
                if (max === null || ch.value < max) max = ch.value;
            }
        }
        return max;
    }
    get isInt() {
        return !!this._def.checks.find((ch)=>ch.kind === "int" || ch.kind === "multipleOf" && util.isInteger(ch.value));
    }
    get isFinite() {
        let max = null, min = null;
        for (const ch of this._def.checks){
            if (ch.kind === "finite" || ch.kind === "int" || ch.kind === "multipleOf") return true;
            else if (ch.kind === "min") {
                if (min === null || ch.value > min) min = ch.value;
            } else if (ch.kind === "max") {
                if (max === null || ch.value < max) max = ch.value;
            }
        }
        return Number.isFinite(min) && Number.isFinite(max);
    }
}
ZodNumber.create = (params)=>{
    return new ZodNumber({
        checks: [],
        typeName: ZodFirstPartyTypeKind.ZodNumber,
        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,
        ...processCreateParams(params)
    });
};
class ZodBigInt extends ZodType {
    constructor(){
        super(...arguments);
        this.min = this.gte;
        this.max = this.lte;
    }
    _parse(input) {
        if (this._def.coerce) input.data = BigInt(input.data);
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.bigint) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.bigint,
                received: ctx.parsedType
            });
            return INVALID;
        }
        let ctx = undefined;
        const status = new ParseStatus();
        for (const check of this._def.checks){
            if (check.kind === "min") {
                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;
                if (tooSmall) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_small,
                        type: "bigint",
                        minimum: check.value,
                        inclusive: check.inclusive,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "max") {
                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;
                if (tooBig) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_big,
                        type: "bigint",
                        maximum: check.value,
                        inclusive: check.inclusive,
                        message: check.message
                    });
                    status.dirty();
                }
            } else if (check.kind === "multipleOf") {
                if (input.data % check.value !== BigInt(0)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.not_multiple_of,
                        multipleOf: check.value,
                        message: check.message
                    });
                    status.dirty();
                }
            } else util.assertNever(check);
        }
        return {
            status: status.value,
            value: input.data
        };
    }
    gte(value, message) {
        return this.setLimit("min", value, true, errorUtil.toString(message));
    }
    gt(value, message) {
        return this.setLimit("min", value, false, errorUtil.toString(message));
    }
    lte(value, message) {
        return this.setLimit("max", value, true, errorUtil.toString(message));
    }
    lt(value, message) {
        return this.setLimit("max", value, false, errorUtil.toString(message));
    }
    setLimit(kind, value, inclusive, message) {
        return new ZodBigInt({
            ...this._def,
            checks: [
                ...this._def.checks,
                {
                    kind,
                    value,
                    inclusive,
                    message: errorUtil.toString(message)
                }
            ]
        });
    }
    _addCheck(check) {
        return new ZodBigInt({
            ...this._def,
            checks: [
                ...this._def.checks,
                check
            ]
        });
    }
    positive(message) {
        return this._addCheck({
            kind: "min",
            value: BigInt(0),
            inclusive: false,
            message: errorUtil.toString(message)
        });
    }
    negative(message) {
        return this._addCheck({
            kind: "max",
            value: BigInt(0),
            inclusive: false,
            message: errorUtil.toString(message)
        });
    }
    nonpositive(message) {
        return this._addCheck({
            kind: "max",
            value: BigInt(0),
            inclusive: true,
            message: errorUtil.toString(message)
        });
    }
    nonnegative(message) {
        return this._addCheck({
            kind: "min",
            value: BigInt(0),
            inclusive: true,
            message: errorUtil.toString(message)
        });
    }
    multipleOf(value, message) {
        return this._addCheck({
            kind: "multipleOf",
            value,
            message: errorUtil.toString(message)
        });
    }
    get minValue() {
        let min = null;
        for (const ch of this._def.checks){
            if (ch.kind === "min") {
                if (min === null || ch.value > min) min = ch.value;
            }
        }
        return min;
    }
    get maxValue() {
        let max = null;
        for (const ch of this._def.checks){
            if (ch.kind === "max") {
                if (max === null || ch.value < max) max = ch.value;
            }
        }
        return max;
    }
}
ZodBigInt.create = (params)=>{
    var _a;
    return new ZodBigInt({
        checks: [],
        typeName: ZodFirstPartyTypeKind.ZodBigInt,
        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,
        ...processCreateParams(params)
    });
};
class ZodBoolean extends ZodType {
    _parse(input) {
        if (this._def.coerce) input.data = Boolean(input.data);
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.boolean) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.boolean,
                received: ctx.parsedType
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodBoolean.create = (params)=>{
    return new ZodBoolean({
        typeName: ZodFirstPartyTypeKind.ZodBoolean,
        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,
        ...processCreateParams(params)
    });
};
class ZodDate extends ZodType {
    _parse(input) {
        if (this._def.coerce) input.data = new Date(input.data);
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.date) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.date,
                received: ctx.parsedType
            });
            return INVALID;
        }
        if (isNaN(input.data.getTime())) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_date
            });
            return INVALID;
        }
        const status = new ParseStatus();
        let ctx = undefined;
        for (const check of this._def.checks){
            if (check.kind === "min") {
                if (input.data.getTime() < check.value) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_small,
                        message: check.message,
                        inclusive: true,
                        exact: false,
                        minimum: check.value,
                        type: "date"
                    });
                    status.dirty();
                }
            } else if (check.kind === "max") {
                if (input.data.getTime() > check.value) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_big,
                        message: check.message,
                        inclusive: true,
                        exact: false,
                        maximum: check.value,
                        type: "date"
                    });
                    status.dirty();
                }
            } else util.assertNever(check);
        }
        return {
            status: status.value,
            value: new Date(input.data.getTime())
        };
    }
    _addCheck(check) {
        return new ZodDate({
            ...this._def,
            checks: [
                ...this._def.checks,
                check
            ]
        });
    }
    min(minDate, message) {
        return this._addCheck({
            kind: "min",
            value: minDate.getTime(),
            message: errorUtil.toString(message)
        });
    }
    max(maxDate, message) {
        return this._addCheck({
            kind: "max",
            value: maxDate.getTime(),
            message: errorUtil.toString(message)
        });
    }
    get minDate() {
        let min = null;
        for (const ch of this._def.checks){
            if (ch.kind === "min") {
                if (min === null || ch.value > min) min = ch.value;
            }
        }
        return min != null ? new Date(min) : null;
    }
    get maxDate() {
        let max = null;
        for (const ch of this._def.checks){
            if (ch.kind === "max") {
                if (max === null || ch.value < max) max = ch.value;
            }
        }
        return max != null ? new Date(max) : null;
    }
}
ZodDate.create = (params)=>{
    return new ZodDate({
        checks: [],
        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,
        typeName: ZodFirstPartyTypeKind.ZodDate,
        ...processCreateParams(params)
    });
};
class ZodSymbol extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.symbol) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.symbol,
                received: ctx.parsedType
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodSymbol.create = (params)=>{
    return new ZodSymbol({
        typeName: ZodFirstPartyTypeKind.ZodSymbol,
        ...processCreateParams(params)
    });
};
class ZodUndefined extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.undefined) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.undefined,
                received: ctx.parsedType
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodUndefined.create = (params)=>{
    return new ZodUndefined({
        typeName: ZodFirstPartyTypeKind.ZodUndefined,
        ...processCreateParams(params)
    });
};
class ZodNull extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.null) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.null,
                received: ctx.parsedType
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodNull.create = (params)=>{
    return new ZodNull({
        typeName: ZodFirstPartyTypeKind.ZodNull,
        ...processCreateParams(params)
    });
};
class ZodAny extends ZodType {
    constructor(){
        super(...arguments);
        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.
        this._any = true;
    }
    _parse(input) {
        return OK(input.data);
    }
}
ZodAny.create = (params)=>{
    return new ZodAny({
        typeName: ZodFirstPartyTypeKind.ZodAny,
        ...processCreateParams(params)
    });
};
class ZodUnknown extends ZodType {
    constructor(){
        super(...arguments);
        // required
        this._unknown = true;
    }
    _parse(input) {
        return OK(input.data);
    }
}
ZodUnknown.create = (params)=>{
    return new ZodUnknown({
        typeName: ZodFirstPartyTypeKind.ZodUnknown,
        ...processCreateParams(params)
    });
};
class ZodNever extends ZodType {
    _parse(input) {
        const ctx = this._getOrReturnCtx(input);
        addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.never,
            received: ctx.parsedType
        });
        return INVALID;
    }
}
ZodNever.create = (params)=>{
    return new ZodNever({
        typeName: ZodFirstPartyTypeKind.ZodNever,
        ...processCreateParams(params)
    });
};
class ZodVoid extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.undefined) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.void,
                received: ctx.parsedType
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodVoid.create = (params)=>{
    return new ZodVoid({
        typeName: ZodFirstPartyTypeKind.ZodVoid,
        ...processCreateParams(params)
    });
};
class ZodArray extends ZodType {
    _parse(input) {
        const { ctx, status } = this._processInputParams(input);
        const def = this._def;
        if (ctx.parsedType !== ZodParsedType.array) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.array,
                received: ctx.parsedType
            });
            return INVALID;
        }
        if (def.exactLength !== null) {
            const tooBig = ctx.data.length > def.exactLength.value;
            const tooSmall = ctx.data.length < def.exactLength.value;
            if (tooBig || tooSmall) {
                addIssueToContext(ctx, {
                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,
                    minimum: tooSmall ? def.exactLength.value : undefined,
                    maximum: tooBig ? def.exactLength.value : undefined,
                    type: "array",
                    inclusive: true,
                    exact: true,
                    message: def.exactLength.message
                });
                status.dirty();
            }
        }
        if (def.minLength !== null) {
            if (ctx.data.length < def.minLength.value) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.too_small,
                    minimum: def.minLength.value,
                    type: "array",
                    inclusive: true,
                    exact: false,
                    message: def.minLength.message
                });
                status.dirty();
            }
        }
        if (def.maxLength !== null) {
            if (ctx.data.length > def.maxLength.value) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.too_big,
                    maximum: def.maxLength.value,
                    type: "array",
                    inclusive: true,
                    exact: false,
                    message: def.maxLength.message
                });
                status.dirty();
            }
        }
        if (ctx.common.async) return Promise.all([
            ...ctx.data
        ].map((item, i)=>{
            return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));
        })).then((result)=>{
            return ParseStatus.mergeArray(status, result);
        });
        const result = [
            ...ctx.data
        ].map((item, i)=>{
            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));
        });
        return ParseStatus.mergeArray(status, result);
    }
    get element() {
        return this._def.type;
    }
    min(minLength, message) {
        return new ZodArray({
            ...this._def,
            minLength: {
                value: minLength,
                message: errorUtil.toString(message)
            }
        });
    }
    max(maxLength, message) {
        return new ZodArray({
            ...this._def,
            maxLength: {
                value: maxLength,
                message: errorUtil.toString(message)
            }
        });
    }
    length(len, message) {
        return new ZodArray({
            ...this._def,
            exactLength: {
                value: len,
                message: errorUtil.toString(message)
            }
        });
    }
    nonempty(message) {
        return this.min(1, message);
    }
}
ZodArray.create = (schema, params)=>{
    return new ZodArray({
        type: schema,
        minLength: null,
        maxLength: null,
        exactLength: null,
        typeName: ZodFirstPartyTypeKind.ZodArray,
        ...processCreateParams(params)
    });
};
function deepPartialify(schema) {
    if (schema instanceof ZodObject) {
        const newShape = {};
        for(const key in schema.shape){
            const fieldSchema = schema.shape[key];
            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));
        }
        return new ZodObject({
            ...schema._def,
            shape: ()=>newShape
        });
    } else if (schema instanceof ZodArray) return new ZodArray({
        ...schema._def,
        type: deepPartialify(schema.element)
    });
    else if (schema instanceof ZodOptional) return ZodOptional.create(deepPartialify(schema.unwrap()));
    else if (schema instanceof ZodNullable) return ZodNullable.create(deepPartialify(schema.unwrap()));
    else if (schema instanceof ZodTuple) return ZodTuple.create(schema.items.map((item)=>deepPartialify(item)));
    else return schema;
}
class ZodObject extends ZodType {
    constructor(){
        super(...arguments);
        this._cached = null;
        /**
         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.
         * If you want to pass through unknown properties, use `.passthrough()` instead.
         */ this.nonstrict = this.passthrough;
        // extend<
        //   Augmentation extends ZodRawShape,
        //   NewOutput extends util.flatten<{
        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
        //       ? Augmentation[k]["_output"]
        //       : k extends keyof Output
        //       ? Output[k]
        //       : never;
        //   }>,
        //   NewInput extends util.flatten<{
        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
        //       ? Augmentation[k]["_input"]
        //       : k extends keyof Input
        //       ? Input[k]
        //       : never;
        //   }>
        // >(
        //   augmentation: Augmentation
        // ): ZodObject<
        //   extendShape<T, Augmentation>,
        //   UnknownKeys,
        //   Catchall,
        //   NewOutput,
        //   NewInput
        // > {
        //   return new ZodObject({
        //     ...this._def,
        //     shape: () => ({
        //       ...this._def.shape(),
        //       ...augmentation,
        //     }),
        //   }) as any;
        // }
        /**
         * @deprecated Use `.extend` instead
         *  */ this.augment = this.extend;
    }
    _getCached() {
        if (this._cached !== null) return this._cached;
        const shape = this._def.shape();
        const keys = util.objectKeys(shape);
        return this._cached = {
            shape,
            keys
        };
    }
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.object) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.object,
                received: ctx.parsedType
            });
            return INVALID;
        }
        const { status, ctx } = this._processInputParams(input);
        const { shape, keys: shapeKeys } = this._getCached();
        const extraKeys = [];
        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === "strip")) {
            for(const key in ctx.data)if (!shapeKeys.includes(key)) extraKeys.push(key);
        }
        const pairs = [];
        for (const key of shapeKeys){
            const keyValidator = shape[key];
            const value = ctx.data[key];
            pairs.push({
                key: {
                    status: "valid",
                    value: key
                },
                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),
                alwaysSet: key in ctx.data
            });
        }
        if (this._def.catchall instanceof ZodNever) {
            const unknownKeys = this._def.unknownKeys;
            if (unknownKeys === "passthrough") for (const key of extraKeys)pairs.push({
                key: {
                    status: "valid",
                    value: key
                },
                value: {
                    status: "valid",
                    value: ctx.data[key]
                }
            });
            else if (unknownKeys === "strict") {
                if (extraKeys.length > 0) {
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.unrecognized_keys,
                        keys: extraKeys
                    });
                    status.dirty();
                }
            } else if (unknownKeys === "strip") ;
            else throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);
        } else {
            // run catchall validation
            const catchall = this._def.catchall;
            for (const key of extraKeys){
                const value = ctx.data[key];
                pairs.push({
                    key: {
                        status: "valid",
                        value: key
                    },
                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)
                    ),
                    alwaysSet: key in ctx.data
                });
            }
        }
        if (ctx.common.async) return Promise.resolve().then(async ()=>{
            const syncPairs = [];
            for (const pair of pairs){
                const key = await pair.key;
                syncPairs.push({
                    key,
                    value: await pair.value,
                    alwaysSet: pair.alwaysSet
                });
            }
            return syncPairs;
        }).then((syncPairs)=>{
            return ParseStatus.mergeObjectSync(status, syncPairs);
        });
        else return ParseStatus.mergeObjectSync(status, pairs);
    }
    get shape() {
        return this._def.shape();
    }
    strict(message) {
        errorUtil.errToObj;
        return new ZodObject({
            ...this._def,
            unknownKeys: "strict",
            ...message !== undefined ? {
                errorMap: (issue, ctx)=>{
                    var _a, _b, _c, _d;
                    const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;
                    if (issue.code === "unrecognized_keys") return {
                        message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError
                    };
                    return {
                        message: defaultError
                    };
                }
            } : {}
        });
    }
    strip() {
        return new ZodObject({
            ...this._def,
            unknownKeys: "strip"
        });
    }
    passthrough() {
        return new ZodObject({
            ...this._def,
            unknownKeys: "passthrough"
        });
    }
    // const AugmentFactory =
    //   <Def extends ZodObjectDef>(def: Def) =>
    //   <Augmentation extends ZodRawShape>(
    //     augmentation: Augmentation
    //   ): ZodObject<
    //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
    //     Def["unknownKeys"],
    //     Def["catchall"]
    //   > => {
    //     return new ZodObject({
    //       ...def,
    //       shape: () => ({
    //         ...def.shape(),
    //         ...augmentation,
    //       }),
    //     }) as any;
    //   };
    extend(augmentation) {
        return new ZodObject({
            ...this._def,
            shape: ()=>({
                    ...this._def.shape(),
                    ...augmentation
                })
        });
    }
    /**
     * Prior to zod@1.0.12 there was a bug in the
     * inferred type of merged objects. Please
     * upgrade if you are experiencing issues.
     */ merge(merging) {
        const merged = new ZodObject({
            unknownKeys: merging._def.unknownKeys,
            catchall: merging._def.catchall,
            shape: ()=>({
                    ...this._def.shape(),
                    ...merging._def.shape()
                }),
            typeName: ZodFirstPartyTypeKind.ZodObject
        });
        return merged;
    }
    // merge<
    //   Incoming extends AnyZodObject,
    //   Augmentation extends Incoming["shape"],
    //   NewOutput extends {
    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
    //       ? Augmentation[k]["_output"]
    //       : k extends keyof Output
    //       ? Output[k]
    //       : never;
    //   },
    //   NewInput extends {
    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
    //       ? Augmentation[k]["_input"]
    //       : k extends keyof Input
    //       ? Input[k]
    //       : never;
    //   }
    // >(
    //   merging: Incoming
    // ): ZodObject<
    //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
    //   Incoming["_def"]["unknownKeys"],
    //   Incoming["_def"]["catchall"],
    //   NewOutput,
    //   NewInput
    // > {
    //   const merged: any = new ZodObject({
    //     unknownKeys: merging._def.unknownKeys,
    //     catchall: merging._def.catchall,
    //     shape: () =>
    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
    //     typeName: ZodFirstPartyTypeKind.ZodObject,
    //   }) as any;
    //   return merged;
    // }
    setKey(key, schema) {
        return this.augment({
            [key]: schema
        });
    }
    // merge<Incoming extends AnyZodObject>(
    //   merging: Incoming
    // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
    // ZodObject<
    //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
    //   Incoming["_def"]["unknownKeys"],
    //   Incoming["_def"]["catchall"]
    // > {
    //   // const mergedShape = objectUtil.mergeShapes(
    //   //   this._def.shape(),
    //   //   merging._def.shape()
    //   // );
    //   const merged: any = new ZodObject({
    //     unknownKeys: merging._def.unknownKeys,
    //     catchall: merging._def.catchall,
    //     shape: () =>
    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
    //     typeName: ZodFirstPartyTypeKind.ZodObject,
    //   }) as any;
    //   return merged;
    // }
    catchall(index) {
        return new ZodObject({
            ...this._def,
            catchall: index
        });
    }
    pick(mask) {
        const shape = {};
        util.objectKeys(mask).forEach((key)=>{
            if (mask[key] && this.shape[key]) shape[key] = this.shape[key];
        });
        return new ZodObject({
            ...this._def,
            shape: ()=>shape
        });
    }
    omit(mask) {
        const shape = {};
        util.objectKeys(this.shape).forEach((key)=>{
            if (!mask[key]) shape[key] = this.shape[key];
        });
        return new ZodObject({
            ...this._def,
            shape: ()=>shape
        });
    }
    /**
     * @deprecated
     */ deepPartial() {
        return deepPartialify(this);
    }
    partial(mask) {
        const newShape = {};
        util.objectKeys(this.shape).forEach((key)=>{
            const fieldSchema = this.shape[key];
            if (mask && !mask[key]) newShape[key] = fieldSchema;
            else newShape[key] = fieldSchema.optional();
        });
        return new ZodObject({
            ...this._def,
            shape: ()=>newShape
        });
    }
    required(mask) {
        const newShape = {};
        util.objectKeys(this.shape).forEach((key)=>{
            if (mask && !mask[key]) newShape[key] = this.shape[key];
            else {
                const fieldSchema = this.shape[key];
                let newField = fieldSchema;
                while(newField instanceof ZodOptional)newField = newField._def.innerType;
                newShape[key] = newField;
            }
        });
        return new ZodObject({
            ...this._def,
            shape: ()=>newShape
        });
    }
    keyof() {
        return createZodEnum(util.objectKeys(this.shape));
    }
}
ZodObject.create = (shape, params)=>{
    return new ZodObject({
        shape: ()=>shape,
        unknownKeys: "strip",
        catchall: ZodNever.create(),
        typeName: ZodFirstPartyTypeKind.ZodObject,
        ...processCreateParams(params)
    });
};
ZodObject.strictCreate = (shape, params)=>{
    return new ZodObject({
        shape: ()=>shape,
        unknownKeys: "strict",
        catchall: ZodNever.create(),
        typeName: ZodFirstPartyTypeKind.ZodObject,
        ...processCreateParams(params)
    });
};
ZodObject.lazycreate = (shape, params)=>{
    return new ZodObject({
        shape,
        unknownKeys: "strip",
        catchall: ZodNever.create(),
        typeName: ZodFirstPartyTypeKind.ZodObject,
        ...processCreateParams(params)
    });
};
class ZodUnion extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        const options = this._def.options;
        function handleResults(results) {
            // return first issue-free validation if it exists
            for (const result of results){
                if (result.result.status === "valid") return result.result;
            }
            for (const result of results)if (result.result.status === "dirty") {
                // add issues from dirty option
                ctx.common.issues.push(...result.ctx.common.issues);
                return result.result;
            }
            // return invalid
            const unionErrors = results.map((result)=>new ZodError(result.ctx.common.issues));
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_union,
                unionErrors
            });
            return INVALID;
        }
        if (ctx.common.async) return Promise.all(options.map(async (option)=>{
            const childCtx = {
                ...ctx,
                common: {
                    ...ctx.common,
                    issues: []
                },
                parent: null
            };
            return {
                result: await option._parseAsync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: childCtx
                }),
                ctx: childCtx
            };
        })).then(handleResults);
        else {
            let dirty = undefined;
            const issues = [];
            for (const option of options){
                const childCtx = {
                    ...ctx,
                    common: {
                        ...ctx.common,
                        issues: []
                    },
                    parent: null
                };
                const result = option._parseSync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: childCtx
                });
                if (result.status === "valid") return result;
                else if (result.status === "dirty" && !dirty) dirty = {
                    result,
                    ctx: childCtx
                };
                if (childCtx.common.issues.length) issues.push(childCtx.common.issues);
            }
            if (dirty) {
                ctx.common.issues.push(...dirty.ctx.common.issues);
                return dirty.result;
            }
            const unionErrors = issues.map((issues)=>new ZodError(issues));
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_union,
                unionErrors
            });
            return INVALID;
        }
    }
    get options() {
        return this._def.options;
    }
}
ZodUnion.create = (types, params)=>{
    return new ZodUnion({
        options: types,
        typeName: ZodFirstPartyTypeKind.ZodUnion,
        ...processCreateParams(params)
    });
};
/////////////////////////////////////////////////////
/////////////////////////////////////////////////////
//////////                                 //////////
//////////      ZodDiscriminatedUnion      //////////
//////////                                 //////////
/////////////////////////////////////////////////////
/////////////////////////////////////////////////////
const getDiscriminator = (type)=>{
    if (type instanceof ZodLazy) return getDiscriminator(type.schema);
    else if (type instanceof ZodEffects) return getDiscriminator(type.innerType());
    else if (type instanceof ZodLiteral) return [
        type.value
    ];
    else if (type instanceof ZodEnum) return type.options;
    else if (type instanceof ZodNativeEnum) // eslint-disable-next-line ban/ban
    return Object.keys(type.enum);
    else if (type instanceof ZodDefault) return getDiscriminator(type._def.innerType);
    else if (type instanceof ZodUndefined) return [
        undefined
    ];
    else if (type instanceof ZodNull) return [
        null
    ];
    else return null;
};
class ZodDiscriminatedUnion extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.object) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.object,
                received: ctx.parsedType
            });
            return INVALID;
        }
        const discriminator = this.discriminator;
        const discriminatorValue = ctx.data[discriminator];
        const option = this.optionsMap.get(discriminatorValue);
        if (!option) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_union_discriminator,
                options: Array.from(this.optionsMap.keys()),
                path: [
                    discriminator
                ]
            });
            return INVALID;
        }
        if (ctx.common.async) return option._parseAsync({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
        });
        else return option._parseSync({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
        });
    }
    get discriminator() {
        return this._def.discriminator;
    }
    get options() {
        return this._def.options;
    }
    get optionsMap() {
        return this._def.optionsMap;
    }
    /**
     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
     * have a different value for each object in the union.
     * @param discriminator the name of the discriminator property
     * @param types an array of object schemas
     * @param params
     */ static create(discriminator, options, params) {
        // Get all the valid discriminator values
        const optionsMap = new Map();
        // try {
        for (const type of options){
            const discriminatorValues = getDiscriminator(type.shape[discriminator]);
            if (!discriminatorValues) throw new Error(`A discriminator value for key \`${discriminator}\` could not be extracted from all schema options`);
            for (const value of discriminatorValues){
                if (optionsMap.has(value)) throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);
                optionsMap.set(value, type);
            }
        }
        return new ZodDiscriminatedUnion({
            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,
            discriminator,
            options,
            optionsMap,
            ...processCreateParams(params)
        });
    }
}
function mergeValues(a, b) {
    const aType = getParsedType(a);
    const bType = getParsedType(b);
    if (a === b) return {
        valid: true,
        data: a
    };
    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {
        const bKeys = util.objectKeys(b);
        const sharedKeys = util.objectKeys(a).filter((key)=>bKeys.indexOf(key) !== -1);
        const newObj = {
            ...a,
            ...b
        };
        for (const key of sharedKeys){
            const sharedValue = mergeValues(a[key], b[key]);
            if (!sharedValue.valid) return {
                valid: false
            };
            newObj[key] = sharedValue.data;
        }
        return {
            valid: true,
            data: newObj
        };
    } else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {
        if (a.length !== b.length) return {
            valid: false
        };
        const newArray = [];
        for(let index = 0; index < a.length; index++){
            const itemA = a[index];
            const itemB = b[index];
            const sharedValue = mergeValues(itemA, itemB);
            if (!sharedValue.valid) return {
                valid: false
            };
            newArray.push(sharedValue.data);
        }
        return {
            valid: true,
            data: newArray
        };
    } else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) return {
        valid: true,
        data: a
    };
    else return {
        valid: false
    };
}
class ZodIntersection extends ZodType {
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        const handleParsed = (parsedLeft, parsedRight)=>{
            if (isAborted(parsedLeft) || isAborted(parsedRight)) return INVALID;
            const merged = mergeValues(parsedLeft.value, parsedRight.value);
            if (!merged.valid) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.invalid_intersection_types
                });
                return INVALID;
            }
            if (isDirty(parsedLeft) || isDirty(parsedRight)) status.dirty();
            return {
                status: status.value,
                value: merged.data
            };
        };
        if (ctx.common.async) return Promise.all([
            this._def.left._parseAsync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx
            }),
            this._def.right._parseAsync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx
            })
        ]).then(([left, right])=>handleParsed(left, right));
        else return handleParsed(this._def.left._parseSync({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
        }), this._def.right._parseSync({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
        }));
    }
}
ZodIntersection.create = (left, right, params)=>{
    return new ZodIntersection({
        left: left,
        right: right,
        typeName: ZodFirstPartyTypeKind.ZodIntersection,
        ...processCreateParams(params)
    });
};
class ZodTuple extends ZodType {
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.array) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.array,
                received: ctx.parsedType
            });
            return INVALID;
        }
        if (ctx.data.length < this._def.items.length) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.too_small,
                minimum: this._def.items.length,
                inclusive: true,
                exact: false,
                type: "array"
            });
            return INVALID;
        }
        const rest = this._def.rest;
        if (!rest && ctx.data.length > this._def.items.length) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.too_big,
                maximum: this._def.items.length,
                inclusive: true,
                exact: false,
                type: "array"
            });
            status.dirty();
        }
        const items = [
            ...ctx.data
        ].map((item, itemIndex)=>{
            const schema = this._def.items[itemIndex] || this._def.rest;
            if (!schema) return null;
            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));
        }).filter((x)=>!!x); // filter nulls
        if (ctx.common.async) return Promise.all(items).then((results)=>{
            return ParseStatus.mergeArray(status, results);
        });
        else return ParseStatus.mergeArray(status, items);
    }
    get items() {
        return this._def.items;
    }
    rest(rest) {
        return new ZodTuple({
            ...this._def,
            rest
        });
    }
}
ZodTuple.create = (schemas, params)=>{
    if (!Array.isArray(schemas)) throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
    return new ZodTuple({
        items: schemas,
        typeName: ZodFirstPartyTypeKind.ZodTuple,
        rest: null,
        ...processCreateParams(params)
    });
};
class ZodRecord extends ZodType {
    get keySchema() {
        return this._def.keyType;
    }
    get valueSchema() {
        return this._def.valueType;
    }
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.object) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.object,
                received: ctx.parsedType
            });
            return INVALID;
        }
        const pairs = [];
        const keyType = this._def.keyType;
        const valueType = this._def.valueType;
        for(const key in ctx.data)pairs.push({
            key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),
            value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key))
        });
        if (ctx.common.async) return ParseStatus.mergeObjectAsync(status, pairs);
        else return ParseStatus.mergeObjectSync(status, pairs);
    }
    get element() {
        return this._def.valueType;
    }
    static create(first, second, third) {
        if (second instanceof ZodType) return new ZodRecord({
            keyType: first,
            valueType: second,
            typeName: ZodFirstPartyTypeKind.ZodRecord,
            ...processCreateParams(third)
        });
        return new ZodRecord({
            keyType: ZodString.create(),
            valueType: first,
            typeName: ZodFirstPartyTypeKind.ZodRecord,
            ...processCreateParams(second)
        });
    }
}
class ZodMap extends ZodType {
    get keySchema() {
        return this._def.keyType;
    }
    get valueSchema() {
        return this._def.valueType;
    }
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.map) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.map,
                received: ctx.parsedType
            });
            return INVALID;
        }
        const keyType = this._def.keyType;
        const valueType = this._def.valueType;
        const pairs = [
            ...ctx.data.entries()
        ].map(([key, value], index)=>{
            return {
                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [
                    index,
                    "key"
                ])),
                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [
                    index,
                    "value"
                ]))
            };
        });
        if (ctx.common.async) {
            const finalMap = new Map();
            return Promise.resolve().then(async ()=>{
                for (const pair of pairs){
                    const key = await pair.key;
                    const value = await pair.value;
                    if (key.status === "aborted" || value.status === "aborted") return INVALID;
                    if (key.status === "dirty" || value.status === "dirty") status.dirty();
                    finalMap.set(key.value, value.value);
                }
                return {
                    status: status.value,
                    value: finalMap
                };
            });
        } else {
            const finalMap = new Map();
            for (const pair of pairs){
                const key = pair.key;
                const value = pair.value;
                if (key.status === "aborted" || value.status === "aborted") return INVALID;
                if (key.status === "dirty" || value.status === "dirty") status.dirty();
                finalMap.set(key.value, value.value);
            }
            return {
                status: status.value,
                value: finalMap
            };
        }
    }
}
ZodMap.create = (keyType, valueType, params)=>{
    return new ZodMap({
        valueType,
        keyType,
        typeName: ZodFirstPartyTypeKind.ZodMap,
        ...processCreateParams(params)
    });
};
class ZodSet extends ZodType {
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.set) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.set,
                received: ctx.parsedType
            });
            return INVALID;
        }
        const def = this._def;
        if (def.minSize !== null) {
            if (ctx.data.size < def.minSize.value) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.too_small,
                    minimum: def.minSize.value,
                    type: "set",
                    inclusive: true,
                    exact: false,
                    message: def.minSize.message
                });
                status.dirty();
            }
        }
        if (def.maxSize !== null) {
            if (ctx.data.size > def.maxSize.value) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.too_big,
                    maximum: def.maxSize.value,
                    type: "set",
                    inclusive: true,
                    exact: false,
                    message: def.maxSize.message
                });
                status.dirty();
            }
        }
        const valueType = this._def.valueType;
        function finalizeSet(elements) {
            const parsedSet = new Set();
            for (const element of elements){
                if (element.status === "aborted") return INVALID;
                if (element.status === "dirty") status.dirty();
                parsedSet.add(element.value);
            }
            return {
                status: status.value,
                value: parsedSet
            };
        }
        const elements = [
            ...ctx.data.values()
        ].map((item, i)=>valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));
        if (ctx.common.async) return Promise.all(elements).then((elements)=>finalizeSet(elements));
        else return finalizeSet(elements);
    }
    min(minSize, message) {
        return new ZodSet({
            ...this._def,
            minSize: {
                value: minSize,
                message: errorUtil.toString(message)
            }
        });
    }
    max(maxSize, message) {
        return new ZodSet({
            ...this._def,
            maxSize: {
                value: maxSize,
                message: errorUtil.toString(message)
            }
        });
    }
    size(size, message) {
        return this.min(size, message).max(size, message);
    }
    nonempty(message) {
        return this.min(1, message);
    }
}
ZodSet.create = (valueType, params)=>{
    return new ZodSet({
        valueType,
        minSize: null,
        maxSize: null,
        typeName: ZodFirstPartyTypeKind.ZodSet,
        ...processCreateParams(params)
    });
};
class ZodFunction extends ZodType {
    constructor(){
        super(...arguments);
        this.validate = this.implement;
    }
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.function) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.function,
                received: ctx.parsedType
            });
            return INVALID;
        }
        function makeArgsIssue(args, error) {
            return makeIssue({
                data: args,
                path: ctx.path,
                errorMaps: [
                    ctx.common.contextualErrorMap,
                    ctx.schemaErrorMap,
                    getErrorMap(),
                    errorMap
                ].filter((x)=>!!x),
                issueData: {
                    code: ZodIssueCode.invalid_arguments,
                    argumentsError: error
                }
            });
        }
        function makeReturnsIssue(returns, error) {
            return makeIssue({
                data: returns,
                path: ctx.path,
                errorMaps: [
                    ctx.common.contextualErrorMap,
                    ctx.schemaErrorMap,
                    getErrorMap(),
                    errorMap
                ].filter((x)=>!!x),
                issueData: {
                    code: ZodIssueCode.invalid_return_type,
                    returnTypeError: error
                }
            });
        }
        const params = {
            errorMap: ctx.common.contextualErrorMap
        };
        const fn = ctx.data;
        if (this._def.returns instanceof ZodPromise) {
            // Would love a way to avoid disabling this rule, but we need
            // an alias (using an arrow function was what caused 2651).
            // eslint-disable-next-line @typescript-eslint/no-this-alias
            const me = this;
            return OK(async function(...args) {
                const error = new ZodError([]);
                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e)=>{
                    error.addIssue(makeArgsIssue(args, e));
                    throw error;
                });
                const result = await Reflect.apply(fn, this, parsedArgs);
                const parsedReturns = await me._def.returns._def.type.parseAsync(result, params).catch((e)=>{
                    error.addIssue(makeReturnsIssue(result, e));
                    throw error;
                });
                return parsedReturns;
            });
        } else {
            // Would love a way to avoid disabling this rule, but we need
            // an alias (using an arrow function was what caused 2651).
            // eslint-disable-next-line @typescript-eslint/no-this-alias
            const me = this;
            return OK(function(...args) {
                const parsedArgs = me._def.args.safeParse(args, params);
                if (!parsedArgs.success) throw new ZodError([
                    makeArgsIssue(args, parsedArgs.error)
                ]);
                const result = Reflect.apply(fn, this, parsedArgs.data);
                const parsedReturns = me._def.returns.safeParse(result, params);
                if (!parsedReturns.success) throw new ZodError([
                    makeReturnsIssue(result, parsedReturns.error)
                ]);
                return parsedReturns.data;
            });
        }
    }
    parameters() {
        return this._def.args;
    }
    returnType() {
        return this._def.returns;
    }
    args(...items) {
        return new ZodFunction({
            ...this._def,
            args: ZodTuple.create(items).rest(ZodUnknown.create())
        });
    }
    returns(returnType) {
        return new ZodFunction({
            ...this._def,
            returns: returnType
        });
    }
    implement(func) {
        const validatedFunc = this.parse(func);
        return validatedFunc;
    }
    strictImplement(func) {
        const validatedFunc = this.parse(func);
        return validatedFunc;
    }
    static create(args, returns, params) {
        return new ZodFunction({
            args: args ? args : ZodTuple.create([]).rest(ZodUnknown.create()),
            returns: returns || ZodUnknown.create(),
            typeName: ZodFirstPartyTypeKind.ZodFunction,
            ...processCreateParams(params)
        });
    }
}
class ZodLazy extends ZodType {
    get schema() {
        return this._def.getter();
    }
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        const lazySchema = this._def.getter();
        return lazySchema._parse({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
        });
    }
}
ZodLazy.create = (getter, params)=>{
    return new ZodLazy({
        getter: getter,
        typeName: ZodFirstPartyTypeKind.ZodLazy,
        ...processCreateParams(params)
    });
};
class ZodLiteral extends ZodType {
    _parse(input) {
        if (input.data !== this._def.value) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                received: ctx.data,
                code: ZodIssueCode.invalid_literal,
                expected: this._def.value
            });
            return INVALID;
        }
        return {
            status: "valid",
            value: input.data
        };
    }
    get value() {
        return this._def.value;
    }
}
ZodLiteral.create = (value, params)=>{
    return new ZodLiteral({
        value: value,
        typeName: ZodFirstPartyTypeKind.ZodLiteral,
        ...processCreateParams(params)
    });
};
function createZodEnum(values, params) {
    return new ZodEnum({
        values,
        typeName: ZodFirstPartyTypeKind.ZodEnum,
        ...processCreateParams(params)
    });
}
class ZodEnum extends ZodType {
    _parse(input) {
        if (typeof input.data !== "string") {
            const ctx = this._getOrReturnCtx(input);
            const expectedValues = this._def.values;
            addIssueToContext(ctx, {
                expected: util.joinValues(expectedValues),
                received: ctx.parsedType,
                code: ZodIssueCode.invalid_type
            });
            return INVALID;
        }
        if (this._def.values.indexOf(input.data) === -1) {
            const ctx = this._getOrReturnCtx(input);
            const expectedValues = this._def.values;
            addIssueToContext(ctx, {
                received: ctx.data,
                code: ZodIssueCode.invalid_enum_value,
                options: expectedValues
            });
            return INVALID;
        }
        return OK(input.data);
    }
    get options() {
        return this._def.values;
    }
    get enum() {
        const enumValues = {};
        for (const val of this._def.values)enumValues[val] = val;
        return enumValues;
    }
    get Values() {
        const enumValues = {};
        for (const val of this._def.values)enumValues[val] = val;
        return enumValues;
    }
    get Enum() {
        const enumValues = {};
        for (const val of this._def.values)enumValues[val] = val;
        return enumValues;
    }
    extract(values) {
        return ZodEnum.create(values);
    }
    exclude(values) {
        return ZodEnum.create(this.options.filter((opt)=>!values.includes(opt)));
    }
}
ZodEnum.create = createZodEnum;
class ZodNativeEnum extends ZodType {
    _parse(input) {
        const nativeEnumValues = util.getValidEnumValues(this._def.values);
        const ctx = this._getOrReturnCtx(input);
        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {
            const expectedValues = util.objectValues(nativeEnumValues);
            addIssueToContext(ctx, {
                expected: util.joinValues(expectedValues),
                received: ctx.parsedType,
                code: ZodIssueCode.invalid_type
            });
            return INVALID;
        }
        if (nativeEnumValues.indexOf(input.data) === -1) {
            const expectedValues = util.objectValues(nativeEnumValues);
            addIssueToContext(ctx, {
                received: ctx.data,
                code: ZodIssueCode.invalid_enum_value,
                options: expectedValues
            });
            return INVALID;
        }
        return OK(input.data);
    }
    get enum() {
        return this._def.values;
    }
}
ZodNativeEnum.create = (values, params)=>{
    return new ZodNativeEnum({
        values: values,
        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,
        ...processCreateParams(params)
    });
};
class ZodPromise extends ZodType {
    unwrap() {
        return this._def.type;
    }
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.promise,
                received: ctx.parsedType
            });
            return INVALID;
        }
        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);
        return OK(promisified.then((data)=>{
            return this._def.type.parseAsync(data, {
                path: ctx.path,
                errorMap: ctx.common.contextualErrorMap
            });
        }));
    }
}
ZodPromise.create = (schema, params)=>{
    return new ZodPromise({
        type: schema,
        typeName: ZodFirstPartyTypeKind.ZodPromise,
        ...processCreateParams(params)
    });
};
class ZodEffects extends ZodType {
    innerType() {
        return this._def.schema;
    }
    sourceType() {
        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
    }
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        const effect = this._def.effect || null;
        const checkCtx = {
            addIssue: (arg)=>{
                addIssueToContext(ctx, arg);
                if (arg.fatal) status.abort();
                else status.dirty();
            },
            get path () {
                return ctx.path;
            }
        };
        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);
        if (effect.type === "preprocess") {
            const processed = effect.transform(ctx.data, checkCtx);
            if (ctx.common.issues.length) return {
                status: "dirty",
                value: ctx.data
            };
            if (ctx.common.async) return Promise.resolve(processed).then((processed)=>{
                return this._def.schema._parseAsync({
                    data: processed,
                    path: ctx.path,
                    parent: ctx
                });
            });
            else return this._def.schema._parseSync({
                data: processed,
                path: ctx.path,
                parent: ctx
            });
        }
        if (effect.type === "refinement") {
            const executeRefinement = (acc)=>{
                const result = effect.refinement(acc, checkCtx);
                if (ctx.common.async) return Promise.resolve(result);
                if (result instanceof Promise) throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
                return acc;
            };
            if (ctx.common.async === false) {
                const inner = this._def.schema._parseSync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: ctx
                });
                if (inner.status === "aborted") return INVALID;
                if (inner.status === "dirty") status.dirty();
                // return value is ignored
                executeRefinement(inner.value);
                return {
                    status: status.value,
                    value: inner.value
                };
            } else return this._def.schema._parseAsync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx
            }).then((inner)=>{
                if (inner.status === "aborted") return INVALID;
                if (inner.status === "dirty") status.dirty();
                return executeRefinement(inner.value).then(()=>{
                    return {
                        status: status.value,
                        value: inner.value
                    };
                });
            });
        }
        if (effect.type === "transform") {
            if (ctx.common.async === false) {
                const base = this._def.schema._parseSync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: ctx
                });
                if (!isValid(base)) return base;
                const result = effect.transform(base.value, checkCtx);
                if (result instanceof Promise) throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);
                return {
                    status: status.value,
                    value: result
                };
            } else return this._def.schema._parseAsync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx
            }).then((base)=>{
                if (!isValid(base)) return base;
                return Promise.resolve(effect.transform(base.value, checkCtx)).then((result)=>({
                        status: status.value,
                        value: result
                    }));
            });
        }
        util.assertNever(effect);
    }
}
ZodEffects.create = (schema, effect, params)=>{
    return new ZodEffects({
        schema,
        typeName: ZodFirstPartyTypeKind.ZodEffects,
        effect,
        ...processCreateParams(params)
    });
};
ZodEffects.createWithPreprocess = (preprocess, schema, params)=>{
    return new ZodEffects({
        schema,
        effect: {
            type: "preprocess",
            transform: preprocess
        },
        typeName: ZodFirstPartyTypeKind.ZodEffects,
        ...processCreateParams(params)
    });
};
class ZodOptional extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType === ZodParsedType.undefined) return OK(undefined);
        return this._def.innerType._parse(input);
    }
    unwrap() {
        return this._def.innerType;
    }
}
ZodOptional.create = (type, params)=>{
    return new ZodOptional({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodOptional,
        ...processCreateParams(params)
    });
};
class ZodNullable extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType === ZodParsedType.null) return OK(null);
        return this._def.innerType._parse(input);
    }
    unwrap() {
        return this._def.innerType;
    }
}
ZodNullable.create = (type, params)=>{
    return new ZodNullable({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodNullable,
        ...processCreateParams(params)
    });
};
class ZodDefault extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        let data = ctx.data;
        if (ctx.parsedType === ZodParsedType.undefined) data = this._def.defaultValue();
        return this._def.innerType._parse({
            data,
            path: ctx.path,
            parent: ctx
        });
    }
    removeDefault() {
        return this._def.innerType;
    }
}
ZodDefault.create = (type, params)=>{
    return new ZodDefault({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodDefault,
        defaultValue: typeof params.default === "function" ? params.default : ()=>params.default,
        ...processCreateParams(params)
    });
};
class ZodCatch extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        // newCtx is used to not collect issues from inner types in ctx
        const newCtx = {
            ...ctx,
            common: {
                ...ctx.common,
                issues: []
            }
        };
        const result = this._def.innerType._parse({
            data: newCtx.data,
            path: newCtx.path,
            parent: {
                ...newCtx
            }
        });
        if (isAsync(result)) return result.then((result)=>{
            return {
                status: "valid",
                value: result.status === "valid" ? result.value : this._def.catchValue({
                    get error () {
                        return new ZodError(newCtx.common.issues);
                    },
                    input: newCtx.data
                })
            };
        });
        else return {
            status: "valid",
            value: result.status === "valid" ? result.value : this._def.catchValue({
                get error () {
                    return new ZodError(newCtx.common.issues);
                },
                input: newCtx.data
            })
        };
    }
    removeCatch() {
        return this._def.innerType;
    }
}
ZodCatch.create = (type, params)=>{
    return new ZodCatch({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodCatch,
        catchValue: typeof params.catch === "function" ? params.catch : ()=>params.catch,
        ...processCreateParams(params)
    });
};
class ZodNaN extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.nan) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.nan,
                received: ctx.parsedType
            });
            return INVALID;
        }
        return {
            status: "valid",
            value: input.data
        };
    }
}
ZodNaN.create = (params)=>{
    return new ZodNaN({
        typeName: ZodFirstPartyTypeKind.ZodNaN,
        ...processCreateParams(params)
    });
};
const BRAND = Symbol("zod_brand");
class ZodBranded extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        const data = ctx.data;
        return this._def.type._parse({
            data,
            path: ctx.path,
            parent: ctx
        });
    }
    unwrap() {
        return this._def.type;
    }
}
class ZodPipeline extends ZodType {
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.common.async) {
            const handleAsync = async ()=>{
                const inResult = await this._def.in._parseAsync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: ctx
                });
                if (inResult.status === "aborted") return INVALID;
                if (inResult.status === "dirty") {
                    status.dirty();
                    return DIRTY(inResult.value);
                } else return this._def.out._parseAsync({
                    data: inResult.value,
                    path: ctx.path,
                    parent: ctx
                });
            };
            return handleAsync();
        } else {
            const inResult = this._def.in._parseSync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx
            });
            if (inResult.status === "aborted") return INVALID;
            if (inResult.status === "dirty") {
                status.dirty();
                return {
                    status: "dirty",
                    value: inResult.value
                };
            } else return this._def.out._parseSync({
                data: inResult.value,
                path: ctx.path,
                parent: ctx
            });
        }
    }
    static create(a, b) {
        return new ZodPipeline({
            in: a,
            out: b,
            typeName: ZodFirstPartyTypeKind.ZodPipeline
        });
    }
}
class ZodReadonly extends ZodType {
    _parse(input) {
        const result = this._def.innerType._parse(input);
        if (isValid(result)) result.value = Object.freeze(result.value);
        return result;
    }
}
ZodReadonly.create = (type, params)=>{
    return new ZodReadonly({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodReadonly,
        ...processCreateParams(params)
    });
};
const custom = (check, params = {}, /**
 * @deprecated
 *
 * Pass `fatal` into the params object instead:
 *
 * ```ts
 * z.string().custom((val) => val.length > 5, { fatal: false })
 * ```
 *
 */ fatal)=>{
    if (check) return ZodAny.create().superRefine((data, ctx)=>{
        var _a, _b;
        if (!check(data)) {
            const p = typeof params === "function" ? params(data) : typeof params === "string" ? {
                message: params
            } : params;
            const _fatal = (_b = (_a = p.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;
            const p2 = typeof p === "string" ? {
                message: p
            } : p;
            ctx.addIssue({
                code: "custom",
                ...p2,
                fatal: _fatal
            });
        }
    });
    return ZodAny.create();
};
const late = {
    object: ZodObject.lazycreate
};
var ZodFirstPartyTypeKind;
(function(ZodFirstPartyTypeKind) {
    ZodFirstPartyTypeKind["ZodString"] = "ZodString";
    ZodFirstPartyTypeKind["ZodNumber"] = "ZodNumber";
    ZodFirstPartyTypeKind["ZodNaN"] = "ZodNaN";
    ZodFirstPartyTypeKind["ZodBigInt"] = "ZodBigInt";
    ZodFirstPartyTypeKind["ZodBoolean"] = "ZodBoolean";
    ZodFirstPartyTypeKind["ZodDate"] = "ZodDate";
    ZodFirstPartyTypeKind["ZodSymbol"] = "ZodSymbol";
    ZodFirstPartyTypeKind["ZodUndefined"] = "ZodUndefined";
    ZodFirstPartyTypeKind["ZodNull"] = "ZodNull";
    ZodFirstPartyTypeKind["ZodAny"] = "ZodAny";
    ZodFirstPartyTypeKind["ZodUnknown"] = "ZodUnknown";
    ZodFirstPartyTypeKind["ZodNever"] = "ZodNever";
    ZodFirstPartyTypeKind["ZodVoid"] = "ZodVoid";
    ZodFirstPartyTypeKind["ZodArray"] = "ZodArray";
    ZodFirstPartyTypeKind["ZodObject"] = "ZodObject";
    ZodFirstPartyTypeKind["ZodUnion"] = "ZodUnion";
    ZodFirstPartyTypeKind["ZodDiscriminatedUnion"] = "ZodDiscriminatedUnion";
    ZodFirstPartyTypeKind["ZodIntersection"] = "ZodIntersection";
    ZodFirstPartyTypeKind["ZodTuple"] = "ZodTuple";
    ZodFirstPartyTypeKind["ZodRecord"] = "ZodRecord";
    ZodFirstPartyTypeKind["ZodMap"] = "ZodMap";
    ZodFirstPartyTypeKind["ZodSet"] = "ZodSet";
    ZodFirstPartyTypeKind["ZodFunction"] = "ZodFunction";
    ZodFirstPartyTypeKind["ZodLazy"] = "ZodLazy";
    ZodFirstPartyTypeKind["ZodLiteral"] = "ZodLiteral";
    ZodFirstPartyTypeKind["ZodEnum"] = "ZodEnum";
    ZodFirstPartyTypeKind["ZodEffects"] = "ZodEffects";
    ZodFirstPartyTypeKind["ZodNativeEnum"] = "ZodNativeEnum";
    ZodFirstPartyTypeKind["ZodOptional"] = "ZodOptional";
    ZodFirstPartyTypeKind["ZodNullable"] = "ZodNullable";
    ZodFirstPartyTypeKind["ZodDefault"] = "ZodDefault";
    ZodFirstPartyTypeKind["ZodCatch"] = "ZodCatch";
    ZodFirstPartyTypeKind["ZodPromise"] = "ZodPromise";
    ZodFirstPartyTypeKind["ZodBranded"] = "ZodBranded";
    ZodFirstPartyTypeKind["ZodPipeline"] = "ZodPipeline";
    ZodFirstPartyTypeKind["ZodReadonly"] = "ZodReadonly";
})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));
const instanceOfType = (// const instanceOfType = <T extends new (...args: any[]) => any>(
cls, params = {
    message: `Input not instance of ${cls.name}`
})=>custom((data)=>data instanceof cls, params);
const stringType = ZodString.create;
const numberType = ZodNumber.create;
const nanType = ZodNaN.create;
const bigIntType = ZodBigInt.create;
const booleanType = ZodBoolean.create;
const dateType = ZodDate.create;
const symbolType = ZodSymbol.create;
const undefinedType = ZodUndefined.create;
const nullType = ZodNull.create;
const anyType = ZodAny.create;
const unknownType = ZodUnknown.create;
const neverType = ZodNever.create;
const voidType = ZodVoid.create;
const arrayType = ZodArray.create;
const objectType = ZodObject.create;
const strictObjectType = ZodObject.strictCreate;
const unionType = ZodUnion.create;
const discriminatedUnionType = ZodDiscriminatedUnion.create;
const intersectionType = ZodIntersection.create;
const tupleType = ZodTuple.create;
const recordType = ZodRecord.create;
const mapType = ZodMap.create;
const setType = ZodSet.create;
const functionType = ZodFunction.create;
const lazyType = ZodLazy.create;
const literalType = ZodLiteral.create;
const enumType = ZodEnum.create;
const nativeEnumType = ZodNativeEnum.create;
const promiseType = ZodPromise.create;
const effectsType = ZodEffects.create;
const optionalType = ZodOptional.create;
const nullableType = ZodNullable.create;
const preprocessType = ZodEffects.createWithPreprocess;
const pipelineType = ZodPipeline.create;
const ostring = ()=>stringType().optional();
const onumber = ()=>numberType().optional();
const oboolean = ()=>booleanType().optional();
const coerce = {
    string: (arg)=>ZodString.create({
            ...arg,
            coerce: true
        }),
    number: (arg)=>ZodNumber.create({
            ...arg,
            coerce: true
        }),
    boolean: (arg)=>ZodBoolean.create({
            ...arg,
            coerce: true
        }),
    bigint: (arg)=>ZodBigInt.create({
            ...arg,
            coerce: true
        }),
    date: (arg)=>ZodDate.create({
            ...arg,
            coerce: true
        })
};
const NEVER = INVALID;
var z = /*#__PURE__*/ Object.freeze({
    __proto__: null,
    defaultErrorMap: errorMap,
    setErrorMap: setErrorMap,
    getErrorMap: getErrorMap,
    makeIssue: makeIssue,
    EMPTY_PATH: EMPTY_PATH,
    addIssueToContext: addIssueToContext,
    ParseStatus: ParseStatus,
    INVALID: INVALID,
    DIRTY: DIRTY,
    OK: OK,
    isAborted: isAborted,
    isDirty: isDirty,
    isValid: isValid,
    isAsync: isAsync,
    get util () {
        return util;
    },
    get objectUtil () {
        return objectUtil;
    },
    ZodParsedType: ZodParsedType,
    getParsedType: getParsedType,
    ZodType: ZodType,
    ZodString: ZodString,
    ZodNumber: ZodNumber,
    ZodBigInt: ZodBigInt,
    ZodBoolean: ZodBoolean,
    ZodDate: ZodDate,
    ZodSymbol: ZodSymbol,
    ZodUndefined: ZodUndefined,
    ZodNull: ZodNull,
    ZodAny: ZodAny,
    ZodUnknown: ZodUnknown,
    ZodNever: ZodNever,
    ZodVoid: ZodVoid,
    ZodArray: ZodArray,
    ZodObject: ZodObject,
    ZodUnion: ZodUnion,
    ZodDiscriminatedUnion: ZodDiscriminatedUnion,
    ZodIntersection: ZodIntersection,
    ZodTuple: ZodTuple,
    ZodRecord: ZodRecord,
    ZodMap: ZodMap,
    ZodSet: ZodSet,
    ZodFunction: ZodFunction,
    ZodLazy: ZodLazy,
    ZodLiteral: ZodLiteral,
    ZodEnum: ZodEnum,
    ZodNativeEnum: ZodNativeEnum,
    ZodPromise: ZodPromise,
    ZodEffects: ZodEffects,
    ZodTransformer: ZodEffects,
    ZodOptional: ZodOptional,
    ZodNullable: ZodNullable,
    ZodDefault: ZodDefault,
    ZodCatch: ZodCatch,
    ZodNaN: ZodNaN,
    BRAND: BRAND,
    ZodBranded: ZodBranded,
    ZodPipeline: ZodPipeline,
    ZodReadonly: ZodReadonly,
    custom: custom,
    Schema: ZodType,
    ZodSchema: ZodType,
    late: late,
    get ZodFirstPartyTypeKind () {
        return ZodFirstPartyTypeKind;
    },
    coerce: coerce,
    any: anyType,
    array: arrayType,
    bigint: bigIntType,
    boolean: booleanType,
    date: dateType,
    discriminatedUnion: discriminatedUnionType,
    effect: effectsType,
    "enum": enumType,
    "function": functionType,
    "instanceof": instanceOfType,
    intersection: intersectionType,
    lazy: lazyType,
    literal: literalType,
    map: mapType,
    nan: nanType,
    nativeEnum: nativeEnumType,
    never: neverType,
    "null": nullType,
    nullable: nullableType,
    number: numberType,
    object: objectType,
    oboolean: oboolean,
    onumber: onumber,
    optional: optionalType,
    ostring: ostring,
    pipeline: pipelineType,
    preprocess: preprocessType,
    promise: promiseType,
    record: recordType,
    set: setType,
    strictObject: strictObjectType,
    string: stringType,
    symbol: symbolType,
    transformer: effectsType,
    tuple: tupleType,
    "undefined": undefinedType,
    union: unionType,
    unknown: unknownType,
    "void": voidType,
    NEVER: NEVER,
    ZodIssueCode: ZodIssueCode,
    quotelessJson: quotelessJson,
    ZodError: ZodError
});

},{"@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"72W9U":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseAnyDef = void 0;
function parseAnyDef() {
    return {};
}
exports.parseAnyDef = parseAnyDef;

},{}],"97Kb7":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseArrayDef = void 0;
const zod_1 = require("fb4ec2548b9d6674");
const errorMessages_1 = require("a84ee46ecf9c1201");
const parseDef_1 = require("340829df951a846");
function parseArrayDef(def, refs) {
    var _a, _b;
    const res = {
        type: "array"
    };
    if (((_b = (_a = def.type) === null || _a === void 0 ? void 0 : _a._def) === null || _b === void 0 ? void 0 : _b.typeName) !== zod_1.ZodFirstPartyTypeKind.ZodAny) res.items = (0, parseDef_1.parseDef)(def.type._def, Object.assign(Object.assign({}, refs), {
        currentPath: [
            ...refs.currentPath,
            "items"
        ]
    }));
    if (def.minLength) (0, errorMessages_1.setResponseValueAndErrors)(res, "minItems", def.minLength.value, def.minLength.message, refs);
    if (def.maxLength) (0, errorMessages_1.setResponseValueAndErrors)(res, "maxItems", def.maxLength.value, def.maxLength.message, refs);
    if (def.exactLength) {
        (0, errorMessages_1.setResponseValueAndErrors)(res, "minItems", def.exactLength.value, def.exactLength.message, refs);
        (0, errorMessages_1.setResponseValueAndErrors)(res, "maxItems", def.exactLength.value, def.exactLength.message, refs);
    }
    return res;
}
exports.parseArrayDef = parseArrayDef;

},{"fb4ec2548b9d6674":"fCaTr","a84ee46ecf9c1201":"i8Sz1","340829df951a846":"4IhsI"}],"i8Sz1":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setResponseValueAndErrors = exports.addErrorMessage = void 0;
function addErrorMessage(res, key, errorMessage, refs) {
    if (!(refs === null || refs === void 0 ? void 0 : refs.errorMessages)) return;
    if (errorMessage) res.errorMessage = Object.assign(Object.assign({}, res.errorMessage), {
        [key]: errorMessage
    });
}
exports.addErrorMessage = addErrorMessage;
function setResponseValueAndErrors(res, key, value, errorMessage, refs) {
    res[key] = value;
    addErrorMessage(res, key, errorMessage, refs);
}
exports.setResponseValueAndErrors = setResponseValueAndErrors;

},{}],"5dM0r":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseBigintDef = void 0;
const errorMessages_1 = require("23e7165ea9ca88a3");
function parseBigintDef(def, refs) {
    const res = {
        type: "integer",
        format: "int64"
    };
    if (!def.checks) return res;
    for (const check of def.checks)switch(check.kind){
        case "min":
            if (refs.target === "jsonSchema7") {
                if (check.inclusive) (0, errorMessages_1.setResponseValueAndErrors)(res, "minimum", check.value, check.message, refs);
                else (0, errorMessages_1.setResponseValueAndErrors)(res, "exclusiveMinimum", check.value, check.message, refs);
            } else {
                if (!check.inclusive) res.exclusiveMinimum = true;
                (0, errorMessages_1.setResponseValueAndErrors)(res, "minimum", check.value, check.message, refs);
            }
            break;
        case "max":
            if (refs.target === "jsonSchema7") {
                if (check.inclusive) (0, errorMessages_1.setResponseValueAndErrors)(res, "maximum", check.value, check.message, refs);
                else (0, errorMessages_1.setResponseValueAndErrors)(res, "exclusiveMaximum", check.value, check.message, refs);
            } else {
                if (!check.inclusive) res.exclusiveMaximum = true;
                (0, errorMessages_1.setResponseValueAndErrors)(res, "maximum", check.value, check.message, refs);
            }
            break;
        case "multipleOf":
            (0, errorMessages_1.setResponseValueAndErrors)(res, "multipleOf", check.value, check.message, refs);
            break;
    }
    return res;
}
exports.parseBigintDef = parseBigintDef;

},{"23e7165ea9ca88a3":"i8Sz1"}],"1WHfS":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseBooleanDef = void 0;
function parseBooleanDef() {
    return {
        type: "boolean"
    };
}
exports.parseBooleanDef = parseBooleanDef;

},{}],"luaaW":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseBrandedDef = void 0;
const parseDef_1 = require("e031de3c1bc7d287");
function parseBrandedDef(_def, refs) {
    return (0, parseDef_1.parseDef)(_def.type._def, refs);
}
exports.parseBrandedDef = parseBrandedDef;

},{"e031de3c1bc7d287":"4IhsI"}],"f78t4":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseCatchDef = void 0;
const parseDef_1 = require("9aec9659c444bf3b");
const parseCatchDef = (def, refs)=>{
    return (0, parseDef_1.parseDef)(def.innerType._def, refs);
};
exports.parseCatchDef = parseCatchDef;

},{"9aec9659c444bf3b":"4IhsI"}],"jSMLl":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseDateDef = void 0;
const errorMessages_1 = require("a817be22288cd1b3");
function parseDateDef(def, refs) {
    if (refs.dateStrategy == "integer") return integerDateParser(def, refs);
    else return {
        type: "string",
        format: "date-time"
    };
}
exports.parseDateDef = parseDateDef;
const integerDateParser = (def, refs)=>{
    const res = {
        type: "integer",
        format: "unix-time"
    };
    for (const check of def.checks)switch(check.kind){
        case "min":
            if (refs.target === "jsonSchema7") (0, errorMessages_1.setResponseValueAndErrors)(res, "minimum", check.value, check.message, refs);
            break;
        case "max":
            if (refs.target === "jsonSchema7") (0, errorMessages_1.setResponseValueAndErrors)(res, "maximum", check.value, check.message, refs);
            break;
    }
    return res;
};

},{"a817be22288cd1b3":"i8Sz1"}],"4x4ii":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseDefaultDef = void 0;
const parseDef_1 = require("7b280dd16c5708d5");
function parseDefaultDef(_def, refs) {
    return Object.assign(Object.assign({}, (0, parseDef_1.parseDef)(_def.innerType._def, refs)), {
        default: _def.defaultValue()
    });
}
exports.parseDefaultDef = parseDefaultDef;

},{"7b280dd16c5708d5":"4IhsI"}],"hBCKv":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseEffectsDef = void 0;
const parseDef_1 = require("6c2996b7be2f96b5");
function parseEffectsDef(_def, refs) {
    return refs.effectStrategy === "input" ? (0, parseDef_1.parseDef)(_def.schema._def, refs) : {};
}
exports.parseEffectsDef = parseEffectsDef;

},{"6c2996b7be2f96b5":"4IhsI"}],"65lgD":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseEnumDef = void 0;
function parseEnumDef(def) {
    return {
        type: "string",
        enum: def.values
    };
}
exports.parseEnumDef = parseEnumDef;

},{}],"gpAQe":[function(require,module,exports) {
"use strict";
var __rest = this && this.__rest || function(s, e) {
    var t = {};
    for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function") {
        for(var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++)if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
    }
    return t;
};
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseIntersectionDef = void 0;
const parseDef_1 = require("fa83c4ecb8f976a2");
const isJsonSchema7AllOfType = (type)=>{
    if ("type" in type && type.type === "string") return false;
    return "allOf" in type;
};
function parseIntersectionDef(def, refs) {
    const allOf = [
        (0, parseDef_1.parseDef)(def.left._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "allOf",
                "0"
            ]
        })),
        (0, parseDef_1.parseDef)(def.right._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "allOf",
                "1"
            ]
        }))
    ].filter((x)=>!!x);
    let unevaluatedProperties = refs.target === "jsonSchema2019-09" ? {
        unevaluatedProperties: false
    } : undefined;
    const mergedAllOf = [];
    // If either of the schemas is an allOf, merge them into a single allOf
    allOf.forEach((schema)=>{
        if (isJsonSchema7AllOfType(schema)) {
            mergedAllOf.push(...schema.allOf);
            if (schema.unevaluatedProperties === undefined) // If one of the schemas has no unevaluatedProperties set,
            // the merged schema should also have no unevaluatedProperties set
            unevaluatedProperties = undefined;
        } else {
            let nestedSchema = schema;
            if ("additionalProperties" in schema && schema.additionalProperties === false) {
                const { additionalProperties } = schema, rest = __rest(schema, [
                    "additionalProperties"
                ]);
                nestedSchema = rest;
            } else // As soon as one of the schemas has additionalProperties set not to false, we allow unevaluatedProperties
            unevaluatedProperties = undefined;
            mergedAllOf.push(nestedSchema);
        }
    });
    return mergedAllOf.length ? Object.assign({
        allOf: mergedAllOf
    }, unevaluatedProperties) : undefined;
}
exports.parseIntersectionDef = parseIntersectionDef;

},{"fa83c4ecb8f976a2":"4IhsI"}],"a9N3B":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseLiteralDef = void 0;
function parseLiteralDef(def, refs) {
    const parsedType = typeof def.value;
    if (parsedType !== "bigint" && parsedType !== "number" && parsedType !== "boolean" && parsedType !== "string") return {
        type: Array.isArray(def.value) ? "array" : "object"
    };
    if (refs.target === "openApi3") return {
        type: parsedType === "bigint" ? "integer" : parsedType,
        enum: [
            def.value
        ]
    };
    return {
        type: parsedType === "bigint" ? "integer" : parsedType,
        const: def.value
    };
}
exports.parseLiteralDef = parseLiteralDef;

},{}],"1jaDz":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseMapDef = void 0;
const parseDef_1 = require("eaf24d828bcf3bc");
function parseMapDef(def, refs) {
    const keys = (0, parseDef_1.parseDef)(def.keyType._def, Object.assign(Object.assign({}, refs), {
        currentPath: [
            ...refs.currentPath,
            "items",
            "items",
            "0"
        ]
    })) || {};
    const values = (0, parseDef_1.parseDef)(def.valueType._def, Object.assign(Object.assign({}, refs), {
        currentPath: [
            ...refs.currentPath,
            "items",
            "items",
            "1"
        ]
    })) || {};
    return {
        type: "array",
        maxItems: 125,
        items: {
            type: "array",
            items: [
                keys,
                values
            ],
            minItems: 2,
            maxItems: 2
        }
    };
}
exports.parseMapDef = parseMapDef;

},{"eaf24d828bcf3bc":"4IhsI"}],"lF4Ew":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseNativeEnumDef = void 0;
function parseNativeEnumDef(def) {
    const object = def.values;
    const actualKeys = Object.keys(def.values).filter((key)=>{
        return typeof object[object[key]] !== "number";
    });
    const actualValues = actualKeys.map((key)=>object[key]);
    const parsedTypes = Array.from(new Set(actualValues.map((values)=>typeof values)));
    return {
        type: parsedTypes.length === 1 ? parsedTypes[0] === "string" ? "string" : "number" : [
            "string",
            "number"
        ],
        enum: actualValues
    };
}
exports.parseNativeEnumDef = parseNativeEnumDef;

},{}],"brkWT":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseNeverDef = void 0;
function parseNeverDef() {
    return {
        not: {}
    };
}
exports.parseNeverDef = parseNeverDef;

},{}],"55HHe":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseNullDef = void 0;
function parseNullDef(refs) {
    return refs.target === "openApi3" ? {
        enum: [
            "null"
        ],
        nullable: true
    } : {
        type: "null"
    };
}
exports.parseNullDef = parseNullDef;

},{}],"fqZ7A":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseNullableDef = void 0;
const parseDef_1 = require("e8b44c3a0bc32543");
const union_1 = require("889799e4e2502515");
function parseNullableDef(def, refs) {
    if ([
        "ZodString",
        "ZodNumber",
        "ZodBigInt",
        "ZodBoolean",
        "ZodNull"
    ].includes(def.innerType._def.typeName) && (!def.innerType._def.checks || !def.innerType._def.checks.length)) {
        if (refs.target === "openApi3") return {
            type: union_1.primitiveMappings[def.innerType._def.typeName],
            nullable: true
        };
        return {
            type: [
                union_1.primitiveMappings[def.innerType._def.typeName],
                "null"
            ]
        };
    }
    if (refs.target === "openApi3") {
        const base = (0, parseDef_1.parseDef)(def.innerType._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath
            ]
        }));
        return base && Object.assign(Object.assign({}, base), {
            nullable: true
        });
    }
    const base = (0, parseDef_1.parseDef)(def.innerType._def, Object.assign(Object.assign({}, refs), {
        currentPath: [
            ...refs.currentPath,
            "anyOf",
            "0"
        ]
    }));
    return base && {
        anyOf: [
            base,
            {
                type: "null"
            }
        ]
    };
}
exports.parseNullableDef = parseNullableDef;

},{"e8b44c3a0bc32543":"4IhsI","889799e4e2502515":"b9WFY"}],"b9WFY":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseUnionDef = exports.primitiveMappings = void 0;
const parseDef_1 = require("2ede1d43eee1b910");
exports.primitiveMappings = {
    ZodString: "string",
    ZodNumber: "number",
    ZodBigInt: "integer",
    ZodBoolean: "boolean",
    ZodNull: "null"
};
function parseUnionDef(def, refs) {
    if (refs.target === "openApi3") return asAnyOf(def, refs);
    const options = def.options instanceof Map ? Array.from(def.options.values()) : def.options;
    // This blocks tries to look ahead a bit to produce nicer looking schemas with type array instead of anyOf.
    if (options.every((x)=>x._def.typeName in exports.primitiveMappings && (!x._def.checks || !x._def.checks.length))) {
        // all types in union are primitive and lack checks, so might as well squash into {type: [...]}
        const types = options.reduce((types, x)=>{
            const type = exports.primitiveMappings[x._def.typeName]; //Can be safely casted due to row 43
            return type && !types.includes(type) ? [
                ...types,
                type
            ] : types;
        }, []);
        return {
            type: types.length > 1 ? types : types[0]
        };
    } else if (options.every((x)=>x._def.typeName === "ZodLiteral" && !x.description)) {
        // all options literals
        const types = options.reduce((acc, x)=>{
            const type = typeof x._def.value;
            switch(type){
                case "string":
                case "number":
                case "boolean":
                    return [
                        ...acc,
                        type
                    ];
                case "bigint":
                    return [
                        ...acc,
                        "integer"
                    ];
                case "object":
                    if (x._def.value === null) return [
                        ...acc,
                        "null"
                    ];
                case "symbol":
                case "undefined":
                case "function":
                default:
                    return acc;
            }
        }, []);
        if (types.length === options.length) {
            // all the literals are primitive, as far as null can be considered primitive
            const uniqueTypes = types.filter((x, i, a)=>a.indexOf(x) === i);
            return {
                type: uniqueTypes.length > 1 ? uniqueTypes : uniqueTypes[0],
                enum: options.reduce((acc, x)=>{
                    return acc.includes(x._def.value) ? acc : [
                        ...acc,
                        x._def.value
                    ];
                }, [])
            };
        }
    } else if (options.every((x)=>x._def.typeName === "ZodEnum")) return {
        type: "string",
        enum: options.reduce((acc, x)=>[
                ...acc,
                ...x._def.values.filter((x)=>!acc.includes(x))
            ], [])
    };
    return asAnyOf(def, refs);
}
exports.parseUnionDef = parseUnionDef;
const asAnyOf = (def, refs)=>{
    const anyOf = (def.options instanceof Map ? Array.from(def.options.values()) : def.options).map((x, i)=>(0, parseDef_1.parseDef)(x._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "anyOf",
                `${i}`
            ]
        }))).filter((x)=>!!x && (!refs.strictUnions || typeof x === "object" && Object.keys(x).length > 0));
    return anyOf.length ? {
        anyOf
    } : undefined;
};

},{"2ede1d43eee1b910":"4IhsI"}],"65oXZ":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseNumberDef = void 0;
const errorMessages_1 = require("e81719a59e3d5de6");
function parseNumberDef(def, refs) {
    const res = {
        type: "number"
    };
    if (!def.checks) return res;
    for (const check of def.checks)switch(check.kind){
        case "int":
            res.type = "integer";
            (0, errorMessages_1.addErrorMessage)(res, "type", check.message, refs);
            break;
        case "min":
            if (refs.target === "jsonSchema7") {
                if (check.inclusive) (0, errorMessages_1.setResponseValueAndErrors)(res, "minimum", check.value, check.message, refs);
                else (0, errorMessages_1.setResponseValueAndErrors)(res, "exclusiveMinimum", check.value, check.message, refs);
            } else {
                if (!check.inclusive) res.exclusiveMinimum = true;
                (0, errorMessages_1.setResponseValueAndErrors)(res, "minimum", check.value, check.message, refs);
            }
            break;
        case "max":
            if (refs.target === "jsonSchema7") {
                if (check.inclusive) (0, errorMessages_1.setResponseValueAndErrors)(res, "maximum", check.value, check.message, refs);
                else (0, errorMessages_1.setResponseValueAndErrors)(res, "exclusiveMaximum", check.value, check.message, refs);
            } else {
                if (!check.inclusive) res.exclusiveMaximum = true;
                (0, errorMessages_1.setResponseValueAndErrors)(res, "maximum", check.value, check.message, refs);
            }
            break;
        case "multipleOf":
            (0, errorMessages_1.setResponseValueAndErrors)(res, "multipleOf", check.value, check.message, refs);
            break;
    }
    return res;
}
exports.parseNumberDef = parseNumberDef;

},{"e81719a59e3d5de6":"i8Sz1"}],"jF8IM":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseObjectDef = exports.parseObjectDefX = void 0;
const parseDef_1 = require("3f9871bbd68b5ed2");
function parseObjectDefX(def, refs) {
    var _a, _b;
    Object.keys(def.shape()).reduce((schema, key)=>{
        let prop = def.shape()[key];
        const isOptional = prop.isOptional();
        if (!isOptional) prop = Object.assign({}, prop._def.innerSchema);
        const propSchema = (0, parseDef_1.parseDef)(prop._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "properties",
                key
            ],
            propertyPath: [
                ...refs.currentPath,
                "properties",
                key
            ]
        }));
        if (propSchema !== undefined) {
            schema.properties[key] = propSchema;
            if (!isOptional) {
                if (!schema.required) schema.required = [];
                schema.required.push(key);
            }
        }
        return schema;
    }, {
        type: "object",
        properties: {},
        additionalProperties: def.catchall._def.typeName === "ZodNever" ? def.unknownKeys === "passthrough" : (_a = (0, parseDef_1.parseDef)(def.catchall._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "additionalProperties"
            ]
        }))) !== null && _a !== void 0 ? _a : true
    });
    const result = Object.assign(Object.assign({
        type: "object"
    }, Object.entries(def.shape()).reduce((acc, [propName, propDef])=>{
        if (propDef === undefined || propDef._def === undefined) return acc;
        const parsedDef = (0, parseDef_1.parseDef)(propDef._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "properties",
                propName
            ],
            propertyPath: [
                ...refs.currentPath,
                "properties",
                propName
            ]
        }));
        if (parsedDef === undefined) return acc;
        return {
            properties: Object.assign(Object.assign({}, acc.properties), {
                [propName]: parsedDef
            }),
            required: propDef.isOptional() ? acc.required : [
                ...acc.required,
                propName
            ]
        };
    }, {
        properties: {},
        required: []
    })), {
        additionalProperties: def.catchall._def.typeName === "ZodNever" ? def.unknownKeys === "passthrough" : (_b = (0, parseDef_1.parseDef)(def.catchall._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "additionalProperties"
            ]
        }))) !== null && _b !== void 0 ? _b : true
    });
    if (!result.required.length) delete result.required;
    return result;
}
exports.parseObjectDefX = parseObjectDefX;
function parseObjectDef(def, refs) {
    var _a;
    const result = Object.assign(Object.assign({
        type: "object"
    }, Object.entries(def.shape()).reduce((acc, [propName, propDef])=>{
        if (propDef === undefined || propDef._def === undefined) return acc;
        const parsedDef = (0, parseDef_1.parseDef)(propDef._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "properties",
                propName
            ],
            propertyPath: [
                ...refs.currentPath,
                "properties",
                propName
            ]
        }));
        if (parsedDef === undefined) return acc;
        return {
            properties: Object.assign(Object.assign({}, acc.properties), {
                [propName]: parsedDef
            }),
            required: propDef.isOptional() ? acc.required : [
                ...acc.required,
                propName
            ]
        };
    }, {
        properties: {},
        required: []
    })), {
        additionalProperties: def.catchall._def.typeName === "ZodNever" ? def.unknownKeys === "passthrough" : (_a = (0, parseDef_1.parseDef)(def.catchall._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "additionalProperties"
            ]
        }))) !== null && _a !== void 0 ? _a : true
    });
    if (!result.required.length) delete result.required;
    return result;
}
exports.parseObjectDef = parseObjectDef;

},{"3f9871bbd68b5ed2":"4IhsI"}],"fxrPL":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseOptionalDef = void 0;
const parseDef_1 = require("237df2b35c57e8cc");
const parseOptionalDef = (def, refs)=>{
    var _a;
    if (refs.currentPath.toString() === ((_a = refs.propertyPath) === null || _a === void 0 ? void 0 : _a.toString())) return (0, parseDef_1.parseDef)(def.innerType._def, refs);
    const innerSchema = (0, parseDef_1.parseDef)(def.innerType._def, Object.assign(Object.assign({}, refs), {
        currentPath: [
            ...refs.currentPath,
            "anyOf",
            "1"
        ]
    }));
    return innerSchema ? {
        anyOf: [
            {
                not: {}
            },
            innerSchema
        ]
    } : {};
};
exports.parseOptionalDef = parseOptionalDef;

},{"237df2b35c57e8cc":"4IhsI"}],"5sor9":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parsePipelineDef = void 0;
const parseDef_1 = require("662e4e2de2704d51");
const parsePipelineDef = (def, refs)=>{
    if (refs.pipeStrategy === "input") return (0, parseDef_1.parseDef)(def.in._def, refs);
    const a = (0, parseDef_1.parseDef)(def.in._def, Object.assign(Object.assign({}, refs), {
        currentPath: [
            ...refs.currentPath,
            "allOf",
            "0"
        ]
    }));
    const b = (0, parseDef_1.parseDef)(def.out._def, Object.assign(Object.assign({}, refs), {
        currentPath: [
            ...refs.currentPath,
            "allOf",
            a ? "1" : "0"
        ]
    }));
    return {
        allOf: [
            a,
            b
        ].filter((x)=>x !== undefined)
    };
};
exports.parsePipelineDef = parsePipelineDef;

},{"662e4e2de2704d51":"4IhsI"}],"kKzYo":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parsePromiseDef = void 0;
const parseDef_1 = require("2e431f00a2348af4");
function parsePromiseDef(def, refs) {
    return (0, parseDef_1.parseDef)(def.type._def, refs);
}
exports.parsePromiseDef = parsePromiseDef;

},{"2e431f00a2348af4":"4IhsI"}],"4T7Gd":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseRecordDef = void 0;
const zod_1 = require("f74a05b45329516");
const parseDef_1 = require("897efb8d62d995ee");
const string_1 = require("b94ad7e20150992c");
function parseRecordDef(def, refs) {
    var _a, _b, _c, _d, _e;
    if (refs.target === "openApi3" && ((_a = def.keyType) === null || _a === void 0 ? void 0 : _a._def.typeName) === zod_1.ZodFirstPartyTypeKind.ZodEnum) return {
        type: "object",
        required: def.keyType._def.values,
        properties: def.keyType._def.values.reduce((acc, key)=>{
            var _a;
            return Object.assign(Object.assign({}, acc), {
                [key]: (_a = (0, parseDef_1.parseDef)(def.valueType._def, Object.assign(Object.assign({}, refs), {
                    currentPath: [
                        ...refs.currentPath,
                        "properties",
                        key
                    ]
                }))) !== null && _a !== void 0 ? _a : {}
            });
        }, {}),
        additionalProperties: false
    };
    const schema = {
        type: "object",
        additionalProperties: (_b = (0, parseDef_1.parseDef)(def.valueType._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "additionalProperties"
            ]
        }))) !== null && _b !== void 0 ? _b : {}
    };
    if (refs.target === "openApi3") return schema;
    if (((_c = def.keyType) === null || _c === void 0 ? void 0 : _c._def.typeName) === zod_1.ZodFirstPartyTypeKind.ZodString && ((_d = def.keyType._def.checks) === null || _d === void 0 ? void 0 : _d.length)) {
        const keyType = Object.entries((0, string_1.parseStringDef)(def.keyType._def, refs)).reduce((acc, [key, value])=>key === "type" ? acc : Object.assign(Object.assign({}, acc), {
                [key]: value
            }), {});
        return Object.assign(Object.assign({}, schema), {
            propertyNames: keyType
        });
    } else if (((_e = def.keyType) === null || _e === void 0 ? void 0 : _e._def.typeName) === zod_1.ZodFirstPartyTypeKind.ZodEnum) return Object.assign(Object.assign({}, schema), {
        propertyNames: {
            enum: def.keyType._def.values
        }
    });
    return schema;
}
exports.parseRecordDef = parseRecordDef;

},{"f74a05b45329516":"fCaTr","897efb8d62d995ee":"4IhsI","b94ad7e20150992c":"7k6J4"}],"7k6J4":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseStringDef = exports.emojiPattern = exports.ulidPattern = exports.cuid2Pattern = exports.cuidPattern = exports.emailPattern = void 0;
const errorMessages_1 = require("12581799b4ba48e9");
exports.emailPattern = '^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$';
exports.cuidPattern = "^c[^\\s-]{8,}$";
exports.cuid2Pattern = "^[a-z][a-z0-9]*$";
exports.ulidPattern = "/[0-9A-HJKMNP-TV-Z]{26}/";
exports.emojiPattern = "/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u";
function parseStringDef(def, refs) {
    const res = {
        type: "string"
    };
    if (def.checks) for (const check of def.checks)switch(check.kind){
        case "min":
            (0, errorMessages_1.setResponseValueAndErrors)(res, "minLength", typeof res.minLength === "number" ? Math.max(res.minLength, check.value) : check.value, check.message, refs);
            break;
        case "max":
            (0, errorMessages_1.setResponseValueAndErrors)(res, "maxLength", typeof res.maxLength === "number" ? Math.min(res.maxLength, check.value) : check.value, check.message, refs);
            break;
        case "email":
            switch(refs.emailStrategy){
                case "format:email":
                    addFormat(res, "email", check.message, refs);
                    break;
                case "format:idn-email":
                    addFormat(res, "idn-email", check.message, refs);
                    break;
                case "pattern:zod":
                    addPattern(res, exports.emailPattern, check.message, refs);
                    break;
            }
            break;
        case "url":
            addFormat(res, "uri", check.message, refs);
            break;
        case "uuid":
            addFormat(res, "uuid", check.message, refs);
            break;
        case "regex":
            addPattern(res, check.regex.source, check.message, refs);
            break;
        case "cuid":
            addPattern(res, exports.cuidPattern, check.message, refs);
            break;
        case "cuid2":
            addPattern(res, exports.cuid2Pattern, check.message, refs);
            break;
        case "startsWith":
            addPattern(res, "^" + escapeNonAlphaNumeric(check.value), check.message, refs);
            break;
        case "endsWith":
            addPattern(res, escapeNonAlphaNumeric(check.value) + "$", check.message, refs);
            break;
        case "datetime":
            addFormat(res, "date-time", check.message, refs);
            break;
        case "length":
            (0, errorMessages_1.setResponseValueAndErrors)(res, "minLength", typeof res.minLength === "number" ? Math.max(res.minLength, check.value) : check.value, check.message, refs);
            (0, errorMessages_1.setResponseValueAndErrors)(res, "maxLength", typeof res.maxLength === "number" ? Math.min(res.maxLength, check.value) : check.value, check.message, refs);
            break;
        case "includes":
            addPattern(res, escapeNonAlphaNumeric(check.value), check.message, refs);
            break;
        case "ip":
            if (check.version !== "v6") addFormat(res, "ipv4", check.message, refs);
            if (check.version !== "v4") addFormat(res, "ipv6", check.message, refs);
            break;
        case "emoji":
            addPattern(res, exports.emojiPattern, check.message, refs);
            break;
        case "ulid":
            addPattern(res, exports.ulidPattern, check.message, refs);
            break;
        case "toLowerCase":
        case "toUpperCase":
        case "trim":
            break;
        default:
            ((_)=>{})(check);
    }
    return res;
}
exports.parseStringDef = parseStringDef;
const escapeNonAlphaNumeric = (value)=>Array.from(value).map((c)=>/[a-zA-Z0-9]/.test(c) ? c : `\\${c}`).join("");
const addFormat = (schema, value, message, refs)=>{
    var _a;
    if (schema.format || ((_a = schema.anyOf) === null || _a === void 0 ? void 0 : _a.some((x)=>x.format))) {
        if (!schema.anyOf) schema.anyOf = [];
        if (schema.format) {
            schema.anyOf.push(Object.assign({
                format: schema.format
            }, schema.errorMessage && refs.errorMessages && {
                errorMessage: {
                    format: schema.errorMessage.format
                }
            }));
            delete schema.format;
            if (schema.errorMessage) {
                delete schema.errorMessage.format;
                if (Object.keys(schema.errorMessage).length === 0) delete schema.errorMessage;
            }
        }
        schema.anyOf.push(Object.assign({
            format: value
        }, message && refs.errorMessages && {
            errorMessage: {
                format: message
            }
        }));
    } else (0, errorMessages_1.setResponseValueAndErrors)(schema, "format", value, message, refs);
};
const addPattern = (schema, value, message, refs)=>{
    var _a;
    if (schema.pattern || ((_a = schema.allOf) === null || _a === void 0 ? void 0 : _a.some((x)=>x.pattern))) {
        if (!schema.allOf) schema.allOf = [];
        if (schema.pattern) {
            schema.allOf.push(Object.assign({
                pattern: schema.pattern
            }, schema.errorMessage && refs.errorMessages && {
                errorMessage: {
                    pattern: schema.errorMessage.pattern
                }
            }));
            delete schema.pattern;
            if (schema.errorMessage) {
                delete schema.errorMessage.pattern;
                if (Object.keys(schema.errorMessage).length === 0) delete schema.errorMessage;
            }
        }
        schema.allOf.push(Object.assign({
            pattern: value
        }, message && refs.errorMessages && {
            errorMessage: {
                pattern: message
            }
        }));
    } else (0, errorMessages_1.setResponseValueAndErrors)(schema, "pattern", value, message, refs);
};

},{"12581799b4ba48e9":"i8Sz1"}],"5sqla":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseSetDef = void 0;
const errorMessages_1 = require("388061c84144207e");
const parseDef_1 = require("b22d7db4ee37b649");
function parseSetDef(def, refs) {
    const items = (0, parseDef_1.parseDef)(def.valueType._def, Object.assign(Object.assign({}, refs), {
        currentPath: [
            ...refs.currentPath,
            "items"
        ]
    }));
    const schema = {
        type: "array",
        uniqueItems: true,
        items
    };
    if (def.minSize) (0, errorMessages_1.setResponseValueAndErrors)(schema, "minItems", def.minSize.value, def.minSize.message, refs);
    if (def.maxSize) (0, errorMessages_1.setResponseValueAndErrors)(schema, "maxItems", def.maxSize.value, def.maxSize.message, refs);
    return schema;
}
exports.parseSetDef = parseSetDef;

},{"388061c84144207e":"i8Sz1","b22d7db4ee37b649":"4IhsI"}],"eqHq4":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseTupleDef = void 0;
const parseDef_1 = require("e8dc045997bd44a0");
function parseTupleDef(def, refs) {
    if (def.rest) return {
        type: "array",
        minItems: def.items.length,
        items: def.items.map((x, i)=>(0, parseDef_1.parseDef)(x._def, Object.assign(Object.assign({}, refs), {
                currentPath: [
                    ...refs.currentPath,
                    "items",
                    `${i}`
                ]
            }))).reduce((acc, x)=>x === undefined ? acc : [
                ...acc,
                x
            ], []),
        additionalItems: (0, parseDef_1.parseDef)(def.rest._def, Object.assign(Object.assign({}, refs), {
            currentPath: [
                ...refs.currentPath,
                "additionalItems"
            ]
        }))
    };
    else return {
        type: "array",
        minItems: def.items.length,
        maxItems: def.items.length,
        items: def.items.map((x, i)=>(0, parseDef_1.parseDef)(x._def, Object.assign(Object.assign({}, refs), {
                currentPath: [
                    ...refs.currentPath,
                    "items",
                    `${i}`
                ]
            }))).reduce((acc, x)=>x === undefined ? acc : [
                ...acc,
                x
            ], [])
    };
}
exports.parseTupleDef = parseTupleDef;

},{"e8dc045997bd44a0":"4IhsI"}],"8Strh":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseUndefinedDef = void 0;
function parseUndefinedDef() {
    return {
        not: {}
    };
}
exports.parseUndefinedDef = parseUndefinedDef;

},{}],"2xfCQ":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseUnknownDef = void 0;
function parseUnknownDef() {
    return {};
}
exports.parseUnknownDef = parseUnknownDef;

},{}],"5Lg9p":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getRefs = void 0;
const Options_1 = require("bbe5f5ae14b9326d");
const getRefs = (options)=>{
    const _options = (0, Options_1.getDefaultOptions)(options);
    const currentPath = _options.name !== undefined ? [
        ..._options.basePath,
        _options.definitionPath,
        _options.name
    ] : _options.basePath;
    return Object.assign(Object.assign({}, _options), {
        currentPath: currentPath,
        propertyPath: undefined,
        seen: new Map(Object.entries(_options.definitions).map(([name, def])=>[
                def._def,
                {
                    def: def._def,
                    path: [
                        ..._options.basePath,
                        _options.definitionPath,
                        name
                    ],
                    // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.
                    jsonSchema: undefined
                }
            ]))
    });
};
exports.getRefs = getRefs;

},{"bbe5f5ae14b9326d":"8AiJH"}],"8AiJH":[function(require,module,exports) {
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getDefaultOptions = exports.defaultOptions = void 0;
exports.defaultOptions = {
    name: undefined,
    $refStrategy: "root",
    basePath: [
        "#"
    ],
    effectStrategy: "input",
    pipeStrategy: "all",
    dateStrategy: "string",
    definitionPath: "definitions",
    target: "jsonSchema7",
    strictUnions: false,
    definitions: {},
    errorMessages: false,
    markdownDescription: false,
    emailStrategy: "format:email"
};
const getDefaultOptions = (options)=>typeof options === "string" ? Object.assign(Object.assign({}, exports.defaultOptions), {
        name: options
    }) : Object.assign(Object.assign({}, exports.defaultOptions), options);
exports.getDefaultOptions = getDefaultOptions;

},{}],"5jgA5":[function(require,module,exports) {
/**
 * This function generates an endpoint URL for (Azure) OpenAI
 * based on the configuration parameters provided.
 *
 * @param {OpenAIEndpointConfig} config - The configuration object for the (Azure) endpoint.
 *
 * @property {string} config.azureOpenAIApiDeploymentName - The deployment name of Azure OpenAI.
 * @property {string} config.azureOpenAIApiInstanceName - The instance name of Azure OpenAI.
 * @property {string} config.azureOpenAIApiKey - The API Key for Azure OpenAI.
 * @property {string} config.azureOpenAIBasePath - The base path for Azure OpenAI.
 * @property {string} config.baseURL - Some other custom base path URL.
 *
 * The function operates as follows:
 * - If both `azureOpenAIBasePath` and `azureOpenAIApiDeploymentName` (plus `azureOpenAIApiKey`) are provided, it returns an URL combining these two parameters (`${azureOpenAIBasePath}/${azureOpenAIApiDeploymentName}`).
 * - If `azureOpenAIApiKey` is provided, it checks for `azureOpenAIApiInstanceName` and `azureOpenAIApiDeploymentName` and throws an error if any of these is missing. If both are provided, it generates an URL incorporating these parameters.
 * - If none of the above conditions are met, return any custom `baseURL`.
 * - The function returns the generated URL as a string, or undefined if no custom paths are specified.
 *
 * @throws Will throw an error if the necessary parameters for generating the URL are missing.
 *
 * @returns {string | undefined} The generated (Azure) OpenAI endpoint URL.
 */ var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
parcelHelpers.export(exports, "getEndpoint", ()=>getEndpoint);
function getEndpoint(config) {
    const { azureOpenAIApiDeploymentName, azureOpenAIApiInstanceName, azureOpenAIApiKey, azureOpenAIBasePath, baseURL } = config;
    if (azureOpenAIApiKey && azureOpenAIBasePath && azureOpenAIApiDeploymentName) return `${azureOpenAIBasePath}/${azureOpenAIApiDeploymentName}`;
    if (azureOpenAIApiKey) {
        if (!azureOpenAIApiInstanceName) throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");
        if (!azureOpenAIApiDeploymentName) throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");
        return `https://${azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${azureOpenAIApiDeploymentName}`;
    }
    return baseURL;
}

},{"@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"ekfqP":[function(require,module,exports) {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
parcelHelpers.export(exports, "promptLayerTrackRequest", ()=>promptLayerTrackRequest);
const promptLayerTrackRequest = async (callerFunc, functionName, kwargs, plTags, // eslint-disable-next-line @typescript-eslint/no-explicit-any
requestResponse, startTime, endTime, apiKey)=>{
    // https://github.com/MagnivOrg/promptlayer-js-helper
    const promptLayerResp = await callerFunc.call(fetch, "https://api.promptlayer.com/track-request", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            Accept: "application/json"
        },
        body: JSON.stringify({
            function_name: functionName,
            provider: "langchain",
            kwargs,
            tags: plTags,
            request_response: requestResponse,
            request_start_time: Math.floor(startTime / 1000),
            request_end_time: Math.floor(endTime / 1000),
            api_key: apiKey
        })
    });
    return promptLayerResp.json();
};

},{"@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"eRVSH":[function(require,module,exports) {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
/**
 * Creates a transform stream for encoding chat message chunks.
 * @deprecated Use {@link BytesOutputParser} instead
 * @returns A TransformStream instance that encodes chat message chunks.
 */ parcelHelpers.export(exports, "createChatMessageChunkEncoderStream", ()=>createChatMessageChunkEncoderStream);
/**
 * Base class for chat models. It extends the BaseLanguageModel class and
 * provides methods for generating chat based on input messages.
 */ parcelHelpers.export(exports, "BaseChatModel", ()=>BaseChatModel);
/**
 * An abstract class that extends BaseChatModel and provides a simple
 * implementation of _generate.
 */ parcelHelpers.export(exports, "SimpleChatModel", ()=>SimpleChatModel);
var _indexJs = require("../schema/index.js");
var _indexJs1 = require("../base_language/index.js");
var _managerJs = require("../callbacks/manager.js");
function createChatMessageChunkEncoderStream() {
    const textEncoder = new TextEncoder();
    return new TransformStream({
        transform (chunk, controller) {
            controller.enqueue(textEncoder.encode(chunk.content));
        }
    });
}
class BaseChatModel extends (0, _indexJs1.BaseLanguageModel) {
    constructor(fields){
        super(fields);
        Object.defineProperty(this, "lc_namespace", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: [
                "langchain",
                "chat_models",
                this._llmType()
            ]
        });
    }
    _separateRunnableConfigFromCallOptions(options) {
        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);
        if (callOptions?.timeout && !callOptions.signal) callOptions.signal = AbortSignal.timeout(callOptions.timeout);
        return [
            runnableConfig,
            callOptions
        ];
    }
    /**
     * Invokes the chat model with a single input.
     * @param input The input for the language model.
     * @param options The call options.
     * @returns A Promise that resolves to a BaseMessageChunk.
     */ async invoke(input, options) {
        const promptValue = BaseChatModel._convertInputToPromptValue(input);
        const result = await this.generatePrompt([
            promptValue
        ], options, options?.callbacks);
        const chatGeneration = result.generations[0][0];
        // TODO: Remove cast after figuring out inheritance
        return chatGeneration.message;
    }
    // eslint-disable-next-line require-yield
    async *_streamResponseChunks(_messages, _options, _runManager) {
        throw new Error("Not implemented.");
    }
    async *_streamIterator(input, options) {
        // Subclass check required to avoid double callbacks with default implementation
        if (this._streamResponseChunks === BaseChatModel.prototype._streamResponseChunks) yield this.invoke(input, options);
        else {
            const prompt = BaseChatModel._convertInputToPromptValue(input);
            const messages = prompt.toChatMessages();
            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(options);
            const callbackManager_ = await (0, _managerJs.CallbackManager).configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, runnableConfig.metadata, this.metadata, {
                verbose: this.verbose
            });
            const extra = {
                options: callOptions,
                invocation_params: this?.invocationParams(callOptions)
            };
            const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), [
                messages
            ], undefined, undefined, extra);
            let generationChunk;
            try {
                for await (const chunk of this._streamResponseChunks(messages, callOptions, runManagers?.[0])){
                    yield chunk.message;
                    if (!generationChunk) generationChunk = chunk;
                    else generationChunk = generationChunk.concat(chunk);
                }
            } catch (err) {
                await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));
                throw err;
            }
            await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMEnd({
                    // TODO: Remove cast after figuring out inheritance
                    generations: [
                        [
                            generationChunk
                        ]
                    ]
                })));
        }
    }
    /**
     * Generates chat based on the input messages.
     * @param messages An array of arrays of BaseMessage instances.
     * @param options The call options or an array of stop sequences.
     * @param callbacks The callbacks for the language model.
     * @returns A Promise that resolves to an LLMResult.
     */ async generate(messages, options, callbacks) {
        // parse call options
        let parsedOptions;
        if (Array.isArray(options)) parsedOptions = {
            stop: options
        };
        else parsedOptions = options;
        const baseMessages = messages.map((messageList)=>messageList.map((0, _indexJs.coerceMessageLikeToMessage)));
        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(parsedOptions);
        // create callback manager and start run
        const callbackManager_ = await (0, _managerJs.CallbackManager).configure(runnableConfig.callbacks ?? callbacks, this.callbacks, runnableConfig.tags, this.tags, runnableConfig.metadata, this.metadata, {
            verbose: this.verbose
        });
        const extra = {
            options: callOptions,
            invocation_params: this?.invocationParams(parsedOptions)
        };
        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages, undefined, undefined, extra);
        // generate results
        const results = await Promise.allSettled(baseMessages.map((messageList, i)=>this._generate(messageList, {
                ...callOptions,
                promptIndex: i
            }, runManagers?.[i])));
        // handle results
        const generations = [];
        const llmOutputs = [];
        await Promise.all(results.map(async (pResult, i)=>{
            if (pResult.status === "fulfilled") {
                const result = pResult.value;
                generations[i] = result.generations;
                llmOutputs[i] = result.llmOutput;
                return runManagers?.[i]?.handleLLMEnd({
                    generations: [
                        result.generations
                    ],
                    llmOutput: result.llmOutput
                });
            } else {
                // status === "rejected"
                await runManagers?.[i]?.handleLLMError(pResult.reason);
                return Promise.reject(pResult.reason);
            }
        }));
        // create combined output
        const output = {
            generations,
            llmOutput: llmOutputs.length ? this._combineLLMOutput?.(...llmOutputs) : undefined
        };
        Object.defineProperty(output, (0, _indexJs.RUN_KEY), {
            value: runManagers ? {
                runIds: runManagers?.map((manager)=>manager.runId)
            } : undefined,
            configurable: true
        });
        return output;
    }
    /**
     * Get the parameters used to invoke the model
     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any
    invocationParams(_options) {
        return {};
    }
    _modelType() {
        return "base_chat_model";
    }
    /**
     * Generates a prompt based on the input prompt values.
     * @param promptValues An array of BasePromptValue instances.
     * @param options The call options or an array of stop sequences.
     * @param callbacks The callbacks for the language model.
     * @returns A Promise that resolves to an LLMResult.
     */ async generatePrompt(promptValues, options, callbacks) {
        const promptMessages = promptValues.map((promptValue)=>promptValue.toChatMessages());
        return this.generate(promptMessages, options, callbacks);
    }
    /**
     * Makes a single call to the chat model.
     * @param messages An array of BaseMessage instances.
     * @param options The call options or an array of stop sequences.
     * @param callbacks The callbacks for the language model.
     * @returns A Promise that resolves to a BaseMessage.
     */ async call(messages, options, callbacks) {
        const result = await this.generate([
            messages.map((0, _indexJs.coerceMessageLikeToMessage))
        ], options, callbacks);
        const generations = result.generations;
        return generations[0][0].message;
    }
    /**
     * Makes a single call to the chat model with a prompt value.
     * @param promptValue The value of the prompt.
     * @param options The call options or an array of stop sequences.
     * @param callbacks The callbacks for the language model.
     * @returns A Promise that resolves to a BaseMessage.
     */ async callPrompt(promptValue, options, callbacks) {
        const promptMessages = promptValue.toChatMessages();
        return this.call(promptMessages, options, callbacks);
    }
    /**
     * Predicts the next message based on the input messages.
     * @param messages An array of BaseMessage instances.
     * @param options The call options or an array of stop sequences.
     * @param callbacks The callbacks for the language model.
     * @returns A Promise that resolves to a BaseMessage.
     */ async predictMessages(messages, options, callbacks) {
        return this.call(messages, options, callbacks);
    }
    /**
     * Predicts the next message based on a text input.
     * @param text The text input.
     * @param options The call options or an array of stop sequences.
     * @param callbacks The callbacks for the language model.
     * @returns A Promise that resolves to a string.
     */ async predict(text, options, callbacks) {
        const message = new (0, _indexJs.HumanMessage)(text);
        const result = await this.call([
            message
        ], options, callbacks);
        return result.content;
    }
}
class SimpleChatModel extends BaseChatModel {
    async _generate(messages, options, runManager) {
        const text = await this._call(messages, options, runManager);
        const message = new (0, _indexJs.AIMessage)(text);
        return {
            generations: [
                {
                    text: message.content,
                    message
                }
            ]
        };
    }
}

},{"../schema/index.js":"d5Hnz","../base_language/index.js":"108Mq","../callbacks/manager.js":"dAlXr","@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"108Mq":[function(require,module,exports) {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
/*
 * Calculate max tokens for given model and prompt.
 * That is the model size - number of tokens in prompt.
 */ parcelHelpers.export(exports, "calculateMaxTokens", ()=>(0, _countTokensJs.calculateMaxTokens));
/**
 * Base class for language models, chains, tools.
 */ parcelHelpers.export(exports, "BaseLangChain", ()=>BaseLangChain);
/**
 * Base class for language models.
 */ parcelHelpers.export(exports, "BaseLanguageModel", ()=>BaseLanguageModel);
var _indexJs = require("../schema/index.js");
var _asyncCallerJs = require("../util/async_caller.js");
var _countTokensJs = require("./count_tokens.js");
var _tiktokenJs = require("../util/tiktoken.js");
var _indexJs1 = require("../schema/runnable/index.js");
var _baseJs = require("../prompts/base.js");
var _chatJs = require("../prompts/chat.js");
const getVerbosity = ()=>false;
class BaseLangChain extends (0, _indexJs1.Runnable) {
    get lc_attributes() {
        return {
            callbacks: undefined,
            verbose: undefined
        };
    }
    constructor(params){
        super(params);
        /**
         * Whether to print out response text.
         */ Object.defineProperty(this, "verbose", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "callbacks", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "tags", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "metadata", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.verbose = params.verbose ?? getVerbosity();
        this.callbacks = params.callbacks;
        this.tags = params.tags ?? [];
        this.metadata = params.metadata ?? {};
    }
}
class BaseLanguageModel extends BaseLangChain {
    /**
     * Keys that the language model accepts as call options.
     */ get callKeys() {
        return [
            "stop",
            "timeout",
            "signal",
            "tags",
            "metadata",
            "callbacks"
        ];
    }
    constructor({ callbacks, callbackManager, ...params }){
        super({
            callbacks: callbacks ?? callbackManager,
            ...params
        });
        /**
         * The async caller should be used by subclasses to make any async calls,
         * which will thus benefit from the concurrency and retry logic.
         */ Object.defineProperty(this, "caller", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "_encoding", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.caller = new (0, _asyncCallerJs.AsyncCaller)(params ?? {});
    }
    async getNumTokens(text) {
        // fallback to approximate calculation if tiktoken is not available
        let numTokens = Math.ceil(text.length / 4);
        if (!this._encoding) try {
            this._encoding = await (0, _tiktokenJs.encodingForModel)("modelName" in this ? (0, _countTokensJs.getModelNameForTiktoken)(this.modelName) : "gpt2");
        } catch (error) {
            console.warn("Failed to calculate number of tokens, falling back to approximate count", error);
        }
        if (this._encoding) numTokens = this._encoding.encode(text).length;
        return numTokens;
    }
    static _convertInputToPromptValue(input) {
        if (typeof input === "string") return new (0, _baseJs.StringPromptValue)(input);
        else if (Array.isArray(input)) return new (0, _chatJs.ChatPromptValue)(input.map((0, _indexJs.coerceMessageLikeToMessage)));
        else return input;
    }
    /**
     * Get the identifying parameters of the LLM.
     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any
    _identifyingParams() {
        return {};
    }
    /**
     * @deprecated
     * Return a json-like object representing this LLM.
     */ serialize() {
        return {
            ...this._identifyingParams(),
            _type: this._llmType(),
            _model: this._modelType()
        };
    }
    /**
     * @deprecated
     * Load an LLM from a json-like object describing it.
     */ static async deserialize(data) {
        const { _type, _model, ...rest } = data;
        if (_model && _model !== "base_chat_model") throw new Error(`Cannot load LLM with model ${_model}`);
        const Cls = {
            openai: (await require("8919b4e8353bad36")).ChatOpenAI
        }[_type];
        if (Cls === undefined) throw new Error(`Cannot load LLM with type ${_type}`);
        return new Cls(rest);
    }
}

},{"../schema/index.js":"d5Hnz","../util/async_caller.js":"laXWJ","./count_tokens.js":"jFSyu","../util/tiktoken.js":"eAyCb","../schema/runnable/index.js":"93LxA","../prompts/base.js":"1X18e","../prompts/chat.js":"4onqo","8919b4e8353bad36":"2XIKw","@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"4onqo":[function(require,module,exports) {
// Default generic "any" values are for backwards compatibility.
// Replace with "string" when we are comfortable with a breaking change.
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
/**
 * Abstract class that serves as a base for creating message prompt
 * templates. It defines how to format messages for different roles in a
 * conversation.
 */ parcelHelpers.export(exports, "BaseMessagePromptTemplate", ()=>BaseMessagePromptTemplate);
/**
 * Class that represents a chat prompt value. It extends the
 * BasePromptValue and includes an array of BaseMessage instances.
 */ parcelHelpers.export(exports, "ChatPromptValue", ()=>ChatPromptValue);
/**
 * Class that represents a placeholder for messages in a chat prompt. It
 * extends the BaseMessagePromptTemplate.
 */ parcelHelpers.export(exports, "MessagesPlaceholder", ()=>MessagesPlaceholder);
/**
 * Abstract class that serves as a base for creating message string prompt
 * templates. It extends the BaseMessagePromptTemplate.
 */ parcelHelpers.export(exports, "BaseMessageStringPromptTemplate", ()=>BaseMessageStringPromptTemplate);
/**
 * Abstract class that serves as a base for creating chat prompt
 * templates. It extends the BasePromptTemplate.
 */ parcelHelpers.export(exports, "BaseChatPromptTemplate", ()=>BaseChatPromptTemplate);
/**
 * Class that represents a chat message prompt template. It extends the
 * BaseMessageStringPromptTemplate.
 */ parcelHelpers.export(exports, "ChatMessagePromptTemplate", ()=>ChatMessagePromptTemplate);
/**
 * Class that represents a human message prompt template. It extends the
 * BaseMessageStringPromptTemplate.
 */ parcelHelpers.export(exports, "HumanMessagePromptTemplate", ()=>HumanMessagePromptTemplate);
/**
 * Class that represents an AI message prompt template. It extends the
 * BaseMessageStringPromptTemplate.
 */ parcelHelpers.export(exports, "AIMessagePromptTemplate", ()=>AIMessagePromptTemplate);
/**
 * Class that represents a system message prompt template. It extends the
 * BaseMessageStringPromptTemplate.
 */ parcelHelpers.export(exports, "SystemMessagePromptTemplate", ()=>SystemMessagePromptTemplate);
/**
 * Class that represents a chat prompt. It extends the
 * BaseChatPromptTemplate and uses an array of BaseMessagePromptTemplate
 * instances to format a series of messages for a conversation.
 */ parcelHelpers.export(exports, "ChatPromptTemplate", ()=>ChatPromptTemplate);
var _indexJs = require("../schema/index.js");
var _indexJs1 = require("../schema/runnable/index.js");
var _baseJs = require("./base.js");
var _promptJs = require("./prompt.js");
class BaseMessagePromptTemplate extends (0, _indexJs1.Runnable) {
    constructor(){
        super(...arguments);
        Object.defineProperty(this, "lc_namespace", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: [
                "langchain",
                "prompts",
                "chat"
            ]
        });
        Object.defineProperty(this, "lc_serializable", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: true
        });
    }
    /**
     * Calls the formatMessages method with the provided input and options.
     * @param input Input for the formatMessages method
     * @param options Optional BaseCallbackConfig
     * @returns Formatted output messages
     */ async invoke(input, options) {
        return this._callWithConfig((input)=>this.formatMessages(input), input, {
            ...options,
            runType: "prompt"
        });
    }
}
class ChatPromptValue extends (0, _indexJs.BasePromptValue) {
    static lc_name() {
        return "ChatPromptValue";
    }
    constructor(fields){
        if (Array.isArray(fields)) // eslint-disable-next-line no-param-reassign
        fields = {
            messages: fields
        };
        super(...arguments);
        Object.defineProperty(this, "lc_namespace", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: [
                "langchain",
                "prompts",
                "chat"
            ]
        });
        Object.defineProperty(this, "lc_serializable", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: true
        });
        Object.defineProperty(this, "messages", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.messages = fields.messages;
    }
    toString() {
        return JSON.stringify(this.messages);
    }
    toChatMessages() {
        return this.messages;
    }
}
class MessagesPlaceholder extends BaseMessagePromptTemplate {
    static lc_name() {
        return "MessagesPlaceholder";
    }
    constructor(fields){
        if (typeof fields === "string") // eslint-disable-next-line no-param-reassign
        fields = {
            variableName: fields
        };
        super(fields);
        Object.defineProperty(this, "variableName", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.variableName = fields.variableName;
    }
    get inputVariables() {
        return [
            this.variableName
        ];
    }
    formatMessages(values) {
        return Promise.resolve(values[this.variableName]);
    }
}
class BaseMessageStringPromptTemplate extends BaseMessagePromptTemplate {
    constructor(fields){
        if (!("prompt" in fields)) // eslint-disable-next-line no-param-reassign
        fields = {
            prompt: fields
        };
        super(fields);
        Object.defineProperty(this, "prompt", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.prompt = fields.prompt;
    }
    get inputVariables() {
        return this.prompt.inputVariables;
    }
    async formatMessages(values) {
        return [
            await this.format(values)
        ];
    }
}
class BaseChatPromptTemplate extends (0, _baseJs.BasePromptTemplate) {
    constructor(input){
        super(input);
    }
    async format(values) {
        return (await this.formatPromptValue(values)).toString();
    }
    async formatPromptValue(values) {
        const resultMessages = await this.formatMessages(values);
        return new ChatPromptValue(resultMessages);
    }
}
class ChatMessagePromptTemplate extends BaseMessageStringPromptTemplate {
    static lc_name() {
        return "ChatMessagePromptTemplate";
    }
    constructor(fields, role){
        if (!("prompt" in fields)) // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion
        fields = {
            prompt: fields,
            role: role
        };
        super(fields);
        Object.defineProperty(this, "role", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.role = fields.role;
    }
    async format(values) {
        return new (0, _indexJs.ChatMessage)(await this.prompt.format(values), this.role);
    }
    static fromTemplate(template, role) {
        return new this((0, _promptJs.PromptTemplate).fromTemplate(template), role);
    }
}
class HumanMessagePromptTemplate extends BaseMessageStringPromptTemplate {
    static lc_name() {
        return "HumanMessagePromptTemplate";
    }
    async format(values) {
        return new (0, _indexJs.HumanMessage)(await this.prompt.format(values));
    }
    static fromTemplate(template) {
        return new this((0, _promptJs.PromptTemplate).fromTemplate(template));
    }
}
class AIMessagePromptTemplate extends BaseMessageStringPromptTemplate {
    static lc_name() {
        return "AIMessagePromptTemplate";
    }
    async format(values) {
        return new (0, _indexJs.AIMessage)(await this.prompt.format(values));
    }
    static fromTemplate(template) {
        return new this((0, _promptJs.PromptTemplate).fromTemplate(template));
    }
}
class SystemMessagePromptTemplate extends BaseMessageStringPromptTemplate {
    static lc_name() {
        return "SystemMessagePromptTemplate";
    }
    async format(values) {
        return new (0, _indexJs.SystemMessage)(await this.prompt.format(values));
    }
    static fromTemplate(template) {
        return new this((0, _promptJs.PromptTemplate).fromTemplate(template));
    }
}
function _isBaseMessagePromptTemplate(baseMessagePromptTemplateLike) {
    return typeof baseMessagePromptTemplateLike.formatMessages === "function";
}
function _coerceMessagePromptTemplateLike(messagePromptTemplateLike) {
    if (_isBaseMessagePromptTemplate(messagePromptTemplateLike) || (0, _indexJs.isBaseMessage)(messagePromptTemplateLike)) return messagePromptTemplateLike;
    const message = (0, _indexJs.coerceMessageLikeToMessage)(messagePromptTemplateLike);
    if (message._getType() === "human") return HumanMessagePromptTemplate.fromTemplate(message.content);
    else if (message._getType() === "ai") return AIMessagePromptTemplate.fromTemplate(message.content);
    else if (message._getType() === "system") return SystemMessagePromptTemplate.fromTemplate(message.content);
    else if ((0, _indexJs.ChatMessage).isInstance(message)) return ChatMessagePromptTemplate.fromTemplate(message.content, message.role);
    else throw new Error(`Could not coerce message prompt template from input. Received message type: "${message._getType()}".`);
}
class ChatPromptTemplate extends BaseChatPromptTemplate {
    static lc_name() {
        return "ChatPromptTemplate";
    }
    get lc_aliases() {
        return {
            promptMessages: "messages"
        };
    }
    constructor(input){
        super(input);
        Object.defineProperty(this, "promptMessages", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "validateTemplate", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: true
        });
        Object.assign(this, input);
        if (this.validateTemplate) {
            const inputVariablesMessages = new Set();
            for (const promptMessage of this.promptMessages){
                // eslint-disable-next-line no-instanceof/no-instanceof
                if (promptMessage instanceof (0, _indexJs.BaseMessage)) continue;
                for (const inputVariable of promptMessage.inputVariables)inputVariablesMessages.add(inputVariable);
            }
            const totalInputVariables = this.inputVariables;
            const inputVariablesInstance = new Set(this.partialVariables ? totalInputVariables.concat(Object.keys(this.partialVariables)) : totalInputVariables);
            const difference = new Set([
                ...inputVariablesInstance
            ].filter((x)=>!inputVariablesMessages.has(x)));
            if (difference.size > 0) throw new Error(`Input variables \`${[
                ...difference
            ]}\` are not used in any of the prompt messages.`);
            const otherDifference = new Set([
                ...inputVariablesMessages
            ].filter((x)=>!inputVariablesInstance.has(x)));
            if (otherDifference.size > 0) throw new Error(`Input variables \`${[
                ...otherDifference
            ]}\` are used in prompt messages but not in the prompt template.`);
        }
    }
    _getPromptType() {
        return "chat";
    }
    async formatMessages(values) {
        const allValues = await this.mergePartialAndUserVariables(values);
        let resultMessages = [];
        for (const promptMessage of this.promptMessages)// eslint-disable-next-line no-instanceof/no-instanceof
        if (promptMessage instanceof (0, _indexJs.BaseMessage)) resultMessages.push(promptMessage);
        else {
            const inputValues = promptMessage.inputVariables.reduce((acc, inputVariable)=>{
                if (!(inputVariable in allValues)) throw new Error(`Missing value for input variable \`${inputVariable.toString()}\``);
                acc[inputVariable] = allValues[inputVariable];
                return acc;
            }, {});
            const message = await promptMessage.formatMessages(inputValues);
            resultMessages = resultMessages.concat(message);
        }
        return resultMessages;
    }
    async partial(values) {
        // This is implemented in a way it doesn't require making
        // BaseMessagePromptTemplate aware of .partial()
        const newInputVariables = this.inputVariables.filter((iv)=>!(iv in values));
        const newPartialVariables = {
            ...this.partialVariables ?? {},
            ...values
        };
        const promptDict = {
            ...this,
            inputVariables: newInputVariables,
            partialVariables: newPartialVariables
        };
        return new ChatPromptTemplate(promptDict);
    }
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    static fromPromptMessages(promptMessages) {
        const flattenedMessages = promptMessages.reduce((acc, promptMessage)=>acc.concat(// eslint-disable-next-line no-instanceof/no-instanceof
            promptMessage instanceof ChatPromptTemplate ? promptMessage.promptMessages : [
                _coerceMessagePromptTemplateLike(promptMessage)
            ]), []);
        const flattenedPartialVariables = promptMessages.reduce((acc, promptMessage)=>// eslint-disable-next-line no-instanceof/no-instanceof
            promptMessage instanceof ChatPromptTemplate ? Object.assign(acc, promptMessage.partialVariables) : acc, Object.create(null));
        const inputVariables = new Set();
        for (const promptMessage of flattenedMessages){
            // eslint-disable-next-line no-instanceof/no-instanceof
            if (promptMessage instanceof (0, _indexJs.BaseMessage)) continue;
            for (const inputVariable of promptMessage.inputVariables){
                if (inputVariable in flattenedPartialVariables) continue;
                inputVariables.add(inputVariable);
            }
        }
        return new ChatPromptTemplate({
            inputVariables: [
                ...inputVariables
            ],
            promptMessages: flattenedMessages,
            partialVariables: flattenedPartialVariables
        });
    }
}

},{"../schema/index.js":"d5Hnz","../schema/runnable/index.js":"93LxA","./base.js":"1X18e","./prompt.js":"a0rUj","@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}],"2XIKw":[function(require,module,exports) {
module.exports = Promise.all([
    require("c3cc6820d9f59104")(require("ff4b60eac7eb6c1d").getBundleURL("gyvXC") + "prompt.f666f821.js" + "?" + Date.now()).catch((err)=>{
        delete module.bundle.cache[module.id];
        throw err;
    }),
    require("c3cc6820d9f59104")(require("ff4b60eac7eb6c1d").getBundleURL("gyvXC") + "openai.f1385eec.js" + "?" + Date.now()).catch((err)=>{
        delete module.bundle.cache[module.id];
        throw err;
    })
]).then(()=>module.bundle.root("3CxXH"));

},{"c3cc6820d9f59104":"4bOe1","ff4b60eac7eb6c1d":"k1NHF"}],"4bOe1":[function(require,module,exports) {
"use strict";
var cacheLoader = require("18ee47ea23acab77");
module.exports = cacheLoader(function(bundle) {
    return new Promise(function(resolve, reject) {
        // Don't insert the same script twice (e.g. if it was already in the HTML)
        var existingScripts = document.getElementsByTagName("script");
        if ([].concat(existingScripts).some(function isCurrentBundle(script) {
            return script.src === bundle;
        })) {
            resolve();
            return;
        }
        var preloadLink = document.createElement("link");
        preloadLink.href = bundle;
        preloadLink.rel = "preload";
        preloadLink.as = "script";
        document.head.appendChild(preloadLink);
        var script = document.createElement("script");
        script.async = true;
        script.type = "text/javascript";
        script.src = bundle;
        script.onerror = function(e) {
            var error = new TypeError("Failed to fetch dynamically imported module: ".concat(bundle, ". Error: ").concat(e.message));
            script.onerror = script.onload = null;
            script.remove();
            reject(error);
        };
        script.onload = function() {
            script.onerror = script.onload = null;
            resolve();
        };
        document.getElementsByTagName("head")[0].appendChild(script);
    });
});

},{"18ee47ea23acab77":"bokW6"}],"bokW6":[function(require,module,exports) {
"use strict";
var cachedBundles = {};
var cachedPreloads = {};
var cachedPrefetches = {};
function getCache(type) {
    switch(type){
        case "preload":
            return cachedPreloads;
        case "prefetch":
            return cachedPrefetches;
        default:
            return cachedBundles;
    }
}
module.exports = function(loader, type) {
    return function(bundle) {
        var cache = getCache(type);
        if (cache[bundle]) return cache[bundle];
        return cache[bundle] = loader.apply(null, arguments).catch(function(e) {
            delete cache[bundle];
            throw e;
        });
    };
};

},{}],"k1NHF":[function(require,module,exports) {
"use strict";
var bundleURL = {};
function getBundleURLCached(id) {
    var value = bundleURL[id];
    if (!value) {
        value = getBundleURL();
        bundleURL[id] = value;
    }
    return value;
}
function getBundleURL() {
    try {
        throw new Error();
    } catch (err) {
        var matches = ("" + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);
        if (matches) // The first two stack frames will be this function and getBundleURLCached.
        // Use the 3rd one, which will be a runtime in the original bundle.
        return getBaseURL(matches[2]);
    }
    return "/";
}
function getBaseURL(url) {
    return ("" + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/, "$1") + "/";
}
// TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.
function getOrigin(url) {
    var matches = ("" + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^/]+/);
    if (!matches) throw new Error("Origin not found");
    return matches[0];
}
exports.getBundleURL = getBundleURLCached;
exports.getBaseURL = getBaseURL;
exports.getOrigin = getOrigin;

},{}],"1K7lA":[function(require,module,exports) {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
// eslint-disable-next-line @typescript-eslint/no-explicit-any
parcelHelpers.export(exports, "wrapOpenAIClientError", ()=>wrapOpenAIClientError);
var _openai = require("openai");
function wrapOpenAIClientError(e) {
    let error;
    if (e.constructor.name === (0, _openai.APIConnectionTimeoutError).name) {
        error = new Error(e.message);
        error.name = "TimeoutError";
    } else if (e.constructor.name === (0, _openai.APIUserAbortError).name) {
        error = new Error(e.message);
        error.name = "AbortError";
    } else error = e;
    return error;
}

},{"openai":"iP1Oi","@parcel/transformer-js/src/esmodule-helpers.js":"6dfwG"}]},[], null, "parcelRequire5833")

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBdUI7WUFDckQ7UUFDSjtRQUNBLE9BQU87SUFDWDtBQUNKOzs7QTtBRW5yQkEscURBQXFEO0EsSSxrQixBLEksSSxJLEMsbUIsQyxPLFMsUyxDLEUsQyxFLEMsRSxFO0ksSSxPLFcsSztJLEksTyxPLHlCLEc7SSxJLEMsUSxDLFMsTyxDLEUsYSxLLFksSyxZLEcsTztRLFk7USxLO1ksTyxDLEMsRTtRO0k7SSxPLGUsRyxJO0EsSSxTLEMsRSxDLEUsQyxFLEU7SSxJLE8sVyxLO0ksQyxDLEcsRyxDLEMsRTtBLEM7QSxJLHFCLEEsSSxJLEksQyxzQixDLE8sUyxTLEMsRSxDO0ksTyxlLEcsVztRLFk7USxPO0k7QSxJQUVyRCxTQUFBLENBQUEsRUFBQSxDQUFBO0lBQ0EsQ0FBQSxDQUFBLFVBQUEsR0FBQTtBQUNBLENBQUE7QUFDQSxJQUFBLGVBRUEsQUFBQSxJQUFBLElBQUEsSUFBQSxDQUFBLGdCQXVFQSxTQUFBLEdBQUE7SUFDQSxJQUFhLE9BQU8sSUFBQSxZQUFhLE9BQWpDO0lBTUUsSUFBQSxTQUFBLENBQUE7SSxJLE8sTTtRLEksSSxLLEksSSxNLGEsTyxVLGUsSyxLLEksZ0IsUSxLO0k7SSxtQixRO0ksTztBO0EsSTtBLE8sZSxTLGM7SSxPO0E7QSxRLGUsUSxTLFEsMkIsUSx3QkFhRyxRQUFBLHNCQUNILFFBQUEsc0IsUSxrQkFBWSxRQUFBLGlCQUtWLFFBQUEsZ0JBQ0UsUUFBQSxnQkFHRCxRQUFBLG9CQUVELFFBQUEsNEJBQ0UsUUFBQSxxQkFDQSxRQUFBLFdBQ0EsUUFBQSxTQUNBLEtBQUE7QUFDRCxNQUFBLE9BQUEsYUFBQSxRQUFBO0FBRUQsTUFBQSxhQUFLLGFBQVEsUUFBQTtBQUNYLE1BQUEsTUFBQSxhQUFVLFFBQ1I7QUFFSCxNQUFBLFNBQUEsYUFBQSxRQUFBO0FBRUQsTUFBQSxVQUFBLGFBQUEsUUFBQTtBQUNFLG9EQUFBLEdBQ0EsTUFBQSxlQUFTLEtBQUE7SUFDVDs7Ozs7Ozs7Ozs7OztHQW1CSixHQUNBLFlBQUEsRUFBQSxDQUFBO1FBaEJFLElBQUEsSUFBSTtRQUVKLElBQUEsRUFDQSxTQUFLLEtBQUEsUUFBZSxpQkFBcEIsRUFDRixlQUFBLEFBQUEsQ0FBQSxLQUFBLEtBQUEsUUFBQSxnQkFBQSxNQUFBLFFBQUEsT0FBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEVBY21CLEdBQUEsTUFDakIsR0FBQSxPQUFPLEtBQUssSUFBQSxDQUFBLElBQVM7UUFDdkIsSUFBQSxXQUFBLFdBRW1CLE1BQUEsSUFBQSxNQUNqQjtRQUdFLE1BQUEsVUFBUTtZQUNUO1lBQ0g7WUFFbUIsU0FBVyxDQUFDLHlCQUFaLENBQUE7WUFDakIsR0FBQSxJQUFBO1FBQ0Y7USxJLEMsUSwyQixLLHNCQW5GRixNQUFBLElBQUEsTTtRQXdGUyxLQUFBLENBQUE7WUFDQSxTQUFBLFFBQUE7WUFDQSxTQUFBLEFBQUEsQ0FBQSxLQUFBLFFBQW9CLE9BQU8sTUFBQSxRQUFBLE9BQTNCLEtBQUEsSUFBQSxLQUFBLE9BQUEsY0FBQTtZQUNBLFdBQUEsUUFBZ0I7WUFDaEIsWUFBQSxRQUFnQjtZQUNoQixPQUFBLFFBQWM7UUFDZDtRQUNBLElBQUEsQ0FBQSxjQUFBLElBQW1CLElBQUcsWUFBTyxJQUFBO1FBQzdCLElBQUEsQ0FBQSxPQUFBLElBQUEsSUFBQSxLQUFzQixJQUFBO1FBQ3RCLElBQUEsQ0FBQSxRQUFBLElBQUEsSUFBQSxNQUF3QixJQUFBO1FBQ3hCLElBQUEsQ0FBQSxhQUFBLElBQUEsSUFBQSxXQUFrQyxJQUFBO1FBSXpDLElBQUEsQ0FBQSxRQUFRLElBWU4sSUFBTSxNQUFBLElBQUE7UUFFSSxJQUFBLENBQUEsU0FBUyxJQUFBLElBQVEsT0FBakIsSUFBQTtRQUNBLElBQUEsQ0FBQSxRQUFBLElBQVksSUFBRyxNQUFRLElBQUE7UUFFckMsSUFBQSxDQUFBLGNBQUEsSUFBQSxJQUFBLFlBQUEsSUFBQTtRQUNFLElBQUEsQ0FBQSxTQUFBLElBQUEsSUFBQSxPQUFBLElBQUE7UUFDYyxJQUFBLENBQUEsYUFBUyxJQUFBLElBQVEsV0FBakIsSUFBQTtRQUNBLElBQUEsQ0FBQSxZQUFBLElBQVksSUFBRyxVQUFRLElBQUE7UUFJdkIsSUFBQSxDQUFBLFdBQU87UUFHUCxJQUFBLENBQUEsU0FBQTtRQUlBLElBQUEsQ0FBQSxlQUFXO0lBUVg7SUFFQSxlQUFLO1FBSUwsT0FBQSxJQUFBLENBQUEsU0FBYTtJQUtiO0lBSUEsZUFBQSxJQUFBLEVBQUE7UUFHQSxPQUFBO1lBT0EsR0FBQSxLQUFBLENBQUEsZUFBQSxLQUFBO1lBRUEsdUJBQWtCLElBQUEsQ0FBQTtZQUtsQixHQUFBLElBQUEsQ0FBQSxTQUFZLGNBQVo7UUFHQTtJQUVBO0lBRUEsWUFBQSxJQUFBLEVBQVM7UUFJVCxPQUFBO1lBQUEsZUFBZ0IsQ0FBQSxPQUFJLEVBQUEsSUFBQSxDQUFBLE9BQXBCLENBQUE7UUFBQTtJQUtmO0FBRUQ7QSxRLFM7QSxLO0EsTyxTO0EsTyxXLE87QSxPLHFCLE87QSxPLDRCLE87QSxPLG9CLE87QSxPLGdCLE87QSxPLGdCLE87QSxPLGlCLE87QSxPLGtCLE87QSxPLHNCLE87QSxPLHNCLE87QSxPLHdCLE87QSxPLDJCLE87QSxRLFcsTyxVLFEscUIsTyxvQixRLDRCLE8sMkIsUSxvQixPLG1CLFEsZ0IsTyxlLFEsZ0IsTyxlLFEsaUIsTyxnQixRLGtCLE8saUIsUSxzQixPLHFCLFEsc0IsTyxxQixRLHdCLE8sdUIsUSwyQixPO0EsUSxTLFE7QSxRLGUsUTtBLEMsUyxNO0ksbUI7SSxPLFMsUTtJLE8sZSxRO0ksTyxPLFc7SSxPLGEsVztJLE8sYyxJO0ksTyxPLEk7SSxPLFEsSTtJLE8sYSxJO0ksTyxRLEk7SSxPLGtCLEk7SSxPLFMsSTtJLE8sUSxJO0ksTyxjLEk7SSxPLFMsSTtJLE8sYSxJO0ksTyxhLEk7SSxPLFksSTtJLE8sZ0IsSTtBLEMsRSxTLFEsVSxDLFEsUyxDLEM7QSxVLE8sVTtBLFEsVTs7Ozs7QTtBLEkseUIsQSxJLEksSSxDLDBCLFMsUSxFLEssRSxLLEUsSSxFLEM7SSxJLFMsSyxNLEksVTtJLEksUyxPLEMsRyxNLEksVTtJLEksTyxVLGEsYSxTLEMsSSxDLE0sSSxXLE0sSSxVO0ksTyxTLE0sRSxL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QUFBO0FBRUQ7QUFDRSxRQUFBLG1CQUFBO0FBQ0QsTUFBQSxxQkFBQSxDQUFBO0lBRUQsSUFBQSxVQUFVLFdBQ1osT0FBQTtJLE8sQSxDLEcsUSxhLEU7QTtBLFEscUI7QSx1QztBLFMsVyxHO0ksSSxDLEssTztJLEksTSxNLEksTztJLE87QTtBLFEsYTtBLDZEO0EsUyxPLEcsRSxHO0ksTyxPLFUsZSxLLEs7QTtBLFEsUztBLFMsTSxNLEUsRyxJO0ksTztBO0EsUSxRO0E7O0MsRyxNLFE7SSxPLHVDLFEsUyxDO1EsTSxJLEEsSyxXLEs7USxNLEksTSxNLEksQSxJLE07USxPLEUsUztJO0E7QSxNLHFCO0ksTyxhO0ksTyxXLGUsYTtJLE8sTyxhLGUsYTtJLE8sYztBO0EsUSxxQjtBLE0sb0IsQztJLE8sTyxDLFksUSxZLEssSSxLLEksUSxHLE07QTtBLFEsb0I7QSxNLFksQyxTO0ksTSxXLEk7SSxJLEEsQyxHLFEsaUIsRSxVLE8sUSxJLFEsUSxJO0ksTSxRLE8sQyxJLEksTyxDLFM7SSxJLE0sUSxRO1EsSSxNLFUsRyxPLEssQyxFO1EsUSxLLEMsUyxFLE0sTyxpQixFLEksK0IsQztRLE8sSyxDLEU7STtJLE87QTtBLFEsWTtBOztDLEcsTSxXLEM7SSxJLEMsSyxPO0ksSSxPLFcsYSxPLE8sSyxLLFM7SSxJLE8sUyxhLE8sSztJLE0sSSxNO0E7QSxRLFc7OztBQy9oQ0EsSUFBSSxLQUFHLE9BQU87QUFBTyxJQUFJLElBQUUsT0FBTztBQUFlLElBQUksS0FBRyxPQUFPO0FBQXlCLElBQUksS0FBRyxPQUFPO0FBQW9CLElBQUksS0FBRyxPQUFPLGdCQUFlLEtBQUcsT0FBTyxVQUFVO0FBQWUsSUFBSSxJQUFFLENBQUMsR0FBRSxJQUFJLElBQUssQ0FBQSxLQUFHLEVBQUUsQUFBQyxDQUFBLElBQUU7WUFBQyxTQUFRLENBQUM7UUFBQyxDQUFBLEVBQUcsU0FBUSxJQUFHLEVBQUUsT0FBTSxHQUFHLEtBQUcsQ0FBQyxHQUFFO0lBQUssSUFBSSxJQUFJLEtBQUssRUFBRSxFQUFFLEdBQUUsR0FBRTtRQUFDLEtBQUksQ0FBQyxDQUFDLEVBQUU7UUFBQyxZQUFXLENBQUM7SUFBQztBQUFFLEdBQUUsSUFBRSxDQUFDLEdBQUUsR0FBRSxHQUFFO0lBQUssSUFBRyxLQUFHLE9BQU8sS0FBRyxZQUFVLE9BQU8sS0FBRyxZQUFXLEtBQUksSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsS0FBSyxHQUFFLE1BQUksTUFBSSxLQUFHLEVBQUUsR0FBRSxHQUFFO1FBQUMsS0FBSSxJQUFJLENBQUMsQ0FBQyxFQUFFO1FBQUMsWUFBVyxDQUFFLENBQUEsSUFBRSxHQUFHLEdBQUUsRUFBQyxLQUFJLEVBQUU7SUFBVTtJQUFHLE9BQU87QUFBQyxHQUFFLElBQUUsQ0FBQyxHQUFFLEdBQUUsSUFBSyxDQUFBLEVBQUUsR0FBRSxHQUFFLFlBQVcsS0FBRyxFQUFFLEdBQUUsR0FBRSxVQUFTLEdBQUcsSUFBRSxDQUFDLEdBQUUsR0FBRSxJQUFLLENBQUEsSUFBRSxLQUFHLE9BQUssR0FBRyxHQUFHLE1BQUksQ0FBQyxHQUFFLEVBQUUsS0FBRyxDQUFDLEtBQUcsQ0FBQyxFQUFFLGFBQVcsRUFBRSxHQUFFLFdBQVU7UUFBQyxPQUFNO1FBQUUsWUFBVyxDQUFDO0lBQUMsS0FBRyxHQUFFLEVBQUMsR0FBRyxLQUFHLENBQUEsSUFBRyxFQUFFLEVBQUUsQ0FBQyxHQUFFLGNBQWE7UUFBQyxPQUFNLENBQUM7SUFBQyxJQUFHO0FBQUcsSUFBSSxJQUFFLEVBQUUsQ0FBQTtJQUFJO0lBQWEsRUFBRSxhQUFXO0lBQUcsRUFBRSxjQUFZO0lBQUcsRUFBRSxnQkFBYztJQUFHLElBQUksSUFBRSxFQUFFLEVBQUMsSUFBRSxFQUFFLEVBQUMsS0FBRyxPQUFPLGFBQVcsTUFBSSxhQUFXLE9BQU0sSUFBRTtJQUFtRSxJQUFJLElBQUUsR0FBRSxJQUFFLEVBQUUsUUFBTyxJQUFFLEdBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBQyxDQUFDLENBQUMsRUFBRSxXQUFXLEdBQUcsR0FBQztJQUFFLElBQUksR0FBRTtJQUFFLENBQUMsQ0FBQyxJQUFJLFdBQVcsR0FBRyxHQUFDO0lBQUcsQ0FBQyxDQUFDLElBQUksV0FBVyxHQUFHLEdBQUM7SUFBRyxTQUFTLEVBQUUsQ0FBQztRQUFFLElBQUksSUFBRSxFQUFFO1FBQU8sSUFBRyxJQUFFLElBQUUsR0FBRSxNQUFNLElBQUksTUFBTTtRQUFrRCxJQUFJLElBQUUsRUFBRSxRQUFRO1FBQUssTUFBSSxNQUFLLENBQUEsSUFBRSxDQUFBO1FBQUcsSUFBSSxJQUFFLE1BQUksSUFBRSxJQUFFLElBQUUsSUFBRTtRQUFFLE9BQU07WUFBQztZQUFFO1NBQUU7SUFBQTtJQUFDLFNBQVMsR0FBRyxDQUFDO1FBQUUsSUFBSSxJQUFFLEVBQUUsSUFBRyxJQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUMsSUFBRSxDQUFDLENBQUMsRUFBRTtRQUFDLE9BQU0sQUFBQyxDQUFBLElBQUUsQ0FBQSxJQUFHLElBQUUsSUFBRTtJQUFDO0lBQUMsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLE9BQU0sQUFBQyxDQUFBLElBQUUsQ0FBQSxJQUFHLElBQUUsSUFBRTtJQUFDO0lBQUMsU0FBUyxHQUFHLENBQUM7UUFBRSxJQUFJLEdBQUUsSUFBRSxFQUFFLElBQUcsSUFBRSxDQUFDLENBQUMsRUFBRSxFQUFDLElBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBQyxJQUFFLElBQUksR0FBRyxHQUFHLEdBQUUsR0FBRSxLQUFJLElBQUUsR0FBRSxJQUFFLElBQUUsSUFBRSxJQUFFLElBQUUsR0FBRTtRQUFFLElBQUksSUFBRSxHQUFFLElBQUUsR0FBRSxLQUFHLEVBQUUsSUFBRSxDQUFDLENBQUMsRUFBRSxXQUFXLEdBQUcsSUFBRSxLQUFHLENBQUMsQ0FBQyxFQUFFLFdBQVcsSUFBRSxHQUFHLElBQUUsS0FBRyxDQUFDLENBQUMsRUFBRSxXQUFXLElBQUUsR0FBRyxJQUFFLElBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxJQUFFLEdBQUcsRUFBQyxDQUFDLENBQUMsSUFBSSxHQUFDLEtBQUcsS0FBRyxLQUFJLENBQUMsQ0FBQyxJQUFJLEdBQUMsS0FBRyxJQUFFLEtBQUksQ0FBQyxDQUFDLElBQUksR0FBQyxJQUFFO1FBQUksT0FBTyxNQUFJLEtBQUksQ0FBQSxJQUFFLENBQUMsQ0FBQyxFQUFFLFdBQVcsR0FBRyxJQUFFLElBQUUsQ0FBQyxDQUFDLEVBQUUsV0FBVyxJQUFFLEdBQUcsSUFBRSxHQUFFLENBQUMsQ0FBQyxJQUFJLEdBQUMsSUFBRSxHQUFFLEdBQUcsTUFBSSxLQUFJLENBQUEsSUFBRSxDQUFDLENBQUMsRUFBRSxXQUFXLEdBQUcsSUFBRSxLQUFHLENBQUMsQ0FBQyxFQUFFLFdBQVcsSUFBRSxHQUFHLElBQUUsSUFBRSxDQUFDLENBQUMsRUFBRSxXQUFXLElBQUUsR0FBRyxJQUFFLEdBQUUsQ0FBQyxDQUFDLElBQUksR0FBQyxLQUFHLElBQUUsS0FBSSxDQUFDLENBQUMsSUFBSSxHQUFDLElBQUUsR0FBRSxHQUFHO0lBQUM7SUFBQyxTQUFTLEdBQUcsQ0FBQztRQUFFLE9BQU8sQ0FBQyxDQUFDLEtBQUcsS0FBRyxHQUFHLEdBQUMsQ0FBQyxDQUFDLEtBQUcsS0FBRyxHQUFHLEdBQUMsQ0FBQyxDQUFDLEtBQUcsSUFBRSxHQUFHLEdBQUMsQ0FBQyxDQUFDLElBQUUsR0FBRztJQUFBO0lBQUMsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUksSUFBSSxHQUFFLElBQUUsRUFBRSxFQUFDLElBQUUsR0FBRSxJQUFFLEdBQUUsS0FBRyxFQUFFLElBQUUsQUFBQyxDQUFBLENBQUMsQ0FBQyxFQUFFLElBQUUsS0FBRyxRQUFPLElBQUksQ0FBQSxDQUFDLENBQUMsSUFBRSxFQUFFLElBQUUsSUFBRSxLQUFJLElBQUksQ0FBQSxDQUFDLENBQUMsSUFBRSxFQUFFLEdBQUMsR0FBRSxHQUFHLEVBQUUsS0FBSyxHQUFHO1FBQUksT0FBTyxFQUFFLEtBQUs7SUFBRztJQUFDLFNBQVMsR0FBRyxDQUFDO1FBQUUsSUFBSSxJQUFJLEdBQUUsSUFBRSxFQUFFLFFBQU8sSUFBRSxJQUFFLEdBQUUsSUFBRSxFQUFFLEVBQUMsSUFBRSxPQUFNLElBQUUsR0FBRSxJQUFFLElBQUUsR0FBRSxJQUFFLEdBQUUsS0FBRyxFQUFFLEVBQUUsS0FBSyxHQUFHLEdBQUUsR0FBRSxJQUFFLElBQUUsSUFBRSxJQUFFLElBQUU7UUFBSSxPQUFPLE1BQUksSUFBRyxDQUFBLElBQUUsQ0FBQyxDQUFDLElBQUUsRUFBRSxFQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsS0FBRyxFQUFFLEdBQUMsQ0FBQyxDQUFDLEtBQUcsSUFBRSxHQUFHLEdBQUMsS0FBSSxJQUFHLE1BQUksS0FBSSxDQUFBLElBQUUsQUFBQyxDQUFBLENBQUMsQ0FBQyxJQUFFLEVBQUUsSUFBRSxDQUFBLElBQUcsQ0FBQyxDQUFDLElBQUUsRUFBRSxFQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsS0FBRyxHQUFHLEdBQUMsQ0FBQyxDQUFDLEtBQUcsSUFBRSxHQUFHLEdBQUMsQ0FBQyxDQUFDLEtBQUcsSUFBRSxHQUFHLEdBQUMsSUFBRyxHQUFHLEVBQUUsS0FBSztJQUFHO0FBQUM7QUFBRyxJQUFJLElBQUUsRUFBRSxDQUFBO0lBQUksRUFBRSxPQUFLLFNBQVMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFJLEdBQUUsR0FBRSxJQUFFLElBQUUsSUFBRSxJQUFFLEdBQUUsSUFBRSxBQUFDLENBQUEsS0FBRyxDQUFBLElBQUcsR0FBRSxJQUFFLEtBQUcsR0FBRSxJQUFFLElBQUcsSUFBRSxJQUFFLElBQUUsSUFBRSxHQUFFLElBQUUsSUFBRSxLQUFHLEdBQUUsSUFBRSxDQUFDLENBQUMsSUFBRSxFQUFFO1FBQUMsSUFBSSxLQUFHLEdBQUUsSUFBRSxJQUFFLEFBQUMsQ0FBQSxLQUFHLENBQUMsQ0FBQSxJQUFHLEdBQUUsTUFBSSxDQUFDLEdBQUUsS0FBRyxHQUFFLElBQUUsR0FBRSxJQUFFLElBQUUsTUFBSSxDQUFDLENBQUMsSUFBRSxFQUFFLEVBQUMsS0FBRyxHQUFFLEtBQUc7UUFBRyxJQUFJLElBQUUsSUFBRSxBQUFDLENBQUEsS0FBRyxDQUFDLENBQUEsSUFBRyxHQUFFLE1BQUksQ0FBQyxHQUFFLEtBQUcsR0FBRSxJQUFFLEdBQUUsSUFBRSxJQUFFLE1BQUksQ0FBQyxDQUFDLElBQUUsRUFBRSxFQUFDLEtBQUcsR0FBRSxLQUFHO1FBQUcsSUFBRyxNQUFJLEdBQUUsSUFBRSxJQUFFO2FBQU07WUFBQyxJQUFHLE1BQUksR0FBRSxPQUFPLElBQUUsTUFBSSxBQUFDLENBQUEsSUFBRSxLQUFHLENBQUEsSUFBSSxDQUFBLElBQUUsQ0FBQTtZQUFHLElBQUUsSUFBRSxLQUFLLElBQUksR0FBRSxJQUFHLElBQUUsSUFBRTtRQUFDO1FBQUMsT0FBTSxBQUFDLENBQUEsSUFBRSxLQUFHLENBQUEsSUFBRyxJQUFFLEtBQUssSUFBSSxHQUFFLElBQUU7SUFBRTtJQUFFLEVBQUUsUUFBTSxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUksR0FBRSxHQUFFLEdBQUUsSUFBRSxJQUFFLElBQUUsSUFBRSxHQUFFLElBQUUsQUFBQyxDQUFBLEtBQUcsQ0FBQSxJQUFHLEdBQUUsSUFBRSxLQUFHLEdBQUUsSUFBRSxNQUFJLEtBQUcsS0FBSyxJQUFJLEdBQUUsT0FBSyxLQUFLLElBQUksR0FBRSxPQUFLLEdBQUUsSUFBRSxJQUFFLElBQUUsSUFBRSxHQUFFLElBQUUsSUFBRSxJQUFFLElBQUcsS0FBRyxJQUFFLEtBQUcsTUFBSSxLQUFHLElBQUUsSUFBRSxJQUFFLElBQUU7UUFBRSxJQUFJLElBQUUsS0FBSyxJQUFJLElBQUcsTUFBTSxNQUFJLE1BQUksSUFBRSxJQUFHLENBQUEsSUFBRSxNQUFNLEtBQUcsSUFBRSxHQUFFLElBQUUsQ0FBQSxJQUFJLENBQUEsSUFBRSxLQUFLLE1BQU0sS0FBSyxJQUFJLEtBQUcsS0FBSyxNQUFLLElBQUcsQ0FBQSxJQUFFLEtBQUssSUFBSSxHQUFFLENBQUMsRUFBQyxJ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SUFBSSxXQUFXO1FBQXdDLElBQUk7UUFBRSxPQUFPLE1BQUksS0FBSyxLQUFHLE1BQUksS0FBSyxJQUFFLElBQUUsSUFBSSxXQUFXLEtBQUcsTUFBSSxLQUFLLElBQUUsSUFBRSxJQUFJLFdBQVcsR0FBRSxLQUFHLElBQUUsSUFBSSxXQUFXLEdBQUUsR0FBRSxJQUFHLE9BQU8sZUFBZSxHQUFFLEVBQUUsWUFBVztJQUFDO0lBQUMsU0FBUyxHQUFHLENBQUM7UUFBRSxJQUFHLEVBQUUsU0FBUyxJQUFHO1lBQUMsSUFBSSxJQUFFLEVBQUUsRUFBRSxVQUFRLEdBQUUsSUFBRSxFQUFFO1lBQUcsT0FBTyxFQUFFLFdBQVMsS0FBRyxFQUFFLEtBQUssR0FBRSxHQUFFLEdBQUUsSUFBRztRQUFDO1FBQUMsSUFBRyxFQUFFLFdBQVMsS0FBSyxHQUFFLE9BQU8sT0FBTyxFQUFFLFVBQVEsWUFBVSxFQUFFLEVBQUUsVUFBUSxFQUFFLEtBQUcsRUFBRTtRQUFHLElBQUcsRUFBRSxTQUFPLFlBQVUsTUFBTSxRQUFRLEVBQUUsT0FBTSxPQUFPLEVBQUUsRUFBRTtJQUFLO0lBQUMsU0FBUyxFQUFFLENBQUM7UUFBRSxJQUFHLEtBQUcsR0FBRSxNQUFNLElBQUksV0FBVyw0REFBMEQsRUFBRSxTQUFTLE1BQUk7UUFBVSxPQUFPLElBQUU7SUFBQztJQUFDLFNBQVMsR0FBRyxDQUFDO1FBQUUsT0FBTSxDQUFDLEtBQUcsS0FBSSxDQUFBLElBQUUsQ0FBQSxHQUFHLEVBQUUsTUFBTSxDQUFDO0lBQUU7SUFBQyxFQUFFLFdBQVMsU0FBUyxDQUFDO1FBQUUsT0FBTyxLQUFHLFFBQU0sRUFBRSxjQUFZLENBQUMsS0FBRyxNQUFJLEVBQUU7SUFBUztJQUFFLEVBQUUsVUFBUSxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRyxFQUFFLEdBQUUsZUFBYyxDQUFBLElBQUUsRUFBRSxLQUFLLEdBQUUsRUFBRSxRQUFPLEVBQUUsV0FBVSxHQUFHLEVBQUUsR0FBRSxlQUFjLENBQUEsSUFBRSxFQUFFLEtBQUssR0FBRSxFQUFFLFFBQU8sRUFBRSxXQUFVLEdBQUcsQ0FBQyxFQUFFLFNBQVMsTUFBSSxDQUFDLEVBQUUsU0FBUyxJQUFHLE1BQU0sSUFBSSxVQUFVO1FBQXlFLElBQUcsTUFBSSxHQUFFLE9BQU87UUFBRSxJQUFJLElBQUUsRUFBRSxRQUFPLElBQUUsRUFBRTtRQUFPLElBQUksSUFBSSxJQUFFLEdBQUUsSUFBRSxLQUFLLElBQUksR0FBRSxJQUFHLElBQUUsR0FBRSxFQUFFLEVBQUUsSUFBRyxDQUFDLENBQUMsRUFBRSxLQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUM7WUFBQyxJQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUMsSUFBRSxDQUFDLENBQUMsRUFBRTtZQUFDO1FBQUs7UUFBQyxPQUFPLElBQUUsSUFBRSxLQUFHLElBQUUsSUFBRSxJQUFFO0lBQUM7SUFBRSxFQUFFLGFBQVcsU0FBUyxDQUFDO1FBQUUsT0FBTyxPQUFPLEdBQUc7WUFBZSxLQUFJO1lBQU0sS0FBSTtZQUFPLEtBQUk7WUFBUSxLQUFJO1lBQVEsS0FBSTtZQUFTLEtBQUk7WUFBUyxLQUFJO1lBQVMsS0FBSTtZQUFPLEtBQUk7WUFBUSxLQUFJO1lBQVUsS0FBSTtnQkFBVyxPQUFNLENBQUM7WUFBRTtnQkFBUSxPQUFNLENBQUM7UUFBQztJQUFDO0lBQUUsRUFBRSxTQUFPLFNBQVMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFHLENBQUMsTUFBTSxRQUFRLElBQUcsTUFBTSxJQUFJLFVBQVU7UUFBK0MsSUFBRyxFQUFFLFdBQVMsR0FBRSxPQUFPLEVBQUUsTUFBTTtRQUFHLElBQUk7UUFBRSxJQUFHLE1BQUksS0FBSyxHQUFFLElBQUksSUFBRSxHQUFFLElBQUUsR0FBRSxJQUFFLEVBQUUsUUFBTyxFQUFFLEVBQUUsS0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQU8sSUFBSSxJQUFFLEVBQUUsWUFBWSxJQUFHLElBQUU7UUFBRSxJQUFJLElBQUUsR0FBRSxJQUFFLEVBQUUsUUFBTyxFQUFFLEVBQUU7WUFBQyxJQUFJLElBQUUsQ0FBQyxDQUFDLEVBQUU7WUFBQyxJQUFHLEVBQUUsR0FBRSxhQUFZLElBQUUsRUFBRSxTQUFPLEVBQUUsU0FBUSxDQUFBLEVBQUUsU0FBUyxNQUFLLENBQUEsSUFBRSxFQUFFLEtBQUssRUFBQyxHQUFHLEVBQUUsS0FBSyxHQUFFLEVBQUMsSUFBRyxXQUFXLFVBQVUsSUFBSSxLQUFLLEdBQUUsR0FBRTtpQkFBUSxJQUFHLEVBQUUsU0FBUyxJQUFHLEVBQUUsS0FBSyxHQUFFO2lCQUFRLE1BQU0sSUFBSSxVQUFVO1lBQStDLEtBQUcsRUFBRTtRQUFNO1FBQUMsT0FBTztJQUFDO0lBQUUsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRyxFQUFFLFNBQVMsSUFBRyxPQUFPLEVBQUU7UUFBTyxJQUFHLFlBQVksT0FBTyxNQUFJLEVBQUUsR0FBRSxjQUFhLE9BQU8sRUFBRTtRQUFXLElBQUcsT0FBTyxLQUFHLFVBQVMsTUFBTSxJQUFJLFVBQVUsNkZBQTJGLE9BQU87UUFBRyxJQUFJLElBQUUsRUFBRSxRQUFPLElBQUUsVUFBVSxTQUFPLEtBQUcsU0FBUyxDQUFDLEVBQUUsS0FBRyxDQUFDO1FBQUUsSUFBRyxDQUFDLEtBQUcsTUFBSSxHQUFFLE9BQU87UUFBRSxJQUFJLElBQUUsQ0FBQztRQUFFLE9BQU8sT0FBTztZQUFHLEtBQUk7WUFBUSxLQUFJO1lBQVMsS0FBSTtnQkFBUyxPQUFPO1lBQUUsS0FBSTtZQUFPLEtBQUk7Z0JBQVEsT0FBTyxFQUFFLEdBQUc7WUFBTyxLQUFJO1lBQU8sS0FBSTtZQUFRLEtBQUk7WUFBVSxLQUFJO2dCQUFXLE9BQU8sSUFBRTtZQUFFLEtBQUk7Z0JBQU0sT0FBTyxNQUFJO1lBQUUsS0FBSTtnQkFBUyxPQUFPLEdBQUcsR0FBRztZQUFPO2dCQUFRLElBQUcsR0FBRSxPQUFPLElBQUUsS0FBRyxFQUFFLEdBQUc7Z0JBQU8sSUFBRSxBQUFDLENBQUEsS0FBRyxDQUFBLEVBQUcsZUFBYyxJQUFFLENBQUM7UUFBQztJQUFDO0lBQUMsRUFBRSxhQUFXO0lBQUcsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUksSUFBRSxDQUFDO1FBQUUsSUFBRyxBQUFDLENBQUEsTUFBSSxLQUFLLEtBQUcsSUFBRSxDQUFBLEtBQUssQ0FBQSxJQUFFLENBQUEsR0FBRyxJQUFFLElBQUksQ0FBQyxVQUFTLENBQUEsQUFBQyxDQUFBLE1BQUksS0FBSyxLQUFHLElBQUUsSUFBSSxDQUFDLE1BQUssS0FBSyxDQUFBLElBQUUsSUFBSSxDQUFDLE1BQUssR0FBRyxLQUFHLENBQUEsS0FBSyxDQUFBLE9BQUssR0FBRSxPQUFLLEdBQUUsS0FBRyxDQUFBLEdBQUcsT0FBTTtRQUFHLElBQUksS0FBSSxDQUFBLElBQUUsTUFBSyxJQUFLLE9BQU87WUFBRyxLQUFJO2dCQUFNLE9BQU8sR0FBRyxJQUFJLEVBQUMsR0FBRTtZQUFHLEtBQUk7WUFBTyxLQUFJO2dCQUFRLE9BQU8sR0FBRyxJQUFJLEVBQUMsR0FBRTtZQUFHLEtBQUk7Z0JBQVEsT0FBTyxHQUFHLElBQUksRUFBQyxHQUFFO1lBQUcsS0FBSTtZQUFTLEtBQUk7Z0JBQVMsT0FBTyxHQUFHLElBQUksRUFBQyxHQUFFO1lBQUcsS0FBSTtnQkFBUyxPQUFPLEdBQUcsSUFBSSxFQUFDLEdBQUU7WUFBRyxLQUFJO1lBQU8sS0FBSTtZQUFRLEtBQUk7WUFBVSxLQUFJO2dCQUFXLE9BQU8sR0FBRyxJQUFJLEVBQUMsR0FBRTtZQUFHO2dCQUFRLElBQUcsR0FBRSxNQUFNLElBQUksVUFBVSx1QkFBcUI7Z0JBQUcsSUFBRSxBQUFDLENBQUEsSUFBRSxFQUFDLEVBQUcsZUFBYyxJQUFFLENBQUM7UUFBQztJQUFDO0lBQUMsRUFBRSxVQUFVLFlBQVUsQ0FBQztJQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFJLElBQUUsQ0FBQyxDQUFDLEVBQUU7UUFBQyxDQUFDLENBQUMsRUFBRSxHQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBQztJQUFDO0lBQUMsRUFBRSxVQUFVLFNBQU87UUFBVyxJQUFJLElBQUUsSUFBSSxDQUFDO1FBQU8sSUFBRyxJQUFFLE1BQUksR0FBRSxNQUFNLElBQUksV0FBVztRQUE2QyxJQUFJLElBQUksSUFBRSxHQUFFLElBQUUsR0FBRSxLQUFHLEVBQUUsRUFBRSxJQUFJLEVBQUMsR0FBRSxJQUFFO1FBQUcsT0FBTyxJQUFJO0lBQUE7SUFBRSxFQUFFLFVBQVUsU0FBTztRQUFXLElBQUksSUFBRSxJQUFJLENBQUM7UUFBTyxJQUFHLElBQUUsTUFBSSxHQUFFLE1BQU0sSUFBSSxXQUFXO1FBQTZDLElBQUksSUFBSSxJQUFFLEdBQUUsSUFBRSxHQUFFLEtBQUcsRUFBRSxFQUFFLElBQUksRUFBQyxHQUFFLElBQUUsSUFBRyxFQUFFLElBQUksRUFBQyxJQUFFLEdBQUUsSUFBRTtRQUFHLE9BQU8sSUFBSTtJQUFBO0lBQUUsRUFBRSxVQUFVLFNBQU87UUFBVyxJQUFJLElBQUUsSUFBSSxDQUFDO1FBQU8sSUFBRyxJQUFFLE1BQUksR0FBRSxNQUFNLElBQUksV0FBVztRQUE2QyxJQUFJLElBQUksSUFBRSxHQUFFLElBQUUsR0FBRSxLQUFHLEVBQUUsRUFBRSxJQUFJLEVBQUMsR0FBRSxJQUFFLElBQUcsRUFBRSxJQUFJLEVBQUMsSUFBRSxHQUFFLElBQUUsSUFBRyxFQUFFLElBQUksRUFBQyxJQUFFLEdBQUUsSUFBRSxJQUFHLEVBQUUsSUFBSSxFQUFDLElBQUUsR0FBRSxJQUFFO1FBQUcsT0FBTyxJQUFJO0lBQUE7SUFBRSxFQUFFLFVBQVUsV0FBUztRQUFXLElBQUksSUFBRSxJQUFJLENBQUM7UUFBTyxPQUFPLE1BQUksSUFBRSxLQUFHLFVBQVUsV0FBUyxJQUFFLEdBQUcsSUFBSSxFQUFDLEdBQUUsS0FBRyxHQUFHLE1BQU0sSUFBSSxFQUFDO0lBQVU7SUFBRSxFQUFFLFVBQVUsaUJBQWUsRUFBRSxVQUFVO0lBQVMsRUFBRSxVQUFVLFNBQU8sU0FBUyxDQUFDO1FBQUUsSUFBRyxDQUFDLEVBQUUsU0FBUyxJQUFHLE1BQU0sSUFBSSxVQUFVO1FBQTZCLE9BQU8sSUFBSSxLQUFHLElBQUUsQ0FBQyxJQUFFLEVBQUUsUUFBUSxJQUFJLEVBQUMsT0FBSztJQUFDO0lBQUUsRUFBRSxVQUFVLFVBQVE7UUFBVyxJQUFJLElBQUUsSUFBRyxJQUFFLEVBQUU7UUFBa0IsT0FBTyxJQUFFLElBQUksQ0FBQyxTQUFTLE9BQU0sR0FBRSxHQUFHLFFBQVEsV0FBVSxPQUFPLFFBQU8sSUFBSSxDQUFDLFNBQU8sS0FBSSxDQUFBLEtBQUcsT0FBTSxHQUFHLGFBQVcsSUFBRTtJQUFHO0lBQUUsTUFBSyxDQUFBLEVBQUUsU0FBUyxDQUFDLEdBQUcsR0FBQyxFQUFFLFVBQVUsT0FBTTtJQUFHLEVBQUUsVUFBVSxVQUFRLFNBQVMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFHLEVBQUUsR0FBRSxlQUFjLENBQUEsSUFBRSxFQUFFLEtBQUssR0FBRSxFQUFFLFFBQU8sRUFBRSxXQUFVLEdBQUcsQ0FBQyxFQUFFLFNBQVMsSUFBRyxNQUFNLElBQUksVUFBVSxtRkFBaUYsT0FBTztRQUFHLElBQUcsTUFBSSxLQUFLLEtBQUksQ0FBQSxJQUFFLENBQUEsR0FBRyxNQUFJLEtBQUssS0FBSSxDQUFBLElBQUUsSUFBRSxFQUFFLFNBQU8sQ0FBQSxHQUFHLE1BQUksS0FBSyxLQUFJLENBQUEsSUFBRSxDQUFBLEdBQUcsTUFBSSxLQUFLLEtBQUksQ0FBQSxJQUFFLElBQUksQ0FBQyxNQUFLLEdBQUcsSUFBRSxLQUFHLElBQUUsRUFBRSxVQUFRLElBQUUsS0FBRyxJQUFFLElBQUksQ0FBQyxRQUFPLE1BQU0sSUFBSSxXQUFXO1FBQXNCLElBQUcsS0FBRyxLQUFHLEtBQUcsR0FBRSxPQUFPO1FBQUUsSUFBRyxLQUFHLEdBQUUsT0FBTTtRQUFHLElBQUcsS0FBRyxHQUFFLE9BQU87UUFBRSxJQUFHLE9BQUssR0FBRSxPQUFLLEdBQUUsT0FBSyxHQUFFLE9BQUssR0FBRSxJQUFJLEtBQUcsR0FBRSxPQUFPO1FBQUUsSUFBSSxJQUFFLElBQUUsR0FBRSxJQUFFLElBQUUsR0FBRSxJQUFFLEtBQUssSUFBSSxHQUFFLElBQUcsSUFBRSxJQUFJLENBQUMsTUFBTSxHQUFFLElBQUcsSUFBRSxFQUFFLE1BQU0sR0FBRTtRQUFHLElBQUksSUFBSSxJQUFFLEdBQUUsSUFBRSxHQUFFLEVBQUUsRUFBRSxJQUFHLENBQUMsQ0FBQyxFQUFFLEtBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBQztZQUFDLElBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBQyxJQUFFLENBQUMsQ0FBQyxFQUFFO1lBQUM7UUFBSztRQUFDLE9BQU8sSUFBRSxJQUFFLEtBQUcsSUFBRSxJQUFFLElBQUU7SUFBQztJQUFFLFNBQVMsR0FBRyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUcsRUFBRSxXQUFTLEdBQUUsT0FBTTtRQUFHLElBQUcsT0FBTyxLQUFHLFdBQVUsQ0FBQSxJQUFFLEdBQUUsSUFBRSxDQUFBLElBQUcsSUFBRSxhQUFXLElBQUUsYUFBVyxJQUFFLGVBQWMsQ0FBQSxJQUFFLFdBQVUsR0FBRyxJQUFFLENBQUMsR0FBRSxFQUFFLE1BQUssQ0FBQSxJQUFFLElBQUUsSUFBRSxFQUFFLFNBQU8sQ0FBQSxHQUFHLElBQUUsS0FBSSxDQUFBLElBQUUsRUFBRSxTQUFPLENBQUEsR0FBRyxLQUFHLEVBQUUsUUFBTztZQUFDLElBQUcsR0FBRSxPQUFNO1lBQUcsSUFBRSxFQUFFLFNBQU87UUFBQyxPQUFNLElBQUcsSUFBRTtZQUFFLElBQUcsR0FBRSxJQUFFO2lCQUFPLE9BQU07O1FBQUcsSUFBRyxPQUFPLEtBQUcsWUFBVyxDQUFBLElBQUUsRUFBRSxLQUFLLEdBQUUsRUFBQyxHQUFHLEVBQUUsU0FBUyxJQUFHLE9BQU8sRUFBRSxXQUFTLElBQUUsS0FBRyxHQUFHLEdBQUUsR0FBRSxHQUFFLEdBQUU7UUFBRyxJQUFHLE9BQU8sS0FBRyxVQUFTLE9BQU8sSUFBRSxJQUFFLEtBQUksT0FBTyxXQUFXLFVBQVUsV0FBUyxhQUFXLElBQUUsV0FBVyxVQUFVLFFBQVEsS0FBSyxHQUFFLEdBQUUsS0FBRyxXQUFXLFVBQVUsWUFBWSxLQUFLLEdBQUUsR0FBRSxLQUFHLEdBQUcsR0FBRTtZQUFDO1NBQUUsRUFBQyxHQUFFLEdBQUU7UUFBRyxNQUFNLElBQUksVUFBVTtJQUF1QztJQUFDLFNBQVMsR0FBRyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUksSUFBRSxHQUFFLElBQUUsRUFBRSxRQUFPLElBQUUsRUFBRTtRQUFPLElBQUcsTUFBSSxLQUFLLEtBQUksQ0FBQSxJQUFFLE9BQU8sR0FBRyxlQUFjLE1BQUksVUFBUSxNQUFJLFdBQVMsTUFBSSxhQUFXLE1BQUksVUFBUyxHQUFHO1lBQUMsSUFBRyxFQUFFLFNBQU8sS0FBRyxFQUFFLFNBQU8sR0FBRSxPQUFNO1lBQUcsSUFBRSxHQUFFLEtBQUcsR0FBRSxLQUFHLEdBQUUsS0FBRztRQUFDO1FBQUMsU0FBUyxFQUFFLENBQUMsRUFBQyxDQUFDO1lBQUUsT0FBTyxNQUFJLElBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBQyxFQUFFLGFBQWEsSUFBRTtRQUFFO1FBQUMsSUFBSTtRQUFFLElBQUcsR0FBRTtZQUFDLElBQUksSUFBRTtZQUFHLElBQUksSUFBRSxHQUFFLElBQUUsR0FBRSxJQUFJLElBQUcsRUFBRSxHQUFFLE9BQUssRUFBRSxHQUFFLE1BQUksS0FBRyxJQUFFLElBQUUsSUFBRztnQkFBQyxJQUFHLE1BQUksTUFBSyxDQUFBLElBQUUsQ0FBQSxHQUFHLElBQUUsSUFBRSxNQUFJLEdBQUUsT0FBTyxJQUFFO1lBQUMsT0FBTSxNQUFJLE1BQUssQ0FBQSxLQUFHLElBQUUsQ0FBQSxHQUFHLElBQUU7UUFBRSxPQUFNLElBQUksSUFBRSxJQUFFLEtBQUksQ0FBQSxJQUFFLElBQUUsQ0FBQSxHQUFHLElBQUUsR0FBRSxLQUFHLEdBQUUsSUFBSTtZQUFDLElBQUksSUFBRSxDQUFDO1lBQUUsSUFBSSxJQUFJLElBQUUsR0FBRSxJQUFFLEdBQUUsSUFBSSxJQUFHLEVBQUUsR0FBRSxJQUFFLE9BQUssRUFBRSxHQUFFLElBQUc7Z0JBQUMsSUFBRSxDQUFDO2dCQUFFO1lBQUs7WUFBQyxJQUFHLEdBQUUsT0FBTztRQUFDO1FBQUMsT0FBTTtJQUFFO0lBQUMsRUFBRSxVQUFVLFdBQVMsU0FBUyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxPQUFPLElBQUksQ0FBQyxRQUFRLEdBQUUsR0FBRSxPQUFLO0lBQUU7SUFBRSxFQUFFLFVBQVUsVUFBUSxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLE9BQU8sR0FBRyxJQUFJLEVBQUMsR0FBRSxHQUFFLEdBQUUsQ0FBQztJQUFFO0lBQUUsRUFBRSxVQUFVLGNBQVksU0FBUyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxPQUFPLEdBQUcsSUFBSSxFQUFDLEdBQUUsR0FBRSxHQUFFLENBQUM7SUFBRTtJQUFFLFNBQVMsR0FBRyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRSxPQUFPLE1BQUk7UUFBRSxJQUFJLElBQUUsRUFBRSxTQUFPO1FBQUUsSUFBRyxDQUFBLElBQUUsT0FBTyxJQUFHLElBQUUsS0FBSSxDQUFBLElBQUUsQ0FBQSxDQUFDLElBQUcsSUFBRTtRQUFFLElBQUksSUFBRSxFQUFFO1FBQU8sSUFBRSxJQUFFLEtBQUksQ0FBQSxJQUFFLElBQUUsQ0FBQTtRQUFHLElBQUk7UUFBRSxJQUFJLElBQUUsR0FBRSxJQUFFLEdBQUUsRUFBRSxFQUFFO1lBQUMsSUFBSSxJQUFFLFNBQVMsRUFBRSxPQUFPLElBQUUsR0FBRSxJQUFHO1lBQUksSUFBRyxFQUFFLElBQUcsT0FBTztZQUFFLENBQUMsQ0FBQyxJQUFFLEVBQUUsR0FBQztRQUFDO1FBQUMsT0FBTztJQUFDO0lBQUMsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxPQUFPLEVBQUUsRUFBRSxHQUFFLEVBQUUsU0FBTyxJQUFHLEdBQUUsR0FBRTtJQUFFO0lBQUMsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxPQUFPLEVBQUUsR0FBRyxJQUFHLEdBQUUsR0FBRTtJQUFFO0lBQUMsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxPQUFPLEVBQUUsR0FBRyxJQUFHLEdBQUUsR0FBRTtJQUFFO0lBQUMsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxPQUFPLEVBQUUsR0FBRyxHQUFFLEVBQUUsU0FBTyxJQUFHLEdBQUUsR0FBRTtJQUFFO0lBQUMsRUFBRSxVQUFVLFFBQU0sU0FBUyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRyxNQUFJLEtBQUssR0FBRSxJQUFFLFFBQU8sSUFBRSxJQUFJLENBQUMsUUFBTyxJQUFFO2FBQU8sSUFBRyxNQUFJLEtBQUssS0FBRyxPQUFPLEtBQUcsVUFBUyxJQUFFLEdBQUUsSUFBRSxJQUFJLENBQUMsUUFBTyxJQUFFO2FBQU8sSUFBRyxTQUFTLElBQUcsSUFBRSxNQUFJLEdBQUUsU0FBUyxLQUFJLENBQUEsSUFBRSxNQUFJLEdBQUUsTUFBSSxLQUFLLEtBQUksQ0FBQSxJQUFFLE1BQUssQ0FBQyxJQUFJLENBQUEsSUFBRSxHQUFFLElBQUUsS0FBSyxDQUFBO2FBQVEsTUFBTSxJQUFJLE1BQU07UUFBMkUsSUFBSSxJQUFFLElBQUksQ0FBQyxTQUFPO1FBQUUsSUFBRyxBQUFDLENBQUEsTUFBSSxLQUFLLEtBQUcsSUFBRSxDQUFBLEtBQUssQ0FBQSxJQUFFLENBQUEsR0FBRyxFQUFFLFNBQU8sS0FBSSxDQUFBLElBQUUsS0FBRyxJQUFFLENBQUEsS0FBSSxJQUFFLElBQUksQ0FBQyxRQUFPLE1BQU0sSUFBSSxXQUFXO1FBQTBDLEtBQUksQ0FBQSxJQUFFLE1BQUs7UUFBRyxJQUFJLElBQUUsQ0FBQztRQUFFLE9BQU8sT0FBTztZQUFHLEtBQUk7Z0JBQU0sT0FBTyxHQUFHLElBQUksRUFBQyxHQUFFLEdBQUU7WUFBRyxLQUFJO1lBQU8sS0FBSTtnQkFBUSxPQUFPLEdBQUcsSUFBSSxFQUFDLEdBQUUsR0FBRTtZQUFHLEtBQUk7WUFBUSxLQUFJO1lBQVMsS0FBSTtnQkFBUyxPQUFPLEdBQUcsSUFBSSxFQUFDLEdBQUUsR0FBRTtZQUFHLEtBQUk7Z0JBQVMsT0FBTyxHQUFHLElBQUksRUFBQyxHQUFFLEdBQUU7WUFBRyxLQUFJO1lBQU8sS0FBSTtZQUFRLEtBQUk7WUFBVSxLQUFJO2dCQUFXLE9BQU8sR0FBRyxJQUFJLEVBQUMsR0FBRSxHQUFFO1lBQUc7Z0JBQVEsSUFBRyxHQUFFLE1BQU0sSUFBSSxVQUFVLHVCQUFxQjtnQkFBRyxJQUFFLEFBQUMsQ0FBQSxLQUFHLENBQUEsRUFBRyxlQUFjLElBQUUsQ0FBQztRQUFDO0lBQUM7SUFBRSxFQUFFLFVBQVUsU0FBTztRQUFXLE9BQU07WUFBQyxNQUFLO1lBQVMsTUFBSyxNQUFNLFVBQVUsTUFBTSxLQUFLLElBQUksQ0FBQyxRQUFNLElBQUksRUFBQztRQUFFO0lBQUM7SUFBRSxTQUFTLEdBQUcsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxNQUFJLEtBQUcsTUFBSSxFQUFFLFNBQU8sRUFBRSxjQUFjLEtBQUcsRUFBRSxjQUFjLEVBQUUsTUFBTSxHQUFFO0lBQUc7SUFBQyxTQUFTLEdBQUcsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRSxLQUFLLElBQUksRUFBRSxRQUFPO1FBQUcsSUFBSSxJQUFFLEVBQUUsRUFBQyxJQUFFO1FBQUUsTUFBSyxJQUFFLEdBQUc7WUFBQyxJQUFJLElBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBQyxJQUFFLE1BQUssSUFBRSxJQUFFLE1BQUksSUFBRSxJQUFFLE1BQUksSUFBRSxJQUFFLE1BQUksSUFBRTtZQUFFLElBQUcsSUFBRSxLQUFHLEdBQUU7Z0JBQUMsSUFBSSxHQUFFLEdBQUUsR0FBRTtnQkFBRSxPQUFPO29CQUFHLEtBQUs7d0JBQUUsSUFBRSxPQUFNLENBQUEsSUFBRSxDQUFBO3dCQUFHO29CQUFNLEtBQUs7d0JBQUUsSUFBRSxDQUFDLENBQUMsSUFBRSxFQUFFLEVBQUMsQUFBQyxDQUFBLElBQUUsR0FBRSxNQUFLLE9BQU0sQ0FBQSxJQUFFLEFBQUMsQ0FBQSxJQUFFLEVBQUMsS0FBSSxJQUFFLElBQUUsSUFBRyxJQUFFLE9BQU0sQ0FBQSxJQUFFLENBQUEsQ0FBQzt3QkFBRztvQkFBTSxLQUFLO3dCQUFFLElBQUUsQ0FBQyxDQUFDLElBQUUsRUFBRSxFQUFDLElBQUUsQ0FBQyxDQUFDLElBQUUsRUFBRSxFQUFDLEFBQUMsQ0FBQSxJQUFFLEdBQUUsTUFBSyxPQUFLLEFBQUMsQ0FBQSxJQUFFLEdBQUUsTUFBSyxPQUFNLENBQUEsSUFBRSxBQUFDLENBQUEsSUFBRSxFQUFDLEtBQUksS0FBRyxBQUFDLENBQUEsSUFBRSxFQUFDLEtBQUksSUFBRSxJQUFFLElBQUcsSUFBRSxRQUFPLENBQUEsSUFBRSxTQUFPLElBQUUsS0FBSSxLQUFLLENBQUEsSUFBRSxDQUFBLENBQUM7d0JBQUc7b0JBQU0sS0FBSzt3QkFBRSxJQUFFLENBQUMsQ0FBQyxJQUFFLEVBQUUsRUFBQyxJQUFFLENBQUMsQ0FBQyxJQUFFLEVBQUUsRUFBQyxJQUFFLENBQUMsQ0FBQyxJQUFFLEVBQUUsRUFBQyxBQUFDLENBQUEsSUFBRSxHQUFFLE1BQUssT0FBSyxBQUFDLENBQUEsSUFBRSxHQUFFLE1BQUssT0FBSyxBQUFDLENBQUEsSUFBRSxHQUFFLE1BQUssT0FBTSxDQUFBLElBQUUsQUFBQyxDQUFBLElBQUUsRUFBQyxLQUFJLEtBQUcsQUFBQyxDQUFBLElBQUUsRUFBQyxLQUFJLEtBQUcsQUFBQyxDQUFBLElBQUUsRUFBQyxLQUFJLElBQUUsSUFBRSxJQUFHLElBQUUsU0FBTyxJQUFFLFdBQVUsQ0FBQSxJQUFFLENBQUEsQ0FBQztnQkFBRTtZQUFDO1lBQUMsTUFBSSxPQUFNLENBQUEsSUFBRSxPQUFNLElBQUUsQ0FBQSxJQUFHLElBQUUsU0FBUSxDQUFBLEtBQUcsT0FBTSxFQUFFLEtBQUssTUFBSSxLQUFHLE9BQUssUUFBTyxJQUFFLFFBQU0sSUFBRSxJQUFHLEdBQUcsRUFBRSxLQUFLLElBQUcsS0FBRztRQUFDO1FBQUMsT0FBTyxHQUFHO0lBQUU7SUFBQyxJQUFJLEtBQUc7SUFBSyxTQUFTLEdBQUcsQ0FBQztRQUFFLElBQUksSUFBRSxFQUFFO1FBQU8sSUFBRyxLQUFHLElBQUcsT0FBTyxPQUFPLGFBQWEsTUFBTSxRQUFPO1FBQUcsSUFBSSxJQUFFLElBQUcsSUFBRTtRQUFFLE1BQUssSUFBRSxHQUFHLEtBQUcsT0FBTyxhQUFhLE1BQU0sUUFBTyxFQUFFLE1BQU0sR0FBRSxLQUFHO1FBQUssT0FBTztJQUFDO0lBQUMsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUksSUFBRTtRQUFHLElBQUUsS0FBSyxJQUFJLEVBQUUsUUFBTztRQUFHLElBQUksSUFBSSxJQUFFLEdBQUUsSUFBRSxHQUFFLEVBQUUsRUFBRSxLQUFHLE9BQU8sYUFBYSxDQUFDLENBQUMsRUFBRSxHQUFDO1FBQUssT0FBTztJQUFDO0lBQUMsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUksSUFBRTtRQUFHLElBQUUsS0FBSyxJQUFJLEVBQUUsUUFBTztRQUFHLElBQUksSUFBSSxJQUFFLEdBQUUsSUFBRSxHQUFFLEVBQUUsRUFBRSxLQUFHLE9BQU8sYUFBYSxDQUFDLENBQUMsRUFBRTtRQUFFLE9BQU87SUFBQztJQUFDLFNBQVMsR0FBRyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFJLElBQUUsRUFBRTtRQUFRLENBQUEsQ0FBQyxLQUFHLElBQUUsQ0FBQSxLQUFLLENBQUEsSUFBRSxDQUFBLEdBQUcsQUFBQyxDQUFBLENBQUMsS0FBRyxJQUFFLEtBQUcsSUFBRSxDQUFBLEtBQUssQ0FBQSxJQUFFLENBQUE7UUFBRyxJQUFJLElBQUU7UUFBRyxJQUFJLElBQUksSUFBRSxHQUFFLElBQUUsR0FBRSxFQUFFLEVBQUUsS0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUFDLE9BQU87SUFBQztJQUFDLFNBQVMsR0FBRyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFJLElBQUUsRUFBRSxNQUFNLEdBQUUsSUFBRyxJQUFFO1FBQUcsSUFBSSxJQUFJLElBQUUsR0FBRSxJQUFFLEVBQUUsU0FBTyxHQUFFLEtBQUcsRUFBRSxLQUFHLE9BQU8sYUFBYSxDQUFDLENBQUMsRUFBRSxHQUFDLENBQUMsQ0FBQyxJQUFFLEVBQUUsR0FBQztRQUFLLE9BQU87SUFBQztJQUFDLEVBQUUsVUFBVSxRQUFNLFNBQVMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFJLElBQUUsSUFBSSxDQUFDO1FBQU8sSUFBRSxDQUFDLENBQUMsR0FBRSxJQUFFLE1BQUksS0FBSyxJQUFFLElBQUUsQ0FBQyxDQUFDLEdBQUUsSUFBRSxJQUFHLENBQUEsS0FBRyxHQUFFLElBQUUsS0FBSSxDQUFBLElBQUUsQ0FBQSxDQUFDLElBQUcsSUFBRSxLQUFJLENBQUEsSUFBRSxDQUFBLEdBQUcsSUFBRSxJQUFHLENBQUEsS0FBRyxHQUFFLElBQUUsS0FBSSxDQUFBLElBQUUsQ0FBQSxDQUFDLElBQUcsSUFBRSxLQUFJLENBQUEsSUFBRSxDQUFBLEdBQUcsSUFBRSxLQUFJLENBQUEsSUFBRSxDQUFBO1FBQUcsSUFBSSxJQUFFLElBQUksQ0FBQyxTQUFTLEdBQUU7UUFBRyxPQUFPLE9BQU8sZUFBZSxHQUFFLEVBQUUsWUFBVztJQUFDO0lBQUUsU0FBUyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUcsSUFBRSxNQUFJLEtBQUcsSUFBRSxHQUFFLE1BQU0sSUFBSSxXQUFXO1FBQXNCLElBQUcsSUFBRSxJQUFFLEdBQUUsTUFBTSxJQUFJLFdBQVc7SUFBd0M7SUFBQyxFQUFFLFVBQVUsYUFBVyxFQUFFLFVBQVUsYUFBVyxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUUsTUFBSSxHQUFFLElBQUUsTUFBSSxHQUFFLEtBQUcsRUFBRSxHQUFFLEdBQUUsSUFBSSxDQUFDO1FBQVEsSUFBSSxJQUFFLElBQUksQ0FBQyxFQUFFLEVBQUMsSUFBRSxHQUFFLElBQUU7UUFBRSxNQUFLLEVBQUUsSUFBRSxLQUFJLENBQUEsS0FBRyxHQUFFLEdBQUksS0FBRyxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUM7UUFBRSxPQUFPO0lBQUM7SUFBRSxFQUFFLFVBQVUsYUFBVyxFQUFFLFVBQVUsYUFBVyxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUUsTUFBSSxHQUFFLElBQUUsTUFBSSxHQUFFLEtBQUcsRUFBRSxHQUFFLEdBQUUsSUFBSSxDQUFDO1FBQVEsSUFBSSxJQUFFLElBQUksQ0FBQyxJQUFFLEVBQUUsRUFBRSxFQUFDLElBQUU7UUFBRSxNQUFLLElBQUUsS0FBSSxDQUFBLEtBQUcsR0FBRSxHQUFJLEtBQUcsSUFBSSxDQUFDLElBQUUsRUFBRSxFQUFFLEdBQUM7UUFBRSxPQUFPO0lBQUM7SUFBRSxFQUFFLFVBQVUsWUFBVSxFQUFFLFVBQVUsWUFBVSxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsR0FBRSxHQUFFLElBQUksQ0FBQyxTQUFRLElBQUksQ0FBQyxFQUFFO0lBQUE7SUFBRSxFQUFFLFVBQVUsZUFBYSxFQUFFLFVBQVUsZUFBYSxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsR0FBRSxHQUFFLElBQUksQ0FBQyxTQUFRLElBQUksQ0FBQyxFQUFFLEdBQUMsSUFBSSxDQUFDLElBQUUsRUFBRSxJQUFFO0lBQUM7SUFBRSxFQUFFLFVBQVUsZUFBYSxFQUFFLFVBQVUsZUFBYSxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsR0FBRSxHQUFFLElBQUksQ0FBQyxTQUFRLElBQUksQ0FBQyxFQUFFLElBQUUsSUFBRSxJQUFJLENBQUMsSUFBRSxFQUFFO0lBQUE7SUFBRSxFQUFFLFVBQVUsZUFBYSxFQUFFLFVBQVUsZUFBYSxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsR0FBRSxHQUFFLElBQUksQ0FBQyxTQUFRLEFBQUMsQ0FBQSxJQUFJLENBQUMsRUFBRSxHQUFDLElBQUksQ0FBQyxJQUFFLEVBQUUsSUFBRSxJQUFFLElBQUksQ0FBQyxJQUFFLEVBQUUsSUFBRSxFQUFDLElBQUcsSUFBSSxDQUFDLElBQUUsRUFBRSxHQUFDO0lBQVE7SUFBRSxFQUFFLFVBQVUsZUFBYSxFQUFFLFVBQVUsZUFBYSxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsR0FBRSxHQUFFLElBQUksQ0FBQyxTQUFRLElBQUksQ0FBQyxFQUFFLEdBQUMsV0FBVSxDQUFBLElBQUksQ0FBQyxJQUFFLEVBQUUsSUFBRSxLQUFHLElBQUksQ0FBQyxJQUFFLEVBQUUsSUFBRSxJQUFFLElBQUksQ0FBQyxJQUFFLEVBQUUsQUFBRDtJQUFFO0lBQUUsRUFBRSxVQUFVLGtCQUFnQixFQUFFLFNBQVMsQ0FBQztRQUFFLElBQUUsTUFBSSxHQUFFLEVBQUUsR0FBRTtRQUFVLElBQUksSUFBRSxJQUFJLENBQUMsRUFBRSxFQUFDLElBQUUsSUFBSSxDQUFDLElBQUUsRUFBRTtRQUFFLENBQUEsTUFBSSxLQUFLLEtBQUcsTUFBSSxLQUFLLENBQUEsS0FBSSxFQUFFLEdBQUUsSUFBSSxDQUFDLFNBQU87UUFBRyxJQUFJLElBQUUsSUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUMsTUFBSyxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUMsS0FBRyxLQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsR0FBQyxLQUFHLElBQUcsSUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFDLE1BQUssSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFDLEtBQUcsS0FBRyxJQUFFLEtBQUc7UUFBRyxPQUFPLE9BQU8sS0FBSSxDQUFBLE9BQU8sTUFBSSxPQUFPLEdBQUU7SUFBRTtJQUFHLEVBQUUsVUFBVSxrQkFBZ0IsRUFBRSxTQUFTLENBQUM7UUFBRSxJQUFFLE1BQUksR0FBRSxFQUFFLEdBQUU7UUFBVSxJQUFJLElBQUUsSUFBSSxDQUFDLEVBQUUsRUFBQyxJQUFFLElBQUksQ0FBQyxJQUFFLEVBQUU7UUFBRSxDQUFBLE1BQUksS0FBSyxLQUFHLE1BQUksS0FBSyxDQUFBLEtBQUksRUFBRSxHQUFFLElBQUksQ0FBQyxTQUFPO1FBQUcsSUFBSSxJQUFFLElBQUUsS0FBRyxLQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsR0FBQyxLQUFHLEtBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFDLE1BQUssSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFDLElBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFDLEtBQUcsS0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUMsS0FBRyxLQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsR0FBQyxNQUFLO1FBQUUsT0FBTSxBQUFDLENBQUEsT0FBTyxNQUFJLE9BQU8sR0FBRSxJQUFHLE9BQU87SUFBRTtJQUFHLEVBQUUsVUFBVSxZQUFVLFNBQVMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRSxNQUFJLEdBQUUsSUFBRSxNQUFJLEdBQUUsS0FBRyxFQUFFLEdBQUUsR0FBRSxJQUFJLENBQUM7UUFBUSxJQUFJLElBQUUsSUFBSSxDQUFDLEVBQUUsRUFBQyxJQUFFLEdBQUUsSUFBRTtRQUFFLE1BQUssRUFBRSxJQUFFLEtBQUksQ0FBQSxLQUFHLEdBQUUsR0FBSSxLQUFHLElBQUksQ0FBQyxJQUFFLEVBQUUsR0FBQztRQUFFLE9BQU8sS0FBRyxLQUFJLEtBQUcsS0FBSSxDQUFBLEtBQUcsS0FBSyxJQUFJLEdBQUUsSUFBRSxFQUFDLEdBQUc7SUFBQztJQUFFLEVBQUUsVUFBVSxZQUFVLFNBQVMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRSxNQUFJLEdBQUUsSUFBRSxNQUFJLEdBQUUsS0FBRyxFQUFFLEdBQUUsR0FBRSxJQUFJLENBQUM7UUFBUSxJQUFJLElBQUUsR0FBRSxJQUFFLEdBQUUsSUFBRSxJQUFJLENBQUMsSUFBRSxFQUFFLEVBQUU7UUFBQyxNQUFLLElBQUUsS0FBSSxDQUFBLEtBQUcsR0FBRSxHQUFJLEtBQUcsSUFBSSxDQUFDLElBQUUsRUFBRSxFQUFFLEdBQUM7UUFBRSxPQUFPLEtBQUcsS0FBSSxLQUFHLEtBQUksQ0FBQSxLQUFHLEtBQUssSUFBSSxHQUFFLElBQUUsRUFBQyxHQUFHO0lBQUM7SUFBRSxFQUFFLFVBQVUsV0FBUyxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsR0FBRSxHQUFFLElBQUksQ0FBQyxTQUFRLElBQUksQ0FBQyxFQUFFLEdBQUMsTUFBSSxBQUFDLENBQUEsTUFBSSxJQUFJLENBQUMsRUFBRSxHQUFDLENBQUEsSUFBRyxLQUFHLElBQUksQ0FBQyxFQUFFO0lBQUE7SUFBRSxFQUFFLFVBQVUsY0FBWSxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRSxNQUFJLEdBQUUsS0FBRyxFQUFFLEdBQUUsR0FBRSxJQUFJLENBQUM7UUFBUSxJQUFJLElBQUUsSUFBSSxDQUFDLEVBQUUsR0FBQyxJQUFJLENBQUMsSUFBRSxFQUFFLElBQUU7UUFBRSxPQUFPLElBQUUsUUFBTSxJQUFFLGFBQVc7SUFBQztJQUFFLEVBQUUsVUFBVSxjQUFZLFNBQVMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsR0FBRSxHQUFFLElBQUksQ0FBQztRQUFRLElBQUksSUFBRSxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsSUFBSSxDQUFDLEVBQUUsSUFBRTtRQUFFLE9BQU8sSUFBRSxRQUFNLElBQUUsYUFBVztJQUFDO0lBQUUsRUFBRSxVQUFVLGNBQVksU0FBUyxDQUFDLEVBQUMsQ0FBQztRQUFFLE9BQU8sSUFBRSxNQUFJLEdBQUUsS0FBRyxFQUFFLEdBQUUsR0FBRSxJQUFJLENBQUMsU0FBUSxJQUFJLENBQUMsRUFBRSxHQUFDLElBQUksQ0FBQyxJQUFFLEVBQUUsSUFBRSxJQUFFLElBQUksQ0FBQyxJQUFFLEVBQUUsSUFBRSxLQUFHLElBQUksQ0FBQyxJQUFFLEVBQUUsSUFBRTtJQUFFO0lBQUUsRUFBRSxVQUFVLGNBQVksU0FBUyxDQUFDLEVBQUMsQ0FBQztRQUFFLE9BQU8sSUFBRSxNQUFJLEdBQUUsS0FBRyxFQUFFLEdBQUUsR0FBRSxJQUFJLENBQUMsU0FBUSxJQUFJLENBQUMsRUFBRSxJQUFFLEtBQUcsSUFBSSxDQUFDLElBQUUsRUFBRSxJQUFFLEtBQUcsSUFBSSxDQUFDLElBQUUsRUFBRSxJQUFFLElBQUUsSUFBSSxDQUFDLElBQUUsRUFBRTtJQUFBO0lBQUUsRUFBRSxVQUFVLGlCQUFlLEVBQUUsU0FBUyxDQUFDO1FBQUUsSUFBRSxNQUFJLEdBQUUsRUFBRSxHQUFFO1FBQVUsSUFBSSxJQUFFLElBQUksQ0FBQyxFQUFFLEVBQUMsSUFBRSxJQUFJLENBQUMsSUFBRSxFQUFFO1FBQUUsQ0FBQSxNQUFJLEtBQUssS0FBRyxNQUFJLEtBQUssQ0FBQSxLQUFJLEVBQUUsR0FBRSxJQUFJLENBQUMsU0FBTztRQUFHLElBQUksSUFBRSxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsSUFBSSxDQUFDLElBQUUsRUFBRSxHQUFDLE1BQUssSUFBSSxDQUFDLElBQUUsRUFBRSxHQUFDLEtBQUcsS0FBSSxDQUFBLEtBQUcsRUFBQztRQUFHLE9BQU0sQUFBQyxDQUFBLE9BQU8sTUFBSSxPQUFPLEdBQUUsSUFBRyxPQUFPLElBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFDLE1BQUssSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFDLEtBQUcsS0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUMsS0FBRztJQUFHO0lBQUcsRUFBRSxVQUFVLGlCQUFlLEVBQUUsU0FBUyxDQUFDO1FBQUUsSUFBRSxNQUFJLEdBQUUsRUFBRSxHQUFFO1FBQVUsSUFBSSxJQUFFLElBQUksQ0FBQyxFQUFFLEVBQUMsSUFBRSxJQUFJLENBQUMsSUFBRSxFQUFFO1FBQUUsQ0FBQSxNQUFJLEtBQUssS0FBRyxNQUFJLEtBQUssQ0FBQSxLQUFJLEVBQUUsR0FBRSxJQUFJLENBQUMsU0FBTztRQUFHLElBQUksSUFBRSxBQUFDLENBQUEsS0FBRyxFQUFDLElBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFDLEtBQUcsS0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUMsTUFBSyxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQUMsT0FBTSxBQUFDLENBQUEsT0FBTyxNQUFJLE9BQU8sR0FBRSxJQUFHLE9BQU8sSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFDLEtBQUcsS0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUMsS0FBRyxLQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsR0FBQyxNQUFLO0lBQUU7SUFBRyxFQUFFLFVBQVUsY0FBWSxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsR0FBRSxHQUFFLElBQUksQ0FBQyxTQUFRLEVBQUUsS0FBSyxJQUFJLEVBQUMsR0FBRSxDQUFDLEdBQUUsSUFBRztJQUFFO0lBQUUsRUFBRSxVQUFVLGNBQVksU0FBUyxDQUFDLEVBQUMsQ0FBQztRQUFFLE9BQU8sSUFBRSxNQUFJLEdBQUUsS0FBRyxFQUFFLEdBQUUsR0FBRSxJQUFJLENBQUMsU0FBUSxFQUFFLEtBQUssSUFBSSxFQUFDLEdBQUUsQ0FBQyxHQUFFLElBQUc7SUFBRTtJQUFFLEVBQUUsVUFBVSxlQUFhLFNBQVMsQ0FBQyxFQUFDLENBQUM7UUFBRSxPQUFPLElBQUUsTUFBSSxHQUFFLEtBQUcsRUFBRSxHQUFFLEdBQUUsSUFBSSxDQUFDLFNBQVEsRUFBRSxLQUFLLElBQUksRUFBQyxHQUFFLENBQUMsR0FBRSxJQUFHO0lBQUU7SUFBRSxFQUFFLFVBQVUsZUFBYSxTQUFTLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsR0FBRSxHQUFFLElBQUksQ0FBQyxTQUFRLEVBQUUsS0FBSyxJQUFJLEVBQUMsR0FBRSxDQUFDLEdBQUUsSUFBRztJQUFFO0lBQUUsU0FBUyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUcsQ0FBQyxFQUFFLFNBQVMsSUFBRyxNQUFNLElBQUksVUFBVTtRQUErQyxJQUFHLElBQUUsS0FBRyxJQUFFLEdBQUUsTUFBTSxJQUFJLFdBQVc7UUFBcUMsSUFBRyxJQUFFLElBQUUsRUFBRSxRQUFPLE1BQU0sSUFBSSxXQUFXO0lBQXFCO0lBQUMsRUFBRSxVQUFVLGNBQVksRUFBRSxVQUFVLGNBQVksU0FBUyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRyxJQUFFLENBQUMsR0FBRSxJQUFFLE1BQUksR0FBRSxJQUFFLE1BQUksR0FBRSxDQUFDLEdBQUU7WUFBQyxJQUFJLElBQUUsS0FBSyxJQUFJLEdBQUUsSUFBRSxLQUFHO1lBQUUsRUFBRSxJQUFJLEVBQUMsR0FBRSxHQUFFLEdBQUUsR0FBRTtRQUFFO1FBQUMsSUFBSSxJQUFFLEdBQUUsSUFBRTtRQUFFLElBQUksSUFBSSxDQUFDLEVBQUUsR0FBQyxJQUFFLEtBQUksRUFBRSxJQUFFLEtBQUksQ0FBQSxLQUFHLEdBQUUsR0FBSSxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsSUFBRSxJQUFFO1FBQUksT0FBTyxJQUFFO0lBQUM7SUFBRSxFQUFFLFVBQVUsY0FBWSxFQUFFLFVBQVUsY0FBWSxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFHLElBQUUsQ0FBQyxHQUFFLElBQUUsTUFBSSxHQUFFLElBQUUsTUFBSSxHQUFFLENBQUMsR0FBRTtZQUFDLElBQUksSUFBRSxLQUFLLElBQUksR0FBRSxJQUFFLEtBQUc7WUFBRSxFQUFFLElBQUksRUFBQyxHQUFFLEdBQUUsR0FBRSxHQUFFO1FBQUU7UUFBQyxJQUFJLElBQUUsSUFBRSxHQUFFLElBQUU7UUFBRSxJQUFJLElBQUksQ0FBQyxJQUFFLEVBQUUsR0FBQyxJQUFFLEtBQUksRUFBRSxLQUFHLEtBQUksQ0FBQSxLQUFHLEdBQUUsR0FBSSxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsSUFBRSxJQUFFO1FBQUksT0FBTyxJQUFFO0lBQUM7SUFBRSxFQUFFLFVBQVUsYUFBVyxFQUFFLFVBQVUsYUFBVyxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLE9BQU8sSUFBRSxDQUFDLEdBQUUsSUFBRSxNQUFJLEdBQUUsS0FBRyxFQUFFLElBQUksRUFBQyxHQUFFLEdBQUUsR0FBRSxLQUFJLElBQUcsSUFBSSxDQUFDLEVBQUUsR0FBQyxJQUFFLEtBQUksSUFBRTtJQUFDO0lBQUUsRUFBRSxVQUFVLGdCQUFjLEVBQUUsVUFBVSxnQkFBYyxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLE9BQU8sSUFBRSxDQUFDLEdBQUUsSUFBRSxNQUFJLEdBQUUsS0FBRyxFQUFFLElBQUksRUFBQyxHQUFFLEdBQUUsR0FBRSxPQUFNLElBQUcsSUFBSSxDQUFDLEVBQUUsR0FBQyxJQUFFLEtBQUksSUFBSSxDQUFDLElBQUUsRUFBRSxHQUFDLE1BQUksR0FBRSxJQUFFO0lBQUM7SUFBRSxFQUFFLFVBQVUsZ0JBQWMsRUFBRSxVQUFVLGdCQUFjLFNBQVMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLENBQUMsR0FBRSxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsSUFBSSxFQUFDLEdBQUUsR0FBRSxHQUFFLE9BQU0sSUFBRyxJQUFJLENBQUMsRUFBRSxHQUFDLE1BQUksR0FBRSxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsSUFBRSxLQUFJLElBQUU7SUFBQztJQUFFLEVBQUUsVUFBVSxnQkFBYyxFQUFFLFVBQVUsZ0JBQWMsU0FBUyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxPQUFPLElBQUUsQ0FBQyxHQUFFLElBQUUsTUFBSSxHQUFFLEtBQUcsRUFBRSxJQUFJLEVBQUMsR0FBRSxHQUFFLEdBQUUsWUFBVyxJQUFHLElBQUksQ0FBQyxJQUFFLEVBQUUsR0FBQyxNQUFJLElBQUcsSUFBSSxDQUFDLElBQUUsRUFBRSxHQUFDLE1BQUksSUFBRyxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsTUFBSSxHQUFFLElBQUksQ0FBQyxFQUFFLEdBQUMsSUFBRSxLQUFJLElBQUU7SUFBQztJQUFFLEVBQUUsVUFBVSxnQkFBYyxFQUFFLFVBQVUsZ0JBQWMsU0FBUyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxPQUFPLElBQUUsQ0FBQyxHQUFFLElBQUUsTUFBSSxHQUFFLEtBQUcsRUFBRSxJQUFJLEVBQUMsR0FBRSxHQUFFLEdBQUUsWUFBVyxJQUFHLElBQUksQ0FBQyxFQUFFLEdBQUMsTUFBSSxJQUFHLElBQUksQ0FBQyxJQUFFLEVBQUUsR0FBQyxNQUFJLElBQUcsSUFBSSxDQUFDLElBQUUsRUFBRSxHQUFDLE1BQUksR0FBRSxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsSUFBRSxLQUFJLElBQUU7SUFBQztJQUFFLFNBQVMsR0FBRyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLEdBQUcsR0FBRSxHQUFFLEdBQUUsR0FBRSxHQUFFO1FBQUcsSUFBSSxJQUFFLE9BQU8sSUFBRSxPQUFPO1FBQWEsQ0FBQyxDQUFDLElBQUksR0FBQyxHQUFFLElBQUUsS0FBRyxHQUFFLENBQUMsQ0FBQyxJQUFJLEdBQUMsR0FBRSxJQUFFLEtBQUcsR0FBRSxDQUFDLENBQUMsSUFBSSxHQUFDLEdBQUUsSUFBRSxLQUFHLEdBQUUsQ0FBQyxDQUFDLElBQUksR0FBQztRQUFFLElBQUksSUFBRSxPQUFPLEtBQUcsT0FBTyxNQUFJLE9BQU87UUFBYSxPQUFPLENBQUMsQ0FBQyxJQUFJLEdBQUMsR0FBRSxJQUFFLEtBQUcsR0FBRSxDQUFDLENBQUMsSUFBSSxHQUFDLEdBQUUsSUFBRSxLQUFHLEdBQUUsQ0FBQyxDQUFDLElBQUksR0FBQyxHQUFFLElBQUUsS0FBRyxHQUFFLENBQUMsQ0FBQyxJQUFJLEdBQUMsR0FBRTtJQUFDO0lBQUMsU0FBUyxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsR0FBRyxHQUFFLEdBQUUsR0FBRSxHQUFFLEdBQUU7UUFBRyxJQUFJLElBQUUsT0FBTyxJQUFFLE9BQU87UUFBYSxDQUFDLENBQUMsSUFBRSxFQUFFLEdBQUMsR0FBRSxJQUFFLEtBQUcsR0FBRSxDQUFDLENBQUMsSUFBRSxFQUFFLEdBQUMsR0FBRSxJQUFFLEtBQUcsR0FBRSxDQUFDLENBQUMsSUFBRSxFQUFFLEdBQUMsR0FBRSxJQUFFLEtBQUcsR0FBRSxDQUFDLENBQUMsSUFBRSxFQUFFLEdBQUM7UUFBRSxJQUFJLElBQUUsT0FBTyxLQUFHLE9BQU8sTUFBSSxPQUFPO1FBQWEsT0FBTyxDQUFDLENBQUMsSUFBRSxFQUFFLEdBQUMsR0FBRSxJQUFFLEtBQUcsR0FBRSxDQUFDLENBQUMsSUFBRSxFQUFFLEdBQUMsR0FBRSxJQUFFLEtBQUcsR0FBRSxDQUFDLENBQUMsSUFBRSxFQUFFLEdBQUMsR0FBRSxJQUFFLEtBQUcsR0FBRSxDQUFDLENBQUMsRUFBRSxHQUFDLEdBQUUsSUFBRTtJQUFDO0lBQUMsRUFBRSxVQUFVLG1CQUFpQixFQUFFLFNBQVMsQ0FBQyxFQUFDLElBQUUsQ0FBQztRQUFFLE9BQU8sR0FBRyxJQUFJLEVBQUMsR0FBRSxHQUFFLE9BQU8sSUFBRyxPQUFPO0lBQXNCO0lBQUcsRUFBRSxVQUFVLG1CQUFpQixFQUFFLFNBQVMsQ0FBQyxFQUFDLElBQUUsQ0FBQztRQUFFLE9BQU8sR0FBRyxJQUFJLEVBQUMsR0FBRSxHQUFFLE9BQU8sSUFBRyxPQUFPO0lBQXNCO0lBQUcsRUFBRSxVQUFVLGFBQVcsU0FBUyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRyxJQUFFLENBQUMsR0FBRSxJQUFFLE1BQUksR0FBRSxDQUFDLEdBQUU7WUFBQyxJQUFJLElBQUUsS0FBSyxJQUFJLEdBQUUsSUFBRSxJQUFFO1lBQUcsRUFBRSxJQUFJLEVBQUMsR0FBRSxHQUFFLEdBQUUsSUFBRSxHQUFFLENBQUM7UUFBRTtRQUFDLElBQUksSUFBRSxHQUFFLElBQUUsR0FBRSxJQUFFO1FBQUUsSUFBSSxJQUFJLENBQUMsRUFBRSxHQUFDLElBQUUsS0FBSSxFQUFFLElBQUUsS0FBSSxDQUFBLEtBQUcsR0FBRSxHQUFJLElBQUUsS0FBRyxNQUFJLEtBQUcsSUFBSSxDQUFDLElBQUUsSUFBRSxFQUFFLEtBQUcsS0FBSSxDQUFBLElBQUUsQ0FBQSxHQUFHLElBQUksQ0FBQyxJQUFFLEVBQUUsR0FBQyxBQUFDLENBQUEsSUFBRSxLQUFHLENBQUEsSUFBRyxJQUFFO1FBQUksT0FBTyxJQUFFO0lBQUM7SUFBRSxFQUFFLFVBQVUsYUFBVyxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFHLElBQUUsQ0FBQyxHQUFFLElBQUUsTUFBSSxHQUFFLENBQUMsR0FBRTtZQUFDLElBQUksSUFBRSxLQUFLLElBQUksR0FBRSxJQUFFLElBQUU7WUFBRyxFQUFFLElBQUksRUFBQyxHQUFFLEdBQUUsR0FBRSxJQUFFLEdBQUUsQ0FBQztRQUFFO1FBQUMsSUFBSSxJQUFFLElBQUUsR0FBRSxJQUFFLEdBQUUsSUFBRTtRQUFFLElBQUksSUFBSSxDQUFDLElBQUUsRUFBRSxHQUFDLElBQUUsS0FBSSxFQUFFLEtBQUcsS0FBSSxDQUFBLEtBQUcsR0FBRSxHQUFJLElBQUUsS0FBRyxNQUFJLEtBQUcsSUFBSSxDQUFDLElBQUUsSUFBRSxFQUFFLEtBQUcsS0FBSSxDQUFBLElBQUUsQ0FBQSxHQUFHLElBQUksQ0FBQyxJQUFFLEVBQUUsR0FBQyxBQUFDLENBQUEsSUFBRSxLQUFHLENBQUEsSUFBRyxJQUFFO1FBQUksT0FBTyxJQUFFO0lBQUM7SUFBRSxFQUFFLFVBQVUsWUFBVSxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLE9BQU8sSUFBRSxDQUFDLEdBQUUsSUFBRSxNQUFJLEdBQUUsS0FBRyxFQUFFLElBQUksRUFBQyxHQUFFLEdBQUUsR0FBRSxLQUFJLE9BQU0sSUFBRSxLQUFJLENBQUEsSUFBRSxNQUFJLElBQUUsQ0FBQSxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUMsSUFBRSxLQUFJLElBQUU7SUFBQztJQUFFLEVBQUUsVUFBVSxlQUFhLFNBQVMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLENBQUMsR0FBRSxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsSUFBSSxFQUFDLEdBQUUsR0FBRSxHQUFFLE9BQU0sU0FBUSxJQUFJLENBQUMsRUFBRSxHQUFDLElBQUUsS0FBSSxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsTUFBSSxHQUFFLElBQUU7SUFBQztJQUFFLEVBQUUsVUFBVSxlQUFhLFNBQVMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLENBQUMsR0FBRSxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsSUFBSSxFQUFDLEdBQUUsR0FBRSxHQUFFLE9BQU0sU0FBUSxJQUFJLENBQUMsRUFBRSxHQUFDLE1BQUksR0FBRSxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsSUFBRSxLQUFJLElBQUU7SUFBQztJQUFFLEVBQUUsVUFBVSxlQUFhLFNBQVMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxJQUFFLENBQUMsR0FBRSxJQUFFLE1BQUksR0FBRSxLQUFHLEVBQUUsSUFBSSxFQUFDLEdBQUUsR0FBRSxHQUFFLFlBQVcsY0FBYSxJQUFJLENBQUMsRUFBRSxHQUFDLElBQUUsS0FBSSxJQUFJLENBQUMsSUFBRSxFQUFFLEdBQUMsTUFBSSxHQUFFLElBQUksQ0FBQyxJQUFFLEVBQUUsR0FBQyxNQUFJLElBQUcsSUFBSSxDQUFDLElBQUUsRUFBRSxHQUFDLE1BQUksSUFBRyxJQUFFO0lBQUM7SUFBRSxFQUFFLFVBQVUsZUFBYSxTQUFTLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztR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QUFHLEVBQUUsSUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLE1BQU0sSUFBRSxHQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7UUFBQyxPQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sR0FBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQUE7SUFBQyxTQUFTLEdBQUcsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsRUFBRSxHQUFFLFdBQVUsQUFBQyxDQUFBLENBQUMsQ0FBQyxFQUFFLEtBQUcsS0FBSyxLQUFHLENBQUMsQ0FBQyxJQUFFLEVBQUUsS0FBRyxLQUFLLENBQUEsS0FBSSxFQUFFLEdBQUUsRUFBRSxTQUFRLENBQUEsSUFBRSxDQUFBO0lBQUc7SUFBQyxTQUFTLEdBQUcsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRyxJQUFFLEtBQUcsSUFBRSxHQUFFO1lBQUMsSUFBSSxJQUFFLE9BQU8sS0FBRyxXQUFTLE1BQUksSUFBRztZQUFFLE1BQU0sSUFBRSxJQUFFLE1BQUksS0FBRyxNQUFJLE9BQU8sS0FBRyxJQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsSUFBSSxFQUFFLEFBQUMsQ0FBQSxJQUFFLENBQUEsSUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUMsSUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxBQUFDLENBQUEsSUFBRSxDQUFBLElBQUcsSUFBRSxFQUFFLEVBQUUsRUFBRSxhQUFhLEVBQUUsQUFBQyxDQUFBLElBQUUsQ0FBQSxJQUFHLElBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxHQUFDLElBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxJQUFJLEVBQUUsaUJBQWlCLFNBQVEsR0FBRTtRQUFFO1FBQUMsR0FBRyxHQUFFLEdBQUU7SUFBRTtJQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUcsT0FBTyxLQUFHLFVBQVMsTUFBTSxJQUFJLEVBQUUscUJBQXFCLEdBQUUsVUFBUztJQUFFO0lBQUMsU0FBUyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLE1BQU0sS0FBSyxNQUFNLE9BQUssSUFBRyxDQUFBLEVBQUUsR0FBRSxJQUFHLElBQUksRUFBRSxpQkFBaUIsS0FBRyxVQUFTLGNBQWEsRUFBQyxJQUFHLElBQUUsSUFBRSxJQUFJLEVBQUUsMkJBQXlCLElBQUksRUFBRSxpQkFBaUIsS0FBRyxVQUFTLENBQUMsR0FBRyxFQUFFLElBQUUsSUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBQztJQUFFO0lBQUMsSUFBSSxLQUFHO0lBQW9CLFNBQVMsR0FBRyxDQUFDO1FBQUUsSUFBRyxJQUFFLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxFQUFDLElBQUUsRUFBRSxPQUFPLFFBQVEsSUFBRyxLQUFJLEVBQUUsU0FBTyxHQUFFLE9BQU07UUFBRyxNQUFLLEVBQUUsU0FBTyxNQUFJLEdBQUcsSUFBRSxJQUFFO1FBQUksT0FBTztJQUFDO0lBQUMsU0FBUyxFQUFFLENBQUMsRUFBQyxDQUFDO1FBQUUsSUFBRSxLQUFHLElBQUU7UUFBRSxJQUFJLEdBQUUsSUFBRSxFQUFFLFFBQU8sSUFBRSxNQUFLLElBQUUsRUFBRTtRQUFDLElBQUksSUFBSSxJQUFFLEdBQUUsSUFBRSxHQUFFLEVBQUUsRUFBRTtZQUFDLElBQUcsSUFBRSxFQUFFLFdBQVcsSUFBRyxJQUFFLFNBQU8sSUFBRSxPQUFNO2dCQUFDLElBQUcsQ0FBQyxHQUFFO29CQUFDLElBQUcsSUFBRSxPQUFNO3dCQUFFLENBQUEsS0FBRyxDQUFBLElBQUcsTUFBSSxFQUFFLEtBQUssS0FBSSxLQUFJO3dCQUFLO29CQUFRLE9BQU0sSUFBRyxJQUFFLE1BQUksR0FBRTt3QkFBRSxDQUFBLEtBQUcsQ0FBQSxJQUFHLE1BQUksRUFBRSxLQUFLLEtBQUksS0FBSTt3QkFBSztvQkFBUTtvQkFBQyxJQUFFO29CQUFFO2dCQUFRO2dCQUFDLElBQUcsSUFBRSxPQUFNO29CQUFFLENBQUEsS0FBRyxDQUFBLElBQUcsTUFBSSxFQUFFLEtBQUssS0FBSSxLQUFJLE1BQUssSUFBRTtvQkFBRTtnQkFBUTtnQkFBQyxJQUFFLEFBQUMsQ0FBQSxJQUFFLFNBQU8sS0FBRyxJQUFFLEtBQUksSUFBRztZQUFLLE9BQU0sS0FBRyxBQUFDLENBQUEsS0FBRyxDQUFBLElBQUcsTUFBSSxFQUFFLEtBQUssS0FBSSxLQUFJO1lBQUssSUFBRyxJQUFFLE1BQUssSUFBRSxLQUFJO2dCQUFDLElBQUcsQUFBQyxDQUFBLEtBQUcsQ0FBQSxJQUFHLEdBQUU7Z0JBQU0sRUFBRSxLQUFLO1lBQUUsT0FBTSxJQUFHLElBQUUsTUFBSztnQkFBQyxJQUFHLEFBQUMsQ0FBQSxLQUFHLENBQUEsSUFBRyxHQUFFO2dCQUFNLEVBQUUsS0FBSyxLQUFHLElBQUUsS0FBSSxJQUFFLEtBQUc7WUFBSSxPQUFNLElBQUcsSUFBRSxPQUFNO2dCQUFDLElBQUcsQUFBQyxDQUFBLEtBQUcsQ0FBQSxJQUFHLEdBQUU7Z0JBQU0sRUFBRSxLQUFLLEtBQUcsS0FBRyxLQUFJLEtBQUcsSUFBRSxLQUFHLEtBQUksSUFBRSxLQUFHO1lBQUksT0FBTSxJQUFHLElBQUUsU0FBUTtnQkFBQyxJQUFHLEFBQUMsQ0FBQSxLQUFHLENBQUEsSUFBRyxHQUFFO2dCQUFNLEVBQUUsS0FBSyxLQUFHLEtBQUcsS0FBSSxLQUFHLEtBQUcsS0FBRyxLQUFJLEtBQUcsSUFBRSxLQUFHLEtBQUksSUFBRSxLQUFHO1lBQUksT0FBTSxNQUFNLElBQUksTUFBTTtRQUFxQjtRQUFDLE9BQU87SUFBQztJQUFDLFNBQVMsR0FBRyxDQUFDO1FBQUUsSUFBSSxJQUFFLEVBQUU7UUFBQyxJQUFJLElBQUksSUFBRSxHQUFFLElBQUUsRUFBRSxRQUFPLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxXQUFXLEtBQUc7UUFBSyxPQUFPO0lBQUM7SUFBQyxTQUFTLEdBQUcsQ0FBQyxFQUFDLENBQUM7UUFBRSxJQUFJLEdBQUUsR0FBRSxHQUFFLElBQUUsRUFBRTtRQUFDLElBQUksSUFBSSxJQUFFLEdBQUUsSUFBRSxFQUFFLFVBQVEsQ0FBRSxDQUFBLEFBQUMsQ0FBQSxLQUFHLENBQUEsSUFBRyxDQUFBLEdBQUcsRUFBRSxFQUFFLElBQUUsRUFBRSxXQUFXLElBQUcsSUFBRSxLQUFHLEdBQUUsSUFBRSxJQUFFLEtBQUksRUFBRSxLQUFLLElBQUcsRUFBRSxLQUFLO1FBQUcsT0FBTztJQUFDO0lBQUMsU0FBUyxHQUFHLENBQUM7UUFBRSxPQUFPLEVBQUUsWUFBWSxHQUFHO0lBQUc7SUFBQyxTQUFTLEVBQUUsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztRQUFFLElBQUk7UUFBRSxJQUFJLElBQUUsR0FBRSxJQUFFLEtBQUcsQ0FBRSxDQUFBLElBQUUsS0FBRyxFQUFFLFVBQVEsS0FBRyxFQUFFLE1BQUssR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUUsRUFBRSxHQUFDLENBQUMsQ0FBQyxFQUFFO1FBQUMsT0FBTztJQUFDO0lBQUMsU0FBUyxFQUFFLENBQUMsRUFBQyxDQUFDO1FBQUUsT0FBTyxhQUFhLEtBQUcsS0FBRyxRQUFNLEVBQUUsZUFBYSxRQUFNLEVBQUUsWUFBWSxRQUFNLFFBQU0sRUFBRSxZQUFZLFNBQU8sRUFBRTtJQUFJO0lBQUMsU0FBUyxFQUFFLENBQUM7UUFBRSxPQUFPLE1BQUk7SUFBQztJQUFDLElBQUksS0FBRztRQUFXLElBQUksSUFBRSxvQkFBbUIsSUFBRSxJQUFJLE1BQU07UUFBSyxJQUFJLElBQUksSUFBRSxHQUFFLElBQUUsSUFBRyxFQUFFLEVBQUU7WUFBQyxJQUFJLElBQUUsSUFBRTtZQUFHLElBQUksSUFBSSxJQUFFLEdBQUUsSUFBRSxJQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsSUFBRSxFQUFFLEdBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBQyxDQUFDLENBQUMsRUFBRTtRQUFBO1FBQUMsT0FBTztJQUFDO0lBQUksU0FBUyxFQUFFLENBQUM7UUFBRSxPQUFPLE9BQU8sU0FB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QSxhQUFBO0FBQU0sTUFBQSxxQkFBQSxDQUFBO0lBQ0wsSUFBQSxBQUFBLENBQUEsR0FBQSxRQUFVLFlBQ1IsRUFBQSxRQUFBLE9BQUE7SUFFSCxJQUFBLE1BQUEsUUFBQSxRQUFBLE9BQUEsTUFBQSxLQUFBO0lBQ0QsSUFBRixTQUFBLE9BQUEsVUFBQSxVLEksTSxLLE07USxJLG1CLEssQyxFLEcsTztJO0ksTztBO0EsTSxlLE8sTSxLO0ksSSxVLFc7SSxJLFMsTSxNLEksVSxDLG1CLEUsSSwyRCxDO0kseUM7SSxJLE8sVSxZLE8sVSxZLE8sVSxXLEssTyxLLE87UyxJLEEsQyxHLFEsWSxFLFE7USxNLE8sTSxPO1EsSyxPLEs7SSxPLEksTSxRLFEsTSxRLEksTSxJLEMsUSxhLE0sTSxNO1MsSSxPLFUsVSxNLFEsSSxPLFEsTyxJLEMsQyxNLEssRyxhLE0sQyxFLEksQyxFLEssQyxDLEU7UyxNLEksVSxDLHFHLEUsTSxRLEM7QTs7O0FDelBBOztDQUVDLEdBRUQsUUFBUSxXQUFXO0FBQ25CLFFBQVEsT0FBTztBQUNmLFFBQVEsT0FDTixPQUFPLFNBQVMsY0FBYyxPQUM1QiwwRkFBMEY7QUFDMUYsTUFBTSxjQUFhO0lBQ2pCLGFBQWM7UUFDWixNQUFNLElBQUksTUFBTSxDQUFDLDhFQUE4RSxDQUFDO0lBQ2xHO0FBQ0Y7QUFHSixRQUFRLGVBQWU7OztBO0FFaEJ2Qjs7Q0FFRyxHLE8sZSxTLGM7SSxPO0E7QSxRLDZCLEs7QUFJSCxNQUFBLFlBQUEsUUFBQTtBQUVPLGVBQWUsMkJBQ3BCLElBQWMsRUFDZCxJQUF1QjtJQUV2QixPQUFBO1FBQU8sR0FBRSxJQUFHO1FBQUksTUFBTSxJQUFFLFVBQUksY0FBQTtJQUFrQjtBQUNoRDtBQUxBLFFBQUEsNkJBQUE7OztBO0FFUkE7Ozs7O0NBS0csRyxPLGUsUyxjO0ksTztBO0EsUSxlLEs7QUFtQkksZUFBZTtJQUNwQixNQUFBLElBQU0sTUFHUjtBO0EsUSxlOzs7QTtBRTVCQTs7Q0FFRyxHLE8sZSxTLGM7SSxPO0E7QSxRLGlCLEs7QUF5QkgsU0FBZ0IsZUFBZSxLQUFVO0lBQ3ZDLE9BQUE7QUFDRjtBQUZBLFFBQUEsaUJBQUE7OztBO0FFM0JBLHFEQUFxRDtBLE8sZSxTLGM7SSxPO0E7QSxRLGEsUSxPLEs7QUFFckQsTUFBQSxTQUFBLFFBQUE7QUFRQTs7Q0FFRyxHQUNILE1BQWEsYUFBbUIsT0FBQTtJQUs5QixZQUFBLE1BQVksRUFBaUIsUUFBRSxFQUFrQixJQUFFLEVBQXdCLE9BQUUsQ0FBNEI7UUFDdkcsS0FBQSxDQUFBLFFBQU0sVUFBUSxNQUFVO1FBRXhCLElBQUEsQ0FBQSxTQUFLLEtBQVM7UUFDZCxJQUFBLENBQUEsT0FBSyxLQUFPO0lBQ2Q7SUFFQSxvQkFBQTtRQUNFLE9BQUEsSUFBTyxDQUFBO0lBQ1Q7SUFFQSxrREFBQTtJQUNBOzs7R0FHRyxHQUNILGlCQUFBO1FBQ0UsT0FBQTtJQUNGO0lBRUEsZUFBQTtRQUNFLE9BQUE7SUFDRjtBQUNEO0FBNUJELFFBQUEsT0FBQTtBQThDQSxNQUFhLG1CQUNILE9BQUE7SUFLUixZQUFBLE1BQ0UsRUFBaUIsUUFDakIsRUFBa0IsSUFDbEIsRUFBOEIsT0FDOUIsQ0FBNEI7UUFFNUIsS0FBQSxDQUFBLFFBQU0sVUFBUSxNQUFVO1FBRXhCLElBQUEsQ0FBQSxPQUFLLEtBQU87SUFDZDtJQUVBLG9CQUFBO1FBQ0UsT0FBQSxJQUFPLENBQUE7SUFDVDtJQUVBLGtEQUFBO0lBQ0EsaUJBQUE7UUFDRSxNQUFBLE9BQU0sSUFBTyxDQUFBO1FBQ2IsSUFBQSxDQUFBLE1BQUssT0FBTDtRQUFXLElBQUEsWUFBTyxNQUFQLE9BQUEsS0FBQTtRQUNYLE1BQUEsU0FBSSxPQUFZLFlBQWhCLEtBQUEsSUFBQTtRQUFzQixJQUFBLENBQUEsT0FBQSxLQUFPLFFBQUssUUFBWixPQUFBO1FBQ3RCLE9BQUE7SUFDQTtJQUFpQyxlQUFBO1FBQ2pDLElBQUEsSUFBQTtRQUNGLElBQUEsQ0FBQSxDQUFBLEFBQUEsQ0FBQSxLQUFBLElBQUEsQ0FBQSxJQUFBLE1BQUEsUUFBQSxPQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxNQUFBLEdBRUEsT0FBQTtRQUNFLE1BQUEsT0FBSyxBQUFBLENBQUEsS0FBQSxJQUFLLENBQUEsSUFBSSxDQUFBLElBQUEsQ0FBQSxLQUFBLFNBQUEsRUFBQSxBQUFBLE1BQUEsUUFBQSxPQUFFLEtBQVEsSUFBeEIsS0FBQSxJQUFBLEdBQUE7UUFDRSxJQUFBLENBQUEsTUFBQSxPQUFPO1FBQ1IsT0FBQTtZQUFBLFFBQUE7Z0JBQUEsT0FBQTtZQUFBO1FBQUE7SUFFRDtBQUNBO0FBQVcsUUFBQSxhQUFPOzs7QTtBRWhHdEIscURBQXFEO0EsTyxlLFMsYztJLE87QTtBLFEsY0FFckQsUUFBQSxTQUFTLFFBQUEsYUFDVCxRQUFBLFNBQVMsUUFBQSxhQUNULFFBQUEsWUFPRSxRQUFBLGdCQUVGLFFBQUEsUUFBb0UsUUFBQSxrQkFDcEUsUUFBQSxRQUFpQyxRQUFBLGFBQ2pDLFFBQUEsY0FBaUUsUUFBQSxPQUFpQixRQUFBLFFBQ2xGLEtBQUE7QUFRRSxJQUFBLFVBQUEsUUFBQTtBQUNBLE9BQUEsZUFBQSxTQUFBLFNBQUE7SUFFRixZQUFBO0lBQVMsS0FBQTtRQUNULE9BQUEsUUFBQTtJQU1FO0FBRUY7QUFBOEIsSUFBQSxTQUFBLFFBQUE7QUFBWSxPQUFBLGVBQUEsU0FBQSxRQUFBO0lBQzFDLFlBQUE7SUFBdUUsS0FBQTtRLE8sTztJO0E7QSxJLGdCLFE7QSxPLGUsUyxlO0ksWTtJLEs7USxPLGM7STtBO0EsSSxlLFE7QSxPLGUsUyxjO0ksWTtJLEs7USxPLGE7STtBO0EsSSxVLFE7QSxPLGUsUyxTO0ksWTtJLEs7USxPLFE7STtBO0EsSSxVLFE7QSxPLGUsUyxtQjtJLFk7SSxLO1EsTyxRO0k7QTtBLE8sZSxTLFM7SSxZO0ksSztRLE8sUTtJO0E7QSxJLGUsUTtBLE8sZSxTLGlCO0ksWTtJLEs7USxPLGE7STtBO0EsTyxlLFMsYTtJLFk7SSxLO1EsTyxhO0k7QTtBLEksZ0IsUTtBLE8sZSxTLGM7SSxZO0ksSztRLE8sYztJO0E7QSxJLFcsUTtBLE8sZSxTLFU7SSxZO0ksSztRLE8sUztJO0E7QSxJLFcsUTtBLE8sZSxTLGM7SSxZO0ksSztRLE8sUztJO0E7QSxPLGUsUyxVO0ksWTtJLEs7USxPLFM7STtBO0EsSSxnQixRO0EsTyxlLFMsZTtJLFk7SSxLO1EsTyxjO0k7QTs7O0E7QUVyQ3ZFLHFEQUFxRDtBLEksa0IsQSxJLEksSSxDLG1CLEMsTyxTLFMsQyxFLEMsRSxDLEUsRTtJLEksTyxXLEs7SSxJLE8sTyx5QixHO0ksSSxDLFEsQyxTLE8sQyxFLGEsSyxZLEssWSxHLE87USxZO1EsSztZLE8sQyxDLEU7UTtJO0ksTyxlLEcsSTtBLEksUyxDLEUsQyxFLEMsRSxFO0ksSSxPLFcsSztJLEMsQyxHLEcsQyxDLEU7QSxDO0EsSSxxQixBLEksSSxJLEMsc0IsQyxPLFMsUyxDLEUsQztJLE8sZSxHLFc7USxZO1EsTztJO0FBRXJELElBQ0EsU0FBQSxDQUFBLEVBQUEsQ0FBQTtJQUNBLENBQUEsQ0FBQSxVQUFBLEdBQUE7QUFDQSxDQUFBO0FBRUEsSUFBQSxlQUFBLEFBQUEsSUFBQSxJQUFBLElBQUEsQ0FBQSxnQixTLEc7SUFDRSxJQUFBLE9BQUEsSUFBQSxZQUFpQyxPQUFJO0lBQ3JDLElBQUEsU0FBQSxDQUFBO0lBQ0YsSUFBQSxPQUFBLE1BQUM7UUFBQSxJQUFBLElBQUEsS0FBQSxJQUhELElBQUEsTUFBQSxhQUFBLE9BQUEsVUFBQSxlQUFBLEtBQUEsS0FBQSxJQUFBLGdCQUFBLFFBQUEsS0FBQTtJQUFBO0lBS0EsbUJBQUEsUUFBQTtJQUNnQixPQUFBO0FBSUE7QUFHaEIsT0FSaUIsZUFBQSxTQUFBLGNBQUs7SUFBQSxPQVF0QjtBQUFBO0EsUSxRLEs7QSxNLGEsUTtBLE0sbUIsUTtBLE0saUIsUTtBLE0sTSxhLFE7QSxNLGMsVztJLGE7USxLLEk7USxJLEMsaUIsSSxpQixlLEksQztRLEksQyxlLEksZSxhLEksQztJO0E7QSxRLFE7QSxDLFMsSztJLE0saUIsSTtJLE0sZSxJO0EsQyxFLFEsUSxTLEMsUSxRLEMsQzs7O0E7QUVwQkEscURBQXFEO0EsTyxlLFMsYztJLE87QTtBLFEsYyxLO0FBSXJELE1BQWE7SUFFWCxZQUFBLE1BQVksQ0FBYztRQUN4QixJQUFBLENBQUEsU0FBSztRQUVMLElBQUEsQ0FBQSxNQUFLLE9BQU0sSUFBTyxLQUFJO1FBQ3RCLElBQUEsQ0FBQSxPQUFLLE9BQU8sS0FBTyxLQUFLO1FBQ3hCLElBQUEsQ0FBQSxRQUFLLE9BQVEsTUFBTyxLQUFNO1FBQzFCLElBQUEsQ0FBQSxNQUFLLE9BQU0sSUFBTyxLQUFJO1FBQ3RCLElBQUEsQ0FBQSxTQUFLLE9BQVMsT0FBTyxLQUFPO1FBQzVCLElBQUEsQ0FBQSxhQUFLLE9BQWEsV0FBTyxLQUFXO0lBQ3RDO0FBUUQ7QUFuQkQsUUFBQSxjQUFBOzs7QTtBRUpBLHFEQUFxRDtBLE8sZSxTLGM7SSxPO0E7QSxRLGlCLEs7QUFHckQsTUFBQSxhQUFBLFFBQUE7QUFFQSxNQUFBLFNBQUEsUUFBQTtBQUVBLE1BQWEsdUJBQXVCLFdBQUE7SUFDbEM7O0dBRUcsR0FDSCxPQUFBLElBQU8sRUFBK0IsT0FBRSxFQUE2QjtRQUNuRSxPQUFBLElBQU8sQ0FBQSxLQUFLLHlCQUFLLEFBQUEsQ0FBQSxHQUF5QixPQUFBLDJCQUFBLEVBQUE7WUFBMkI7WUFBRyxHQUFJLE9BQUs7UUFBQTtJQUNuRjtBQUNEO0FBUEQsUUFBQSxpQkFBQTtBQXVEQSxpQkFBQSxRQUFBLGtCQUFBLENBQUEsUUFBQSxpQkFBQSxDQUFBLENBQUE7OztBO0FFOURBLHFEQUFxRDtBLE8sZSxTLGM7SSxPO0E7QSxRLGUsSztBQUdyRCxNQUFBLGFBQUEsUUFBQTtBQUVBLE1BQUEsU0FBQSxRQUFBO0FBRUEsTUFBYSxxQkFBcUIsV0FBQTtJQUNoQzs7R0FFRyxHQUNILE9BQUEsSUFBTyxFQUE2QixPQUFFLEVBQTZCO1FBQ2pFLE9BQUEsSUFBTyxDQUFBLEtBQUssdUJBQUssQUFBQSxDQUFBLEdBQXVCLE9BQUEsMkJBQUEsRUFBQTtZQUEyQjtZQUFHLEdBQUksT0FBSztRQUFBO0lBQ2pGO0FBQ0Q7QUFQRCxRQUFBLGVBQUE7QUFnREEsZUFBQSxRQUFBLGdCQUFBLENBQUEsUUFBQSxlQUFBLENBQUEsQ0FBQTs7O0E7QUV2REEscURBQXFEO0EsTyxlLFMsYztJLE87QTtBLFEsZSxRLGlCLFEsUSxLO0FBRXJELElBQUEsVUFBQSxRQUFBO0FBQVMsT0FBQSxlQUFBLFNBQUEsU0FBQTtJQUNULFlBQUE7SUFBbUQsS0FBQTtRQUNuRCxPQUFBLFFBQUE7SUFBK0M7QTtBLEksbUIsUTtBLE8sZSxTLGtCO0ksWTtJLEs7USxPLGlCO0k7QTtBLEksaUIsUTtBLE8sZSxTLGdCO0ksWTtJLEs7USxPLGU7STtBOzs7QTtBRUovQyxxREFBcUQ7QSxJLGtCLEEsSSxJLEksQyxtQixDLE8sUyxTLEMsRSxDLEUsQyxFLEU7SSxJLE8sVyxLO0ksSSxPLE8seUIsRztJLEksQyxRLEMsUyxPLEMsRSxhLEssWSxLLFksRyxPO1EsWTtRLEs7WSxPLEMsQyxFO1E7STtJLE8sZSxHLEk7QSxJLFMsQyxFLEMsRSxDLEUsRTtJLEksTyxXLEs7SSxDLEMsRyxHLEMsQyxFO0EsQztBLEkscUIsQSxJLEksSSxDLHNCLEMsTyxTLFMsQyxFLEM7SSxPLGUsRyxXO1EsWTtRLE87STtBQUVyRCxJQUNBLFNBQUEsQ0FBQSxFQUFBLENBQUE7SUFDQSxDQUFBLENBQUEsVUFBQSxHQUFBO0FBRUEsQ0FBQTtBQUFBLElBQUEsZSxBLEksSSxJLEMsZ0JBQ0UsU0FBQSxHQUFBO0lBQ0YsSUFBQSxPQUFBLElBQUEsWUFBQSxPQUFBO0lBQUMsSUFBQSxTQUFBLENBQUE7SUFGRCxJQUFBLE9BQUEsTUFJQTtRQUFBLElBQWlCLElBQUksS0FBckIsSUFDZ0IsSUFBQSxNQUFBLGFBQWtCLE9BQVcsVUFBN0IsZUFBQSxLQUFBLEtBQUEsSUFBQSxnQkFBQSxRQUFBLEtBQUE7SUFBQTtJQURDLG1CQUFJLFFBQUo7SSxPO0E7QSxPLGUsUyxjO0ksTztBO0EsUSxPLEs7QSxNLGEsUTtBLE0sZ0IsUTtBLE0sTSxhLFE7QSxNLGEsVztJLGE7USxLLEk7USxJLEMsYyxJLGMsWSxJLEM7STtBO0EsUSxPO0EsQyxTLEk7SSxLLGMsSTtBLEMsRSxPLFEsUSxD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ZSxPQUFVLENBQUEsRUFBQTtZQUN2QztZQUNBLFNBQUE7WUFDQSxHQUFBLE9BQUc7WUFDSCxRQUNELEFBQUEsQ0FBQSxLQUFBLFVBQUEsUUFBQSxVQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsTUFBQSxNQUFBLE1BQUEsUUFBQSxPQUFBLEtBQUEsSUFDSCxLQUNEO1FBbEVEO0lBb0VBO0E7QUFFRyxRQUFBLFlBQUE7QUFDSDs7Q0FBQSxHQThUQSxNQUFBLHNCQUFBLGFBQUE7QUFBQTtBQVNBLFFBVGlCLGdCQUFBO0EsWSxRLGEsQyxRLFksQyxDOzs7QTtBRS9ZakIscURBQXFEO0EsSSxrQixBLEksSSxJLEMsbUIsQyxPLFMsUyxDLEUsQyxFLEMsRSxFO0ksSSxPLFcsSztJLEksTyxPLHlCLEc7SSxJLEMsUSxDLFMsTyxDLEUsYSxLLFksSyxZLEcsTztRLFk7USxLO1ksTyxDLEMsRTtRO0k7SSxPLGUsRyxJO0EsSSxTLEMsRSxDLEUsQyxFLEU7SSxJLE8sVyxLO0ksQyxDLEcsRyxDLEMsRTtBLEM7QSxJLHFCLEEsSSxJLEksQyxzQixDLE8sUyxTLEMsRSxDO0ksTyxlLEcsVztRLFk7USxPO0k7QUFFckQsSUFDQSxTQUFBLENBQUEsRUFBQSxDQUFBO0lBQ0EsQ0FBQSxDQUFBLFVBQUEsR0FBQTtBQUVBLENBQUE7QUFBQSxJQUFBLGUsQSxJLEksSSxDLGdCQUNFLFNBQUEsR0FBQTtJQUNGLElBQUEsT0FBQSxJQUFBLFlBQUEsT0FBQTtJQUFDLElBQUEsU0FBQSxDQUFBO0lBRkQsSUFBQSxPQUFBLE1BSUE7UUFBQSxJQUFpQixJQUFBLEtBQUEsSUFDRCxJQUFBLE1BQUEsYUFBZ0IsT0FBaEIsVUFBQSxlQUFBLEtBQUEsS0FBQSxJQUFBLGdCQUFBLFFBQUEsS0FBQTtJQUFBO0lBR0EsbUJBQUEsUUFBQTtJQUNBLE9BQUE7QUFJZjtBLE8sZSxTLGM7SSxPO0E7QSxRLGEsSztBLE0sYSxRO0EsTSxTLFE7QSxNLE0sYSxRO0EsTSxtQixXO0ksYTtRLEssSTtRLEksQyxPLEksTyxLLEksQztJO0E7QSxRLGE7QSxD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dWxlcy8ucG5wbS9sYW5nY2hhaW5AMC4wLjE1MV9heGlvc0AxLjYuMC9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvY2hhdF9tb2RlbHMvb3BlbmFpLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9pbmRleC50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9jb3JlLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9jb3JlLnRzIiwibm9kZV9tb2R1bGVzLy5wbnBtL0BwbGFzbW9ocStwYXJjZWwtcmVzb2x2ZXJAMC4xMy4xL25vZGVfbW9kdWxlcy9AcGxhc21vaHEvcGFyY2VsLXJlc29sdmVyL2Rpc3QvcG9seWZpbGxzL2J1ZmZlci5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS92ZXJzaW9uLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy92ZXJzaW9uLnRzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3N0cmVhbWluZy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvc3RyZWFtaW5nLnRzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL2Vycm9yLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9lcnJvci50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9fc2hpbXMvYWdlbnQuanMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL19zaGltcy9hZ2VudC50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9fc2hpbXMvZmV0Y2guanMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvdXBsb2Fkcy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvdXBsb2Fkcy50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9fc2hpbXMvZm9ybWRhdGEuanMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvX3NoaW1zL2dldE11bHRpcGFydFJlcXVlc3RPcHRpb25zLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9fc2hpbXMvZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMudHMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvX3NoaW1zL2ZpbGVGcm9tUGF0aC5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvX3NoaW1zL2ZpbGVGcm9tUGF0aC50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9fc2hpbXMvbm9kZS1yZWFkYWJsZS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvX3NoaW1zL25vZGUtcmVhZGFibGUudHMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvcGFnaW5hdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcGFnaW5hdGlvbi50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9yZXNvdXJjZXMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9pbmRleC50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9yZXNvdXJjZXMvYXVkaW8vYXVkaW8uanMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9hdWRpby9hdWRpby50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9yZXNvdXJjZS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2UudHMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvcmVzb3VyY2VzL2F1ZGlvL3RyYW5zY3JpcHRpb25zLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvYXVkaW8vdHJhbnNjcmlwdGlvbnMudHMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvcmVzb3VyY2VzL2F1ZGlvL3RyYW5zbGF0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2F1ZGlvL3RyYW5zbGF0aW9ucy50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9yZXNvdXJjZXMvYXVkaW8vaW5kZXguanMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9hdWRpby9pbmRleC50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9yZXNvdXJjZXMvY2hhdC9jaGF0LmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvY2hhdC9jaGF0LnRzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3Jlc291cmNlcy9jaGF0L2NvbXBsZXRpb25zLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvY2hhdC9jb21wbGV0aW9ucy50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9yZXNvdXJjZXMvY2hhdC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2NoYXQvaW5kZXgudHMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvcmVzb3VyY2VzL2NvbXBsZXRpb25zLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvY29tcGxldGlvbnMudHMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvcmVzb3VyY2VzL2VtYmVkZGluZ3MuanMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9lbWJlZGRpbmdzLnRzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3Jlc291cmNlcy9lZGl0cy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2VkaXRzLnRzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3Jlc291cmNlcy9maWxlcy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2ZpbGVzLnRzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3Jlc291cmNlcy9maW5lLXR1bmVzLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvZmluZS10dW5lcy50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9yZXNvdXJjZXMvZmluZS10dW5pbmcvZmluZS10dW5pbmcuanMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9maW5lLXR1bmluZy9maW5lLXR1bmluZy50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9yZXNvdXJjZXMvZmluZS10dW5pbmcvam9icy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2ZpbmUtdHVuaW5nL2pvYnMudHMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvcmVzb3VyY2VzL2ZpbmUtdHVuaW5nL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvZmluZS10dW5pbmcvaW5kZXgudHMiLCJub2RlX21vZHVsZXMvLnBucG0vb3BlbmFpQDQuNC4wL25vZGVfbW9kdWxlcy9vcGVuYWkvcmVzb3VyY2VzL2ltYWdlcy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2ltYWdlcy50cyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9yZXNvdXJjZXMvbW9kZWxzLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvbW9kZWxzLnRzIiwibm9kZV9tb2R1bGVzLy5wbnBtL29wZW5haUA0LjQuMC9ub2RlX21vZHVsZXMvb3BlbmFpL3Jlc291cmNlcy9tb2RlcmF0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9vcGVuYWlANC40LjAvbm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL21vZGVyYXRpb25zLnRzIiwibm9kZV9tb2R1bGVzLy5wbnBtL2xhbmdjaGFpbkAwLjAuMTUxX2F4aW9zQDEuNi4wL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9iYXNlX2xhbmd1YWdlL2NvdW50X3Rva2Vucy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9sYW5nY2hhaW5AMC4wLjE1MV9heGlvc0AxLjYuMC9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvdXRpbC90aWt0b2tlbi5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9qcy10aWt0b2tlbkAxLjAuNy9ub2RlX21vZHVsZXMvanMtdGlrdG9rZW4vbGl0ZS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9qcy10aWt0b2tlbkAxLjAuNy9ub2RlX21vZHVsZXMvanMtdGlrdG9rZW4vZGlzdC9saXRlLmNqcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9iYXNlNjQtanNAMS41LjEvbm9kZV9tb2R1bGVzL2Jhc2U2NC1qcy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9sYW5nY2hhaW5AMC4wLjE1MV9heGlvc0AxLjYuMC9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvdG9vbHMvY29udmVydF90b19vcGVuYWkuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvaW5kZXguanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3pvZFRvSnNvblNjaGVtYS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2VEZWYuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kL2xpYi9pbmRleC5tanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvYW55LmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL3pvZC10by1qc29uLXNjaGVtYUAzLjIxLjRfem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kLXRvLWpzb24tc2NoZW1hL3NyYy9wYXJzZXJzL2FycmF5LmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL3pvZC10by1qc29uLXNjaGVtYUAzLjIxLjRfem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kLXRvLWpzb24tc2NoZW1hL3NyYy9lcnJvck1lc3NhZ2VzLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL3pvZC10by1qc29uLXNjaGVtYUAzLjIxLjRfem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kLXRvLWpzb24tc2NoZW1hL3NyYy9wYXJzZXJzL2JpZ2ludC5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy9ib29sZWFuLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL3pvZC10by1qc29uLXNjaGVtYUAzLjIxLjRfem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kLXRvLWpzb24tc2NoZW1hL3NyYy9wYXJzZXJzL2JyYW5kZWQuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvY2F0Y2guanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvZGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy9kZWZhdWx0LmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL3pvZC10by1qc29uLXNjaGVtYUAzLjIxLjRfem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kLXRvLWpzb24tc2NoZW1hL3NyYy9wYXJzZXJzL2VmZmVjdHMuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvZW51bS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy9pbnRlcnNlY3Rpb24uanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvbGl0ZXJhbC5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy9tYXAuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvbmF0aXZlRW51bS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy9uZXZlci5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy9udWxsLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL3pvZC10by1qc29uLXNjaGVtYUAzLjIxLjRfem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kLXRvLWpzb24tc2NoZW1hL3NyYy9wYXJzZXJzL251bGxhYmxlLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL3pvZC10by1qc29uLXNjaGVtYUAzLjIxLjRfem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kLXRvLWpzb24tc2NoZW1hL3NyYy9wYXJzZXJzL3VuaW9uLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL3pvZC10by1qc29uLXNjaGVtYUAzLjIxLjRfem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kLXRvLWpzb24tc2NoZW1hL3NyYy9wYXJzZXJzL251bWJlci5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy9vYmplY3QuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvb3B0aW9uYWwuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvcGlwZWxpbmUuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvcHJvbWlzZS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy9yZWNvcmQuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvc3RyaW5nLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL3pvZC10by1qc29uLXNjaGVtYUAzLjIxLjRfem9kQDMuMjIuNC9ub2RlX21vZHVsZXMvem9kLXRvLWpzb24tc2NoZW1hL3NyYy9wYXJzZXJzL3NldC5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy90dXBsZS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvcGFyc2Vycy91bmRlZmluZWQuanMiLCJub2RlX21vZHVsZXMvLnBucG0vem9kLXRvLWpzb24tc2NoZW1hQDMuMjEuNF96b2RAMy4yMi40L25vZGVfbW9kdWxlcy96b2QtdG8tanNvbi1zY2hlbWEvc3JjL3BhcnNlcnMvdW5rbm93bi5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvUmVmcy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS96b2QtdG8tanNvbi1zY2hlbWFAMy4yMS40X3pvZEAzLjIyLjQvbm9kZV9tb2R1bGVzL3pvZC10by1qc29uLXNjaGVtYS9zcmMvT3B0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9sYW5nY2hhaW5AMC4wLjE1MV9heGlvc0AxLjYuMC9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvdXRpbC9henVyZS5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9sYW5nY2hhaW5AMC4wLjE1MV9heGlvc0AxLjYuMC9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvdXRpbC9wcm9tcHQtbGF5ZXIuanMiLCJub2RlX21vZHVsZXMvLnBucG0vbGFuZ2NoYWluQDAuMC4xNTFfYXhpb3NAMS42LjAvbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2NoYXRfbW9kZWxzL2Jhc2UuanMiLCJub2RlX21vZHVsZXMvLnBucG0vbGFuZ2NoYWluQDAuMC4xNTFfYXhpb3NAMS42LjAvbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2Jhc2VfbGFuZ3VhZ2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvLnBucG0vbGFuZ2NoYWluQDAuMC4xNTFfYXhpb3NAMS42LjAvbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L3Byb21wdHMvY2hhdC5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9AcGFyY2VsK3J1bnRpbWUtanNAMi45LjNfQHBhcmNlbCtjb3JlQDIuOS4zL25vZGVfbW9kdWxlcy9AcGFyY2VsL3J1bnRpbWUtanMvbGliL3J1bnRpbWUtMjU1OWIwOTViYWFlOGM0Ny5qcyIsIm5vZGVfbW9kdWxlcy8ucG5wbS9AcGFyY2VsK3J1bnRpbWUtanNAMi45LjNfQHBhcmNlbCtjb3JlQDIuOS4zL25vZGVfbW9kdWxlcy9AcGFyY2VsL3J1bnRpbWUtanMvbGliL2hlbHBlcnMvYnJvd3Nlci9qcy1sb2FkZXIuanMiLCJub2RlX21vZHVsZXMvLnBucG0vQHBhcmNlbCtydW50aW1lLWpzQDIuOS4zX0BwYXJjZWwrY29yZUAyLjkuMy9ub2RlX21vZHVsZXMvQHBhcmNlbC9ydW50aW1lLWpzL2xpYi9oZWxwZXJzL2NhY2hlTG9hZGVyLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL0BwYXJjZWwrcnVudGltZS1qc0AyLjkuM19AcGFyY2VsK2NvcmVAMi45LjMvbm9kZV9tb2R1bGVzL0BwYXJjZWwvcnVudGltZS1qcy9saWIvaGVscGVycy9idW5kbGUtdXJsLmpzIiwibm9kZV9tb2R1bGVzLy5wbnBtL2xhbmdjaGFpbkAwLjAuMTUxX2F4aW9zQDEuNi4wL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC91dGlsL29wZW5haS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVuQUkgYXMgT3BlbkFJQ2xpZW50IH0gZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4gfSBmcm9tIFwiLi4vYmFzZV9sYW5ndWFnZS9jb3VudF90b2tlbnMuanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZSwgQUlNZXNzYWdlQ2h1bmssIENoYXRHZW5lcmF0aW9uQ2h1bmssIENoYXRNZXNzYWdlLCBDaGF0TWVzc2FnZUNodW5rLCBGdW5jdGlvbk1lc3NhZ2VDaHVuaywgSHVtYW5NZXNzYWdlLCBIdW1hbk1lc3NhZ2VDaHVuaywgU3lzdGVtTWVzc2FnZSwgU3lzdGVtTWVzc2FnZUNodW5rLCB9IGZyb20gXCIuLi9zY2hlbWEvaW5kZXguanNcIjtcbmltcG9ydCB7IGZvcm1hdFRvT3BlbkFJRnVuY3Rpb24gfSBmcm9tIFwiLi4vdG9vbHMvY29udmVydF90b19vcGVuYWkuanNcIjtcbmltcG9ydCB7IGdldEVuZHBvaW50IH0gZnJvbSBcIi4uL3V0aWwvYXp1cmUuanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbC9lbnYuanNcIjtcbmltcG9ydCB7IHByb21wdExheWVyVHJhY2tSZXF1ZXN0IH0gZnJvbSBcIi4uL3V0aWwvcHJvbXB0LWxheWVyLmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2hhdE1vZGVsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgd3JhcE9wZW5BSUNsaWVudEVycm9yIH0gZnJvbSBcIi4uL3V0aWwvb3BlbmFpLmpzXCI7XG5mdW5jdGlvbiBleHRyYWN0R2VuZXJpY01lc3NhZ2VDdXN0b21Sb2xlKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZS5yb2xlICE9PSBcInN5c3RlbVwiICYmXG4gICAgICAgIG1lc3NhZ2Uucm9sZSAhPT0gXCJhc3Npc3RhbnRcIiAmJlxuICAgICAgICBtZXNzYWdlLnJvbGUgIT09IFwidXNlclwiICYmXG4gICAgICAgIG1lc3NhZ2Uucm9sZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgVW5rbm93biBtZXNzYWdlIHJvbGU6ICR7bWVzc2FnZS5yb2xlfWApO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZS5yb2xlO1xufVxuZnVuY3Rpb24gbWVzc2FnZVRvT3BlbkFJUm9sZShtZXNzYWdlKSB7XG4gICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuX2dldFR5cGUoKTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcInN5c3RlbVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgICAgIGNhc2UgXCJhaVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYXNzaXN0YW50XCI7XG4gICAgICAgIGNhc2UgXCJodW1hblwiOlxuICAgICAgICAgICAgcmV0dXJuIFwidXNlclwiO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgICAgIGNhc2UgXCJnZW5lcmljXCI6IHtcbiAgICAgICAgICAgIGlmICghQ2hhdE1lc3NhZ2UuaXNJbnN0YW5jZShtZXNzYWdlKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGdlbmVyaWMgY2hhdCBtZXNzYWdlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RHZW5lcmljTWVzc2FnZUN1c3RvbVJvbGUobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBtZXNzYWdlIHR5cGU6ICR7dHlwZX1gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBvcGVuQUlSZXNwb25zZVRvQ2hhdE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHN3aXRjaCAobWVzc2FnZS5yb2xlKSB7XG4gICAgICAgIGNhc2UgXCJ1c2VyXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShtZXNzYWdlLmNvbnRlbnQgfHwgXCJcIik7XG4gICAgICAgIGNhc2UgXCJhc3Npc3RhbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKG1lc3NhZ2UuY29udGVudCB8fCBcIlwiLCB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25fY2FsbDogbWVzc2FnZS5mdW5jdGlvbl9jYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgXCJzeXN0ZW1cIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZShtZXNzYWdlLmNvbnRlbnQgfHwgXCJcIik7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlKG1lc3NhZ2UuY29udGVudCB8fCBcIlwiLCBtZXNzYWdlLnJvbGUgPz8gXCJ1bmtub3duXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9jb252ZXJ0RGVsdGFUb01lc3NhZ2VDaHVuayhcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5kZWx0YSwgZGVmYXVsdFJvbGUpIHtcbiAgICBjb25zdCByb2xlID0gZGVsdGEucm9sZSA/PyBkZWZhdWx0Um9sZTtcbiAgICBjb25zdCBjb250ZW50ID0gZGVsdGEuY29udGVudCA/PyBcIlwiO1xuICAgIGxldCBhZGRpdGlvbmFsX2t3YXJncztcbiAgICBpZiAoZGVsdGEuZnVuY3Rpb25fY2FsbCkge1xuICAgICAgICBhZGRpdGlvbmFsX2t3YXJncyA9IHtcbiAgICAgICAgICAgIGZ1bmN0aW9uX2NhbGw6IGRlbHRhLmZ1bmN0aW9uX2NhbGwsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhZGRpdGlvbmFsX2t3YXJncyA9IHt9O1xuICAgIH1cbiAgICBpZiAocm9sZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2VDaHVuayh7IGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJvbGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2VDaHVuayh7IGNvbnRlbnQsIGFkZGl0aW9uYWxfa3dhcmdzIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChyb2xlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZUNodW5rKHsgY29udGVudCB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAocm9sZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzLFxuICAgICAgICAgICAgbmFtZTogZGVsdGEubmFtZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlQ2h1bmsoeyBjb250ZW50LCByb2xlIH0pO1xuICAgIH1cbn1cbi8qKlxuICogV3JhcHBlciBhcm91bmQgT3BlbkFJIGxhcmdlIGxhbmd1YWdlIG1vZGVscyB0aGF0IHVzZSB0aGUgQ2hhdCBlbmRwb2ludC5cbiAqXG4gKiBUbyB1c2UgeW91IHNob3VsZCBoYXZlIHRoZSBgb3BlbmFpYCBwYWNrYWdlIGluc3RhbGxlZCwgd2l0aCB0aGVcbiAqIGBPUEVOQUlfQVBJX0tFWWAgZW52aXJvbm1lbnQgdmFyaWFibGUgc2V0LlxuICpcbiAqIFRvIHVzZSB3aXRoIEF6dXJlIHlvdSBzaG91bGQgaGF2ZSB0aGUgYG9wZW5haWAgcGFja2FnZSBpbnN0YWxsZWQsIHdpdGggdGhlXG4gKiBgQVpVUkVfT1BFTkFJX0FQSV9LRVlgLFxuICogYEFaVVJFX09QRU5BSV9BUElfSU5TVEFOQ0VfTkFNRWAsXG4gKiBgQVpVUkVfT1BFTkFJX0FQSV9ERVBMT1lNRU5UX05BTUVgXG4gKiBhbmQgYEFaVVJFX09QRU5BSV9BUElfVkVSU0lPTmAgZW52aXJvbm1lbnQgdmFyaWFibGUgc2V0LlxuICogYEFaVVJFX09QRU5BSV9CQVNFX1BBVEhgIGlzIG9wdGlvbmFsIGFuZCB3aWxsIG92ZXJyaWRlIGBBWlVSRV9PUEVOQUlfQVBJX0lOU1RBTkNFX05BTUVgIGlmIHlvdSBuZWVkIHRvIHVzZSBhIGN1c3RvbSBlbmRwb2ludC5cbiAqXG4gKiBAcmVtYXJrc1xuICogQW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgdmFsaWQgdG8gYmUgcGFzc2VkIHRvIHtAbGlua1xuICogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvYXBpLXJlZmVyZW5jZS9jaGF0L2NyZWF0ZSB8XG4gKiBgb3BlbmFpLmNyZWF0ZUNoYXRDb21wbGV0aW9uYH0gY2FuIGJlIHBhc3NlZCB0aHJvdWdoIHtAbGluayBtb2RlbEt3YXJnc30sIGV2ZW5cbiAqIGlmIG5vdCBleHBsaWNpdGx5IGF2YWlsYWJsZSBvbiB0aGlzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdE9wZW5BSSBleHRlbmRzIEJhc2VDaGF0TW9kZWwge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0T3BlbkFJXCI7XG4gICAgfVxuICAgIGdldCBjYWxsS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLnN1cGVyLmNhbGxLZXlzLFxuICAgICAgICAgICAgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICBcImZ1bmN0aW9uX2NhbGxcIixcbiAgICAgICAgICAgIFwiZnVuY3Rpb25zXCIsXG4gICAgICAgICAgICBcInRvb2xzXCIsXG4gICAgICAgICAgICBcInByb21wdEluZGV4XCIsXG4gICAgICAgIF07XG4gICAgfVxuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3BlbkFJQXBpS2V5OiBcIk9QRU5BSV9BUElfS0VZXCIsXG4gICAgICAgICAgICBhenVyZU9wZW5BSUFwaUtleTogXCJBWlVSRV9PUEVOQUlfQVBJX0tFWVwiLFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uOiBcIk9QRU5BSV9PUkdBTklaQVRJT05cIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbE5hbWU6IFwibW9kZWxcIixcbiAgICAgICAgICAgIG9wZW5BSUFwaUtleTogXCJvcGVuYWlfYXBpX2tleVwiLFxuICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlWZXJzaW9uOiBcImF6dXJlX29wZW5haV9hcGlfdmVyc2lvblwiLFxuICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlLZXk6IFwiYXp1cmVfb3BlbmFpX2FwaV9rZXlcIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lOiBcImF6dXJlX29wZW5haV9hcGlfaW5zdGFuY2VfbmFtZVwiLFxuICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZTogXCJhenVyZV9vcGVuYWlfYXBpX2RlcGxveW1lbnRfbmFtZVwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoZmllbGRzID8/IHt9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZW1wZXJhdHVyZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9wUFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJlcXVlbmN5UGVuYWx0eVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJlc2VuY2VQZW5hbHR5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsb2dpdEJpYXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibW9kZWxOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImdwdC0zLjUtdHVyYm9cIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibW9kZWxLd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1c2VyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVvdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4VG9rZW5zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wZW5BSUFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUFwaVZlcnNpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUJhc2VQYXRoXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9yZ2FuaXphdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50Q29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3BlbkFJQXBpS2V5ID1cbiAgICAgICAgICAgIGZpZWxkcz8ub3BlbkFJQXBpS2V5ID8/IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaUtleSA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpS2V5ID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlLZXkgJiYgIXRoaXMub3BlbkFJQXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPcGVuQUkgb3IgQXp1cmUgT3BlbkFJIEFQSSBrZXkgbm90IGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0lOU1RBTkNFX05BTUVcIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9ERVBMT1lNRU5UX05BTUVcIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlWZXJzaW9uID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfVkVSU0lPTlwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUJhc2VQYXRoID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlCYXNlUGF0aCA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQkFTRV9QQVRIXCIpO1xuICAgICAgICB0aGlzLm9yZ2FuaXphdGlvbiA9XG4gICAgICAgICAgICBmaWVsZHM/LmNvbmZpZ3VyYXRpb24/Lm9yZ2FuaXphdGlvbiA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfT1JHQU5JWkFUSU9OXCIpO1xuICAgICAgICB0aGlzLm1vZGVsTmFtZSA9IGZpZWxkcz8ubW9kZWxOYW1lID8/IHRoaXMubW9kZWxOYW1lO1xuICAgICAgICB0aGlzLm1vZGVsS3dhcmdzID0gZmllbGRzPy5tb2RlbEt3YXJncyA/PyB7fTtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gZmllbGRzPy50aW1lb3V0O1xuICAgICAgICB0aGlzLnRlbXBlcmF0dXJlID0gZmllbGRzPy50ZW1wZXJhdHVyZSA/PyB0aGlzLnRlbXBlcmF0dXJlO1xuICAgICAgICB0aGlzLnRvcFAgPSBmaWVsZHM/LnRvcFAgPz8gdGhpcy50b3BQO1xuICAgICAgICB0aGlzLmZyZXF1ZW5jeVBlbmFsdHkgPSBmaWVsZHM/LmZyZXF1ZW5jeVBlbmFsdHkgPz8gdGhpcy5mcmVxdWVuY3lQZW5hbHR5O1xuICAgICAgICB0aGlzLnByZXNlbmNlUGVuYWx0eSA9IGZpZWxkcz8ucHJlc2VuY2VQZW5hbHR5ID8/IHRoaXMucHJlc2VuY2VQZW5hbHR5O1xuICAgICAgICB0aGlzLm1heFRva2VucyA9IGZpZWxkcz8ubWF4VG9rZW5zO1xuICAgICAgICB0aGlzLm4gPSBmaWVsZHM/Lm4gPz8gdGhpcy5uO1xuICAgICAgICB0aGlzLmxvZ2l0QmlhcyA9IGZpZWxkcz8ubG9naXRCaWFzO1xuICAgICAgICB0aGlzLnN0b3AgPSBmaWVsZHM/LnN0b3A7XG4gICAgICAgIHRoaXMudXNlciA9IGZpZWxkcz8udXNlcjtcbiAgICAgICAgdGhpcy5zdHJlYW1pbmcgPSBmaWVsZHM/LnN0cmVhbWluZyA/PyBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSAmJiAhdGhpcy5henVyZU9wZW5BSUJhc2VQYXRoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSBpbnN0YW5jZSBuYW1lIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSBkZXBsb3ltZW50IG5hbWUgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgdmVyc2lvbiBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9wZW5BSUFwaUtleSA9IHRoaXMub3BlbkFJQXBpS2V5ID8/IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnRDb25maWcgPSB7XG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMub3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uOiB0aGlzLm9yZ2FuaXphdGlvbixcbiAgICAgICAgICAgIGJhc2VVUkw6IGNvbmZpZ3VyYXRpb24/LmJhc2VQYXRoID8/IGZpZWxkcz8uY29uZmlndXJhdGlvbj8uYmFzZVBhdGgsXG4gICAgICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSxcbiAgICAgICAgICAgIGRlZmF1bHRIZWFkZXJzOiBjb25maWd1cmF0aW9uPy5iYXNlT3B0aW9ucz8uaGVhZGVycyA/P1xuICAgICAgICAgICAgICAgIGZpZWxkcz8uY29uZmlndXJhdGlvbj8uYmFzZU9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICAgICAgICBkZWZhdWx0UXVlcnk6IGNvbmZpZ3VyYXRpb24/LmJhc2VPcHRpb25zPy5wYXJhbXMgPz9cbiAgICAgICAgICAgICAgICBmaWVsZHM/LmNvbmZpZ3VyYXRpb24/LmJhc2VPcHRpb25zPy5wYXJhbXMsXG4gICAgICAgICAgICAuLi5jb25maWd1cmF0aW9uLFxuICAgICAgICAgICAgLi4uZmllbGRzPy5jb25maWd1cmF0aW9uLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBpbnZva2UgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaW52b2NhdGlvblBhcmFtcyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbE5hbWUsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy50ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgIHRvcF9wOiB0aGlzLnRvcFAsXG4gICAgICAgICAgICBmcmVxdWVuY3lfcGVuYWx0eTogdGhpcy5mcmVxdWVuY3lQZW5hbHR5LFxuICAgICAgICAgICAgcHJlc2VuY2VfcGVuYWx0eTogdGhpcy5wcmVzZW5jZVBlbmFsdHksXG4gICAgICAgICAgICBtYXhfdG9rZW5zOiB0aGlzLm1heFRva2VucyA9PT0gLTEgPyB1bmRlZmluZWQgOiB0aGlzLm1heFRva2VucyxcbiAgICAgICAgICAgIG46IHRoaXMubixcbiAgICAgICAgICAgIGxvZ2l0X2JpYXM6IHRoaXMubG9naXRCaWFzLFxuICAgICAgICAgICAgc3RvcDogb3B0aW9ucz8uc3RvcCA/PyB0aGlzLnN0b3AsXG4gICAgICAgICAgICB1c2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBzdHJlYW06IHRoaXMuc3RyZWFtaW5nLFxuICAgICAgICAgICAgZnVuY3Rpb25zOiBvcHRpb25zPy5mdW5jdGlvbnMgPz9cbiAgICAgICAgICAgICAgICAob3B0aW9ucz8udG9vbHNcbiAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zPy50b29scy5tYXAoZm9ybWF0VG9PcGVuQUlGdW5jdGlvbilcbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgZnVuY3Rpb25fY2FsbDogb3B0aW9ucz8uZnVuY3Rpb25fY2FsbCxcbiAgICAgICAgICAgIC4uLnRoaXMubW9kZWxLd2FyZ3MsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgX2lkZW50aWZ5aW5nUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWxfbmFtZTogdGhpcy5tb2RlbE5hbWUsXG4gICAgICAgICAgICAuLi50aGlzLmludm9jYXRpb25QYXJhbXMoKSxcbiAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKG1lc3NhZ2VzLCBvcHRpb25zLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzTWFwcGVkID0gbWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiAoe1xuICAgICAgICAgICAgcm9sZTogbWVzc2FnZVRvT3BlbkFJUm9sZShtZXNzYWdlKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICAgIG5hbWU6IG1lc3NhZ2UubmFtZSxcbiAgICAgICAgICAgIGZ1bmN0aW9uX2NhbGw6IG1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3NcbiAgICAgICAgICAgICAgICAuZnVuY3Rpb25fY2FsbCxcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmludm9jYXRpb25QYXJhbXMob3B0aW9ucyksXG4gICAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXNNYXBwZWQsXG4gICAgICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIGxldCBkZWZhdWx0Um9sZTtcbiAgICAgICAgY29uc3Qgc3RyZWFtSXRlcmFibGUgPSBhd2FpdCB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkocGFyYW1zLCBvcHRpb25zKTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBkYXRhIG9mIHN0cmVhbUl0ZXJhYmxlKSB7XG4gICAgICAgICAgICBjb25zdCBjaG9pY2UgPSBkYXRhPy5jaG9pY2VzWzBdO1xuICAgICAgICAgICAgaWYgKCFjaG9pY2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgZGVsdGEgfSA9IGNob2ljZTtcbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gX2NvbnZlcnREZWx0YVRvTWVzc2FnZUNodW5rKGRlbHRhLCBkZWZhdWx0Um9sZSk7XG4gICAgICAgICAgICBkZWZhdWx0Um9sZSA9IGRlbHRhLnJvbGUgPz8gZGVmYXVsdFJvbGU7XG4gICAgICAgICAgICBjb25zdCBuZXdUb2tlbkluZGljZXMgPSB7XG4gICAgICAgICAgICAgICAgcHJvbXB0OiBvcHRpb25zLnByb21wdEluZGV4ID8/IDAsXG4gICAgICAgICAgICAgICAgY29tcGxldGlvbjogY2hvaWNlLmluZGV4ID8/IDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbkNodW5rID0gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNodW5rLFxuICAgICAgICAgICAgICAgIHRleHQ6IGNodW5rLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkluZm86IG5ld1Rva2VuSW5kaWNlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgeWllbGQgZ2VuZXJhdGlvbkNodW5rO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZvaWRcbiAgICAgICAgICAgIHZvaWQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4oZ2VuZXJhdGlvbkNodW5rLnRleHQgPz8gXCJcIiwgbmV3VG9rZW5JbmRpY2VzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7IGNodW5rOiBnZW5lcmF0aW9uQ2h1bmsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBYm9ydEVycm9yXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBmb3IgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIF9nZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB0b2tlblVzYWdlID0ge307XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuaW52b2NhdGlvblBhcmFtcyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNNYXBwZWQgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+ICh7XG4gICAgICAgICAgICByb2xlOiBtZXNzYWdlVG9PcGVuQUlSb2xlKG1lc3NhZ2UpLFxuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50LFxuICAgICAgICAgICAgbmFtZTogbWVzc2FnZS5uYW1lLFxuICAgICAgICAgICAgZnVuY3Rpb25fY2FsbDogbWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJnc1xuICAgICAgICAgICAgICAgIC5mdW5jdGlvbl9jYWxsLFxuICAgICAgICB9KSk7XG4gICAgICAgIGlmIChwYXJhbXMuc3RyZWFtKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBjb25zdCBmaW5hbENodW5rcyA9IHt9O1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNodW5rLmdlbmVyYXRpb25JbmZvPy5jb21wbGV0aW9uID8/IDA7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmtzW2luZGV4XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzW2luZGV4XSA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVua3NbaW5kZXhdID0gZmluYWxDaHVua3NbaW5kZXhdLmNvbmNhdChjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBPYmplY3QuZW50cmllcyhmaW5hbENodW5rcylcbiAgICAgICAgICAgICAgICAuc29ydCgoW2FLZXldLCBbYktleV0pID0+IHBhcnNlSW50KGFLZXksIDEwKSAtIHBhcnNlSW50KGJLZXksIDEwKSlcbiAgICAgICAgICAgICAgICAubWFwKChbXywgdmFsdWVdKSA9PiB2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuY29tcGxldGlvbldpdGhSZXRyeSh7XG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzTWFwcGVkLFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnM/Lm9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHsgY29tcGxldGlvbl90b2tlbnM6IGNvbXBsZXRpb25Ub2tlbnMsIHByb21wdF90b2tlbnM6IHByb21wdFRva2VucywgdG90YWxfdG9rZW5zOiB0b3RhbFRva2VucywgfSA9IGRhdGE/LnVzYWdlID8/IHt9O1xuICAgICAgICAgICAgaWYgKGNvbXBsZXRpb25Ub2tlbnMpIHtcbiAgICAgICAgICAgICAgICB0b2tlblVzYWdlLmNvbXBsZXRpb25Ub2tlbnMgPVxuICAgICAgICAgICAgICAgICAgICAodG9rZW5Vc2FnZS5jb21wbGV0aW9uVG9rZW5zID8/IDApICsgY29tcGxldGlvblRva2VucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9tcHRUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICB0b2tlblVzYWdlLnByb21wdFRva2VucyA9ICh0b2tlblVzYWdlLnByb21wdFRva2VucyA/PyAwKSArIHByb21wdFRva2VucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b3RhbFRva2Vucykge1xuICAgICAgICAgICAgICAgIHRva2VuVXNhZ2UudG90YWxUb2tlbnMgPSAodG9rZW5Vc2FnZS50b3RhbFRva2VucyA/PyAwKSArIHRvdGFsVG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBkYXRhPy5jaG9pY2VzID8/IFtdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHBhcnQubWVzc2FnZT8uY29udGVudCA/PyBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wZW5BSVJlc3BvbnNlVG9DaGF0TWVzc2FnZShwYXJ0Lm1lc3NhZ2UgPz8geyByb2xlOiBcImFzc2lzdGFudFwiIH0pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQuZmluaXNoX3JlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uLmdlbmVyYXRpb25JbmZvID0geyBmaW5pc2hfcmVhc29uOiBwYXJ0LmZpbmlzaF9yZWFzb24gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnMucHVzaChnZW5lcmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnMsXG4gICAgICAgICAgICAgICAgbGxtT3V0cHV0OiB7IHRva2VuVXNhZ2UgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZ2V0TnVtVG9rZW5zRnJvbU1lc3NhZ2VzKG1lc3NhZ2VzKSB7XG4gICAgICAgIGxldCB0b3RhbENvdW50ID0gMDtcbiAgICAgICAgbGV0IHRva2Vuc1Blck1lc3NhZ2UgPSAwO1xuICAgICAgICBsZXQgdG9rZW5zUGVyTmFtZSA9IDA7XG4gICAgICAgIC8vIEZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fZm9ybWF0X2lucHV0c190b19DaGF0R1BUX21vZGVscy5pcHluYlxuICAgICAgICBpZiAoZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4odGhpcy5tb2RlbE5hbWUpID09PSBcImdwdC0zLjUtdHVyYm9cIikge1xuICAgICAgICAgICAgdG9rZW5zUGVyTWVzc2FnZSA9IDQ7XG4gICAgICAgICAgICB0b2tlbnNQZXJOYW1lID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4odGhpcy5tb2RlbE5hbWUpLnN0YXJ0c1dpdGgoXCJncHQtNFwiKSkge1xuICAgICAgICAgICAgdG9rZW5zUGVyTWVzc2FnZSA9IDM7XG4gICAgICAgICAgICB0b2tlbnNQZXJOYW1lID0gMTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb3VudFBlck1lc3NhZ2UgPSBhd2FpdCBQcm9taXNlLmFsbChtZXNzYWdlcy5tYXAoYXN5bmMgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRleHRDb3VudCA9IGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zKG1lc3NhZ2UuY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCByb2xlQ291bnQgPSBhd2FpdCB0aGlzLmdldE51bVRva2VucyhtZXNzYWdlVG9PcGVuQUlSb2xlKG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVDb3VudCA9IG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyB0b2tlbnNQZXJOYW1lICsgKGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zKG1lc3NhZ2UubmFtZSkpXG4gICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSB0ZXh0Q291bnQgKyB0b2tlbnNQZXJNZXNzYWdlICsgcm9sZUNvdW50ICsgbmFtZUNvdW50O1xuICAgICAgICAgICAgdG90YWxDb3VudCArPSBjb3VudDtcbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcbiAgICAgICAgfSkpO1xuICAgICAgICB0b3RhbENvdW50ICs9IDM7IC8vIGV2ZXJ5IHJlcGx5IGlzIHByaW1lZCB3aXRoIDx8c3RhcnR8PmFzc2lzdGFudDx8bWVzc2FnZXw+XG4gICAgICAgIHJldHVybiB7IHRvdGFsQ291bnQsIGNvdW50UGVyTWVzc2FnZSB9O1xuICAgIH1cbiAgICBhc3luYyBjb21wbGV0aW9uV2l0aFJldHJ5KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB0aGlzLl9nZXRDbGllbnRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHdyYXBPcGVuQUlDbGllbnRFcnJvcihlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRDbGllbnRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFJRW5kcG9pbnRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZTogdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lOiB0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQmFzZVBhdGg6IHRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiB0aGlzLmNsaWVudENvbmZpZy5iYXNlVVJMLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gZ2V0RW5kcG9pbnQob3BlbkFJRW5kcG9pbnRDb25maWcpO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgICAgIGJhc2VVUkw6IGVuZHBvaW50LFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMudGltZW91dCxcbiAgICAgICAgICAgICAgICBtYXhSZXRyaWVzOiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmJhc2VVUkwpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgcGFyYW1zLmJhc2VVUkw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBPcGVuQUlDbGllbnQocGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgXCJhcGkta2V5XCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlLZXksXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5xdWVyeSA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS12ZXJzaW9uXCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uLFxuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVxdWVzdE9wdGlvbnM7XG4gICAgfVxuICAgIF9sbG1UeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJvcGVuYWlcIjtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBfY29tYmluZUxMTU91dHB1dCguLi5sbG1PdXRwdXRzKSB7XG4gICAgICAgIHJldHVybiBsbG1PdXRwdXRzLnJlZHVjZSgoYWNjLCBsbG1PdXRwdXQpID0+IHtcbiAgICAgICAgICAgIGlmIChsbG1PdXRwdXQgJiYgbGxtT3V0cHV0LnRva2VuVXNhZ2UpIHtcbiAgICAgICAgICAgICAgICBhY2MudG9rZW5Vc2FnZS5jb21wbGV0aW9uVG9rZW5zICs9XG4gICAgICAgICAgICAgICAgICAgIGxsbU91dHB1dC50b2tlblVzYWdlLmNvbXBsZXRpb25Ub2tlbnMgPz8gMDtcbiAgICAgICAgICAgICAgICBhY2MudG9rZW5Vc2FnZS5wcm9tcHRUb2tlbnMgKz0gbGxtT3V0cHV0LnRva2VuVXNhZ2UucHJvbXB0VG9rZW5zID8/IDA7XG4gICAgICAgICAgICAgICAgYWNjLnRva2VuVXNhZ2UudG90YWxUb2tlbnMgKz0gbGxtT3V0cHV0LnRva2VuVXNhZ2UudG90YWxUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuVXNhZ2U6IHtcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uVG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgIHByb21wdFRva2VuczogMCxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQcm9tcHRMYXllckNoYXRPcGVuQUkgZXh0ZW5kcyBDaGF0T3BlbkFJIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvbXB0TGF5ZXJBcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicGxUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJldHVyblByb21wdExheWVySWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9tcHRMYXllckFwaUtleSA9XG4gICAgICAgICAgICBmaWVsZHM/LnByb21wdExheWVyQXBpS2V5ID8/XG4gICAgICAgICAgICAgICAgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudj8uUFJPTVBUTEFZRVJfQVBJX0tFWVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMucGxUYWdzID0gZmllbGRzPy5wbFRhZ3MgPz8gW107XG4gICAgICAgIHRoaXMucmV0dXJuUHJvbXB0TGF5ZXJJZCA9IGZpZWxkcz8ucmV0dXJuUHJvbXB0TGF5ZXJJZCA/PyBmYWxzZTtcbiAgICB9XG4gICAgYXN5bmMgX2dlbmVyYXRlKG1lc3NhZ2VzLCBvcHRpb25zLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBsZXQgcGFyc2VkT3B0aW9ucztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgICAgIHBhcnNlZE9wdGlvbnMgPSB7IHN0b3A6IG9wdGlvbnMgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zPy50aW1lb3V0ICYmICFvcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgcGFyc2VkT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dChvcHRpb25zLnRpbWVvdXQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZE9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdlbmVyYXRlZFJlc3BvbnNlcyA9IGF3YWl0IHN1cGVyLl9nZW5lcmF0ZShtZXNzYWdlcywgcGFyc2VkT3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RFbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgX2NvbnZlcnRNZXNzYWdlVG9EaWN0ID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBsZXQgbWVzc2FnZURpY3Q7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImh1bWFuXCIpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlRGljdCA9IHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImFpXCIpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlRGljdCA9IHsgcm9sZTogXCJhc3Npc3RhbnRcIiwgY29udGVudDogbWVzc2FnZS5jb250ZW50IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VEaWN0ID0geyByb2xlOiBcImFzc2lzdGFudFwiLCBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VEaWN0ID0geyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJnZW5lcmljXCIpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlRGljdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogbWVzc2FnZS5yb2xlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR290IHVua25vd24gdHlwZSAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZURpY3Q7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IF9jcmVhdGVNZXNzYWdlRGljdHMgPSAobWVzc2FnZXMsIGNhbGxPcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjYWxsT3B0aW9ucz8uc3RvcCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhwYXJhbXMpLmluY2x1ZGVzKFwic3RvcFwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgc3RvcGAgZm91bmQgaW4gYm90aCB0aGUgaW5wdXQgYW5kIGRlZmF1bHQgcGFyYW1zLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlRGljdHMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IF9jb252ZXJ0TWVzc2FnZVRvRGljdChtZXNzYWdlKSk7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZURpY3RzO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdlbmVyYXRlZFJlc3BvbnNlcy5nZW5lcmF0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbiA9IGdlbmVyYXRlZFJlc3BvbnNlcy5nZW5lcmF0aW9uc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VEaWN0cyA9IF9jcmVhdGVNZXNzYWdlRGljdHMobWVzc2FnZXMsIHBhcnNlZE9wdGlvbnMpO1xuICAgICAgICAgICAgbGV0IHByb21wdExheWVyUmVxdWVzdElkO1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkUmVzcCA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGdlbmVyYXRpb24udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogbWVzc2FnZVRvT3BlbkFJUm9sZShnZW5lcmF0aW9uLm1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0TGF5ZXJSZXNwQm9keSA9IGF3YWl0IHByb21wdExheWVyVHJhY2tSZXF1ZXN0KHRoaXMuY2FsbGVyLCBcImxhbmdjaGFpbi5Qcm9tcHRMYXllckNoYXRPcGVuQUlcIiwgeyAuLi50aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLCBtZXNzYWdlczogbWVzc2FnZURpY3RzLCBzdHJlYW06IGZhbHNlIH0sIHRoaXMucGxUYWdzLCBwYXJzZWRSZXNwLCByZXF1ZXN0U3RhcnRUaW1lLCByZXF1ZXN0RW5kVGltZSwgdGhpcy5wcm9tcHRMYXllckFwaUtleSk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXR1cm5Qcm9tcHRMYXllcklkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb21wdExheWVyUmVzcEJvZHkuc3VjY2VzcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHRMYXllclJlcXVlc3RJZCA9IHByb21wdExheWVyUmVzcEJvZHkucmVxdWVzdF9pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFnZW5lcmF0aW9uLmdlbmVyYXRpb25JbmZvIHx8XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBnZW5lcmF0aW9uLmdlbmVyYXRpb25JbmZvICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb24uZ2VuZXJhdGlvbkluZm8gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbi5nZW5lcmF0aW9uSW5mby5wcm9tcHRMYXllclJlcXVlc3RJZCA9IHByb21wdExheWVyUmVxdWVzdElkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZW5lcmF0ZWRSZXNwb25zZXM7XG4gICAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbnZhciBfX2NyZWF0ZUJpbmRpbmcgPVxuICAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHxcbiAgKE9iamVjdC5jcmVhdGUgP1xuICAgIGZ1bmN0aW9uIChvLCBtLCBrLCBrMikge1xuICAgICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICAgIGlmICghZGVzYyB8fCAoJ2dldCcgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgICBkZXNjID0ge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbVtrXTtcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbiAgICB9XG4gIDogZnVuY3Rpb24gKG8sIG0sIGssIGsyKSB7XG4gICAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgICAgb1trMl0gPSBtW2tdO1xuICAgIH0pO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9XG4gICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fFxuICAoT2JqZWN0LmNyZWF0ZSA/XG4gICAgZnVuY3Rpb24gKG8sIHYpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG4gICAgfVxuICA6IGZ1bmN0aW9uIChvLCB2KSB7XG4gICAgICBvWydkZWZhdWx0J10gPSB2O1xuICAgIH0pO1xudmFyIF9faW1wb3J0U3RhciA9XG4gICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fFxuICBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKVxuICAgICAgZm9yICh2YXIgayBpbiBtb2QpXG4gICAgICAgIGlmIChrICE9PSAnZGVmYXVsdCcgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xudmFyIF9hO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZmlsZUZyb21QYXRoID1cbiAgZXhwb3J0cy50b0ZpbGUgPVxuICBleHBvcnRzLlVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciA9XG4gIGV4cG9ydHMuUGVybWlzc2lvbkRlbmllZEVycm9yID1cbiAgZXhwb3J0cy5JbnRlcm5hbFNlcnZlckVycm9yID1cbiAgZXhwb3J0cy5BdXRoZW50aWNhdGlvbkVycm9yID1cbiAgZXhwb3J0cy5CYWRSZXF1ZXN0RXJyb3IgPVxuICBleHBvcnRzLlJhdGVMaW1pdEVycm9yID1cbiAgZXhwb3J0cy5Db25mbGljdEVycm9yID1cbiAgZXhwb3J0cy5Ob3RGb3VuZEVycm9yID1cbiAgZXhwb3J0cy5BUElVc2VyQWJvcnRFcnJvciA9XG4gIGV4cG9ydHMuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciA9XG4gIGV4cG9ydHMuQVBJQ29ubmVjdGlvbkVycm9yID1cbiAgZXhwb3J0cy5BUElFcnJvciA9XG4gIGV4cG9ydHMuT3BlbkFJID1cbiAgICB2b2lkIDA7XG5jb25zdCBDb3JlID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoJy4vY29yZS5qcycpKTtcbmNvbnN0IFBhZ2luYXRpb24gPSBfX2ltcG9ydFN0YXIocmVxdWlyZSgnLi9wYWdpbmF0aW9uLmpzJykpO1xuY29uc3QgQVBJID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoJy4vcmVzb3VyY2VzL2luZGV4LmpzJykpO1xuY29uc3QgRXJyb3JzID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoJy4vZXJyb3IuanMnKSk7XG5jb25zdCBVcGxvYWRzID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoJy4vdXBsb2Fkcy5qcycpKTtcbi8qKiBBUEkgQ2xpZW50IGZvciBpbnRlcmZhY2luZyB3aXRoIHRoZSBPcGVuQUkgQVBJLiAqL1xuY2xhc3MgT3BlbkFJIGV4dGVuZHMgQ29yZS5BUElDbGllbnQge1xuICAvKipcbiAgICogQVBJIENsaWVudCBmb3IgaW50ZXJmYWNpbmcgd2l0aCB0aGUgT3BlbkFJIEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmFwaUtleT1wcm9jZXNzLmVudlsnT1BFTkFJX0FQSV9LRVknXV0gLSBUaGUgQVBJIEtleSB0byBzZW5kIHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5iYXNlVVJMXSAtIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGJhc2UgVVJMIGZvciB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMudGltZW91dD0xMCBtaW51dGVzXSAtIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIChpbiBtaWxsaXNlY29uZHMpIHRoZSBjbGllbnQgd2lsbCB3YWl0IGZvciBhIHJlc3BvbnNlIGJlZm9yZSB0aW1pbmcgb3V0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaHR0cEFnZW50XSAtIEFuIEhUVFAgYWdlbnQgdXNlZCB0byBtYW5hZ2UgSFRUUChzKSBjb25uZWN0aW9ucy5cbiAgICogQHBhcmFtIHtDb3JlLkZldGNofSBbb3B0cy5mZXRjaF0gLSBTcGVjaWZ5IGEgY3VzdG9tIGBmZXRjaGAgZnVuY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5tYXhSZXRyaWVzPTJdIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoZSBjbGllbnQgd2lsbCByZXRyeSBhIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB7Q29yZS5IZWFkZXJzfSBvcHRzLmRlZmF1bHRIZWFkZXJzIC0gRGVmYXVsdCBoZWFkZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7Q29yZS5EZWZhdWx0UXVlcnl9IG9wdHMuZGVmYXVsdFF1ZXJ5IC0gRGVmYXVsdCBxdWVyeSBwYXJhbWV0ZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI9ZmFsc2VdIC0gQnkgZGVmYXVsdCwgY2xpZW50LXNpZGUgdXNlIG9mIHRoaXMgbGlicmFyeSBpcyBub3QgYWxsb3dlZCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cbiAgICogQHBhcmFtIHtzdHJpbmcgfCBudWxsfSBbb3B0cy5vcmdhbml6YXRpb25dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihfYikge1xuICAgIHZhciBfYywgX2Q7XG4gICAgdmFyIHtcbiAgICAgIGFwaUtleSA9IENvcmUucmVhZEVudignT1BFTkFJX0FQSV9LRVknKSxcbiAgICAgIG9yZ2FuaXphdGlvbiA9IChfYyA9IENvcmUucmVhZEVudignT1BFTkFJX09SR19JRCcpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBudWxsLFxuICAgICAgLi4ub3B0c1xuICAgIH0gPSBfYiA9PT0gdm9pZCAwID8ge30gOiBfYjtcbiAgICBpZiAoYXBpS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUaGUgT1BFTkFJX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbWlzc2luZyBvciBlbXB0eTsgZWl0aGVyIHByb3ZpZGUgaXQsIG9yIGluc3RhbnRpYXRlIHRoZSBPcGVuQUkgY2xpZW50IHdpdGggYW4gYXBpS2V5IG9wdGlvbiwgbGlrZSBuZXcgT3BlbkFJKHsgYXBpS2V5OiAnbXkgYXBpS2V5JyB9KS5cIixcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBhcGlLZXksXG4gICAgICBvcmdhbml6YXRpb24sXG4gICAgICBiYXNlVVJMOiBgaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MWAsXG4gICAgICAuLi5vcHRzLFxuICAgIH07XG4gICAgaWYgKCFvcHRpb25zLmRhbmdlcm91c2x5QWxsb3dCcm93c2VyICYmIENvcmUuaXNSdW5uaW5nSW5Ccm93c2VyKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJJdCBsb29rcyBsaWtlIHlvdSdyZSBydW5uaW5nIGluIGEgYnJvd3Nlci1saWtlIGVudmlyb25tZW50LlxcblxcblRoaXMgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cXG5JZiB5b3UgdW5kZXJzdGFuZCB0aGUgcmlza3MgYW5kIGhhdmUgYXBwcm9wcmlhdGUgbWl0aWdhdGlvbnMgaW4gcGxhY2UsXFxueW91IGNhbiBzZXQgdGhlIGBkYW5nZXJvdXNseUFsbG93QnJvd3NlcmAgb3B0aW9uIHRvIGB0cnVlYCwgZS5nLixcXG5cXG5uZXcgT3BlbkFJKHsgYXBpS2V5LCBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSB9KTtcXG5cXG5odHRwczovL2hlbHAub3BlbmFpLmNvbS9lbi9hcnRpY2xlcy81MTEyNTk1LWJlc3QtcHJhY3RpY2VzLWZvci1hcGkta2V5LXNhZmV0eVxcblwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgc3VwZXIoe1xuICAgICAgYmFzZVVSTDogb3B0aW9ucy5iYXNlVVJMLFxuICAgICAgdGltZW91dDogKF9kID0gb3B0aW9ucy50aW1lb3V0KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiA2MDAwMDAgLyogMTAgbWludXRlcyAqLyxcbiAgICAgIGh0dHBBZ2VudDogb3B0aW9ucy5odHRwQWdlbnQsXG4gICAgICBtYXhSZXRyaWVzOiBvcHRpb25zLm1heFJldHJpZXMsXG4gICAgICBmZXRjaDogb3B0aW9ucy5mZXRjaCxcbiAgICB9KTtcbiAgICB0aGlzLmNvbXBsZXRpb25zID0gbmV3IEFQSS5Db21wbGV0aW9ucyh0aGlzKTtcbiAgICB0aGlzLmNoYXQgPSBuZXcgQVBJLkNoYXQodGhpcyk7XG4gICAgdGhpcy5lZGl0cyA9IG5ldyBBUEkuRWRpdHModGhpcyk7XG4gICAgdGhpcy5lbWJlZGRpbmdzID0gbmV3IEFQSS5FbWJlZGRpbmdzKHRoaXMpO1xuICAgIHRoaXMuZmlsZXMgPSBuZXcgQVBJLkZpbGVzKHRoaXMpO1xuICAgIHRoaXMuaW1hZ2VzID0gbmV3IEFQSS5JbWFnZXModGhpcyk7XG4gICAgdGhpcy5hdWRpbyA9IG5ldyBBUEkuQXVkaW8odGhpcyk7XG4gICAgdGhpcy5tb2RlcmF0aW9ucyA9IG5ldyBBUEkuTW9kZXJhdGlvbnModGhpcyk7XG4gICAgdGhpcy5tb2RlbHMgPSBuZXcgQVBJLk1vZGVscyh0aGlzKTtcbiAgICB0aGlzLmZpbmVUdW5pbmcgPSBuZXcgQVBJLkZpbmVUdW5pbmcodGhpcyk7XG4gICAgdGhpcy5maW5lVHVuZXMgPSBuZXcgQVBJLkZpbmVUdW5lcyh0aGlzKTtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICB0aGlzLm9yZ2FuaXphdGlvbiA9IG9yZ2FuaXphdGlvbjtcbiAgfVxuICBkZWZhdWx0UXVlcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnMuZGVmYXVsdFF1ZXJ5O1xuICB9XG4gIGRlZmF1bHRIZWFkZXJzKG9wdHMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMob3B0cyksXG4gICAgICAnT3BlbkFJLU9yZ2FuaXphdGlvbic6IHRoaXMub3JnYW5pemF0aW9uLFxuICAgICAgLi4udGhpcy5fb3B0aW9ucy5kZWZhdWx0SGVhZGVycyxcbiAgICB9O1xuICB9XG4gIGF1dGhIZWFkZXJzKG9wdHMpIHtcbiAgICByZXR1cm4geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCB9O1xuICB9XG59XG5leHBvcnRzLk9wZW5BSSA9IE9wZW5BSTtcbl9hID0gT3BlbkFJO1xuT3BlbkFJLk9wZW5BSSA9IF9hO1xuT3BlbkFJLkFQSUVycm9yID0gRXJyb3JzLkFQSUVycm9yO1xuT3BlbkFJLkFQSUNvbm5lY3Rpb25FcnJvciA9IEVycm9ycy5BUElDb25uZWN0aW9uRXJyb3I7XG5PcGVuQUkuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciA9IEVycm9ycy5BUElDb25uZWN0aW9uVGltZW91dEVycm9yO1xuT3BlbkFJLkFQSVVzZXJBYm9ydEVycm9yID0gRXJyb3JzLkFQSVVzZXJBYm9ydEVycm9yO1xuT3BlbkFJLk5vdEZvdW5kRXJyb3IgPSBFcnJvcnMuTm90Rm91bmRFcnJvcjtcbk9wZW5BSS5Db25mbGljdEVycm9yID0gRXJyb3JzLkNvbmZsaWN0RXJyb3I7XG5PcGVuQUkuUmF0ZUxpbWl0RXJyb3IgPSBFcnJvcnMuUmF0ZUxpbWl0RXJyb3I7XG5PcGVuQUkuQmFkUmVxdWVzdEVycm9yID0gRXJyb3JzLkJhZFJlcXVlc3RFcnJvcjtcbk9wZW5BSS5BdXRoZW50aWNhdGlvbkVycm9yID0gRXJyb3JzLkF1dGhlbnRpY2F0aW9uRXJyb3I7XG5PcGVuQUkuSW50ZXJuYWxTZXJ2ZXJFcnJvciA9IEVycm9ycy5JbnRlcm5hbFNlcnZlckVycm9yO1xuT3BlbkFJLlBlcm1pc3Npb25EZW5pZWRFcnJvciA9IEVycm9ycy5QZXJtaXNzaW9uRGVuaWVkRXJyb3I7XG5PcGVuQUkuVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yID0gRXJyb3JzLlVucHJvY2Vzc2FibGVFbnRpdHlFcnJvcjtcbihleHBvcnRzLkFQSUVycm9yID0gRXJyb3JzLkFQSUVycm9yKSxcbiAgKGV4cG9ydHMuQVBJQ29ubmVjdGlvbkVycm9yID0gRXJyb3JzLkFQSUNvbm5lY3Rpb25FcnJvciksXG4gIChleHBvcnRzLkFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciksXG4gIChleHBvcnRzLkFQSVVzZXJBYm9ydEVycm9yID0gRXJyb3JzLkFQSVVzZXJBYm9ydEVycm9yKSxcbiAgKGV4cG9ydHMuTm90Rm91bmRFcnJvciA9IEVycm9ycy5Ob3RGb3VuZEVycm9yKSxcbiAgKGV4cG9ydHMuQ29uZmxpY3RFcnJvciA9IEVycm9ycy5Db25mbGljdEVycm9yKSxcbiAgKGV4cG9ydHMuUmF0ZUxpbWl0RXJyb3IgPSBFcnJvcnMuUmF0ZUxpbWl0RXJyb3IpLFxuICAoZXhwb3J0cy5CYWRSZXF1ZXN0RXJyb3IgPSBFcnJvcnMuQmFkUmVxdWVzdEVycm9yKSxcbiAgKGV4cG9ydHMuQXV0aGVudGljYXRpb25FcnJvciA9IEVycm9ycy5BdXRoZW50aWNhdGlvbkVycm9yKSxcbiAgKGV4cG9ydHMuSW50ZXJuYWxTZXJ2ZXJFcnJvciA9IEVycm9ycy5JbnRlcm5hbFNlcnZlckVycm9yKSxcbiAgKGV4cG9ydHMuUGVybWlzc2lvbkRlbmllZEVycm9yID0gRXJyb3JzLlBlcm1pc3Npb25EZW5pZWRFcnJvciksXG4gIChleHBvcnRzLlVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciA9IEVycm9ycy5VbnByb2Nlc3NhYmxlRW50aXR5RXJyb3IpO1xuZXhwb3J0cy50b0ZpbGUgPSBVcGxvYWRzLnRvRmlsZTtcbmV4cG9ydHMuZmlsZUZyb21QYXRoID0gVXBsb2Fkcy5maWxlRnJvbVBhdGg7XG4oZnVuY3Rpb24gKE9wZW5BSSkge1xuICAvLyBIZWxwZXIgZnVuY3Rpb25zXG4gIE9wZW5BSS50b0ZpbGUgPSBVcGxvYWRzLnRvRmlsZTtcbiAgT3BlbkFJLmZpbGVGcm9tUGF0aCA9IFVwbG9hZHMuZmlsZUZyb21QYXRoO1xuICBPcGVuQUkuUGFnZSA9IFBhZ2luYXRpb24uUGFnZTtcbiAgT3BlbkFJLkN1cnNvclBhZ2UgPSBQYWdpbmF0aW9uLkN1cnNvclBhZ2U7XG4gIE9wZW5BSS5Db21wbGV0aW9ucyA9IEFQSS5Db21wbGV0aW9ucztcbiAgT3BlbkFJLkNoYXQgPSBBUEkuQ2hhdDtcbiAgT3BlbkFJLkVkaXRzID0gQVBJLkVkaXRzO1xuICBPcGVuQUkuRW1iZWRkaW5ncyA9IEFQSS5FbWJlZGRpbmdzO1xuICBPcGVuQUkuRmlsZXMgPSBBUEkuRmlsZXM7XG4gIE9wZW5BSS5GaWxlT2JqZWN0c1BhZ2UgPSBBUEkuRmlsZU9iamVjdHNQYWdlO1xuICBPcGVuQUkuSW1hZ2VzID0gQVBJLkltYWdlcztcbiAgT3BlbkFJLkF1ZGlvID0gQVBJLkF1ZGlvO1xuICBPcGVuQUkuTW9kZXJhdGlvbnMgPSBBUEkuTW9kZXJhdGlvbnM7XG4gIE9wZW5BSS5Nb2RlbHMgPSBBUEkuTW9kZWxzO1xuICBPcGVuQUkuTW9kZWxzUGFnZSA9IEFQSS5Nb2RlbHNQYWdlO1xuICBPcGVuQUkuRmluZVR1bmluZyA9IEFQSS5GaW5lVHVuaW5nO1xuICBPcGVuQUkuRmluZVR1bmVzID0gQVBJLkZpbmVUdW5lcztcbiAgT3BlbkFJLkZpbmVUdW5lc1BhZ2UgPSBBUEkuRmluZVR1bmVzUGFnZTtcbn0pKChPcGVuQUkgPSBleHBvcnRzLk9wZW5BSSB8fCAoZXhwb3J0cy5PcGVuQUkgPSB7fSkpKTtcbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IE9wZW5BSTtcbmV4cG9ydHMuZGVmYXVsdCA9IE9wZW5BSTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuL2NvcmUnO1xuaW1wb3J0ICogYXMgUGFnaW5hdGlvbiBmcm9tICcuL3BhZ2luYXRpb24nO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vcmVzb3VyY2VzL2luZGV4JztcbmltcG9ydCAqIGFzIEVycm9ycyBmcm9tICcuL2Vycm9yJztcbmltcG9ydCB0eXBlIHsgQWdlbnQgfSBmcm9tICcuL19zaGltcy9hZ2VudCc7XG5pbXBvcnQgKiBhcyBVcGxvYWRzIGZyb20gJy4vdXBsb2Fkcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpZW50T3B0aW9ucyB7XG4gIC8qKlxuICAgKiBEZWZhdWx0cyB0byBwcm9jZXNzLmVudltcIk9QRU5BSV9BUElfS0VZXCJdLlxuICAgKi9cbiAgYXBpS2V5Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSSwgZS5nLiwgXCJodHRwczovL2FwaS5leGFtcGxlLmNvbS92Mi9cIlxuICAgKi9cbiAgYmFzZVVSTD86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gYW1vdW50IG9mIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgdGhhdCB0aGUgY2xpZW50IHNob3VsZCB3YWl0IGZvciBhIHJlc3BvbnNlXG4gICAqIGZyb20gdGhlIHNlcnZlciBiZWZvcmUgdGltaW5nIG91dCBhIHNpbmdsZSByZXF1ZXN0LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgcmVxdWVzdCB0aW1lb3V0cyBhcmUgcmV0cmllZCBieSBkZWZhdWx0LCBzbyBpbiBhIHdvcnN0LWNhc2Ugc2NlbmFyaW8geW91IG1heSB3YWl0XG4gICAqIG11Y2ggbG9uZ2VyIHRoYW4gdGhpcyB0aW1lb3V0IGJlZm9yZSB0aGUgcHJvbWlzZSBzdWNjZWVkcyBvciBmYWlscy5cbiAgICovXG4gIHRpbWVvdXQ/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEFuIEhUVFAgYWdlbnQgdXNlZCB0byBtYW5hZ2UgSFRUUChTKSBjb25uZWN0aW9ucy5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCBhbiBhZ2VudCB3aWxsIGJlIGNvbnN0cnVjdGVkIGJ5IGRlZmF1bHQgaW4gdGhlIE5vZGUuanMgZW52aXJvbm1lbnQsXG4gICAqIG90aGVyd2lzZSBubyBhZ2VudCBpcyB1c2VkLlxuICAgKi9cbiAgaHR0cEFnZW50PzogQWdlbnQ7XG5cbiAgLyoqXG4gICAqIFNwZWNpZnkgYSBjdXN0b20gYGZldGNoYCBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCB3ZSB1c2UgYG5vZGUtZmV0Y2hgIG9uIE5vZGUuanMgYW5kIG90aGVyd2lzZSBleHBlY3QgdGhhdCBgZmV0Y2hgIGlzXG4gICAqIGRlZmluZWQgZ2xvYmFsbHkuXG4gICAqL1xuICBmZXRjaD86IENvcmUuRmV0Y2ggfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGF0IHRoZSBjbGllbnQgd2lsbCByZXRyeSBhIHJlcXVlc3QgaW4gY2FzZSBvZiBhXG4gICAqIHRlbXBvcmFyeSBmYWlsdXJlLCBsaWtlIGEgbmV0d29yayBlcnJvciBvciBhIDVYWCBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEBkZWZhdWx0IDJcbiAgICovXG4gIG1heFJldHJpZXM/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKlxuICAgKiBUaGVzZSBjYW4gYmUgcmVtb3ZlZCBpbiBpbmRpdmlkdWFsIHJlcXVlc3RzIGJ5IGV4cGxpY2l0bHkgc2V0dGluZyB0aGVcbiAgICogaGVhZGVyIHRvIGB1bmRlZmluZWRgIG9yIGBudWxsYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0SGVhZGVycz86IENvcmUuSGVhZGVycztcblxuICAvKipcbiAgICogRGVmYXVsdCBxdWVyeSBwYXJhbWV0ZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSByZW1vdmVkIGluIGluZGl2aWR1YWwgcmVxdWVzdHMgYnkgZXhwbGljaXRseSBzZXR0aW5nIHRoZVxuICAgKiBwYXJhbSB0byBgdW5kZWZpbmVkYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0UXVlcnk/OiBDb3JlLkRlZmF1bHRRdWVyeTtcblxuICAvKipcbiAgICogQnkgZGVmYXVsdCwgY2xpZW50LXNpZGUgdXNlIG9mIHRoaXMgbGlicmFyeSBpcyBub3QgYWxsb3dlZCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cbiAgICogT25seSBzZXQgdGhpcyBvcHRpb24gdG8gYHRydWVgIGlmIHlvdSB1bmRlcnN0YW5kIHRoZSByaXNrcyBhbmQgaGF2ZSBhcHByb3ByaWF0ZSBtaXRpZ2F0aW9ucyBpbiBwbGFjZS5cbiAgICovXG4gIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyPzogYm9vbGVhbjtcblxuICBvcmdhbml6YXRpb24/OiBzdHJpbmcgfCBudWxsO1xufVxuXG4vKiogQVBJIENsaWVudCBmb3IgaW50ZXJmYWNpbmcgd2l0aCB0aGUgT3BlbkFJIEFQSS4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUkgZXh0ZW5kcyBDb3JlLkFQSUNsaWVudCB7XG4gIGFwaUtleTogc3RyaW5nO1xuICBvcmdhbml6YXRpb24/OiBzdHJpbmcgfCBudWxsO1xuXG4gIHByaXZhdGUgX29wdGlvbnM6IENsaWVudE9wdGlvbnM7XG5cbiAgLyoqXG4gICAqIEFQSSBDbGllbnQgZm9yIGludGVyZmFjaW5nIHdpdGggdGhlIE9wZW5BSSBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5hcGlLZXk9cHJvY2Vzcy5lbnZbJ09QRU5BSV9BUElfS0VZJ11dIC0gVGhlIEFQSSBLZXkgdG8gc2VuZCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmFzZVVSTF0gLSBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXQ9MTAgbWludXRlc10gLSBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0aGUgY2xpZW50IHdpbGwgd2FpdCBmb3IgYSByZXNwb25zZSBiZWZvcmUgdGltaW5nIG91dC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmh0dHBBZ2VudF0gLSBBbiBIVFRQIGFnZW50IHVzZWQgdG8gbWFuYWdlIEhUVFAocykgY29ubmVjdGlvbnMuXG4gICAqIEBwYXJhbSB7Q29yZS5GZXRjaH0gW29wdHMuZmV0Y2hdIC0gU3BlY2lmeSBhIGN1c3RvbSBgZmV0Y2hgIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMubWF4UmV0cmllcz0yXSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGUgY2xpZW50IHdpbGwgcmV0cnkgYSByZXF1ZXN0LlxuICAgKiBAcGFyYW0ge0NvcmUuSGVhZGVyc30gb3B0cy5kZWZhdWx0SGVhZGVycyAtIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge0NvcmUuRGVmYXVsdFF1ZXJ5fSBvcHRzLmRlZmF1bHRRdWVyeSAtIERlZmF1bHQgcXVlcnkgcGFyYW1ldGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmRhbmdlcm91c2x5QWxsb3dCcm93c2VyPWZhbHNlXSAtIEJ5IGRlZmF1bHQsIGNsaWVudC1zaWRlIHVzZSBvZiB0aGlzIGxpYnJhcnkgaXMgbm90IGFsbG93ZWQsIGFzIGl0IHJpc2tzIGV4cG9zaW5nIHlvdXIgc2VjcmV0IEFQSSBjcmVkZW50aWFscyB0byBhdHRhY2tlcnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbH0gW29wdHMub3JnYW5pemF0aW9uXVxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIGFwaUtleSA9IENvcmUucmVhZEVudignT1BFTkFJX0FQSV9LRVknKSxcbiAgICBvcmdhbml6YXRpb24gPSBDb3JlLnJlYWRFbnYoJ09QRU5BSV9PUkdfSUQnKSA/PyBudWxsLFxuICAgIC4uLm9wdHNcbiAgfTogQ2xpZW50T3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKGFwaUtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiVGhlIE9QRU5BSV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG1pc3Npbmcgb3IgZW1wdHk7IGVpdGhlciBwcm92aWRlIGl0LCBvciBpbnN0YW50aWF0ZSB0aGUgT3BlbkFJIGNsaWVudCB3aXRoIGFuIGFwaUtleSBvcHRpb24sIGxpa2UgbmV3IE9wZW5BSSh7IGFwaUtleTogJ215IGFwaUtleScgfSkuXCIsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdGlvbnM6IENsaWVudE9wdGlvbnMgPSB7XG4gICAgICBhcGlLZXksXG4gICAgICBvcmdhbml6YXRpb24sXG4gICAgICBiYXNlVVJMOiBgaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MWAsXG4gICAgICAuLi5vcHRzLFxuICAgIH07XG5cbiAgICBpZiAoIW9wdGlvbnMuZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXIgJiYgQ29yZS5pc1J1bm5pbmdJbkJyb3dzZXIoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkl0IGxvb2tzIGxpa2UgeW91J3JlIHJ1bm5pbmcgaW4gYSBicm93c2VyLWxpa2UgZW52aXJvbm1lbnQuXFxuXFxuVGhpcyBpcyBkaXNhYmxlZCBieSBkZWZhdWx0LCBhcyBpdCByaXNrcyBleHBvc2luZyB5b3VyIHNlY3JldCBBUEkgY3JlZGVudGlhbHMgdG8gYXR0YWNrZXJzLlxcbklmIHlvdSB1bmRlcnN0YW5kIHRoZSByaXNrcyBhbmQgaGF2ZSBhcHByb3ByaWF0ZSBtaXRpZ2F0aW9ucyBpbiBwbGFjZSxcXG55b3UgY2FuIHNldCB0aGUgYGRhbmdlcm91c2x5QWxsb3dCcm93c2VyYCBvcHRpb24gdG8gYHRydWVgLCBlLmcuLFxcblxcbm5ldyBPcGVuQUkoeyBhcGlLZXksIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlIH0pO1xcblxcbmh0dHBzOi8vaGVscC5vcGVuYWkuY29tL2VuL2FydGljbGVzLzUxMTI1OTUtYmVzdC1wcmFjdGljZXMtZm9yLWFwaS1rZXktc2FmZXR5XFxuXCIsXG4gICAgICApO1xuICAgIH1cblxuICAgIHN1cGVyKHtcbiAgICAgIGJhc2VVUkw6IG9wdGlvbnMuYmFzZVVSTCEsXG4gICAgICB0aW1lb3V0OiBvcHRpb25zLnRpbWVvdXQgPz8gNjAwMDAwIC8qIDEwIG1pbnV0ZXMgKi8sXG4gICAgICBodHRwQWdlbnQ6IG9wdGlvbnMuaHR0cEFnZW50LFxuICAgICAgbWF4UmV0cmllczogb3B0aW9ucy5tYXhSZXRyaWVzLFxuICAgICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2gsXG4gICAgfSk7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICB0aGlzLm9yZ2FuaXphdGlvbiA9IG9yZ2FuaXphdGlvbjtcbiAgfVxuXG4gIGNvbXBsZXRpb25zOiBBUEkuQ29tcGxldGlvbnMgPSBuZXcgQVBJLkNvbXBsZXRpb25zKHRoaXMpO1xuICBjaGF0OiBBUEkuQ2hhdCA9IG5ldyBBUEkuQ2hhdCh0aGlzKTtcbiAgZWRpdHM6IEFQSS5FZGl0cyA9IG5ldyBBUEkuRWRpdHModGhpcyk7XG4gIGVtYmVkZGluZ3M6IEFQSS5FbWJlZGRpbmdzID0gbmV3IEFQSS5FbWJlZGRpbmdzKHRoaXMpO1xuICBmaWxlczogQVBJLkZpbGVzID0gbmV3IEFQSS5GaWxlcyh0aGlzKTtcbiAgaW1hZ2VzOiBBUEkuSW1hZ2VzID0gbmV3IEFQSS5JbWFnZXModGhpcyk7XG4gIGF1ZGlvOiBBUEkuQXVkaW8gPSBuZXcgQVBJLkF1ZGlvKHRoaXMpO1xuICBtb2RlcmF0aW9uczogQVBJLk1vZGVyYXRpb25zID0gbmV3IEFQSS5Nb2RlcmF0aW9ucyh0aGlzKTtcbiAgbW9kZWxzOiBBUEkuTW9kZWxzID0gbmV3IEFQSS5Nb2RlbHModGhpcyk7XG4gIGZpbmVUdW5pbmc6IEFQSS5GaW5lVHVuaW5nID0gbmV3IEFQSS5GaW5lVHVuaW5nKHRoaXMpO1xuICBmaW5lVHVuZXM6IEFQSS5GaW5lVHVuZXMgPSBuZXcgQVBJLkZpbmVUdW5lcyh0aGlzKTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdFF1ZXJ5KCk6IENvcmUuRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5kZWZhdWx0UXVlcnk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdEhlYWRlcnMob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMob3B0cyksXG4gICAgICAnT3BlbkFJLU9yZ2FuaXphdGlvbic6IHRoaXMub3JnYW5pemF0aW9uLFxuICAgICAgLi4udGhpcy5fb3B0aW9ucy5kZWZhdWx0SGVhZGVycyxcbiAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGF1dGhIZWFkZXJzKG9wdHM6IENvcmUuRmluYWxSZXF1ZXN0T3B0aW9ucyk6IENvcmUuSGVhZGVycyB7XG4gICAgcmV0dXJuIHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAgfTtcbiAgfVxuXG4gIHN0YXRpYyBPcGVuQUkgPSB0aGlzO1xuXG4gIHN0YXRpYyBBUElFcnJvciA9IEVycm9ycy5BUElFcnJvcjtcbiAgc3RhdGljIEFQSUNvbm5lY3Rpb25FcnJvciA9IEVycm9ycy5BUElDb25uZWN0aW9uRXJyb3I7XG4gIHN0YXRpYyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yID0gRXJyb3JzLkFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3I7XG4gIHN0YXRpYyBBUElVc2VyQWJvcnRFcnJvciA9IEVycm9ycy5BUElVc2VyQWJvcnRFcnJvcjtcbiAgc3RhdGljIE5vdEZvdW5kRXJyb3IgPSBFcnJvcnMuTm90Rm91bmRFcnJvcjtcbiAgc3RhdGljIENvbmZsaWN0RXJyb3IgPSBFcnJvcnMuQ29uZmxpY3RFcnJvcjtcbiAgc3RhdGljIFJhdGVMaW1pdEVycm9yID0gRXJyb3JzLlJhdGVMaW1pdEVycm9yO1xuICBzdGF0aWMgQmFkUmVxdWVzdEVycm9yID0gRXJyb3JzLkJhZFJlcXVlc3RFcnJvcjtcbiAgc3RhdGljIEF1dGhlbnRpY2F0aW9uRXJyb3IgPSBFcnJvcnMuQXV0aGVudGljYXRpb25FcnJvcjtcbiAgc3RhdGljIEludGVybmFsU2VydmVyRXJyb3IgPSBFcnJvcnMuSW50ZXJuYWxTZXJ2ZXJFcnJvcjtcbiAgc3RhdGljIFBlcm1pc3Npb25EZW5pZWRFcnJvciA9IEVycm9ycy5QZXJtaXNzaW9uRGVuaWVkRXJyb3I7XG4gIHN0YXRpYyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3IgPSBFcnJvcnMuVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yO1xufVxuXG5leHBvcnQgY29uc3Qge1xuICBBUElFcnJvcixcbiAgQVBJQ29ubmVjdGlvbkVycm9yLFxuICBBUElDb25uZWN0aW9uVGltZW91dEVycm9yLFxuICBBUElVc2VyQWJvcnRFcnJvcixcbiAgTm90Rm91bmRFcnJvcixcbiAgQ29uZmxpY3RFcnJvcixcbiAgUmF0ZUxpbWl0RXJyb3IsXG4gIEJhZFJlcXVlc3RFcnJvcixcbiAgQXV0aGVudGljYXRpb25FcnJvcixcbiAgSW50ZXJuYWxTZXJ2ZXJFcnJvcixcbiAgUGVybWlzc2lvbkRlbmllZEVycm9yLFxuICBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3IsXG59ID0gRXJyb3JzO1xuXG5leHBvcnQgaW1wb3J0IHRvRmlsZSA9IFVwbG9hZHMudG9GaWxlO1xuZXhwb3J0IGltcG9ydCBmaWxlRnJvbVBhdGggPSBVcGxvYWRzLmZpbGVGcm9tUGF0aDtcblxuZXhwb3J0IG5hbWVzcGFjZSBPcGVuQUkge1xuICAvLyBIZWxwZXIgZnVuY3Rpb25zXG4gIGV4cG9ydCBpbXBvcnQgdG9GaWxlID0gVXBsb2Fkcy50b0ZpbGU7XG4gIGV4cG9ydCBpbXBvcnQgZmlsZUZyb21QYXRoID0gVXBsb2Fkcy5maWxlRnJvbVBhdGg7XG5cbiAgZXhwb3J0IGltcG9ydCBSZXF1ZXN0T3B0aW9ucyA9IENvcmUuUmVxdWVzdE9wdGlvbnM7XG5cbiAgZXhwb3J0IGltcG9ydCBQYWdlID0gUGFnaW5hdGlvbi5QYWdlO1xuICBleHBvcnQgaW1wb3J0IFBhZ2VSZXNwb25zZSA9IFBhZ2luYXRpb24uUGFnZVJlc3BvbnNlO1xuXG4gIGV4cG9ydCBpbXBvcnQgQ3Vyc29yUGFnZSA9IFBhZ2luYXRpb24uQ3Vyc29yUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBDdXJzb3JQYWdlUGFyYW1zID0gUGFnaW5hdGlvbi5DdXJzb3JQYWdlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEN1cnNvclBhZ2VSZXNwb25zZSA9IFBhZ2luYXRpb24uQ3Vyc29yUGFnZVJlc3BvbnNlO1xuXG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbnMgPSBBUEkuQ29tcGxldGlvbnM7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbiA9IEFQSS5Db21wbGV0aW9uO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DaG9pY2UgPSBBUEkuQ29tcGxldGlvbkNob2ljZTtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uVXNhZ2UgPSBBUEkuQ29tcGxldGlvblVzYWdlO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG4gIGV4cG9ydCBpbXBvcnQgQ2hhdCA9IEFQSS5DaGF0O1xuXG4gIGV4cG9ydCBpbXBvcnQgRWRpdHMgPSBBUEkuRWRpdHM7XG4gIGV4cG9ydCBpbXBvcnQgRWRpdCA9IEFQSS5FZGl0O1xuICBleHBvcnQgaW1wb3J0IEVkaXRDcmVhdGVQYXJhbXMgPSBBUEkuRWRpdENyZWF0ZVBhcmFtcztcblxuICBleHBvcnQgaW1wb3J0IEVtYmVkZGluZ3MgPSBBUEkuRW1iZWRkaW5ncztcbiAgZXhwb3J0IGltcG9ydCBDcmVhdGVFbWJlZGRpbmdSZXNwb25zZSA9IEFQSS5DcmVhdGVFbWJlZGRpbmdSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBFbWJlZGRpbmcgPSBBUEkuRW1iZWRkaW5nO1xuICBleHBvcnQgaW1wb3J0IEVtYmVkZGluZ0NyZWF0ZVBhcmFtcyA9IEFQSS5FbWJlZGRpbmdDcmVhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBGaWxlcyA9IEFQSS5GaWxlcztcbiAgZXhwb3J0IGltcG9ydCBGaWxlQ29udGVudCA9IEFQSS5GaWxlQ29udGVudDtcbiAgZXhwb3J0IGltcG9ydCBGaWxlRGVsZXRlZCA9IEFQSS5GaWxlRGVsZXRlZDtcbiAgZXhwb3J0IGltcG9ydCBGaWxlT2JqZWN0ID0gQVBJLkZpbGVPYmplY3Q7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZU9iamVjdHNQYWdlID0gQVBJLkZpbGVPYmplY3RzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBGaWxlQ3JlYXRlUGFyYW1zID0gQVBJLkZpbGVDcmVhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBJbWFnZXMgPSBBUEkuSW1hZ2VzO1xuICBleHBvcnQgaW1wb3J0IEltYWdlID0gQVBJLkltYWdlO1xuICBleHBvcnQgaW1wb3J0IEltYWdlc1Jlc3BvbnNlID0gQVBJLkltYWdlc1Jlc3BvbnNlO1xuICBleHBvcnQgaW1wb3J0IEltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zID0gQVBJLkltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEltYWdlRWRpdFBhcmFtcyA9IEFQSS5JbWFnZUVkaXRQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VHZW5lcmF0ZVBhcmFtcyA9IEFQSS5JbWFnZUdlbmVyYXRlUGFyYW1zO1xuXG4gIGV4cG9ydCBpbXBvcnQgQXVkaW8gPSBBUEkuQXVkaW87XG5cbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9ucyA9IEFQSS5Nb2RlcmF0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uID0gQVBJLk1vZGVyYXRpb247XG4gIGV4cG9ydCBpbXBvcnQgTW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlID0gQVBJLk1vZGVyYXRpb25DcmVhdGVSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLk1vZGVyYXRpb25DcmVhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBNb2RlbHMgPSBBUEkuTW9kZWxzO1xuICBleHBvcnQgaW1wb3J0IE1vZGVsID0gQVBJLk1vZGVsO1xuICBleHBvcnQgaW1wb3J0IE1vZGVsRGVsZXRlZCA9IEFQSS5Nb2RlbERlbGV0ZWQ7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZWxzUGFnZSA9IEFQSS5Nb2RlbHNQYWdlO1xuXG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmluZyA9IEFQSS5GaW5lVHVuaW5nO1xuXG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVzID0gQVBJLkZpbmVUdW5lcztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZSA9IEFQSS5GaW5lVHVuZTtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUV2ZW50ID0gQVBJLkZpbmVUdW5lRXZlbnQ7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2UgPSBBUEkuRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2U7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVzUGFnZSA9IEFQSS5GaW5lVHVuZXNQYWdlO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lQ3JlYXRlUGFyYW1zID0gQVBJLkZpbmVUdW5lQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmcgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBPcGVuQUk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgX19jbGFzc1ByaXZhdGVGaWVsZFNldCA9XG4gICh0aGlzICYmIHRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldCkgfHxcbiAgZnVuY3Rpb24gKHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcbiAgICBpZiAoa2luZCA9PT0gJ20nKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGUnKTtcbiAgICBpZiAoa2luZCA9PT0gJ2EnICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXInKTtcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSAnZnVuY3Rpb24nID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdCcpO1xuICAgIHJldHVybiAoXG4gICAgICBraW5kID09PSAnYScgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKVxuICAgICAgOiBmID8gKGYudmFsdWUgPSB2YWx1ZSlcbiAgICAgIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSksXG4gICAgICB2YWx1ZVxuICAgICk7XG4gIH07XG52YXIgX19jbGFzc1ByaXZhdGVGaWVsZEdldCA9XG4gICh0aGlzICYmIHRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldCkgfHxcbiAgZnVuY3Rpb24gKHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xuICAgIGlmIChraW5kID09PSAnYScgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlcicpO1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09ICdmdW5jdGlvbicgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSlcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdCcpO1xuICAgIHJldHVybiAoXG4gICAgICBraW5kID09PSAnbScgPyBmXG4gICAgICA6IGtpbmQgPT09ICdhJyA/IGYuY2FsbChyZWNlaXZlcilcbiAgICAgIDogZiA/IGYudmFsdWVcbiAgICAgIDogc3RhdGUuZ2V0KHJlY2VpdmVyKVxuICAgICk7XG4gIH07XG52YXIgX0Fic3RyYWN0UGFnZV9jbGllbnQ7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy50b0Jhc2U2NCA9XG4gIGV4cG9ydHMuZ2V0SGVhZGVyID1cbiAgZXhwb3J0cy5pc0hlYWRlcnNQcm90b2NvbCA9XG4gIGV4cG9ydHMuaXNSdW5uaW5nSW5Ccm93c2VyID1cbiAgZXhwb3J0cy5kZWJ1ZyA9XG4gIGV4cG9ydHMuaGFzT3duID1cbiAgZXhwb3J0cy5pc0VtcHR5T2JqID1cbiAgZXhwb3J0cy5tYXliZUNvZXJjZUJvb2xlYW4gPVxuICBleHBvcnRzLm1heWJlQ29lcmNlRmxvYXQgPVxuICBleHBvcnRzLm1heWJlQ29lcmNlSW50ZWdlciA9XG4gIGV4cG9ydHMuY29lcmNlQm9vbGVhbiA9XG4gIGV4cG9ydHMuY29lcmNlRmxvYXQgPVxuICBleHBvcnRzLmNvZXJjZUludGVnZXIgPVxuICBleHBvcnRzLnJlYWRFbnYgPVxuICBleHBvcnRzLmVuc3VyZVByZXNlbnQgPVxuICBleHBvcnRzLmNhc3RUb0Vycm9yID1cbiAgZXhwb3J0cy5zYWZlSlNPTiA9XG4gIGV4cG9ydHMuaXNSZXF1ZXN0T3B0aW9ucyA9XG4gIGV4cG9ydHMuY3JlYXRlUmVzcG9uc2VIZWFkZXJzID1cbiAgZXhwb3J0cy5QYWdlUHJvbWlzZSA9XG4gIGV4cG9ydHMuQWJzdHJhY3RQYWdlID1cbiAgZXhwb3J0cy5BUElSZXNvdXJjZSA9XG4gIGV4cG9ydHMuQVBJQ2xpZW50ID1cbiAgZXhwb3J0cy5BUElQcm9taXNlID1cbiAgZXhwb3J0cy5jcmVhdGVGb3JtID1cbiAgZXhwb3J0cy5tdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPVxuICBleHBvcnRzLm1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zID1cbiAgICB2b2lkIDA7XG5jb25zdCB2ZXJzaW9uXzEgPSByZXF1aXJlKCcuL3ZlcnNpb24uanMnKTtcbmNvbnN0IHN0cmVhbWluZ18xID0gcmVxdWlyZSgnLi9zdHJlYW1pbmcuanMnKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKCcuL2Vycm9yLmpzJyk7XG5jb25zdCBhZ2VudF8xID0gcmVxdWlyZSgnb3BlbmFpL19zaGltcy9hZ2VudCcpO1xuY29uc3QgZmV0Y2hfMSA9IHJlcXVpcmUoJ29wZW5haS9fc2hpbXMvZmV0Y2gnKTtcbmNvbnN0IHVwbG9hZHNfMSA9IHJlcXVpcmUoJy4vdXBsb2Fkcy5qcycpO1xudmFyIHVwbG9hZHNfMiA9IHJlcXVpcmUoJy4vdXBsb2Fkcy5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdtYXliZU11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHVwbG9hZHNfMi5tYXliZU11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucztcbiAgfSxcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB1cGxvYWRzXzIubXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zO1xuICB9LFxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ2NyZWF0ZUZvcm0nLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB1cGxvYWRzXzIuY3JlYXRlRm9ybTtcbiAgfSxcbn0pO1xuY29uc3QgTUFYX1JFVFJJRVMgPSAyO1xuYXN5bmMgZnVuY3Rpb24gZGVmYXVsdFBhcnNlUmVzcG9uc2UocHJvcHMpIHtcbiAgY29uc3QgeyByZXNwb25zZSB9ID0gcHJvcHM7XG4gIGlmIChwcm9wcy5vcHRpb25zLnN0cmVhbSkge1xuICAgIC8vIE5vdGU6IHRoZXJlIGlzIGFuIGludmFyaWFudCBoZXJlIHRoYXQgaXNuJ3QgcmVwcmVzZW50ZWQgaW4gdGhlIHR5cGUgc3lzdGVtXG4gICAgLy8gdGhhdCBpZiB5b3Ugc2V0IGBzdHJlYW06IHRydWVgIHRoZSByZXNwb25zZSB0eXBlIG11c3QgYWxzbyBiZSBgU3RyZWFtPFQ+YFxuICAgIHJldHVybiBuZXcgc3RyZWFtaW5nXzEuU3RyZWFtKHJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKTtcbiAgfVxuICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgaWYgKGNvbnRlbnRUeXBlID09PSBudWxsIHx8IGNvbnRlbnRUeXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBkZWJ1ZygncmVzcG9uc2UnLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnVybCwgcmVzcG9uc2UuaGVhZGVycywganNvbik7XG4gICAgcmV0dXJuIGpzb247XG4gIH1cbiAgLy8gVE9ETyBoYW5kbGUgYmxvYiwgYXJyYXlidWZmZXIsIG90aGVyIGNvbnRlbnQgdHlwZXMsIGV0Yy5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIHRleHQpO1xuICByZXR1cm4gdGV4dDtcbn1cbi8qKlxuICogQSBzdWJjbGFzcyBvZiBgUHJvbWlzZWAgcHJvdmlkaW5nIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHNcbiAqIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBTREsuXG4gKi9cbmNsYXNzIEFQSVByb21pc2UgZXh0ZW5kcyBQcm9taXNlIHtcbiAgY29uc3RydWN0b3IocmVzcG9uc2VQcm9taXNlLCBwYXJzZVJlc3BvbnNlID0gZGVmYXVsdFBhcnNlUmVzcG9uc2UpIHtcbiAgICBzdXBlcigocmVzb2x2ZSkgPT4ge1xuICAgICAgLy8gdGhpcyBpcyBtYXliZSBhIGJpdCB3ZWlyZCBidXQgdGhpcyBoYXMgdG8gYmUgYSBuby1vcCB0byBub3QgaW1wbGljaXRseVxuICAgICAgLy8gcGFyc2UgdGhlIHJlc3BvbnNlIGJvZHk7IGluc3RlYWQgLnRoZW4sIC5jYXRjaCwgLmZpbmFsbHkgYXJlIG92ZXJyaWRkZW5cbiAgICAgIC8vIHRvIHBhcnNlIHRoZSByZXNwb25zZVxuICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICB9KTtcbiAgICB0aGlzLnJlc3BvbnNlUHJvbWlzZSA9IHJlc3BvbnNlUHJvbWlzZTtcbiAgICB0aGlzLnBhcnNlUmVzcG9uc2UgPSBwYXJzZVJlc3BvbnNlO1xuICB9XG4gIF90aGVuVW53cmFwKHRyYW5zZm9ybSkge1xuICAgIHJldHVybiBuZXcgQVBJUHJvbWlzZSh0aGlzLnJlc3BvbnNlUHJvbWlzZSwgYXN5bmMgKHByb3BzKSA9PiB0cmFuc2Zvcm0oYXdhaXQgdGhpcy5wYXJzZVJlc3BvbnNlKHByb3BzKSkpO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBpbnN0ZWFkIG9mIHBhcnNpbmcgdGhlIHJlc3BvbnNlXG4gICAqIGRhdGEuXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRvIHBhcnNlIHRoZSByZXNwb25zZSBib2R5IGJ1dCBzdGlsbCBnZXQgdGhlIGBSZXNwb25zZWBcbiAgICogaW5zdGFuY2UsIHlvdSBjYW4gdXNlIHtAbGluayB3aXRoUmVzcG9uc2UoKX0uXG4gICAqL1xuICBhc1Jlc3BvbnNlKCkge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlUHJvbWlzZS50aGVuKChwKSA9PiBwLnJlc3BvbnNlKTtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgcGFyc2VkIHJlc3BvbnNlIGRhdGEgYW5kIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZS5cbiAgICpcbiAgICogSWYgeW91IGp1c3Qgd2FudCB0byBnZXQgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlIHdpdGhvdXQgcGFyc2luZyBpdCxcbiAgICogeW91IGNhbiB1c2Uge0BsaW5rIGFzUmVzcG9uc2UoKX0uXG4gICAqL1xuICBhc3luYyB3aXRoUmVzcG9uc2UoKSB7XG4gICAgY29uc3QgW2RhdGEsIHJlc3BvbnNlXSA9IGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnBhcnNlKCksIHRoaXMuYXNSZXNwb25zZSgpXSk7XG4gICAgcmV0dXJuIHsgZGF0YSwgcmVzcG9uc2UgfTtcbiAgfVxuICBwYXJzZSgpIHtcbiAgICBpZiAoIXRoaXMucGFyc2VkUHJvbWlzZSkge1xuICAgICAgdGhpcy5wYXJzZWRQcm9taXNlID0gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbih0aGlzLnBhcnNlUmVzcG9uc2UpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wYXJzZWRQcm9taXNlO1xuICB9XG4gIHRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZSgpLnRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpO1xuICB9XG4gIGNhdGNoKG9ucmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZSgpLmNhdGNoKG9ucmVqZWN0ZWQpO1xuICB9XG4gIGZpbmFsbHkob25maW5hbGx5KSB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS5maW5hbGx5KG9uZmluYWxseSk7XG4gIH1cbn1cbmV4cG9ydHMuQVBJUHJvbWlzZSA9IEFQSVByb21pc2U7XG5jbGFzcyBBUElDbGllbnQge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgYmFzZVVSTCxcbiAgICBtYXhSZXRyaWVzLFxuICAgIHRpbWVvdXQgPSA2MDAwMDAsIC8vIDEwIG1pbnV0ZXNcbiAgICBodHRwQWdlbnQsXG4gICAgZmV0Y2g6IG92ZXJyaWRlbkZldGNoLFxuICB9KSB7XG4gICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICB0aGlzLm1heFJldHJpZXMgPSB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlcihcbiAgICAgICdtYXhSZXRyaWVzJyxcbiAgICAgIG1heFJldHJpZXMgIT09IG51bGwgJiYgbWF4UmV0cmllcyAhPT0gdm9pZCAwID8gbWF4UmV0cmllcyA6IE1BWF9SRVRSSUVTLFxuICAgICk7XG4gICAgdGhpcy50aW1lb3V0ID0gdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIoJ3RpbWVvdXQnLCB0aW1lb3V0KTtcbiAgICB0aGlzLmh0dHBBZ2VudCA9IGh0dHBBZ2VudDtcbiAgICB0aGlzLmZldGNoID0gb3ZlcnJpZGVuRmV0Y2ggIT09IG51bGwgJiYgb3ZlcnJpZGVuRmV0Y2ggIT09IHZvaWQgMCA/IG92ZXJyaWRlbkZldGNoIDogZmV0Y2hfMS5mZXRjaDtcbiAgfVxuICBhdXRoSGVhZGVycyhvcHRzKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGlzIHRvIGFkZCB5b3VyIG93biBkZWZhdWx0IGhlYWRlcnMsIGZvciBleGFtcGxlOlxuICAgKlxuICAgKiAge1xuICAgKiAgICAuLi5zdXBlci5kZWZhdWx0SGVhZGVycygpLFxuICAgKiAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyIDEyMycsXG4gICAqICB9XG4gICAqL1xuICBkZWZhdWx0SGVhZGVycyhvcHRzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdVc2VyLUFnZW50JzogdGhpcy5nZXRVc2VyQWdlbnQoKSxcbiAgICAgIC4uLmdldFBsYXRmb3JtSGVhZGVycygpLFxuICAgICAgLi4udGhpcy5hdXRoSGVhZGVycyhvcHRzKSxcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGlzIHRvIGFkZCB5b3VyIG93biBoZWFkZXJzIHZhbGlkYXRpb246XG4gICAqL1xuICB2YWxpZGF0ZUhlYWRlcnMoaGVhZGVycywgY3VzdG9tSGVhZGVycykge31cbiAgZGVmYXVsdElkZW1wb3RlbmN5S2V5KCkge1xuICAgIHJldHVybiBgc3RhaW5sZXNzLW5vZGUtcmV0cnktJHt1dWlkNCgpfWA7XG4gIH1cbiAgZ2V0KHBhdGgsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdnZXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuICBwb3N0KHBhdGgsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwb3N0JywgcGF0aCwgb3B0cyk7XG4gIH1cbiAgcGF0Y2gocGF0aCwgb3B0cykge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ3BhdGNoJywgcGF0aCwgb3B0cyk7XG4gIH1cbiAgcHV0KHBhdGgsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwdXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuICBkZWxldGUocGF0aCwgb3B0cykge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ2RlbGV0ZScsIHBhdGgsIG9wdHMpO1xuICB9XG4gIG1ldGhvZFJlcXVlc3QobWV0aG9kLCBwYXRoLCBvcHRzKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChQcm9taXNlLnJlc29sdmUob3B0cykudGhlbigob3B0cykgPT4gKHsgbWV0aG9kLCBwYXRoLCAuLi5vcHRzIH0pKSk7XG4gIH1cbiAgZ2V0QVBJTGlzdChwYXRoLCBQYWdlLCBvcHRzKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdEFQSUxpc3QoUGFnZSwgeyBtZXRob2Q6ICdnZXQnLCBwYXRoLCAuLi5vcHRzIH0pO1xuICB9XG4gIGNhbGN1bGF0ZUNvbnRlbnRMZW5ndGgoYm9keSkge1xuICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmJ5dGVMZW5ndGgoYm9keSwgJ3V0ZjgnKS50b1N0cmluZygpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBlbmNvZGVkID0gZW5jb2Rlci5lbmNvZGUoYm9keSk7XG4gICAgICAgIHJldHVybiBlbmNvZGVkLmxlbmd0aC50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBidWlsZFJlcXVlc3Qob3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgIGNvbnN0IHsgbWV0aG9kLCBwYXRoLCBxdWVyeSwgaGVhZGVyczogaGVhZGVycyA9IHt9IH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGJvZHkgPVxuICAgICAgKDAsIHVwbG9hZHNfMS5pc011bHRpcGFydEJvZHkpKG9wdGlvbnMuYm9keSkgPyBvcHRpb25zLmJvZHkuYm9keVxuICAgICAgOiBvcHRpb25zLmJvZHkgPyBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHksIG51bGwsIDIpXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgY29udGVudExlbmd0aCA9IHRoaXMuY2FsY3VsYXRlQ29udGVudExlbmd0aChib2R5KTtcbiAgICBjb25zdCB1cmwgPSB0aGlzLmJ1aWxkVVJMKHBhdGgsIHF1ZXJ5KTtcbiAgICBpZiAoJ3RpbWVvdXQnIGluIG9wdGlvbnMpIHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0Jywgb3B0aW9ucy50aW1lb3V0KTtcbiAgICBjb25zdCB0aW1lb3V0ID0gKF9hID0gb3B0aW9ucy50aW1lb3V0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0aGlzLnRpbWVvdXQ7XG4gICAgY29uc3QgaHR0cEFnZW50ID1cbiAgICAgIChcbiAgICAgICAgKF9jID0gKF9iID0gb3B0aW9ucy5odHRwQWdlbnQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRoaXMuaHR0cEFnZW50KSAhPT0gbnVsbCAmJlxuICAgICAgICBfYyAhPT0gdm9pZCAwXG4gICAgICApID9cbiAgICAgICAgX2NcbiAgICAgIDogKDAsIGFnZW50XzEuZ2V0RGVmYXVsdEFnZW50KSh1cmwpO1xuICAgIGNvbnN0IG1pbkFnZW50VGltZW91dCA9IHRpbWVvdXQgKyAxMDAwO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiAoKFxuICAgICAgICAoX2QgPSBodHRwQWdlbnQgPT09IG51bGwgfHwgaHR0cEFnZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBodHRwQWdlbnQub3B0aW9ucykgPT09IG51bGwgfHxcbiAgICAgICAgX2QgPT09IHZvaWQgMFxuICAgICAgKSA/XG4gICAgICAgIHZvaWQgMFxuICAgICAgOiBfZC50aW1lb3V0KSA9PT0gJ251bWJlcicgJiZcbiAgICAgIG1pbkFnZW50VGltZW91dCA+ICgoX2UgPSBodHRwQWdlbnQub3B0aW9ucy50aW1lb3V0KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwKVxuICAgICkge1xuICAgICAgLy8gQWxsb3cgYW55IGdpdmVuIHJlcXVlc3QgdG8gYnVtcCBvdXIgYWdlbnQgYWN0aXZlIHNvY2tldCB0aW1lb3V0LlxuICAgICAgLy8gVGhpcyBtYXkgc2VlbSBzdHJhbmdlLCBidXQgbGVha2luZyBhY3RpdmUgc29ja2V0cyBzaG91bGQgYmUgcmFyZSBhbmQgbm90IHBhcnRpY3VsYXJseSBwcm9ibGVtYXRpYyxcbiAgICAgIC8vIGFuZCB3aXRob3V0IG11dGF0aW5nIGFnZW50IHdlIHdvdWxkIG5lZWQgdG8gY3JlYXRlIG1vcmUgb2YgdGhlbS5cbiAgICAgIC8vIFRoaXMgdHJhZGVvZmYgb3B0aW1pemVzIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgIGh0dHBBZ2VudC5vcHRpb25zLnRpbWVvdXQgPSBtaW5BZ2VudFRpbWVvdXQ7XG4gICAgfVxuICAgIGlmICh0aGlzLmlkZW1wb3RlbmN5SGVhZGVyICYmIG1ldGhvZCAhPT0gJ2dldCcpIHtcbiAgICAgIGlmICghb3B0aW9ucy5pZGVtcG90ZW5jeUtleSkgb3B0aW9ucy5pZGVtcG90ZW5jeUtleSA9IHRoaXMuZGVmYXVsdElkZW1wb3RlbmN5S2V5KCk7XG4gICAgICBoZWFkZXJzW3RoaXMuaWRlbXBvdGVuY3lIZWFkZXJdID0gb3B0aW9ucy5pZGVtcG90ZW5jeUtleTtcbiAgICB9XG4gICAgY29uc3QgcmVxSGVhZGVycyA9IHtcbiAgICAgIC4uLihjb250ZW50TGVuZ3RoICYmIHsgJ0NvbnRlbnQtTGVuZ3RoJzogY29udGVudExlbmd0aCB9KSxcbiAgICAgIC4uLnRoaXMuZGVmYXVsdEhlYWRlcnMob3B0aW9ucyksXG4gICAgICAuLi5oZWFkZXJzLFxuICAgIH07XG4gICAgLy8gbGV0IGJ1aWx0aW4gZmV0Y2ggc2V0IHRoZSBDb250ZW50LVR5cGUgZm9yIG11bHRpcGFydCBib2RpZXNcbiAgICBpZiAoKDAsIHVwbG9hZHNfMS5pc011bHRpcGFydEJvZHkpKG9wdGlvbnMuYm9keSkgJiYgIWZldGNoXzEuaXNQb2x5ZmlsbGVkKSB7XG4gICAgICBkZWxldGUgcmVxSGVhZGVyc1snQ29udGVudC1UeXBlJ107XG4gICAgfVxuICAgIC8vIFN0cmlwIGFueSBoZWFkZXJzIGJlaW5nIGV4cGxpY2l0bHkgb21pdHRlZCB3aXRoIG51bGxcbiAgICBPYmplY3Qua2V5cyhyZXFIZWFkZXJzKS5mb3JFYWNoKChrZXkpID0+IHJlcUhlYWRlcnNba2V5XSA9PT0gbnVsbCAmJiBkZWxldGUgcmVxSGVhZGVyc1trZXldKTtcbiAgICBjb25zdCByZXEgPSB7XG4gICAgICBtZXRob2QsXG4gICAgICAuLi4oYm9keSAmJiB7IGJvZHk6IGJvZHkgfSksXG4gICAgICBoZWFkZXJzOiByZXFIZWFkZXJzLFxuICAgICAgLi4uKGh0dHBBZ2VudCAmJiB7IGFnZW50OiBodHRwQWdlbnQgfSksXG4gICAgICAvLyBAdHMtaWdub3JlIG5vZGUtZmV0Y2ggdXNlcyBhIGN1c3RvbSBBYm9ydFNpZ25hbCB0eXBlIHRoYXQgaXNcbiAgICAgIC8vIG5vdCBjb21wYXRpYmxlIHdpdGggc3RhbmRhcmQgd2ViIHR5cGVzXG4gICAgICBzaWduYWw6IChfZiA9IG9wdGlvbnMuc2lnbmFsKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBudWxsLFxuICAgIH07XG4gICAgdGhpcy52YWxpZGF0ZUhlYWRlcnMocmVxSGVhZGVycywgaGVhZGVycyk7XG4gICAgcmV0dXJuIHsgcmVxLCB1cmwsIHRpbWVvdXQgfTtcbiAgfVxuICAvKipcbiAgICogVXNlZCBhcyBhIGNhbGxiYWNrIGZvciBtdXRhdGluZyB0aGUgZ2l2ZW4gYFJlcXVlc3RJbml0YCBvYmplY3QuXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSB5b3Ugd2FudCB0byBhZGQgY2VydGFpbiBoZWFkZXJzIGJhc2VkIG9mZiBvZlxuICAgKiB0aGUgcmVxdWVzdCBwcm9wZXJ0aWVzLCBlLmcuIGBtZXRob2RgIG9yIGB1cmxgLlxuICAgKi9cbiAgYXN5bmMgcHJlcGFyZVJlcXVlc3QocmVxdWVzdCwgeyB1cmwsIG9wdGlvbnMgfSkge31cbiAgcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgIWhlYWRlcnMgPyB7fVxuICAgICAgOiBTeW1ib2wuaXRlcmF0b3IgaW4gaGVhZGVycyA/IE9iamVjdC5mcm9tRW50cmllcyhBcnJheS5mcm9tKGhlYWRlcnMpLm1hcCgoaGVhZGVyKSA9PiBbLi4uaGVhZGVyXSkpXG4gICAgICA6IHsgLi4uaGVhZGVycyB9XG4gICAgKTtcbiAgfVxuICBtYWtlU3RhdHVzRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycykge1xuICAgIHJldHVybiBlcnJvcl8xLkFQSUVycm9yLmdlbmVyYXRlKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICB9XG4gIHJlcXVlc3Qob3B0aW9ucywgcmVtYWluaW5nUmV0cmllcyA9IG51bGwpIHtcbiAgICByZXR1cm4gbmV3IEFQSVByb21pc2UodGhpcy5tYWtlUmVxdWVzdChvcHRpb25zLCByZW1haW5pbmdSZXRyaWVzKSk7XG4gIH1cbiAgYXN5bmMgbWFrZVJlcXVlc3Qob3B0aW9uc0lucHV0LCByZXRyaWVzUmVtYWluaW5nKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGF3YWl0IG9wdGlvbnNJbnB1dDtcbiAgICBpZiAocmV0cmllc1JlbWFpbmluZyA9PSBudWxsKSB7XG4gICAgICByZXRyaWVzUmVtYWluaW5nID0gKF9hID0gb3B0aW9ucy5tYXhSZXRyaWVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0aGlzLm1heFJldHJpZXM7XG4gICAgfVxuICAgIGNvbnN0IHsgcmVxLCB1cmwsIHRpbWVvdXQgfSA9IHRoaXMuYnVpbGRSZXF1ZXN0KG9wdGlvbnMpO1xuICAgIGF3YWl0IHRoaXMucHJlcGFyZVJlcXVlc3QocmVxLCB7IHVybCwgb3B0aW9ucyB9KTtcbiAgICBkZWJ1ZygncmVxdWVzdCcsIHVybCwgb3B0aW9ucywgcmVxLmhlYWRlcnMpO1xuICAgIGlmICgoX2IgPSBvcHRpb25zLnNpZ25hbCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcl8xLkFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoV2l0aFRpbWVvdXQodXJsLCByZXEsIHRpbWVvdXQsIGNvbnRyb2xsZXIpLmNhdGNoKGV4cG9ydHMuY2FzdFRvRXJyb3IpO1xuICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBpZiAoKF9jID0gb3B0aW9ucy5zaWduYWwpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5hYm9ydGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLkFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgICB9XG4gICAgICBpZiAocmV0cmllc1JlbWFpbmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzcG9uc2UubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLkFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IoKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBlcnJvcl8xLkFQSUNvbm5lY3Rpb25FcnJvcih7IGNhdXNlOiByZXNwb25zZSB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gKDAsIGV4cG9ydHMuY3JlYXRlUmVzcG9uc2VIZWFkZXJzKShyZXNwb25zZS5oZWFkZXJzKTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBpZiAocmV0cmllc1JlbWFpbmluZyAmJiB0aGlzLnNob3VsZFJldHJ5KHJlc3BvbnNlKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZywgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVyclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJ1Vua25vd24nKTtcbiAgICAgIGNvbnN0IGVyckpTT04gPSAoMCwgZXhwb3J0cy5zYWZlSlNPTikoZXJyVGV4dCk7XG4gICAgICBjb25zdCBlcnJNZXNzYWdlID0gZXJySlNPTiA/IHVuZGVmaW5lZCA6IGVyclRleHQ7XG4gICAgICBkZWJ1ZygncmVzcG9uc2UnLCByZXNwb25zZS5zdGF0dXMsIHVybCwgcmVzcG9uc2VIZWFkZXJzLCBlcnJNZXNzYWdlKTtcbiAgICAgIGNvbnN0IGVyciA9IHRoaXMubWFrZVN0YXR1c0Vycm9yKHJlc3BvbnNlLnN0YXR1cywgZXJySlNPTiwgZXJyTWVzc2FnZSwgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgcmV0dXJuIHsgcmVzcG9uc2UsIG9wdGlvbnMsIGNvbnRyb2xsZXIgfTtcbiAgfVxuICByZXF1ZXN0QVBJTGlzdChQYWdlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgbnVsbCk7XG4gICAgcmV0dXJuIG5ldyBQYWdlUHJvbWlzZSh0aGlzLCByZXF1ZXN0LCBQYWdlKTtcbiAgfVxuICBidWlsZFVSTChwYXRoLCBxdWVyeSkge1xuICAgIGNvbnN0IHVybCA9XG4gICAgICBpc0Fic29sdXRlVVJMKHBhdGgpID9cbiAgICAgICAgbmV3IFVSTChwYXRoKVxuICAgICAgOiBuZXcgVVJMKHRoaXMuYmFzZVVSTCArICh0aGlzLmJhc2VVUkwuZW5kc1dpdGgoJy8nKSAmJiBwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRoKSk7XG4gICAgY29uc3QgZGVmYXVsdFF1ZXJ5ID0gdGhpcy5kZWZhdWx0UXVlcnkoKTtcbiAgICBpZiAoIWlzRW1wdHlPYmooZGVmYXVsdFF1ZXJ5KSkge1xuICAgICAgcXVlcnkgPSB7IC4uLmRlZmF1bHRRdWVyeSwgLi4ucXVlcnkgfTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICB1cmwuc2VhcmNoID0gdGhpcy5zdHJpbmdpZnlRdWVyeShxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbiAgfVxuICBzdHJpbmdpZnlRdWVyeShxdWVyeSkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhxdWVyeSlcbiAgICAgIC5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIHJldHVybiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT1gO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IHN0cmluZ2lmeSB0eXBlICR7dHlwZW9mIHZhbHVlfTsgRXhwZWN0ZWQgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9yIG51bGwuIElmIHlvdSBuZWVkIHRvIHBhc3MgbmVzdGVkIHF1ZXJ5IHBhcmFtZXRlcnMsIHlvdSBjYW4gbWFudWFsbHkgZW5jb2RlIHRoZW0sIGUuZy4geyBxdWVyeTogeyAnZm9vW2tleTFdJzogdmFsdWUxLCAnZm9vW2tleTJdJzogdmFsdWUyIH0gfSwgYW5kIHBsZWFzZSBvcGVuIGEgR2l0SHViIGlzc3VlIHJlcXVlc3RpbmcgYmV0dGVyIHN1cHBvcnQgZm9yIHlvdXIgdXNlIGNhc2UuYCxcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAuam9pbignJicpO1xuICB9XG4gIGFzeW5jIGZldGNoV2l0aFRpbWVvdXQodXJsLCBpbml0LCBtcywgY29udHJvbGxlcikge1xuICAgIGNvbnN0IHsgc2lnbmFsLCAuLi5vcHRpb25zIH0gPSBpbml0IHx8IHt9O1xuICAgIGlmIChzaWduYWwpIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSk7XG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCBtcyk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWVzdENsaWVudCgpXG4gICAgICAuZmV0Y2godXJsLCB7IHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsIC4uLm9wdGlvbnMgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgfSk7XG4gIH1cbiAgZ2V0UmVxdWVzdENsaWVudCgpIHtcbiAgICByZXR1cm4geyBmZXRjaDogdGhpcy5mZXRjaCB9O1xuICB9XG4gIHNob3VsZFJldHJ5KHJlc3BvbnNlKSB7XG4gICAgLy8gTm90ZSB0aGlzIGlzIG5vdCBhIHN0YW5kYXJkIGhlYWRlci5cbiAgICBjb25zdCBzaG91bGRSZXRyeUhlYWRlciA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LXNob3VsZC1yZXRyeScpO1xuICAgIC8vIElmIHRoZSBzZXJ2ZXIgZXhwbGljaXRseSBzYXlzIHdoZXRoZXIgb3Igbm90IHRvIHJldHJ5LCBvYmV5LlxuICAgIGlmIChzaG91bGRSZXRyeUhlYWRlciA9PT0gJ3RydWUnKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoc2hvdWxkUmV0cnlIZWFkZXIgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZTtcbiAgICAvLyBSZXRyeSBvbiBsb2NrIHRpbWVvdXRzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgcmV0dXJuIHRydWU7XG4gICAgLy8gUmV0cnkgb24gcmF0ZSBsaW1pdHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSByZXR1cm4gdHJ1ZTtcbiAgICAvLyBSZXRyeSBpbnRlcm5hbCBlcnJvcnMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA1MDApIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBhc3luYyByZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZywgcmVzcG9uc2VIZWFkZXJzKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHJpZXNSZW1haW5pbmcgLT0gMTtcbiAgICAvLyBBYm91dCB0aGUgUmV0cnktQWZ0ZXIgaGVhZGVyOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvUmV0cnktQWZ0ZXJcbiAgICAvL1xuICAgIC8vIFRPRE86IHdlIG1heSB3YW50IHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgaGVhZGVyIGlzIHVzaW5nIHRoZSBodHRwLWRhdGUgc3ludGF4OiBcIlJldHJ5LUFmdGVyOiA8aHR0cC1kYXRlPlwiLlxuICAgIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvUmV0cnktQWZ0ZXIjc3ludGF4IGZvciBkZXRhaWxzLlxuICAgIGNvbnN0IHJldHJ5QWZ0ZXIgPSBwYXJzZUludChcbiAgICAgIChyZXNwb25zZUhlYWRlcnMgPT09IG51bGwgfHwgcmVzcG9uc2VIZWFkZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNwb25zZUhlYWRlcnNbJ3JldHJ5LWFmdGVyJ10pIHx8XG4gICAgICAgICcnLFxuICAgICk7XG4gICAgY29uc3QgbWF4UmV0cmllcyA9IChfYSA9IG9wdGlvbnMubWF4UmV0cmllcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy5tYXhSZXRyaWVzO1xuICAgIGNvbnN0IHRpbWVvdXQgPSB0aGlzLmNhbGN1bGF0ZVJldHJ5VGltZW91dFNlY29uZHMocmV0cmllc1JlbWFpbmluZywgcmV0cnlBZnRlciwgbWF4UmV0cmllcykgKiAxMDAwO1xuICAgIGF3YWl0IHNsZWVwKHRpbWVvdXQpO1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcpO1xuICB9XG4gIGNhbGN1bGF0ZVJldHJ5VGltZW91dFNlY29uZHMocmV0cmllc1JlbWFpbmluZywgcmV0cnlBZnRlciwgbWF4UmV0cmllcykge1xuICAgIGNvbnN0IGluaXRpYWxSZXRyeURlbGF5ID0gMC41O1xuICAgIGNvbnN0IG1heFJldHJ5RGVsYXkgPSAyO1xuICAgIC8vIElmIHRoZSBBUEkgYXNrcyB1cyB0byB3YWl0IGEgY2VydGFpbiBhbW91bnQgb2YgdGltZSAoYW5kIGl0J3MgYSByZWFzb25hYmxlIGFtb3VudCksXG4gICAgLy8ganVzdCBkbyB3aGF0IGl0IHNheXMuXG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIocmV0cnlBZnRlcikgJiYgcmV0cnlBZnRlciA8PSA2MCkge1xuICAgICAgcmV0dXJuIHJldHJ5QWZ0ZXI7XG4gICAgfVxuICAgIGNvbnN0IG51bVJldHJpZXMgPSBtYXhSZXRyaWVzIC0gcmV0cmllc1JlbWFpbmluZztcbiAgICAvLyBBcHBseSBleHBvbmVudGlhbCBiYWNrb2ZmLCBidXQgbm90IG1vcmUgdGhhbiB0aGUgbWF4LlxuICAgIGNvbnN0IHNsZWVwU2Vjb25kcyA9IE1hdGgubWluKGluaXRpYWxSZXRyeURlbGF5ICogTWF0aC5wb3cobnVtUmV0cmllcyAtIDEsIDIpLCBtYXhSZXRyeURlbGF5KTtcbiAgICAvLyBBcHBseSBzb21lIGppdHRlciwgcGx1cy1vci1taW51cyBoYWxmIGEgc2Vjb25kLlxuICAgIGNvbnN0IGppdHRlciA9IE1hdGgucmFuZG9tKCkgLSAwLjU7XG4gICAgcmV0dXJuIHNsZWVwU2Vjb25kcyArIGppdHRlcjtcbiAgfVxuICBnZXRVc2VyQWdlbnQoKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29uc3RydWN0b3IubmFtZX0vSlMgJHt2ZXJzaW9uXzEuVkVSU0lPTn1gO1xuICB9XG59XG5leHBvcnRzLkFQSUNsaWVudCA9IEFQSUNsaWVudDtcbmNsYXNzIEFQSVJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoY2xpZW50KSB7XG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgdGhpcy5nZXQgPSBjbGllbnQuZ2V0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnBvc3QgPSBjbGllbnQucG9zdC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wYXRjaCA9IGNsaWVudC5wYXRjaC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wdXQgPSBjbGllbnQucHV0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLmRlbGV0ZSA9IGNsaWVudC5kZWxldGUuYmluZChjbGllbnQpO1xuICAgIHRoaXMuZ2V0QVBJTGlzdCA9IGNsaWVudC5nZXRBUElMaXN0LmJpbmQoY2xpZW50KTtcbiAgfVxufVxuZXhwb3J0cy5BUElSZXNvdXJjZSA9IEFQSVJlc291cmNlO1xuY2xhc3MgQWJzdHJhY3RQYWdlIHtcbiAgY29uc3RydWN0b3IoY2xpZW50LCByZXNwb25zZSwgYm9keSwgb3B0aW9ucykge1xuICAgIF9BYnN0cmFjdFBhZ2VfY2xpZW50LnNldCh0aGlzLCB2b2lkIDApO1xuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0Fic3RyYWN0UGFnZV9jbGllbnQsIGNsaWVudCwgJ2YnKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLmJvZHkgPSBib2R5O1xuICB9XG4gIGhhc05leHRQYWdlKCkge1xuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5nZXRQYWdpbmF0ZWRJdGVtcygpO1xuICAgIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMubmV4dFBhZ2VJbmZvKCkgIT0gbnVsbDtcbiAgfVxuICBhc3luYyBnZXROZXh0UGFnZSgpIHtcbiAgICBjb25zdCBuZXh0SW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFuZXh0SW5mbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnTm8gbmV4dCBwYWdlIGV4cGVjdGVkOyBwbGVhc2UgY2hlY2sgYC5oYXNOZXh0UGFnZSgpYCBiZWZvcmUgY2FsbGluZyBgLmdldE5leHRQYWdlKClgLicsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBuZXh0T3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zIH07XG4gICAgaWYgKCdwYXJhbXMnIGluIG5leHRJbmZvKSB7XG4gICAgICBuZXh0T3B0aW9ucy5xdWVyeSA9IHsgLi4ubmV4dE9wdGlvbnMucXVlcnksIC4uLm5leHRJbmZvLnBhcmFtcyB9O1xuICAgIH0gZWxzZSBpZiAoJ3VybCcgaW4gbmV4dEluZm8pIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IFsuLi5PYmplY3QuZW50cmllcyhuZXh0T3B0aW9ucy5xdWVyeSB8fCB7fSksIC4uLm5leHRJbmZvLnVybC5zZWFyY2hQYXJhbXMuZW50cmllcygpXTtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHBhcmFtcykge1xuICAgICAgICBuZXh0SW5mby51cmwuc2VhcmNoUGFyYW1zLnNldChrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0gdW5kZWZpbmVkO1xuICAgICAgbmV4dE9wdGlvbnMucGF0aCA9IG5leHRJbmZvLnVybC50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQWJzdHJhY3RQYWdlX2NsaWVudCwgJ2YnKS5yZXF1ZXN0QVBJTGlzdChcbiAgICAgIHRoaXMuY29uc3RydWN0b3IsXG4gICAgICBuZXh0T3B0aW9ucyxcbiAgICApO1xuICB9XG4gIGFzeW5jICppdGVyUGFnZXMoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgbGV0IHBhZ2UgPSB0aGlzO1xuICAgIHlpZWxkIHBhZ2U7XG4gICAgd2hpbGUgKHBhZ2UuaGFzTmV4dFBhZ2UoKSkge1xuICAgICAgcGFnZSA9IGF3YWl0IHBhZ2UuZ2V0TmV4dFBhZ2UoKTtcbiAgICAgIHlpZWxkIHBhZ2U7XG4gICAgfVxuICB9XG4gIGFzeW5jICpbKChfQWJzdHJhY3RQYWdlX2NsaWVudCA9IG5ldyBXZWFrTWFwKCkpLCBTeW1ib2wuYXN5bmNJdGVyYXRvcildKCkge1xuICAgIGZvciBhd2FpdCAoY29uc3QgcGFnZSBvZiB0aGlzLml0ZXJQYWdlcygpKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcGFnZS5nZXRQYWdpbmF0ZWRJdGVtcygpKSB7XG4gICAgICAgIHlpZWxkIGl0ZW07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5leHBvcnRzLkFic3RyYWN0UGFnZSA9IEFic3RyYWN0UGFnZTtcbi8qKlxuICogVGhpcyBzdWJjbGFzcyBvZiBQcm9taXNlIHdpbGwgcmVzb2x2ZSB0byBhbiBpbnN0YW50aWF0ZWQgUGFnZSBvbmNlIHRoZSByZXF1ZXN0IGNvbXBsZXRlcy5cbiAqXG4gKiBJdCBhbHNvIGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZSB0byBhbGxvdyBhdXRvLXBhZ2luYXRpbmcgaXRlcmF0aW9uIG9uIGFuIHVuYXdhaXRlZCBsaXN0IGNhbGwsIGVnOlxuICpcbiAqICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBjbGllbnQuaXRlbXMubGlzdCgpKSB7XG4gKiAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXG4gKiAgICB9XG4gKi9cbmNsYXNzIFBhZ2VQcm9taXNlIGV4dGVuZHMgQVBJUHJvbWlzZSB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgcmVxdWVzdCwgUGFnZSkge1xuICAgIHN1cGVyKFxuICAgICAgcmVxdWVzdCxcbiAgICAgIGFzeW5jIChwcm9wcykgPT4gbmV3IFBhZ2UoY2xpZW50LCBwcm9wcy5yZXNwb25zZSwgYXdhaXQgZGVmYXVsdFBhcnNlUmVzcG9uc2UocHJvcHMpLCBwcm9wcy5vcHRpb25zKSxcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBBbGxvdyBhdXRvLXBhZ2luYXRpbmcgaXRlcmF0aW9uIG9uIGFuIHVuYXdhaXRlZCBsaXN0IGNhbGwsIGVnOlxuICAgKlxuICAgKiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgY2xpZW50Lml0ZW1zLmxpc3QoKSkge1xuICAgKiAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXG4gICAqICAgIH1cbiAgICovXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzO1xuICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBwYWdlKSB7XG4gICAgICB5aWVsZCBpdGVtO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0cy5QYWdlUHJvbWlzZSA9IFBhZ2VQcm9taXNlO1xuY29uc3QgY3JlYXRlUmVzcG9uc2VIZWFkZXJzID0gKGhlYWRlcnMpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm94eShcbiAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBoZWFkZXJzLmVudHJpZXMoKSxcbiAgICApLFxuICAgIHtcbiAgICAgIGdldCh0YXJnZXQsIG5hbWUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbmFtZS50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0W2tleS50b0xvd2VyQ2FzZSgpXSB8fCB0YXJnZXRba2V5XTtcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcbn07XG5leHBvcnRzLmNyZWF0ZVJlc3BvbnNlSGVhZGVycyA9IGNyZWF0ZVJlc3BvbnNlSGVhZGVycztcbi8vIFRoaXMgaXMgcmVxdWlyZWQgc28gdGhhdCB3ZSBjYW4gZGV0ZXJtaW5lIGlmIGEgZ2l2ZW4gb2JqZWN0IG1hdGNoZXMgdGhlIFJlcXVlc3RPcHRpb25zXG4vLyB0eXBlIGF0IHJ1bnRpbWUuIFdoaWxlIHRoaXMgcmVxdWlyZXMgZHVwbGljYXRpb24sIGl0IGlzIGVuZm9yY2VkIGJ5IHRoZSBUeXBlU2NyaXB0XG4vLyBjb21waWxlciBzdWNoIHRoYXQgYW55IG1pc3NpbmcgLyBleHRyYW5lb3VzIGtleXMgd2lsbCBjYXVzZSBhbiBlcnJvci5cbmNvbnN0IHJlcXVlc3RPcHRpb25zS2V5cyA9IHtcbiAgbWV0aG9kOiB0cnVlLFxuICBwYXRoOiB0cnVlLFxuICBxdWVyeTogdHJ1ZSxcbiAgYm9keTogdHJ1ZSxcbiAgaGVhZGVyczogdHJ1ZSxcbiAgbWF4UmV0cmllczogdHJ1ZSxcbiAgc3RyZWFtOiB0cnVlLFxuICB0aW1lb3V0OiB0cnVlLFxuICBodHRwQWdlbnQ6IHRydWUsXG4gIHNpZ25hbDogdHJ1ZSxcbiAgaWRlbXBvdGVuY3lLZXk6IHRydWUsXG59O1xuY29uc3QgaXNSZXF1ZXN0T3B0aW9ucyA9IChvYmopID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxuICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgICFpc0VtcHR5T2JqKG9iaikgJiZcbiAgICBPYmplY3Qua2V5cyhvYmopLmV2ZXJ5KChrKSA9PiBoYXNPd24ocmVxdWVzdE9wdGlvbnNLZXlzLCBrKSlcbiAgKTtcbn07XG5leHBvcnRzLmlzUmVxdWVzdE9wdGlvbnMgPSBpc1JlcXVlc3RPcHRpb25zO1xuY29uc3QgZ2V0UGxhdGZvcm1Qcm9wZXJ0aWVzID0gKCkgPT4ge1xuICBpZiAodHlwZW9mIERlbm8gIT09ICd1bmRlZmluZWQnICYmIERlbm8uYnVpbGQgIT0gbnVsbCkge1xuICAgIHJldHVybiB7XG4gICAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogdmVyc2lvbl8xLlZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiBub3JtYWxpemVQbGF0Zm9ybShEZW5vLmJ1aWxkLm9zKSxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogbm9ybWFsaXplQXJjaChEZW5vLmJ1aWxkLmFyY2gpLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZGVubycsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogRGVuby52ZXJzaW9uLFxuICAgIH07XG4gIH1cbiAgaWYgKHR5cGVvZiBFZGdlUnVudGltZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IHZlcnNpb25fMS5WRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiBgb3RoZXI6JHtFZGdlUnVudGltZX1gLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZWRnZScsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogcHJvY2Vzcy52ZXJzaW9uLFxuICAgIH07XG4gIH1cbiAgLy8gQ2hlY2sgaWYgTm9kZS5qc1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MgOiAwKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiB2ZXJzaW9uXzEuVkVSU0lPTixcbiAgICAgICdYLVN0YWlubGVzcy1PUyc6IG5vcm1hbGl6ZVBsYXRmb3JtKHByb2Nlc3MucGxhdGZvcm0pLFxuICAgICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiBub3JtYWxpemVBcmNoKHByb2Nlc3MuYXJjaCksXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICdub2RlJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBwcm9jZXNzLnZlcnNpb24sXG4gICAgfTtcbiAgfVxuICBjb25zdCBicm93c2VySW5mbyA9IGdldEJyb3dzZXJJbmZvKCk7XG4gIGlmIChicm93c2VySW5mbykge1xuICAgIHJldHVybiB7XG4gICAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogdmVyc2lvbl8xLlZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6ICd1bmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogYGJyb3dzZXI6JHticm93c2VySW5mby5icm93c2VyfWAsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogYnJvd3NlckluZm8udmVyc2lvbixcbiAgICB9O1xuICB9XG4gIC8vIFRPRE8gYWRkIHN1cHBvcnQgZm9yIENsb3VkZmxhcmUgd29ya2VycywgZXRjLlxuICByZXR1cm4ge1xuICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogdmVyc2lvbl8xLlZFUlNJT04sXG4gICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1BcmNoJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiAndW5rbm93bicsXG4gIH07XG59O1xuLy8gTm90ZTogbW9kaWZpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vSlMtRGV2VG9vbHMvaG9zdC1lbnZpcm9ubWVudC9ibG9iL2IxYWI3OWVjZGUzN2RiNWQ2ZTE2M2MwNTBlNTRmZTdkMjg3ZDdjOTIvc3JjL2lzb21vcnBoaWMuYnJvd3Nlci50c1xuZnVuY3Rpb24gZ2V0QnJvd3NlckluZm8oKSB7XG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLy8gTk9URTogVGhlIG9yZGVyIG1hdHRlcnMgaGVyZSFcbiAgY29uc3QgYnJvd3NlclBhdHRlcm5zID0gW1xuICAgIHsga2V5OiAnZWRnZScsIHBhdHRlcm46IC9FZGdlKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScsIHBhdHRlcm46IC9NU0lFKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScsIHBhdHRlcm46IC9UcmlkZW50KD86LipydlxcOihcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdjaHJvbWUnLCBwYXR0ZXJuOiAvQ2hyb21lKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdmaXJlZm94JywgcGF0dGVybjogL0ZpcmVmb3goPzpcXFcrKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPy8gfSxcbiAgICB7IGtleTogJ3NhZmFyaScsIHBhdHRlcm46IC8oPzpWZXJzaW9uXFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8oPzpcXFcrTW9iaWxlXFxTKik/XFxXK1NhZmFyaS8gfSxcbiAgXTtcbiAgLy8gRmluZCB0aGUgRklSU1QgbWF0Y2hpbmcgYnJvd3NlclxuICBmb3IgKGNvbnN0IHsga2V5LCBwYXR0ZXJuIH0gb2YgYnJvd3NlclBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBtYWpvciA9IG1hdGNoWzFdIHx8IDA7XG4gICAgICBjb25zdCBtaW5vciA9IG1hdGNoWzJdIHx8IDA7XG4gICAgICBjb25zdCBwYXRjaCA9IG1hdGNoWzNdIHx8IDA7XG4gICAgICByZXR1cm4geyBicm93c2VyOiBrZXksIHZlcnNpb246IGAke21ham9yfS4ke21pbm9yfS4ke3BhdGNofWAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5jb25zdCBub3JtYWxpemVBcmNoID0gKGFyY2gpID0+IHtcbiAgLy8gTm9kZSBkb2NzOlxuICAvLyAtIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcHJvY2Vzcy5odG1sI3Byb2Nlc3NhcmNoXG4gIC8vIERlbm8gZG9jczpcbiAgLy8gLSBodHRwczovL2RvYy5kZW5vLmxhbmQvZGVuby9zdGFibGUvfi9EZW5vLmJ1aWxkXG4gIGlmIChhcmNoID09PSAneDMyJykgcmV0dXJuICd4MzInO1xuICBpZiAoYXJjaCA9PT0gJ3g4Nl82NCcgfHwgYXJjaCA9PT0gJ3g2NCcpIHJldHVybiAneDY0JztcbiAgaWYgKGFyY2ggPT09ICdhcm0nKSByZXR1cm4gJ2FybSc7XG4gIGlmIChhcmNoID09PSAnYWFyY2g2NCcgfHwgYXJjaCA9PT0gJ2FybTY0JykgcmV0dXJuICdhcm02NCc7XG4gIGlmIChhcmNoKSByZXR1cm4gYG90aGVyOiR7YXJjaH1gO1xuICByZXR1cm4gJ3Vua25vd24nO1xufTtcbmNvbnN0IG5vcm1hbGl6ZVBsYXRmb3JtID0gKHBsYXRmb3JtKSA9PiB7XG4gIC8vIE5vZGUgcGxhdGZvcm1zOlxuICAvLyAtIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcHJvY2Vzcy5odG1sI3Byb2Nlc3NwbGF0Zm9ybVxuICAvLyBEZW5vIHBsYXRmb3JtczpcbiAgLy8gLSBodHRwczovL2RvYy5kZW5vLmxhbmQvZGVuby9zdGFibGUvfi9EZW5vLmJ1aWxkXG4gIC8vIC0gaHR0cHM6Ly9naXRodWIuY29tL2Rlbm9sYW5kL2Rlbm8vaXNzdWVzLzE0Nzk5XG4gIHBsYXRmb3JtID0gcGxhdGZvcm0udG9Mb3dlckNhc2UoKTtcbiAgLy8gTk9URTogdGhpcyBpT1MgY2hlY2sgaXMgdW50ZXN0ZWQgYW5kIG1heSBub3Qgd29ya1xuICAvLyBOb2RlIGRvZXMgbm90IHdvcmsgbmF0aXZlbHkgb24gSU9TLCB0aGVyZSBpcyBhIGZvcmsgYXRcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy1tb2JpbGUvbm9kZWpzLW1vYmlsZVxuICAvLyBob3dldmVyIGl0IGlzIHVua25vd24gYXQgdGhlIHRpbWUgb2Ygd3JpdGluZyBob3cgdG8gZGV0ZWN0IGlmIGl0IGlzIHJ1bm5pbmdcbiAgaWYgKHBsYXRmb3JtLmluY2x1ZGVzKCdpb3MnKSkgcmV0dXJuICdpT1MnO1xuICBpZiAocGxhdGZvcm0gPT09ICdhbmRyb2lkJykgcmV0dXJuICdBbmRyb2lkJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZGFyd2luJykgcmV0dXJuICdNYWNPUyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJykgcmV0dXJuICdXaW5kb3dzJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZnJlZWJzZCcpIHJldHVybiAnRnJlZUJTRCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ29wZW5ic2QnKSByZXR1cm4gJ09wZW5CU0QnO1xuICBpZiAocGxhdGZvcm0gPT09ICdsaW51eCcpIHJldHVybiAnTGludXgnO1xuICBpZiAocGxhdGZvcm0pIHJldHVybiBgT3RoZXI6JHtwbGF0Zm9ybX1gO1xuICByZXR1cm4gJ1Vua25vd24nO1xufTtcbmxldCBfcGxhdGZvcm1IZWFkZXJzO1xuY29uc3QgZ2V0UGxhdGZvcm1IZWFkZXJzID0gKCkgPT4ge1xuICByZXR1cm4gX3BsYXRmb3JtSGVhZGVycyAhPT0gbnVsbCAmJiBfcGxhdGZvcm1IZWFkZXJzICE9PSB2b2lkIDAgP1xuICAgICAgX3BsYXRmb3JtSGVhZGVyc1xuICAgIDogKF9wbGF0Zm9ybUhlYWRlcnMgPSBnZXRQbGF0Zm9ybVByb3BlcnRpZXMoKSk7XG59O1xuY29uc3Qgc2FmZUpTT04gPSAodGV4dCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59O1xuZXhwb3J0cy5zYWZlSlNPTiA9IHNhZmVKU09OO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE5NzA5ODQ2XG5jb25zdCBzdGFydHNXaXRoU2NoZW1lUmVnZXhwID0gbmV3IFJlZ0V4cCgnXig/OlthLXpdKzopPy8vJywgJ2knKTtcbmNvbnN0IGlzQWJzb2x1dGVVUkwgPSAodXJsKSA9PiB7XG4gIHJldHVybiBzdGFydHNXaXRoU2NoZW1lUmVnZXhwLnRlc3QodXJsKTtcbn07XG5jb25zdCBzbGVlcCA9IChtcykgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbmNvbnN0IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyID0gKG5hbWUsIG4pID0+IHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzSW50ZWdlcihuKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGFuIGludGVnZXJgKTtcbiAgfVxuICBpZiAobiA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJgKTtcbiAgfVxuICByZXR1cm4gbjtcbn07XG5jb25zdCBjYXN0VG9FcnJvciA9IChlcnIpID0+IHtcbiAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gZXJyO1xuICByZXR1cm4gbmV3IEVycm9yKGVycik7XG59O1xuZXhwb3J0cy5jYXN0VG9FcnJvciA9IGNhc3RUb0Vycm9yO1xuY29uc3QgZW5zdXJlUHJlc2VudCA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhIHZhbHVlIHRvIGJlIGdpdmVuIGJ1dCByZWNlaXZlZCAke3ZhbHVlfSBpbnN0ZWFkLmApO1xuICByZXR1cm4gdmFsdWU7XG59O1xuZXhwb3J0cy5lbnN1cmVQcmVzZW50ID0gZW5zdXJlUHJlc2VudDtcbi8qKlxuICogUmVhZCBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS5cbiAqXG4gKiBXaWxsIHJldHVybiB1bmRlZmluZWQgaWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGRvZXNuJ3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlxuICovXG5jb25zdCByZWFkRW52ID0gKGVudikgPT4ge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gKF9iID0gKF9hID0gcHJvY2Vzcy5lbnYpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtlbnZdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID9cbiAgICAgICAgX2JcbiAgICAgIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gKF9kID0gKF9jID0gRGVuby5lbnYpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5nZXQpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgP1xuICAgICAgICB2b2lkIDBcbiAgICAgIDogX2QuY2FsbChfYywgZW52KTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbmV4cG9ydHMucmVhZEVudiA9IHJlYWRFbnY7XG5jb25zdCBjb2VyY2VJbnRlZ2VyID0gKHZhbHVlKSA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSk7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSByZXR1cm4gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgY29lcmNlICR7dmFsdWV9ICh0eXBlOiAke3R5cGVvZiB2YWx1ZX0pIGludG8gYSBudW1iZXJgKTtcbn07XG5leHBvcnRzLmNvZXJjZUludGVnZXIgPSBjb2VyY2VJbnRlZ2VyO1xuY29uc3QgY29lcmNlRmxvYXQgPSAodmFsdWUpID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHJldHVybiB2YWx1ZTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgY29lcmNlICR7dmFsdWV9ICh0eXBlOiAke3R5cGVvZiB2YWx1ZX0pIGludG8gYSBudW1iZXJgKTtcbn07XG5leHBvcnRzLmNvZXJjZUZsb2F0ID0gY29lcmNlRmxvYXQ7XG5jb25zdCBjb2VyY2VCb29sZWFuID0gKHZhbHVlKSA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykgcmV0dXJuIHZhbHVlO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHZhbHVlID09PSAndHJ1ZSc7XG4gIHJldHVybiBCb29sZWFuKHZhbHVlKTtcbn07XG5leHBvcnRzLmNvZXJjZUJvb2xlYW4gPSBjb2VyY2VCb29sZWFuO1xuY29uc3QgbWF5YmVDb2VyY2VJbnRlZ2VyID0gKHZhbHVlKSA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gKDAsIGV4cG9ydHMuY29lcmNlSW50ZWdlcikodmFsdWUpO1xufTtcbmV4cG9ydHMubWF5YmVDb2VyY2VJbnRlZ2VyID0gbWF5YmVDb2VyY2VJbnRlZ2VyO1xuY29uc3QgbWF5YmVDb2VyY2VGbG9hdCA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuICgwLCBleHBvcnRzLmNvZXJjZUZsb2F0KSh2YWx1ZSk7XG59O1xuZXhwb3J0cy5tYXliZUNvZXJjZUZsb2F0ID0gbWF5YmVDb2VyY2VGbG9hdDtcbmNvbnN0IG1heWJlQ29lcmNlQm9vbGVhbiA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuICgwLCBleHBvcnRzLmNvZXJjZUJvb2xlYW4pKHZhbHVlKTtcbn07XG5leHBvcnRzLm1heWJlQ29lcmNlQm9vbGVhbiA9IG1heWJlQ29lcmNlQm9vbGVhbjtcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zNDQ5MTI4N1xuZnVuY3Rpb24gaXNFbXB0eU9iaihvYmopIHtcbiAgaWYgKCFvYmopIHJldHVybiB0cnVlO1xuICBmb3IgKGNvbnN0IF9rIGluIG9iaikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydHMuaXNFbXB0eU9iaiA9IGlzRW1wdHlPYmo7XG4vLyBodHRwczovL2VzbGludC5vcmcvZG9jcy9sYXRlc3QvcnVsZXMvbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG5mdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5leHBvcnRzLmhhc093biA9IGhhc093bjtcbmZ1bmN0aW9uIGRlYnVnKGFjdGlvbiwgLi4uYXJncykge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52WydERUJVRyddID09PSAndHJ1ZScpIHtcbiAgICBjb25zb2xlLmxvZyhgT3BlbkFJOkRFQlVHOiR7YWN0aW9ufWAsIC4uLmFyZ3MpO1xuICB9XG59XG5leHBvcnRzLmRlYnVnID0gZGVidWc7XG4vKipcbiAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXG4gKi9cbmNvbnN0IHV1aWQ0ID0gKCkgPT4ge1xuICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCAoYykgPT4ge1xuICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDA7XG4gICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICB9KTtcbn07XG5jb25zdCBpc1J1bm5pbmdJbkJyb3dzZXIgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnXG4gICk7XG59O1xuZXhwb3J0cy5pc1J1bm5pbmdJbkJyb3dzZXIgPSBpc1J1bm5pbmdJbkJyb3dzZXI7XG5jb25zdCBpc0hlYWRlcnNQcm90b2NvbCA9IChoZWFkZXJzKSA9PiB7XG4gIHJldHVybiB0eXBlb2YgKGhlYWRlcnMgPT09IG51bGwgfHwgaGVhZGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaGVhZGVycy5nZXQpID09PSAnZnVuY3Rpb24nO1xufTtcbmV4cG9ydHMuaXNIZWFkZXJzUHJvdG9jb2wgPSBpc0hlYWRlcnNQcm90b2NvbDtcbmNvbnN0IGdldEhlYWRlciA9IChoZWFkZXJzLCBrZXkpID0+IHtcbiAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgaWYgKCgwLCBleHBvcnRzLmlzSGVhZGVyc1Byb3RvY29sKShoZWFkZXJzKSkgcmV0dXJuIGhlYWRlcnMuZ2V0KGtleSkgfHwgaGVhZGVycy5nZXQobG93ZXJLZXkpO1xuICBjb25zdCB2YWx1ZSA9IGhlYWRlcnNba2V5XSB8fCBoZWFkZXJzW2xvd2VyS2V5XTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgaWYgKHZhbHVlLmxlbmd0aCA8PSAxKSByZXR1cm4gdmFsdWVbMF07XG4gICAgY29uc29sZS53YXJuKGBSZWNlaXZlZCAke3ZhbHVlLmxlbmd0aH0gZW50cmllcyBmb3IgdGhlICR7a2V5fSBoZWFkZXIsIHVzaW5nIHRoZSBmaXJzdCBlbnRyeS5gKTtcbiAgICByZXR1cm4gdmFsdWVbMF07XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufTtcbmV4cG9ydHMuZ2V0SGVhZGVyID0gZ2V0SGVhZGVyO1xuLyoqXG4gKiBFbmNvZGVzIGEgc3RyaW5nIHRvIEJhc2U2NCBmb3JtYXQuXG4gKi9cbmNvbnN0IHRvQmFzZTY0ID0gKHN0cikgPT4ge1xuICBpZiAoIXN0cikgcmV0dXJuICcnO1xuICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oc3RyKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBidG9hICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBidG9hKHN0cik7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZ2VuZXJhdGUgYjY0IHN0cmluZzsgRXhwZWN0ZWQgYEJ1ZmZlcmAgb3IgYGJ0b2FgIHRvIGJlIGRlZmluZWQnKTtcbn07XG5leHBvcnRzLnRvQmFzZTY0ID0gdG9CYXNlNjQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3JlLmpzLm1hcFxuIiwiaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gJy4vdmVyc2lvbic7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tICcuL3N0cmVhbWluZyc7XG5pbXBvcnQgeyBBUElFcnJvciwgQVBJQ29ubmVjdGlvbkVycm9yLCBBUElDb25uZWN0aW9uVGltZW91dEVycm9yLCBBUElVc2VyQWJvcnRFcnJvciB9IGZyb20gJy4vZXJyb3InO1xuaW1wb3J0IHR5cGUgeyBSZWFkYWJsZSB9IGZyb20gJy4vX3NoaW1zL25vZGUtcmVhZGFibGUnO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdEFnZW50LCB0eXBlIEFnZW50IH0gZnJvbSAnLi9fc2hpbXMvYWdlbnQnO1xuaW1wb3J0IHtcbiAgZmV0Y2gsXG4gIGlzUG9seWZpbGxlZCBhcyBmZXRjaElzUG9seWZpbGxlZCxcbiAgdHlwZSBSZXF1ZXN0SW5mbyxcbiAgdHlwZSBSZXF1ZXN0SW5pdCxcbiAgdHlwZSBSZXNwb25zZSxcbiAgdHlwZSBIZWFkZXJzSW5pdCxcbn0gZnJvbSAnLi9fc2hpbXMvZmV0Y2guanMnO1xuZXhwb3J0IHsgdHlwZSBSZXNwb25zZSB9O1xuaW1wb3J0IHsgaXNNdWx0aXBhcnRCb2R5IH0gZnJvbSAnLi91cGxvYWRzJztcbmV4cG9ydCB7XG4gIG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zLFxuICBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMsXG4gIGNyZWF0ZUZvcm0sXG4gIHR5cGUgVXBsb2FkYWJsZSxcbn0gZnJvbSAnLi91cGxvYWRzJztcblxuY29uc3QgTUFYX1JFVFJJRVMgPSAyO1xuXG5leHBvcnQgdHlwZSBGZXRjaCA9ICh1cmw6IFJlcXVlc3RJbmZvLCBpbml0PzogUmVxdWVzdEluaXQpID0+IFByb21pc2U8UmVzcG9uc2U+O1xuXG50eXBlIFByb21pc2VPclZhbHVlPFQ+ID0gVCB8IFByb21pc2U8VD47XG5cbnR5cGUgQVBJUmVzcG9uc2VQcm9wcyA9IHtcbiAgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zO1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBkZWZhdWx0UGFyc2VSZXNwb25zZTxUPihwcm9wczogQVBJUmVzcG9uc2VQcm9wcyk6IFByb21pc2U8VD4ge1xuICBjb25zdCB7IHJlc3BvbnNlIH0gPSBwcm9wcztcbiAgaWYgKHByb3BzLm9wdGlvbnMuc3RyZWFtKSB7XG4gICAgLy8gTm90ZTogdGhlcmUgaXMgYW4gaW52YXJpYW50IGhlcmUgdGhhdCBpc24ndCByZXByZXNlbnRlZCBpbiB0aGUgdHlwZSBzeXN0ZW1cbiAgICAvLyB0aGF0IGlmIHlvdSBzZXQgYHN0cmVhbTogdHJ1ZWAgdGhlIHJlc3BvbnNlIHR5cGUgbXVzdCBhbHNvIGJlIGBTdHJlYW08VD5gXG4gICAgcmV0dXJuIG5ldyBTdHJlYW0ocmVzcG9uc2UsIHByb3BzLmNvbnRyb2xsZXIpIGFzIGFueTtcbiAgfVxuXG4gIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICBpZiAoY29udGVudFR5cGU/LmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIGpzb24pO1xuXG4gICAgcmV0dXJuIGpzb24gYXMgVDtcbiAgfVxuXG4gIC8vIFRPRE8gaGFuZGxlIGJsb2IsIGFycmF5YnVmZmVyLCBvdGhlciBjb250ZW50IHR5cGVzLCBldGMuXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gIGRlYnVnKCdyZXNwb25zZScsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UudXJsLCByZXNwb25zZS5oZWFkZXJzLCB0ZXh0KTtcbiAgcmV0dXJuIHRleHQgYXMgVDtcbn1cblxuLyoqXG4gKiBBIHN1YmNsYXNzIG9mIGBQcm9taXNlYCBwcm92aWRpbmcgYWRkaXRpb25hbCBoZWxwZXIgbWV0aG9kc1xuICogZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIFNESy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFQSVByb21pc2U8VD4gZXh0ZW5kcyBQcm9taXNlPFQ+IHtcbiAgcHJpdmF0ZSBwYXJzZWRQcm9taXNlOiBQcm9taXNlPFQ+IHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVzcG9uc2VQcm9taXNlOiBQcm9taXNlPEFQSVJlc3BvbnNlUHJvcHM+LFxuICAgIHByaXZhdGUgcGFyc2VSZXNwb25zZTogKHByb3BzOiBBUElSZXNwb25zZVByb3BzKSA9PiBQcm9taXNlT3JWYWx1ZTxUPiA9IGRlZmF1bHRQYXJzZVJlc3BvbnNlLFxuICApIHtcbiAgICBzdXBlcigocmVzb2x2ZSkgPT4ge1xuICAgICAgLy8gdGhpcyBpcyBtYXliZSBhIGJpdCB3ZWlyZCBidXQgdGhpcyBoYXMgdG8gYmUgYSBuby1vcCB0byBub3QgaW1wbGljaXRseVxuICAgICAgLy8gcGFyc2UgdGhlIHJlc3BvbnNlIGJvZHk7IGluc3RlYWQgLnRoZW4sIC5jYXRjaCwgLmZpbmFsbHkgYXJlIG92ZXJyaWRkZW5cbiAgICAgIC8vIHRvIHBhcnNlIHRoZSByZXNwb25zZVxuICAgICAgcmVzb2x2ZShudWxsIGFzIGFueSk7XG4gICAgfSk7XG4gIH1cblxuICBfdGhlblVud3JhcDxVPih0cmFuc2Zvcm06IChkYXRhOiBUKSA9PiBVKTogQVBJUHJvbWlzZTxVPiB7XG4gICAgcmV0dXJuIG5ldyBBUElQcm9taXNlKHRoaXMucmVzcG9uc2VQcm9taXNlLCBhc3luYyAocHJvcHMpID0+IHRyYW5zZm9ybShhd2FpdCB0aGlzLnBhcnNlUmVzcG9uc2UocHJvcHMpKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UgaW5zdGVhZCBvZiBwYXJzaW5nIHRoZSByZXNwb25zZVxuICAgKiBkYXRhLlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBwYXJzZSB0aGUgcmVzcG9uc2UgYm9keSBidXQgc3RpbGwgZ2V0IHRoZSBgUmVzcG9uc2VgXG4gICAqIGluc3RhbmNlLCB5b3UgY2FuIHVzZSB7QGxpbmsgd2l0aFJlc3BvbnNlKCl9LlxuICAgKi9cbiAgYXNSZXNwb25zZSgpOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2VQcm9taXNlLnRoZW4oKHApID0+IHAucmVzcG9uc2UpO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwYXJzZWQgcmVzcG9uc2UgZGF0YSBhbmQgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlLlxuICAgKlxuICAgKiBJZiB5b3UganVzdCB3YW50IHRvIGdldCB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2Ugd2l0aG91dCBwYXJzaW5nIGl0LFxuICAgKiB5b3UgY2FuIHVzZSB7QGxpbmsgYXNSZXNwb25zZSgpfS5cbiAgICovXG4gIGFzeW5jIHdpdGhSZXNwb25zZSgpOiBQcm9taXNlPHsgZGF0YTogVDsgcmVzcG9uc2U6IFJlc3BvbnNlIH0+IHtcbiAgICBjb25zdCBbZGF0YSwgcmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMucGFyc2UoKSwgdGhpcy5hc1Jlc3BvbnNlKCldKTtcbiAgICByZXR1cm4geyBkYXRhLCByZXNwb25zZSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZSgpOiBQcm9taXNlPFQ+IHtcbiAgICBpZiAoIXRoaXMucGFyc2VkUHJvbWlzZSkge1xuICAgICAgdGhpcy5wYXJzZWRQcm9taXNlID0gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbih0aGlzLnBhcnNlUmVzcG9uc2UpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wYXJzZWRQcm9taXNlO1xuICB9XG5cbiAgb3ZlcnJpZGUgdGhlbjxUUmVzdWx0MSA9IFQsIFRSZXN1bHQyID0gbmV2ZXI+KFxuICAgIG9uZnVsZmlsbGVkPzogKCh2YWx1ZTogVCkgPT4gVFJlc3VsdDEgfCBQcm9taXNlTGlrZTxUUmVzdWx0MT4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgICBvbnJlamVjdGVkPzogKChyZWFzb246IGFueSkgPT4gVFJlc3VsdDIgfCBQcm9taXNlTGlrZTxUUmVzdWx0Mj4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgKTogUHJvbWlzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS50aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGNhdGNoPFRSZXN1bHQgPSBuZXZlcj4oXG4gICAgb25yZWplY3RlZD86ICgocmVhc29uOiBhbnkpID0+IFRSZXN1bHQgfCBQcm9taXNlTGlrZTxUUmVzdWx0PikgfCB1bmRlZmluZWQgfCBudWxsLFxuICApOiBQcm9taXNlPFQgfCBUUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS5jYXRjaChvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGZpbmFsbHkob25maW5hbGx5PzogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkIHwgbnVsbCk6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiB0aGlzLnBhcnNlKCkuZmluYWxseShvbmZpbmFsbHkpO1xuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBUElDbGllbnQge1xuICBiYXNlVVJMOiBzdHJpbmc7XG4gIG1heFJldHJpZXM6IG51bWJlcjtcbiAgdGltZW91dDogbnVtYmVyO1xuICBodHRwQWdlbnQ6IEFnZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgZmV0Y2g6IEZldGNoO1xuICBwcm90ZWN0ZWQgaWRlbXBvdGVuY3lIZWFkZXI/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGJhc2VVUkwsXG4gICAgbWF4UmV0cmllcyxcbiAgICB0aW1lb3V0ID0gNjAwMDAwLCAvLyAxMCBtaW51dGVzXG4gICAgaHR0cEFnZW50LFxuICAgIGZldGNoOiBvdmVycmlkZW5GZXRjaCxcbiAgfToge1xuICAgIGJhc2VVUkw6IHN0cmluZztcbiAgICBtYXhSZXRyaWVzPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIHRpbWVvdXQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICBodHRwQWdlbnQ6IEFnZW50IHwgdW5kZWZpbmVkO1xuICAgIGZldGNoOiBGZXRjaCB8IHVuZGVmaW5lZDtcbiAgfSkge1xuICAgIHRoaXMuYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgdGhpcy5tYXhSZXRyaWVzID0gdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIoJ21heFJldHJpZXMnLCBtYXhSZXRyaWVzID8/IE1BWF9SRVRSSUVTKTtcbiAgICB0aGlzLnRpbWVvdXQgPSB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlcigndGltZW91dCcsIHRpbWVvdXQpO1xuICAgIHRoaXMuaHR0cEFnZW50ID0gaHR0cEFnZW50O1xuXG4gICAgdGhpcy5mZXRjaCA9IG92ZXJyaWRlbkZldGNoID8/IGZldGNoO1xuICB9XG5cbiAgcHJvdGVjdGVkIGF1dGhIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gZGVmYXVsdCBoZWFkZXJzLCBmb3IgZXhhbXBsZTpcbiAgICpcbiAgICogIHtcbiAgICogICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMoKSxcbiAgICogICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAxMjMnLFxuICAgKiAgfVxuICAgKi9cbiAgcHJvdGVjdGVkIGRlZmF1bHRIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1VzZXItQWdlbnQnOiB0aGlzLmdldFVzZXJBZ2VudCgpLFxuICAgICAgLi4uZ2V0UGxhdGZvcm1IZWFkZXJzKCksXG4gICAgICAuLi50aGlzLmF1dGhIZWFkZXJzKG9wdHMpLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZGVmYXVsdFF1ZXJ5KCk6IERlZmF1bHRRdWVyeSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gaGVhZGVycyB2YWxpZGF0aW9uOlxuICAgKi9cbiAgcHJvdGVjdGVkIHZhbGlkYXRlSGVhZGVycyhoZWFkZXJzOiBIZWFkZXJzLCBjdXN0b21IZWFkZXJzOiBIZWFkZXJzKSB7fVxuXG4gIHByb3RlY3RlZCBkZWZhdWx0SWRlbXBvdGVuY3lLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYHN0YWlubGVzcy1ub2RlLXJldHJ5LSR7dXVpZDQoKX1gO1xuICB9XG5cbiAgZ2V0PFJlcSBleHRlbmRzIHt9LCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdnZXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHBvc3Q8UmVxIGV4dGVuZHMge30sIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ3Bvc3QnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHBhdGNoPFJlcSBleHRlbmRzIHt9LCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwYXRjaCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcHV0PFJlcSBleHRlbmRzIHt9LCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwdXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIGRlbGV0ZTxSZXEgZXh0ZW5kcyB7fSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgnZGVsZXRlJywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwcml2YXRlIG1ldGhvZFJlcXVlc3Q8UmVxIGV4dGVuZHMge30sIFJzcD4oXG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kLFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4sXG4gICk6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChQcm9taXNlLnJlc29sdmUob3B0cykudGhlbigob3B0cykgPT4gKHsgbWV0aG9kLCBwYXRoLCAuLi5vcHRzIH0pKSk7XG4gIH1cblxuICBnZXRBUElMaXN0PEl0ZW0sIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiA9IEFic3RyYWN0UGFnZTxJdGVtPj4oXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogYW55W10pID0+IFBhZ2VDbGFzcyxcbiAgICBvcHRzPzogUmVxdWVzdE9wdGlvbnM8YW55PixcbiAgKTogUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdEFQSUxpc3QoUGFnZSwgeyBtZXRob2Q6ICdnZXQnLCBwYXRoLCAuLi5vcHRzIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDb250ZW50TGVuZ3RoKGJvZHk6IHVua25vd24pOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5ieXRlTGVuZ3RoKGJvZHksICd1dGY4JykudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBlbmNvZGVkID0gZW5jb2Rlci5lbmNvZGUoYm9keSk7XG4gICAgICAgIHJldHVybiBlbmNvZGVkLmxlbmd0aC50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYnVpbGRSZXF1ZXN0PFJlcSBleHRlbmRzIHt9PihcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4sXG4gICk6IHsgcmVxOiBSZXF1ZXN0SW5pdDsgdXJsOiBzdHJpbmc7IHRpbWVvdXQ6IG51bWJlciB9IHtcbiAgICBjb25zdCB7IG1ldGhvZCwgcGF0aCwgcXVlcnksIGhlYWRlcnM6IGhlYWRlcnMgPSB7fSB9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IGJvZHkgPVxuICAgICAgaXNNdWx0aXBhcnRCb2R5KG9wdGlvbnMuYm9keSkgPyBvcHRpb25zLmJvZHkuYm9keVxuICAgICAgOiBvcHRpb25zLmJvZHkgPyBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHksIG51bGwsIDIpXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgY29udGVudExlbmd0aCA9IHRoaXMuY2FsY3VsYXRlQ29udGVudExlbmd0aChib2R5KTtcblxuICAgIGNvbnN0IHVybCA9IHRoaXMuYnVpbGRVUkwocGF0aCEsIHF1ZXJ5KTtcbiAgICBpZiAoJ3RpbWVvdXQnIGluIG9wdGlvbnMpIHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0Jywgb3B0aW9ucy50aW1lb3V0KTtcbiAgICBjb25zdCB0aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0ID8/IHRoaXMudGltZW91dDtcbiAgICBjb25zdCBodHRwQWdlbnQgPSBvcHRpb25zLmh0dHBBZ2VudCA/PyB0aGlzLmh0dHBBZ2VudCA/PyBnZXREZWZhdWx0QWdlbnQodXJsKTtcbiAgICBjb25zdCBtaW5BZ2VudFRpbWVvdXQgPSB0aW1lb3V0ICsgMTAwMDtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgKGh0dHBBZ2VudCBhcyBhbnkpPy5vcHRpb25zPy50aW1lb3V0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgbWluQWdlbnRUaW1lb3V0ID4gKChodHRwQWdlbnQgYXMgYW55KS5vcHRpb25zLnRpbWVvdXQgPz8gMClcbiAgICApIHtcbiAgICAgIC8vIEFsbG93IGFueSBnaXZlbiByZXF1ZXN0IHRvIGJ1bXAgb3VyIGFnZW50IGFjdGl2ZSBzb2NrZXQgdGltZW91dC5cbiAgICAgIC8vIFRoaXMgbWF5IHNlZW0gc3RyYW5nZSwgYnV0IGxlYWtpbmcgYWN0aXZlIHNvY2tldHMgc2hvdWxkIGJlIHJhcmUgYW5kIG5vdCBwYXJ0aWN1bGFybHkgcHJvYmxlbWF0aWMsXG4gICAgICAvLyBhbmQgd2l0aG91dCBtdXRhdGluZyBhZ2VudCB3ZSB3b3VsZCBuZWVkIHRvIGNyZWF0ZSBtb3JlIG9mIHRoZW0uXG4gICAgICAvLyBUaGlzIHRyYWRlb2ZmIG9wdGltaXplcyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICAoaHR0cEFnZW50IGFzIGFueSkub3B0aW9ucy50aW1lb3V0ID0gbWluQWdlbnRUaW1lb3V0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlkZW1wb3RlbmN5SGVhZGVyICYmIG1ldGhvZCAhPT0gJ2dldCcpIHtcbiAgICAgIGlmICghb3B0aW9ucy5pZGVtcG90ZW5jeUtleSkgb3B0aW9ucy5pZGVtcG90ZW5jeUtleSA9IHRoaXMuZGVmYXVsdElkZW1wb3RlbmN5S2V5KCk7XG4gICAgICBoZWFkZXJzW3RoaXMuaWRlbXBvdGVuY3lIZWFkZXJdID0gb3B0aW9ucy5pZGVtcG90ZW5jeUtleTtcbiAgICB9XG5cbiAgICBjb25zdCByZXFIZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgLi4uKGNvbnRlbnRMZW5ndGggJiYgeyAnQ29udGVudC1MZW5ndGgnOiBjb250ZW50TGVuZ3RoIH0pLFxuICAgICAgLi4udGhpcy5kZWZhdWx0SGVhZGVycyhvcHRpb25zKSxcbiAgICAgIC4uLmhlYWRlcnMsXG4gICAgfTtcbiAgICAvLyBsZXQgYnVpbHRpbiBmZXRjaCBzZXQgdGhlIENvbnRlbnQtVHlwZSBmb3IgbXVsdGlwYXJ0IGJvZGllc1xuICAgIGlmIChpc011bHRpcGFydEJvZHkob3B0aW9ucy5ib2R5KSAmJiAhZmV0Y2hJc1BvbHlmaWxsZWQpIHtcbiAgICAgIGRlbGV0ZSByZXFIZWFkZXJzWydDb250ZW50LVR5cGUnXTtcbiAgICB9XG5cbiAgICAvLyBTdHJpcCBhbnkgaGVhZGVycyBiZWluZyBleHBsaWNpdGx5IG9taXR0ZWQgd2l0aCBudWxsXG4gICAgT2JqZWN0LmtleXMocmVxSGVhZGVycykuZm9yRWFjaCgoa2V5KSA9PiByZXFIZWFkZXJzW2tleV0gPT09IG51bGwgJiYgZGVsZXRlIHJlcUhlYWRlcnNba2V5XSk7XG5cbiAgICBjb25zdCByZXE6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgbWV0aG9kLFxuICAgICAgLi4uKGJvZHkgJiYgeyBib2R5OiBib2R5IGFzIGFueSB9KSxcbiAgICAgIGhlYWRlcnM6IHJlcUhlYWRlcnMsXG4gICAgICAuLi4oaHR0cEFnZW50ICYmIHsgYWdlbnQ6IGh0dHBBZ2VudCB9KSxcbiAgICAgIC8vIEB0cy1pZ25vcmUgbm9kZS1mZXRjaCB1c2VzIGEgY3VzdG9tIEFib3J0U2lnbmFsIHR5cGUgdGhhdCBpc1xuICAgICAgLy8gbm90IGNvbXBhdGlibGUgd2l0aCBzdGFuZGFyZCB3ZWIgdHlwZXNcbiAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwgPz8gbnVsbCxcbiAgICB9O1xuXG4gICAgdGhpcy52YWxpZGF0ZUhlYWRlcnMocmVxSGVhZGVycywgaGVhZGVycyk7XG5cbiAgICByZXR1cm4geyByZXEsIHVybCwgdGltZW91dCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYXMgYSBjYWxsYmFjayBmb3IgbXV0YXRpbmcgdGhlIGdpdmVuIGBSZXF1ZXN0SW5pdGAgb2JqZWN0LlxuICAgKlxuICAgKiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FzZXMgd2hlcmUgeW91IHdhbnQgdG8gYWRkIGNlcnRhaW4gaGVhZGVycyBiYXNlZCBvZmYgb2ZcbiAgICogdGhlIHJlcXVlc3QgcHJvcGVydGllcywgZS5nLiBgbWV0aG9kYCBvciBgdXJsYC5cbiAgICovXG4gIHByb3RlY3RlZCBhc3luYyBwcmVwYXJlUmVxdWVzdChcbiAgICByZXF1ZXN0OiBSZXF1ZXN0SW5pdCxcbiAgICB7IHVybCwgb3B0aW9ucyB9OiB7IHVybDogc3RyaW5nOyBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zIH0sXG4gICk6IFByb21pc2U8dm9pZD4ge31cblxuICBwcm90ZWN0ZWQgcGFyc2VIZWFkZXJzKGhlYWRlcnM6IEhlYWRlcnNJbml0IHwgbnVsbCB8IHVuZGVmaW5lZCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIHJldHVybiAoXG4gICAgICAhaGVhZGVycyA/IHt9XG4gICAgICA6IFN5bWJvbC5pdGVyYXRvciBpbiBoZWFkZXJzID8gT2JqZWN0LmZyb21FbnRyaWVzKEFycmF5LmZyb20oaGVhZGVycykubWFwKChoZWFkZXIpID0+IFsuLi5oZWFkZXJdKSlcbiAgICAgIDogeyAuLi5oZWFkZXJzIH1cbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1ha2VTdGF0dXNFcnJvcihcbiAgICBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogT2JqZWN0IHwgdW5kZWZpbmVkLFxuICAgIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApIHtcbiAgICByZXR1cm4gQVBJRXJyb3IuZ2VuZXJhdGUoc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gIH1cblxuICByZXF1ZXN0PFJlcSBleHRlbmRzIHt9LCBSc3A+KFxuICAgIG9wdGlvbnM6IFByb21pc2VPclZhbHVlPEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxPj4sXG4gICAgcmVtYWluaW5nUmV0cmllczogbnVtYmVyIHwgbnVsbCA9IG51bGwsXG4gICk6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIG5ldyBBUElQcm9taXNlKHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgcmVtYWluaW5nUmV0cmllcykpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdChcbiAgICBvcHRpb25zSW5wdXQ6IFByb21pc2VPclZhbHVlPEZpbmFsUmVxdWVzdE9wdGlvbnM+LFxuICAgIHJldHJpZXNSZW1haW5pbmc6IG51bWJlciB8IG51bGwsXG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBvcHRpb25zSW5wdXQ7XG4gICAgaWYgKHJldHJpZXNSZW1haW5pbmcgPT0gbnVsbCkge1xuICAgICAgcmV0cmllc1JlbWFpbmluZyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgfVxuXG4gICAgY29uc3QgeyByZXEsIHVybCwgdGltZW91dCB9ID0gdGhpcy5idWlsZFJlcXVlc3Qob3B0aW9ucyk7XG5cbiAgICBhd2FpdCB0aGlzLnByZXBhcmVSZXF1ZXN0KHJlcSwgeyB1cmwsIG9wdGlvbnMgfSk7XG5cbiAgICBkZWJ1ZygncmVxdWVzdCcsIHVybCwgb3B0aW9ucywgcmVxLmhlYWRlcnMpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaFdpdGhUaW1lb3V0KHVybCwgcmVxLCB0aW1lb3V0LCBjb250cm9sbGVyKS5jYXRjaChjYXN0VG9FcnJvcik7XG5cbiAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgICAgfVxuICAgICAgaWYgKHJldHJpZXNSZW1haW5pbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cnlSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3BvbnNlLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICB0aHJvdyBuZXcgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcigpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEFQSUNvbm5lY3Rpb25FcnJvcih7IGNhdXNlOiByZXNwb25zZSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBjcmVhdGVSZXNwb25zZUhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBpZiAocmV0cmllc1JlbWFpbmluZyAmJiB0aGlzLnNob3VsZFJldHJ5KHJlc3BvbnNlKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZywgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXJyVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnVW5rbm93bicpO1xuICAgICAgY29uc3QgZXJySlNPTiA9IHNhZmVKU09OKGVyclRleHQpO1xuICAgICAgY29uc3QgZXJyTWVzc2FnZSA9IGVyckpTT04gPyB1bmRlZmluZWQgOiBlcnJUZXh0O1xuXG4gICAgICBkZWJ1ZygncmVzcG9uc2UnLCByZXNwb25zZS5zdGF0dXMsIHVybCwgcmVzcG9uc2VIZWFkZXJzLCBlcnJNZXNzYWdlKTtcblxuICAgICAgY29uc3QgZXJyID0gdGhpcy5tYWtlU3RhdHVzRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCBlcnJKU09OLCBlcnJNZXNzYWdlLCByZXNwb25zZUhlYWRlcnMpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgIHJldHVybiB7IHJlc3BvbnNlLCBvcHRpb25zLCBjb250cm9sbGVyIH07XG4gIH1cblxuICByZXF1ZXN0QVBJTGlzdDxJdGVtID0gdW5rbm93biwgUGFnZUNsYXNzIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+ID0gQWJzdHJhY3RQYWdlPEl0ZW0+PihcbiAgICBQYWdlOiBuZXcgKC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgQWJzdHJhY3RQYWdlPikgPT4gUGFnZUNsYXNzLFxuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMsXG4gICk6IFBhZ2VQcm9taXNlPFBhZ2VDbGFzcywgSXRlbT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIG51bGwpO1xuICAgIHJldHVybiBuZXcgUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPih0aGlzLCByZXF1ZXN0LCBQYWdlKTtcbiAgfVxuXG4gIGJ1aWxkVVJMPFJlcT4ocGF0aDogc3RyaW5nLCBxdWVyeTogUmVxIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBjb25zdCB1cmwgPVxuICAgICAgaXNBYnNvbHV0ZVVSTChwYXRoKSA/XG4gICAgICAgIG5ldyBVUkwocGF0aClcbiAgICAgIDogbmV3IFVSTCh0aGlzLmJhc2VVUkwgKyAodGhpcy5iYXNlVVJMLmVuZHNXaXRoKCcvJykgJiYgcGF0aC5zdGFydHNXaXRoKCcvJykgPyBwYXRoLnNsaWNlKDEpIDogcGF0aCkpO1xuXG4gICAgY29uc3QgZGVmYXVsdFF1ZXJ5ID0gdGhpcy5kZWZhdWx0UXVlcnkoKTtcbiAgICBpZiAoIWlzRW1wdHlPYmooZGVmYXVsdFF1ZXJ5KSkge1xuICAgICAgcXVlcnkgPSB7IC4uLmRlZmF1bHRRdWVyeSwgLi4ucXVlcnkgfSBhcyBSZXE7XG4gICAgfVxuXG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICB1cmwuc2VhcmNoID0gdGhpcy5zdHJpbmdpZnlRdWVyeShxdWVyeSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHN0cmluZyB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KVxuICAgICAgLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJylcbiAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDYW5ub3Qgc3RyaW5naWZ5IHR5cGUgJHt0eXBlb2YgdmFsdWV9OyBFeHBlY3RlZCBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb3IgbnVsbC4gSWYgeW91IG5lZWQgdG8gcGFzcyBuZXN0ZWQgcXVlcnkgcGFyYW1ldGVycywgeW91IGNhbiBtYW51YWxseSBlbmNvZGUgdGhlbSwgZS5nLiB7IHF1ZXJ5OiB7ICdmb29ba2V5MV0nOiB2YWx1ZTEsICdmb29ba2V5Ml0nOiB2YWx1ZTIgfSB9LCBhbmQgcGxlYXNlIG9wZW4gYSBHaXRIdWIgaXNzdWUgcmVxdWVzdGluZyBiZXR0ZXIgc3VwcG9ydCBmb3IgeW91ciB1c2UgY2FzZS5gLFxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCcmJyk7XG4gIH1cblxuICBhc3luYyBmZXRjaFdpdGhUaW1lb3V0KFxuICAgIHVybDogUmVxdWVzdEluZm8sXG4gICAgaW5pdDogUmVxdWVzdEluaXQgfCB1bmRlZmluZWQsXG4gICAgbXM6IG51bWJlcixcbiAgICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4gICk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IHNpZ25hbCwgLi4ub3B0aW9ucyB9ID0gaW5pdCB8fCB7fTtcbiAgICBpZiAoc2lnbmFsKSBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiBjb250cm9sbGVyLmFib3J0KCkpO1xuXG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCBtcyk7XG5cbiAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0Q2xpZW50KClcbiAgICAgIC5mZXRjaCh1cmwsIHsgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCBhcyBhbnksIC4uLm9wdGlvbnMgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0UmVxdWVzdENsaWVudCgpOiBSZXF1ZXN0Q2xpZW50IHtcbiAgICByZXR1cm4geyBmZXRjaDogdGhpcy5mZXRjaCB9O1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRSZXRyeShyZXNwb25zZTogUmVzcG9uc2UpOiBib29sZWFuIHtcbiAgICAvLyBOb3RlIHRoaXMgaXMgbm90IGEgc3RhbmRhcmQgaGVhZGVyLlxuICAgIGNvbnN0IHNob3VsZFJldHJ5SGVhZGVyID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtc2hvdWxkLXJldHJ5Jyk7XG5cbiAgICAvLyBJZiB0aGUgc2VydmVyIGV4cGxpY2l0bHkgc2F5cyB3aGV0aGVyIG9yIG5vdCB0byByZXRyeSwgb2JleS5cbiAgICBpZiAoc2hvdWxkUmV0cnlIZWFkZXIgPT09ICd0cnVlJykgcmV0dXJuIHRydWU7XG4gICAgaWYgKHNob3VsZFJldHJ5SGVhZGVyID09PSAnZmFsc2UnKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBSZXRyeSBvbiBsb2NrIHRpbWVvdXRzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBSZXRyeSBvbiByYXRlIGxpbWl0cy5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gUmV0cnkgaW50ZXJuYWwgZXJyb3JzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNTAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmV0cnlSZXF1ZXN0KFxuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMsXG4gICAgcmV0cmllc1JlbWFpbmluZzogbnVtYmVyLFxuICAgIHJlc3BvbnNlSGVhZGVycz86IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4ge1xuICAgIHJldHJpZXNSZW1haW5pbmcgLT0gMTtcblxuICAgIC8vIEFib3V0IHRoZSBSZXRyeS1BZnRlciBoZWFkZXI6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvSGVhZGVycy9SZXRyeS1BZnRlclxuICAgIC8vXG4gICAgLy8gVE9ETzogd2UgbWF5IHdhbnQgdG8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSBoZWFkZXIgaXMgdXNpbmcgdGhlIGh0dHAtZGF0ZSBzeW50YXg6IFwiUmV0cnktQWZ0ZXI6IDxodHRwLWRhdGU+XCIuXG4gICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvSGVhZGVycy9SZXRyeS1BZnRlciNzeW50YXggZm9yIGRldGFpbHMuXG4gICAgY29uc3QgcmV0cnlBZnRlciA9IHBhcnNlSW50KHJlc3BvbnNlSGVhZGVycz8uWydyZXRyeS1hZnRlciddIHx8ICcnKTtcblxuICAgIGNvbnN0IG1heFJldHJpZXMgPSBvcHRpb25zLm1heFJldHJpZXMgPz8gdGhpcy5tYXhSZXRyaWVzO1xuICAgIGNvbnN0IHRpbWVvdXQgPSB0aGlzLmNhbGN1bGF0ZVJldHJ5VGltZW91dFNlY29uZHMocmV0cmllc1JlbWFpbmluZywgcmV0cnlBZnRlciwgbWF4UmV0cmllcykgKiAxMDAwO1xuICAgIGF3YWl0IHNsZWVwKHRpbWVvdXQpO1xuXG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZyk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJldHJ5VGltZW91dFNlY29uZHMoXG4gICAgcmV0cmllc1JlbWFpbmluZzogbnVtYmVyLFxuICAgIHJldHJ5QWZ0ZXI6IG51bWJlcixcbiAgICBtYXhSZXRyaWVzOiBudW1iZXIsXG4gICk6IG51bWJlciB7XG4gICAgY29uc3QgaW5pdGlhbFJldHJ5RGVsYXkgPSAwLjU7XG4gICAgY29uc3QgbWF4UmV0cnlEZWxheSA9IDI7XG5cbiAgICAvLyBJZiB0aGUgQVBJIGFza3MgdXMgdG8gd2FpdCBhIGNlcnRhaW4gYW1vdW50IG9mIHRpbWUgKGFuZCBpdCdzIGEgcmVhc29uYWJsZSBhbW91bnQpLFxuICAgIC8vIGp1c3QgZG8gd2hhdCBpdCBzYXlzLlxuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKHJldHJ5QWZ0ZXIpICYmIHJldHJ5QWZ0ZXIgPD0gNjApIHtcbiAgICAgIHJldHVybiByZXRyeUFmdGVyO1xuICAgIH1cblxuICAgIGNvbnN0IG51bVJldHJpZXMgPSBtYXhSZXRyaWVzIC0gcmV0cmllc1JlbWFpbmluZztcblxuICAgIC8vIEFwcGx5IGV4cG9uZW50aWFsIGJhY2tvZmYsIGJ1dCBub3QgbW9yZSB0aGFuIHRoZSBtYXguXG4gICAgY29uc3Qgc2xlZXBTZWNvbmRzID0gTWF0aC5taW4oaW5pdGlhbFJldHJ5RGVsYXkgKiBNYXRoLnBvdyhudW1SZXRyaWVzIC0gMSwgMiksIG1heFJldHJ5RGVsYXkpO1xuXG4gICAgLy8gQXBwbHkgc29tZSBqaXR0ZXIsIHBsdXMtb3ItbWludXMgaGFsZiBhIHNlY29uZC5cbiAgICBjb25zdCBqaXR0ZXIgPSBNYXRoLnJhbmRvbSgpIC0gMC41O1xuXG4gICAgcmV0dXJuIHNsZWVwU2Vjb25kcyArIGppdHRlcjtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VXNlckFnZW50KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29uc3RydWN0b3IubmFtZX0vSlMgJHtWRVJTSU9OfWA7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSVJlc291cmNlIHtcbiAgcHJvdGVjdGVkIGNsaWVudDogQVBJQ2xpZW50O1xuICBjb25zdHJ1Y3RvcihjbGllbnQ6IEFQSUNsaWVudCkge1xuICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuXG4gICAgdGhpcy5nZXQgPSBjbGllbnQuZ2V0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnBvc3QgPSBjbGllbnQucG9zdC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wYXRjaCA9IGNsaWVudC5wYXRjaC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wdXQgPSBjbGllbnQucHV0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLmRlbGV0ZSA9IGNsaWVudC5kZWxldGUuYmluZChjbGllbnQpO1xuICAgIHRoaXMuZ2V0QVBJTGlzdCA9IGNsaWVudC5nZXRBUElMaXN0LmJpbmQoY2xpZW50KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQ6IEFQSUNsaWVudFsnZ2V0J107XG4gIHByb3RlY3RlZCBwb3N0OiBBUElDbGllbnRbJ3Bvc3QnXTtcbiAgcHJvdGVjdGVkIHBhdGNoOiBBUElDbGllbnRbJ3BhdGNoJ107XG4gIHByb3RlY3RlZCBwdXQ6IEFQSUNsaWVudFsncHV0J107XG4gIHByb3RlY3RlZCBkZWxldGU6IEFQSUNsaWVudFsnZGVsZXRlJ107XG4gIHByb3RlY3RlZCBnZXRBUElMaXN0OiBBUElDbGllbnRbJ2dldEFQSUxpc3QnXTtcbn1cblxuZXhwb3J0IHR5cGUgUGFnZUluZm8gPSB7IHVybDogVVJMIH0gfCB7IHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsIH07XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdFBhZ2U8SXRlbT4gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+IHtcbiAgI2NsaWVudDogQVBJQ2xpZW50O1xuICBwcm90ZWN0ZWQgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucztcblxuICBwcm90ZWN0ZWQgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBwcm90ZWN0ZWQgYm9keTogdW5rbm93bjtcblxuICBjb25zdHJ1Y3RvcihjbGllbnQ6IEFQSUNsaWVudCwgcmVzcG9uc2U6IFJlc3BvbnNlLCBib2R5OiB1bmtub3duLCBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zKSB7XG4gICAgdGhpcy4jY2xpZW50ID0gY2xpZW50O1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gIH1cblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgVXNlIG5leHRQYWdlSW5mbyBpbnN0ZWFkXG4gICAqL1xuICBhYnN0cmFjdCBuZXh0UGFnZVBhcmFtcygpOiBQYXJ0aWFsPFJlY29yZDxzdHJpbmcsIHVua25vd24+PiB8IG51bGw7XG4gIGFic3RyYWN0IG5leHRQYWdlSW5mbygpOiBQYWdlSW5mbyB8IG51bGw7XG5cbiAgYWJzdHJhY3QgZ2V0UGFnaW5hdGVkSXRlbXMoKTogSXRlbVtdO1xuXG4gIGhhc05leHRQYWdlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5nZXRQYWdpbmF0ZWRJdGVtcygpO1xuICAgIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMubmV4dFBhZ2VJbmZvKCkgIT0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldE5leHRQYWdlKCk6IFByb21pc2U8dGhpcz4ge1xuICAgIGNvbnN0IG5leHRJbmZvID0gdGhpcy5uZXh0UGFnZUluZm8oKTtcbiAgICBpZiAoIW5leHRJbmZvKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdObyBuZXh0IHBhZ2UgZXhwZWN0ZWQ7IHBsZWFzZSBjaGVjayBgLmhhc05leHRQYWdlKClgIGJlZm9yZSBjYWxsaW5nIGAuZ2V0TmV4dFBhZ2UoKWAuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IG5leHRPcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMgfTtcbiAgICBpZiAoJ3BhcmFtcycgaW4gbmV4dEluZm8pIHtcbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0geyAuLi5uZXh0T3B0aW9ucy5xdWVyeSwgLi4ubmV4dEluZm8ucGFyYW1zIH07XG4gICAgfSBlbHNlIGlmICgndXJsJyBpbiBuZXh0SW5mbykge1xuICAgICAgY29uc3QgcGFyYW1zID0gWy4uLk9iamVjdC5lbnRyaWVzKG5leHRPcHRpb25zLnF1ZXJ5IHx8IHt9KSwgLi4ubmV4dEluZm8udXJsLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCldO1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgcGFyYW1zKSB7XG4gICAgICAgIG5leHRJbmZvLnVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgbmV4dE9wdGlvbnMucXVlcnkgPSB1bmRlZmluZWQ7XG4gICAgICBuZXh0T3B0aW9ucy5wYXRoID0gbmV4dEluZm8udXJsLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLiNjbGllbnQucmVxdWVzdEFQSUxpc3QodGhpcy5jb25zdHJ1Y3RvciBhcyBhbnksIG5leHRPcHRpb25zKTtcbiAgfVxuXG4gIGFzeW5jICppdGVyUGFnZXMoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgbGV0IHBhZ2U6IEFic3RyYWN0UGFnZTxJdGVtPiA9IHRoaXM7XG4gICAgeWllbGQgcGFnZTtcbiAgICB3aGlsZSAocGFnZS5oYXNOZXh0UGFnZSgpKSB7XG4gICAgICBwYWdlID0gYXdhaXQgcGFnZS5nZXROZXh0UGFnZSgpO1xuICAgICAgeWllbGQgcGFnZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IHBhZ2Ugb2YgdGhpcy5pdGVyUGFnZXMoKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHBhZ2UuZ2V0UGFnaW5hdGVkSXRlbXMoKSkge1xuICAgICAgICB5aWVsZCBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgc3ViY2xhc3Mgb2YgUHJvbWlzZSB3aWxsIHJlc29sdmUgdG8gYW4gaW5zdGFudGlhdGVkIFBhZ2Ugb25jZSB0aGUgcmVxdWVzdCBjb21wbGV0ZXMuXG4gKlxuICogSXQgYWxzbyBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGUgdG8gYWxsb3cgYXV0by1wYWdpbmF0aW5nIGl0ZXJhdGlvbiBvbiBhbiB1bmF3YWl0ZWQgbGlzdCBjYWxsLCBlZzpcbiAqXG4gKiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgY2xpZW50Lml0ZW1zLmxpc3QoKSkge1xuICogICAgICBjb25zb2xlLmxvZyhpdGVtKVxuICogICAgfVxuICovXG5leHBvcnQgY2xhc3MgUGFnZVByb21pc2U8XG4gICAgUGFnZUNsYXNzIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+LFxuICAgIEl0ZW0gPSBSZXR1cm5UeXBlPFBhZ2VDbGFzc1snZ2V0UGFnaW5hdGVkSXRlbXMnXT5bbnVtYmVyXSxcbiAgPlxuICBleHRlbmRzIEFQSVByb21pc2U8UGFnZUNsYXNzPlxuICBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8SXRlbT5cbntcbiAgY29uc3RydWN0b3IoXG4gICAgY2xpZW50OiBBUElDbGllbnQsXG4gICAgcmVxdWVzdDogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPixcbiAgICBQYWdlOiBuZXcgKC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgQWJzdHJhY3RQYWdlPikgPT4gUGFnZUNsYXNzLFxuICApIHtcbiAgICBzdXBlcihcbiAgICAgIHJlcXVlc3QsXG4gICAgICBhc3luYyAocHJvcHMpID0+IG5ldyBQYWdlKGNsaWVudCwgcHJvcHMucmVzcG9uc2UsIGF3YWl0IGRlZmF1bHRQYXJzZVJlc3BvbnNlKHByb3BzKSwgcHJvcHMub3B0aW9ucyksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvdyBhdXRvLXBhZ2luYXRpbmcgaXRlcmF0aW9uIG9uIGFuIHVuYXdhaXRlZCBsaXN0IGNhbGwsIGVnOlxuICAgKlxuICAgKiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgY2xpZW50Lml0ZW1zLmxpc3QoKSkge1xuICAgKiAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXG4gICAqICAgIH1cbiAgICovXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzO1xuICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBwYWdlKSB7XG4gICAgICB5aWVsZCBpdGVtO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlUmVzcG9uc2VIZWFkZXJzID0gKFxuICBoZWFkZXJzOiBBd2FpdGVkPFJldHVyblR5cGU8RmV0Y2g+PlsnaGVhZGVycyddLFxuKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9PiB7XG4gIHJldHVybiBuZXcgUHJveHkoXG4gICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgaGVhZGVycy5lbnRyaWVzKCksXG4gICAgKSxcbiAgICB7XG4gICAgICBnZXQodGFyZ2V0LCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG5hbWUudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldFtrZXkudG9Mb3dlckNhc2UoKV0gfHwgdGFyZ2V0W2tleV07XG4gICAgICB9LFxuICAgIH0sXG4gICk7XG59O1xuXG50eXBlIEhUVFBNZXRob2QgPSAnZ2V0JyB8ICdwb3N0JyB8ICdwdXQnIHwgJ3BhdGNoJyB8ICdkZWxldGUnO1xuXG5leHBvcnQgdHlwZSBSZXF1ZXN0Q2xpZW50ID0geyBmZXRjaDogRmV0Y2ggfTtcbmV4cG9ydCB0eXBlIEhlYWRlcnMgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkPjtcbmV4cG9ydCB0eXBlIERlZmF1bHRRdWVyeSA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZD47XG5leHBvcnQgdHlwZSBLZXlzRW51bTxUPiA9IHsgW1AgaW4ga2V5b2YgUmVxdWlyZWQ8VD5dOiB0cnVlIH07XG5cbmV4cG9ydCB0eXBlIFJlcXVlc3RPcHRpb25zPFJlcSBleHRlbmRzIHt9ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBSZWFkYWJsZT4gPSB7XG4gIG1ldGhvZD86IEhUVFBNZXRob2Q7XG4gIHBhdGg/OiBzdHJpbmc7XG4gIHF1ZXJ5PzogUmVxIHwgdW5kZWZpbmVkO1xuICBib2R5PzogUmVxIHwgdW5kZWZpbmVkO1xuICBoZWFkZXJzPzogSGVhZGVycyB8IHVuZGVmaW5lZDtcblxuICBtYXhSZXRyaWVzPzogbnVtYmVyO1xuICBzdHJlYW0/OiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICB0aW1lb3V0PzogbnVtYmVyO1xuICBodHRwQWdlbnQ/OiBBZ2VudDtcbiAgc2lnbmFsPzogQWJvcnRTaWduYWwgfCB1bmRlZmluZWQgfCBudWxsO1xuICBpZGVtcG90ZW5jeUtleT86IHN0cmluZztcbn07XG5cbi8vIFRoaXMgaXMgcmVxdWlyZWQgc28gdGhhdCB3ZSBjYW4gZGV0ZXJtaW5lIGlmIGEgZ2l2ZW4gb2JqZWN0IG1hdGNoZXMgdGhlIFJlcXVlc3RPcHRpb25zXG4vLyB0eXBlIGF0IHJ1bnRpbWUuIFdoaWxlIHRoaXMgcmVxdWlyZXMgZHVwbGljYXRpb24sIGl0IGlzIGVuZm9yY2VkIGJ5IHRoZSBUeXBlU2NyaXB0XG4vLyBjb21waWxlciBzdWNoIHRoYXQgYW55IG1pc3NpbmcgLyBleHRyYW5lb3VzIGtleXMgd2lsbCBjYXVzZSBhbiBlcnJvci5cbmNvbnN0IHJlcXVlc3RPcHRpb25zS2V5czogS2V5c0VudW08UmVxdWVzdE9wdGlvbnM+ID0ge1xuICBtZXRob2Q6IHRydWUsXG4gIHBhdGg6IHRydWUsXG4gIHF1ZXJ5OiB0cnVlLFxuICBib2R5OiB0cnVlLFxuICBoZWFkZXJzOiB0cnVlLFxuXG4gIG1heFJldHJpZXM6IHRydWUsXG4gIHN0cmVhbTogdHJ1ZSxcbiAgdGltZW91dDogdHJ1ZSxcbiAgaHR0cEFnZW50OiB0cnVlLFxuICBzaWduYWw6IHRydWUsXG4gIGlkZW1wb3RlbmN5S2V5OiB0cnVlLFxufTtcblxuZXhwb3J0IGNvbnN0IGlzUmVxdWVzdE9wdGlvbnMgPSAob2JqOiB1bmtub3duKTogb2JqIGlzIFJlcXVlc3RPcHRpb25zID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxuICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgICFpc0VtcHR5T2JqKG9iaikgJiZcbiAgICBPYmplY3Qua2V5cyhvYmopLmV2ZXJ5KChrKSA9PiBoYXNPd24ocmVxdWVzdE9wdGlvbnNLZXlzLCBrKSlcbiAgKTtcbn07XG5cbmV4cG9ydCB0eXBlIEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxIGV4dGVuZHMge30gPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IFJlYWRhYmxlPiA9IFJlcXVlc3RPcHRpb25zPFJlcT4gJiB7XG4gIG1ldGhvZDogSFRUUE1ldGhvZDtcbiAgcGF0aDogc3RyaW5nO1xufTtcblxuZGVjbGFyZSBjb25zdCBEZW5vOiBhbnk7XG5kZWNsYXJlIGNvbnN0IEVkZ2VSdW50aW1lOiBhbnk7XG50eXBlIEFyY2ggPSAneDMyJyB8ICd4NjQnIHwgJ2FybScgfCAnYXJtNjQnIHwgYG90aGVyOiR7c3RyaW5nfWAgfCAndW5rbm93bic7XG50eXBlIFBsYXRmb3JtTmFtZSA9XG4gIHwgJ01hY09TJ1xuICB8ICdMaW51eCdcbiAgfCAnV2luZG93cydcbiAgfCAnRnJlZUJTRCdcbiAgfCAnT3BlbkJTRCdcbiAgfCAnaU9TJ1xuICB8ICdBbmRyb2lkJ1xuICB8IGBPdGhlcjoke3N0cmluZ31gXG4gIHwgJ1Vua25vd24nO1xudHlwZSBCcm93c2VyID0gJ2llJyB8ICdlZGdlJyB8ICdjaHJvbWUnIHwgJ2ZpcmVmb3gnIHwgJ3NhZmFyaSc7XG50eXBlIFBsYXRmb3JtUHJvcGVydGllcyA9IHtcbiAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnO1xuICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogc3RyaW5nO1xuICAnWC1TdGFpbmxlc3MtT1MnOiBQbGF0Zm9ybU5hbWU7XG4gICdYLVN0YWlubGVzcy1BcmNoJzogQXJjaDtcbiAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnbm9kZScgfCAnZGVubycgfCAnZWRnZScgfCBgYnJvd3Nlcjoke0Jyb3dzZXJ9YCB8ICd1bmtub3duJztcbiAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IHN0cmluZztcbn07XG5jb25zdCBnZXRQbGF0Zm9ybVByb3BlcnRpZXMgPSAoKTogUGxhdGZvcm1Qcm9wZXJ0aWVzID0+IHtcbiAgaWYgKHR5cGVvZiBEZW5vICE9PSAndW5kZWZpbmVkJyAmJiBEZW5vLmJ1aWxkICE9IG51bGwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiBub3JtYWxpemVQbGF0Zm9ybShEZW5vLmJ1aWxkLm9zKSxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogbm9ybWFsaXplQXJjaChEZW5vLmJ1aWxkLmFyY2gpLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZGVubycsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogRGVuby52ZXJzaW9uLFxuICAgIH07XG4gIH1cbiAgaWYgKHR5cGVvZiBFZGdlUnVudGltZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IGBvdGhlcjoke0VkZ2VSdW50aW1lfWAsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICdlZGdlJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBwcm9jZXNzLnZlcnNpb24sXG4gICAgfTtcbiAgfVxuICAvLyBDaGVjayBpZiBOb2RlLmpzXG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnID8gcHJvY2VzcyA6IDApID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiBub3JtYWxpemVQbGF0Zm9ybShwcm9jZXNzLnBsYXRmb3JtKSxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogbm9ybWFsaXplQXJjaChwcm9jZXNzLmFyY2gpLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnbm9kZScsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogcHJvY2Vzcy52ZXJzaW9uLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBicm93c2VySW5mbyA9IGdldEJyb3dzZXJJbmZvKCk7XG4gIGlmIChicm93c2VySW5mbykge1xuICAgIHJldHVybiB7XG4gICAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogVkVSU0lPTixcbiAgICAgICdYLVN0YWlubGVzcy1PUyc6ICdVbmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogJ3Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiBgYnJvd3Nlcjoke2Jyb3dzZXJJbmZvLmJyb3dzZXJ9YCxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBicm93c2VySW5mby52ZXJzaW9uLFxuICAgIH07XG4gIH1cblxuICAvLyBUT0RPIGFkZCBzdXBwb3J0IGZvciBDbG91ZGZsYXJlIHdvcmtlcnMsIGV0Yy5cbiAgcmV0dXJuIHtcbiAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1BcmNoJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiAndW5rbm93bicsXG4gIH07XG59O1xuXG50eXBlIEJyb3dzZXJJbmZvID0ge1xuICBicm93c2VyOiBCcm93c2VyO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59O1xuXG5kZWNsYXJlIGNvbnN0IG5hdmlnYXRvcjogeyB1c2VyQWdlbnQ6IHN0cmluZyB9IHwgdW5kZWZpbmVkO1xuXG4vLyBOb3RlOiBtb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9KUy1EZXZUb29scy9ob3N0LWVudmlyb25tZW50L2Jsb2IvYjFhYjc5ZWNkZTM3ZGI1ZDZlMTYzYzA1MGU1NGZlN2QyODdkN2M5Mi9zcmMvaXNvbW9ycGhpYy5icm93c2VyLnRzXG5mdW5jdGlvbiBnZXRCcm93c2VySW5mbygpOiBCcm93c2VySW5mbyB8IG51bGwge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gTk9URTogVGhlIG9yZGVyIG1hdHRlcnMgaGVyZSFcbiAgY29uc3QgYnJvd3NlclBhdHRlcm5zID0gW1xuICAgIHsga2V5OiAnZWRnZScgYXMgY29uc3QsIHBhdHRlcm46IC9FZGdlKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScgYXMgY29uc3QsIHBhdHRlcm46IC9NU0lFKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScgYXMgY29uc3QsIHBhdHRlcm46IC9UcmlkZW50KD86LipydlxcOihcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdjaHJvbWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvQ2hyb21lKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdmaXJlZm94JyBhcyBjb25zdCwgcGF0dGVybjogL0ZpcmVmb3goPzpcXFcrKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPy8gfSxcbiAgICB7IGtleTogJ3NhZmFyaScgYXMgY29uc3QsIHBhdHRlcm46IC8oPzpWZXJzaW9uXFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8oPzpcXFcrTW9iaWxlXFxTKik/XFxXK1NhZmFyaS8gfSxcbiAgXTtcblxuICAvLyBGaW5kIHRoZSBGSVJTVCBtYXRjaGluZyBicm93c2VyXG4gIGZvciAoY29uc3QgeyBrZXksIHBhdHRlcm4gfSBvZiBicm93c2VyUGF0dGVybnMpIHtcbiAgICBjb25zdCBtYXRjaCA9IHBhdHRlcm4uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnN0IG1ham9yID0gbWF0Y2hbMV0gfHwgMDtcbiAgICAgIGNvbnN0IG1pbm9yID0gbWF0Y2hbMl0gfHwgMDtcbiAgICAgIGNvbnN0IHBhdGNoID0gbWF0Y2hbM10gfHwgMDtcblxuICAgICAgcmV0dXJuIHsgYnJvd3Nlcjoga2V5LCB2ZXJzaW9uOiBgJHttYWpvcn0uJHttaW5vcn0uJHtwYXRjaH1gIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmNvbnN0IG5vcm1hbGl6ZUFyY2ggPSAoYXJjaDogc3RyaW5nKTogQXJjaCA9PiB7XG4gIC8vIE5vZGUgZG9jczpcbiAgLy8gLSBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzYXJjaFxuICAvLyBEZW5vIGRvY3M6XG4gIC8vIC0gaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2Rlbm8vc3RhYmxlL34vRGVuby5idWlsZFxuICBpZiAoYXJjaCA9PT0gJ3gzMicpIHJldHVybiAneDMyJztcbiAgaWYgKGFyY2ggPT09ICd4ODZfNjQnIHx8IGFyY2ggPT09ICd4NjQnKSByZXR1cm4gJ3g2NCc7XG4gIGlmIChhcmNoID09PSAnYXJtJykgcmV0dXJuICdhcm0nO1xuICBpZiAoYXJjaCA9PT0gJ2FhcmNoNjQnIHx8IGFyY2ggPT09ICdhcm02NCcpIHJldHVybiAnYXJtNjQnO1xuICBpZiAoYXJjaCkgcmV0dXJuIGBvdGhlcjoke2FyY2h9YDtcbiAgcmV0dXJuICd1bmtub3duJztcbn07XG5cbmNvbnN0IG5vcm1hbGl6ZVBsYXRmb3JtID0gKHBsYXRmb3JtOiBzdHJpbmcpOiBQbGF0Zm9ybU5hbWUgPT4ge1xuICAvLyBOb2RlIHBsYXRmb3JtczpcbiAgLy8gLSBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzcGxhdGZvcm1cbiAgLy8gRGVubyBwbGF0Zm9ybXM6XG4gIC8vIC0gaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2Rlbm8vc3RhYmxlL34vRGVuby5idWlsZFxuICAvLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9kZW5vbGFuZC9kZW5vL2lzc3Vlcy8xNDc5OVxuXG4gIHBsYXRmb3JtID0gcGxhdGZvcm0udG9Mb3dlckNhc2UoKTtcblxuICAvLyBOT1RFOiB0aGlzIGlPUyBjaGVjayBpcyB1bnRlc3RlZCBhbmQgbWF5IG5vdCB3b3JrXG4gIC8vIE5vZGUgZG9lcyBub3Qgd29yayBuYXRpdmVseSBvbiBJT1MsIHRoZXJlIGlzIGEgZm9yayBhdFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzLW1vYmlsZS9ub2RlanMtbW9iaWxlXG4gIC8vIGhvd2V2ZXIgaXQgaXMgdW5rbm93biBhdCB0aGUgdGltZSBvZiB3cml0aW5nIGhvdyB0byBkZXRlY3QgaWYgaXQgaXMgcnVubmluZ1xuICBpZiAocGxhdGZvcm0uaW5jbHVkZXMoJ2lvcycpKSByZXR1cm4gJ2lPUyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnKSByZXR1cm4gJ0FuZHJvaWQnO1xuICBpZiAocGxhdGZvcm0gPT09ICdkYXJ3aW4nKSByZXR1cm4gJ01hY09TJztcbiAgaWYgKHBsYXRmb3JtID09PSAnd2luMzInKSByZXR1cm4gJ1dpbmRvd3MnO1xuICBpZiAocGxhdGZvcm0gPT09ICdmcmVlYnNkJykgcmV0dXJuICdGcmVlQlNEJztcbiAgaWYgKHBsYXRmb3JtID09PSAnb3BlbmJzZCcpIHJldHVybiAnT3BlbkJTRCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2xpbnV4JykgcmV0dXJuICdMaW51eCc7XG4gIGlmIChwbGF0Zm9ybSkgcmV0dXJuIGBPdGhlcjoke3BsYXRmb3JtfWA7XG4gIHJldHVybiAnVW5rbm93bic7XG59O1xuXG5sZXQgX3BsYXRmb3JtSGVhZGVyczogUGxhdGZvcm1Qcm9wZXJ0aWVzO1xuY29uc3QgZ2V0UGxhdGZvcm1IZWFkZXJzID0gKCkgPT4ge1xuICByZXR1cm4gKF9wbGF0Zm9ybUhlYWRlcnMgPz89IGdldFBsYXRmb3JtUHJvcGVydGllcygpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzYWZlSlNPTiA9ICh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufTtcblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE5NzA5ODQ2XG5jb25zdCBzdGFydHNXaXRoU2NoZW1lUmVnZXhwID0gbmV3IFJlZ0V4cCgnXig/OlthLXpdKzopPy8vJywgJ2knKTtcbmNvbnN0IGlzQWJzb2x1dGVVUkwgPSAodXJsOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHN0YXJ0c1dpdGhTY2hlbWVSZWdleHAudGVzdCh1cmwpO1xufTtcblxuY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuY29uc3QgdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIgPSAobmFtZTogc3RyaW5nLCBuOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzSW50ZWdlcihuKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGFuIGludGVnZXJgKTtcbiAgfVxuICBpZiAobiA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJgKTtcbiAgfVxuICByZXR1cm4gbjtcbn07XG5cbmV4cG9ydCBjb25zdCBjYXN0VG9FcnJvciA9IChlcnI6IGFueSk6IEVycm9yID0+IHtcbiAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gZXJyO1xuICByZXR1cm4gbmV3IEVycm9yKGVycik7XG59O1xuXG5leHBvcnQgY29uc3QgZW5zdXJlUHJlc2VudCA9IDxUPih2YWx1ZTogVCB8IG51bGwgfCB1bmRlZmluZWQpOiBUID0+IHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYSB2YWx1ZSB0byBiZSBnaXZlbiBidXQgcmVjZWl2ZWQgJHt2YWx1ZX0gaW5zdGVhZC5gKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBSZWFkIGFuIGVudmlyb25tZW50IHZhcmlhYmxlLlxuICpcbiAqIFdpbGwgcmV0dXJuIHVuZGVmaW5lZCBpZiB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgZG9lc24ndCBleGlzdCBvciBjYW5ub3QgYmUgYWNjZXNzZWQuXG4gKi9cbmV4cG9ydCBjb25zdCByZWFkRW52ID0gKGVudjogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBwcm9jZXNzLmVudj8uW2Vudl0gPz8gdW5kZWZpbmVkO1xuICB9XG4gIGlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gRGVuby5lbnY/LmdldD8uKGVudik7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBjb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApO1xuXG4gIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlRmxvYXQgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgcmV0dXJuIHZhbHVlO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuXG4gIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlQm9vbGVhbiA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHJldHVybiB2YWx1ZTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnO1xuICByZXR1cm4gQm9vbGVhbih2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VJbnRlZ2VyKHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXliZUNvZXJjZUZsb2F0ID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VGbG9hdCh2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VCb29sZWFuID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gY29lcmNlQm9vbGVhbih2YWx1ZSk7XG59O1xuXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzQ0OTEyODdcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iajogT2JqZWN0IHwgbnVsbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICBpZiAoIW9iaikgcmV0dXJuIHRydWU7XG4gIGZvciAoY29uc3QgX2sgaW4gb2JqKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBodHRwczovL2VzbGludC5vcmcvZG9jcy9sYXRlc3QvcnVsZXMvbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iajogT2JqZWN0LCBrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnKGFjdGlvbjogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52WydERUJVRyddID09PSAndHJ1ZScpIHtcbiAgICBjb25zb2xlLmxvZyhgT3BlbkFJOkRFQlVHOiR7YWN0aW9ufWAsIC4uLmFyZ3MpO1xuICB9XG59XG5cbi8qKlxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjNcbiAqL1xuY29uc3QgdXVpZDQgPSAoKSA9PiB7XG4gIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIChjKSA9PiB7XG4gICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcbiAgICBjb25zdCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcbiAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzUnVubmluZ0luQnJvd3NlciA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCdcbiAgKTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhZGVyc1Byb3RvY29sIHtcbiAgZ2V0OiAoaGVhZGVyOiBzdHJpbmcpID0+IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG59XG5leHBvcnQgdHlwZSBIZWFkZXJzTGlrZSA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkPiB8IEhlYWRlcnNQcm90b2NvbDtcblxuZXhwb3J0IGNvbnN0IGlzSGVhZGVyc1Byb3RvY29sID0gKGhlYWRlcnM6IGFueSk6IGhlYWRlcnMgaXMgSGVhZGVyc1Byb3RvY29sID0+IHtcbiAgcmV0dXJuIHR5cGVvZiBoZWFkZXJzPy5nZXQgPT09ICdmdW5jdGlvbic7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0SGVhZGVyID0gKGhlYWRlcnM6IEhlYWRlcnNMaWtlLCBrZXk6IHN0cmluZyk6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQgPT4ge1xuICBjb25zdCBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoaXNIZWFkZXJzUHJvdG9jb2woaGVhZGVycykpIHJldHVybiBoZWFkZXJzLmdldChrZXkpIHx8IGhlYWRlcnMuZ2V0KGxvd2VyS2V5KTtcbiAgY29uc3QgdmFsdWUgPSBoZWFkZXJzW2tleV0gfHwgaGVhZGVyc1tsb3dlcktleV07XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIGlmICh2YWx1ZS5sZW5ndGggPD0gMSkgcmV0dXJuIHZhbHVlWzBdO1xuICAgIGNvbnNvbGUud2FybihgUmVjZWl2ZWQgJHt2YWx1ZS5sZW5ndGh9IGVudHJpZXMgZm9yIHRoZSAke2tleX0gaGVhZGVyLCB1c2luZyB0aGUgZmlyc3QgZW50cnkuYCk7XG4gICAgcmV0dXJuIHZhbHVlWzBdO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogRW5jb2RlcyBhIHN0cmluZyB0byBCYXNlNjQgZm9ybWF0LlxuICovXG5leHBvcnQgY29uc3QgdG9CYXNlNjQgPSAoc3RyOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgaWYgKCFzdHIpIHJldHVybiAnJztcbiAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0cikudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBidG9hICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBidG9hKHN0cik7XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBnZW5lcmF0ZSBiNjQgc3RyaW5nOyBFeHBlY3RlZCBgQnVmZmVyYCBvciBgYnRvYWAgdG8gYmUgZGVmaW5lZCcpO1xufTtcbiIsInZhciBFcj1PYmplY3QuY3JlYXRlO3ZhciBOPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgZHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjt2YXIgZ3I9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7dmFyIG1yPU9iamVjdC5nZXRQcm90b3R5cGVPZixJcj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciAkPShpLHIpPT4oKT0+KHJ8fGkoKHI9e2V4cG9ydHM6e319KS5leHBvcnRzLHIpLHIuZXhwb3J0cyksRnI9KGkscik9Pntmb3IodmFyIHQgaW4gcilOKGksdCx7Z2V0OnJbdF0sZW51bWVyYWJsZTohMH0pfSxMPShpLHIsdCxuKT0+e2lmKHImJnR5cGVvZiByPT1cIm9iamVjdFwifHx0eXBlb2Ygcj09XCJmdW5jdGlvblwiKWZvcihsZXQgZSBvZiBncihyKSkhSXIuY2FsbChpLGUpJiZlIT09dCYmTihpLGUse2dldDooKT0+cltlXSxlbnVtZXJhYmxlOiEobj1kcihyLGUpKXx8bi5lbnVtZXJhYmxlfSk7cmV0dXJuIGl9LFM9KGkscix0KT0+KEwoaSxyLFwiZGVmYXVsdFwiKSx0JiZMKHQscixcImRlZmF1bHRcIikpLEo9KGkscix0KT0+KHQ9aSE9bnVsbD9FcihtcihpKSk6e30sTChyfHwhaXx8IWkuX19lc01vZHVsZT9OKHQsXCJkZWZhdWx0XCIse3ZhbHVlOmksZW51bWVyYWJsZTohMH0pOnQsaSkpLEFyPWk9PkwoTih7fSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxpKTt2YXIgUT0kKE09PntcInVzZSBzdHJpY3RcIjtNLmJ5dGVMZW5ndGg9UnI7TS50b0J5dGVBcnJheT1DcjtNLmZyb21CeXRlQXJyYXk9THI7dmFyIEI9W10sdz1bXSxVcj10eXBlb2YgVWludDhBcnJheTxcInVcIj9VaW50OEFycmF5OkFycmF5LFA9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7Zm9yKG09MCxLPVAubGVuZ3RoO208SzsrK20pQlttXT1QW21dLHdbUC5jaGFyQ29kZUF0KG0pXT1tO3ZhciBtLEs7d1tcIi1cIi5jaGFyQ29kZUF0KDApXT02Mjt3W1wiX1wiLmNoYXJDb2RlQXQoMCldPTYzO2Z1bmN0aW9uIFooaSl7dmFyIHI9aS5sZW5ndGg7aWYociU0PjApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNFwiKTt2YXIgdD1pLmluZGV4T2YoXCI9XCIpO3Q9PT0tMSYmKHQ9cik7dmFyIG49dD09PXI/MDo0LXQlNDtyZXR1cm5bdCxuXX1mdW5jdGlvbiBScihpKXt2YXIgcj1aKGkpLHQ9clswXSxuPXJbMV07cmV0dXJuKHQrbikqMy80LW59ZnVuY3Rpb24gVHIoaSxyLHQpe3JldHVybihyK3QpKjMvNC10fWZ1bmN0aW9uIENyKGkpe3ZhciByLHQ9WihpKSxuPXRbMF0sZT10WzFdLG89bmV3IFVyKFRyKGksbixlKSksdT0wLGY9ZT4wP24tNDpuLGM7Zm9yKGM9MDtjPGY7Yys9NClyPXdbaS5jaGFyQ29kZUF0KGMpXTw8MTh8d1tpLmNoYXJDb2RlQXQoYysxKV08PDEyfHdbaS5jaGFyQ29kZUF0KGMrMildPDw2fHdbaS5jaGFyQ29kZUF0KGMrMyldLG9bdSsrXT1yPj4xNiYyNTUsb1t1KytdPXI+PjgmMjU1LG9bdSsrXT1yJjI1NTtyZXR1cm4gZT09PTImJihyPXdbaS5jaGFyQ29kZUF0KGMpXTw8Mnx3W2kuY2hhckNvZGVBdChjKzEpXT4+NCxvW3UrK109ciYyNTUpLGU9PT0xJiYocj13W2kuY2hhckNvZGVBdChjKV08PDEwfHdbaS5jaGFyQ29kZUF0KGMrMSldPDw0fHdbaS5jaGFyQ29kZUF0KGMrMildPj4yLG9bdSsrXT1yPj44JjI1NSxvW3UrK109ciYyNTUpLG99ZnVuY3Rpb24gU3IoaSl7cmV0dXJuIEJbaT4+MTgmNjNdK0JbaT4+MTImNjNdK0JbaT4+NiY2M10rQltpJjYzXX1mdW5jdGlvbiBfcihpLHIsdCl7Zm9yKHZhciBuLGU9W10sbz1yO288dDtvKz0zKW49KGlbb108PDE2JjE2NzExNjgwKSsoaVtvKzFdPDw4JjY1MjgwKSsoaVtvKzJdJjI1NSksZS5wdXNoKFNyKG4pKTtyZXR1cm4gZS5qb2luKFwiXCIpfWZ1bmN0aW9uIExyKGkpe2Zvcih2YXIgcix0PWkubGVuZ3RoLG49dCUzLGU9W10sbz0xNjM4Myx1PTAsZj10LW47dTxmO3UrPW8pZS5wdXNoKF9yKGksdSx1K28+Zj9mOnUrbykpO3JldHVybiBuPT09MT8ocj1pW3QtMV0sZS5wdXNoKEJbcj4+Ml0rQltyPDw0JjYzXStcIj09XCIpKTpuPT09MiYmKHI9KGlbdC0yXTw8OCkraVt0LTFdLGUucHVzaChCW3I+PjEwXStCW3I+PjQmNjNdK0Jbcjw8MiY2M10rXCI9XCIpKSxlLmpvaW4oXCJcIil9fSk7dmFyIHY9JChPPT57Ty5yZWFkPWZ1bmN0aW9uKGkscix0LG4sZSl7dmFyIG8sdSxmPWUqOC1uLTEsYz0oMTw8ZiktMSxsPWM+PjEscz0tNyxwPXQ/ZS0xOjAsRj10Py0xOjEseD1pW3IrcF07Zm9yKHArPUYsbz14JigxPDwtcyktMSx4Pj49LXMscys9ZjtzPjA7bz1vKjI1NitpW3IrcF0scCs9RixzLT04KTtmb3IodT1vJigxPDwtcyktMSxvPj49LXMscys9bjtzPjA7dT11KjI1NitpW3IrcF0scCs9RixzLT04KTtpZihvPT09MClvPTEtbDtlbHNle2lmKG89PT1jKXJldHVybiB1P05hTjooeD8tMToxKSooMS8wKTt1PXUrTWF0aC5wb3coMixuKSxvPW8tbH1yZXR1cm4oeD8tMToxKSp1Kk1hdGgucG93KDIsby1uKX07Ty53cml0ZT1mdW5jdGlvbihpLHIsdCxuLGUsbyl7dmFyIHUsZixjLGw9byo4LWUtMSxzPSgxPDxsKS0xLHA9cz4+MSxGPWU9PT0yMz9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjAseD1uPzA6by0xLGI9bj8xOi0xLEJyPXI8MHx8cj09PTAmJjEvcjwwPzE6MDtmb3Iocj1NYXRoLmFicyhyKSxpc05hTihyKXx8cj09PTEvMD8oZj1pc05hTihyKT8xOjAsdT1zKToodT1NYXRoLmZsb29yKE1hdGgubG9nKHIpL01hdGguTE4yKSxyKihjPU1hdGgucG93KDIsLXUpKTwxJiYodS0tLGMqPTIpLHUrcD49MT9yKz1GL2M6cis9RipNYXRoLnBvdygyLDEtcCkscipjPj0yJiYodSsrLGMvPTIpLHUrcD49cz8oZj0wLHU9cyk6dStwPj0xPyhmPShyKmMtMSkqTWF0aC5wb3coMixlKSx1PXUrcCk6KGY9cipNYXRoLnBvdygyLHAtMSkqTWF0aC5wb3coMixlKSx1PTApKTtlPj04O2lbdCt4XT1mJjI1NSx4Kz1iLGYvPTI1NixlLT04KTtmb3IodT11PDxlfGYsbCs9ZTtsPjA7aVt0K3hdPXUmMjU1LHgrPWIsdS89MjU2LGwtPTgpO2lbdCt4LWJdfD1CcioxMjh9fSk7dmFyIHo9JChUPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIEc9USgpLFU9digpLHJyPXR5cGVvZiBTeW1ib2w9PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5mb3I9PVwiZnVuY3Rpb25cIj9TeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b21cIik6bnVsbDtULkJ1ZmZlcj1oO1QuU2xvd0J1ZmZlcj0kcjtULklOU1BFQ1RfTUFYX0JZVEVTPTUwO3ZhciBrPTIxNDc0ODM2NDc7VC5rTWF4TGVuZ3RoPWs7aC5UWVBFRF9BUlJBWV9TVVBQT1JUPU5yKCk7IWguVFlQRURfQVJSQVlfU1VQUE9SVCYmdHlwZW9mIGNvbnNvbGU8XCJ1XCImJnR5cGVvZiBjb25zb2xlLmVycm9yPT1cImZ1bmN0aW9uXCImJmNvbnNvbGUuZXJyb3IoXCJUaGlzIGJyb3dzZXIgbGFja3MgdHlwZWQgYXJyYXkgKFVpbnQ4QXJyYXkpIHN1cHBvcnQgd2hpY2ggaXMgcmVxdWlyZWQgYnkgYGJ1ZmZlcmAgdjUueC4gVXNlIGBidWZmZXJgIHY0LnggaWYgeW91IHJlcXVpcmUgb2xkIGJyb3dzZXIgc3VwcG9ydC5cIik7ZnVuY3Rpb24gTnIoKXt0cnl7bGV0IGk9bmV3IFVpbnQ4QXJyYXkoMSkscj17Zm9vOmZ1bmN0aW9uKCl7cmV0dXJuIDQyfX07cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihyLFVpbnQ4QXJyYXkucHJvdG90eXBlKSxPYmplY3Quc2V0UHJvdG90eXBlT2YoaSxyKSxpLmZvbygpPT09NDJ9Y2F0Y2goaSl7cmV0dXJuITF9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShoLnByb3RvdHlwZSxcInBhcmVudFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe2lmKGguaXNCdWZmZXIodGhpcykpcmV0dXJuIHRoaXMuYnVmZmVyfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShoLnByb3RvdHlwZSxcIm9mZnNldFwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe2lmKGguaXNCdWZmZXIodGhpcykpcmV0dXJuIHRoaXMuYnl0ZU9mZnNldH19KTtmdW5jdGlvbiBkKGkpe2lmKGk+ayl0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIFwiJytpKydcIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gXCJzaXplXCInKTtsZXQgcj1uZXcgVWludDhBcnJheShpKTtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHIsaC5wcm90b3R5cGUpLHJ9ZnVuY3Rpb24gaChpLHIsdCl7aWYodHlwZW9mIGk9PVwibnVtYmVyXCIpe2lmKHR5cGVvZiByPT1cInN0cmluZ1wiKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcInN0cmluZ1wiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBzdHJpbmcuIFJlY2VpdmVkIHR5cGUgbnVtYmVyJyk7cmV0dXJuIGooaSl9cmV0dXJuIGVyKGkscix0KX1oLnBvb2xTaXplPTgxOTI7ZnVuY3Rpb24gZXIoaSxyLHQpe2lmKHR5cGVvZiBpPT1cInN0cmluZ1wiKXJldHVybiBrcihpLHIpO2lmKEFycmF5QnVmZmVyLmlzVmlldyhpKSlyZXR1cm4gRHIoaSk7aWYoaT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgQXJyYXktbGlrZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgXCIrdHlwZW9mIGkpO2lmKEUoaSxBcnJheUJ1ZmZlcil8fGkmJkUoaS5idWZmZXIsQXJyYXlCdWZmZXIpfHx0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXI8XCJ1XCImJihFKGksU2hhcmVkQXJyYXlCdWZmZXIpfHxpJiZFKGkuYnVmZmVyLFNoYXJlZEFycmF5QnVmZmVyKSkpcmV0dXJuIHEoaSxyLHQpO2lmKHR5cGVvZiBpPT1cIm51bWJlclwiKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgb2YgdHlwZSBudW1iZXIuIFJlY2VpdmVkIHR5cGUgbnVtYmVyJyk7bGV0IG49aS52YWx1ZU9mJiZpLnZhbHVlT2YoKTtpZihuIT1udWxsJiZuIT09aSlyZXR1cm4gaC5mcm9tKG4scix0KTtsZXQgZT1icihpKTtpZihlKXJldHVybiBlO2lmKHR5cGVvZiBTeW1ib2w8XCJ1XCImJlN5bWJvbC50b1ByaW1pdGl2ZSE9bnVsbCYmdHlwZW9mIGlbU3ltYm9sLnRvUHJpbWl0aXZlXT09XCJmdW5jdGlvblwiKXJldHVybiBoLmZyb20oaVtTeW1ib2wudG9QcmltaXRpdmVdKFwic3RyaW5nXCIpLHIsdCk7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlIFwiK3R5cGVvZiBpKX1oLmZyb209ZnVuY3Rpb24oaSxyLHQpe3JldHVybiBlcihpLHIsdCl9O09iamVjdC5zZXRQcm90b3R5cGVPZihoLnByb3RvdHlwZSxVaW50OEFycmF5LnByb3RvdHlwZSk7T2JqZWN0LnNldFByb3RvdHlwZU9mKGgsVWludDhBcnJheSk7ZnVuY3Rpb24gb3IoaSl7aWYodHlwZW9mIGkhPVwibnVtYmVyXCIpdGhyb3cgbmV3IFR5cGVFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlcicpO2lmKGk8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIFwiJytpKydcIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gXCJzaXplXCInKX1mdW5jdGlvbiBNcihpLHIsdCl7cmV0dXJuIG9yKGkpLGk8PTA/ZChpKTpyIT09dm9pZCAwP3R5cGVvZiB0PT1cInN0cmluZ1wiP2QoaSkuZmlsbChyLHQpOmQoaSkuZmlsbChyKTpkKGkpfWguYWxsb2M9ZnVuY3Rpb24oaSxyLHQpe3JldHVybiBNcihpLHIsdCl9O2Z1bmN0aW9uIGooaSl7cmV0dXJuIG9yKGkpLGQoaTwwPzA6SChpKXwwKX1oLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKGkpe3JldHVybiBqKGkpfTtoLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihpKXtyZXR1cm4gaihpKX07ZnVuY3Rpb24ga3IoaSxyKXtpZigodHlwZW9mIHIhPVwic3RyaW5nXCJ8fHI9PT1cIlwiKSYmKHI9XCJ1dGY4XCIpLCFoLmlzRW5jb2RpbmcocikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK3IpO2xldCB0PXVyKGkscil8MCxuPWQodCksZT1uLndyaXRlKGkscik7cmV0dXJuIGUhPT10JiYobj1uLnNsaWNlKDAsZSkpLG59ZnVuY3Rpb24gWShpKXtsZXQgcj1pLmxlbmd0aDwwPzA6SChpLmxlbmd0aCl8MCx0PWQocik7Zm9yKGxldCBuPTA7bjxyO24rPTEpdFtuXT1pW25dJjI1NTtyZXR1cm4gdH1mdW5jdGlvbiBEcihpKXtpZihFKGksVWludDhBcnJheSkpe2xldCByPW5ldyBVaW50OEFycmF5KGkpO3JldHVybiBxKHIuYnVmZmVyLHIuYnl0ZU9mZnNldCxyLmJ5dGVMZW5ndGgpfXJldHVybiBZKGkpfWZ1bmN0aW9uIHEoaSxyLHQpe2lmKHI8MHx8aS5ieXRlTGVuZ3RoPHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wib2Zmc2V0XCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJyk7aWYoaS5ieXRlTGVuZ3RoPHIrKHR8fDApKXRocm93IG5ldyBSYW5nZUVycm9yKCdcImxlbmd0aFwiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpO2xldCBuO3JldHVybiByPT09dm9pZCAwJiZ0PT09dm9pZCAwP249bmV3IFVpbnQ4QXJyYXkoaSk6dD09PXZvaWQgMD9uPW5ldyBVaW50OEFycmF5KGkscik6bj1uZXcgVWludDhBcnJheShpLHIsdCksT2JqZWN0LnNldFByb3RvdHlwZU9mKG4saC5wcm90b3R5cGUpLG59ZnVuY3Rpb24gYnIoaSl7aWYoaC5pc0J1ZmZlcihpKSl7bGV0IHI9SChpLmxlbmd0aCl8MCx0PWQocik7cmV0dXJuIHQubGVuZ3RoPT09MHx8aS5jb3B5KHQsMCwwLHIpLHR9aWYoaS5sZW5ndGghPT12b2lkIDApcmV0dXJuIHR5cGVvZiBpLmxlbmd0aCE9XCJudW1iZXJcInx8WChpLmxlbmd0aCk/ZCgwKTpZKGkpO2lmKGkudHlwZT09PVwiQnVmZmVyXCImJkFycmF5LmlzQXJyYXkoaS5kYXRhKSlyZXR1cm4gWShpLmRhdGEpfWZ1bmN0aW9uIEgoaSl7aWYoaT49ayl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gc2l6ZTogMHhcIitrLnRvU3RyaW5nKDE2KStcIiBieXRlc1wiKTtyZXR1cm4gaXwwfWZ1bmN0aW9uICRyKGkpe3JldHVybitpIT1pJiYoaT0wKSxoLmFsbG9jKCtpKX1oLmlzQnVmZmVyPWZ1bmN0aW9uKHIpe3JldHVybiByIT1udWxsJiZyLl9pc0J1ZmZlcj09PSEwJiZyIT09aC5wcm90b3R5cGV9O2guY29tcGFyZT1mdW5jdGlvbihyLHQpe2lmKEUocixVaW50OEFycmF5KSYmKHI9aC5mcm9tKHIsci5vZmZzZXQsci5ieXRlTGVuZ3RoKSksRSh0LFVpbnQ4QXJyYXkpJiYodD1oLmZyb20odCx0Lm9mZnNldCx0LmJ5dGVMZW5ndGgpKSwhaC5pc0J1ZmZlcihyKXx8IWguaXNCdWZmZXIodCkpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwiYnVmMVwiLCBcImJ1ZjJcIiBhcmd1bWVudHMgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheScpO2lmKHI9PT10KXJldHVybiAwO2xldCBuPXIubGVuZ3RoLGU9dC5sZW5ndGg7Zm9yKGxldCBvPTAsdT1NYXRoLm1pbihuLGUpO288dTsrK28paWYocltvXSE9PXRbb10pe249cltvXSxlPXRbb107YnJlYWt9cmV0dXJuIG48ZT8tMTplPG4/MTowfTtoLmlzRW5jb2Rpbmc9ZnVuY3Rpb24ocil7c3dpdGNoKFN0cmluZyhyKS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJoZXhcIjpjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpjYXNlXCJhc2NpaVwiOmNhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcImJhc2U2NFwiOmNhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fTtoLmNvbmNhdD1mdW5jdGlvbihyLHQpe2lmKCFBcnJheS5pc0FycmF5KHIpKXRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO2lmKHIubGVuZ3RoPT09MClyZXR1cm4gaC5hbGxvYygwKTtsZXQgbjtpZih0PT09dm9pZCAwKWZvcih0PTAsbj0wO248ci5sZW5ndGg7KytuKXQrPXJbbl0ubGVuZ3RoO2xldCBlPWguYWxsb2NVbnNhZmUodCksbz0wO2ZvcihuPTA7bjxyLmxlbmd0aDsrK24pe2xldCB1PXJbbl07aWYoRSh1LFVpbnQ4QXJyYXkpKW8rdS5sZW5ndGg+ZS5sZW5ndGg/KGguaXNCdWZmZXIodSl8fCh1PWguZnJvbSh1KSksdS5jb3B5KGUsbykpOlVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKGUsdSxvKTtlbHNlIGlmKGguaXNCdWZmZXIodSkpdS5jb3B5KGUsbyk7ZWxzZSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTtvKz11Lmxlbmd0aH1yZXR1cm4gZX07ZnVuY3Rpb24gdXIoaSxyKXtpZihoLmlzQnVmZmVyKGkpKXJldHVybiBpLmxlbmd0aDtpZihBcnJheUJ1ZmZlci5pc1ZpZXcoaSl8fEUoaSxBcnJheUJ1ZmZlcikpcmV0dXJuIGkuYnl0ZUxlbmd0aDtpZih0eXBlb2YgaSE9XCJzdHJpbmdcIil0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJzdHJpbmdcIiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBvciBBcnJheUJ1ZmZlci4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiBpKTtsZXQgdD1pLmxlbmd0aCxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdPT09ITA7aWYoIW4mJnQ9PT0wKXJldHVybiAwO2xldCBlPSExO2Zvcig7Oylzd2l0Y2gocil7Y2FzZVwiYXNjaWlcIjpjYXNlXCJsYXRpbjFcIjpjYXNlXCJiaW5hcnlcIjpyZXR1cm4gdDtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gVyhpKS5sZW5ndGg7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIHQqMjtjYXNlXCJoZXhcIjpyZXR1cm4gdD4+PjE7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIHdyKGkpLmxlbmd0aDtkZWZhdWx0OmlmKGUpcmV0dXJuIG4/LTE6VyhpKS5sZW5ndGg7cj0oXCJcIityKS50b0xvd2VyQ2FzZSgpLGU9ITB9fWguYnl0ZUxlbmd0aD11cjtmdW5jdGlvbiBQcihpLHIsdCl7bGV0IG49ITE7aWYoKHI9PT12b2lkIDB8fHI8MCkmJihyPTApLHI+dGhpcy5sZW5ndGh8fCgodD09PXZvaWQgMHx8dD50aGlzLmxlbmd0aCkmJih0PXRoaXMubGVuZ3RoKSx0PD0wKXx8KHQ+Pj49MCxyPj4+PTAsdDw9cikpcmV0dXJuXCJcIjtmb3IoaXx8KGk9XCJ1dGY4XCIpOzspc3dpdGNoKGkpe2Nhc2VcImhleFwiOnJldHVybiB6cih0aGlzLHIsdCk7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIGZyKHRoaXMscix0KTtjYXNlXCJhc2NpaVwiOnJldHVybiBWcih0aGlzLHIsdCk7Y2FzZVwibGF0aW4xXCI6Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIFhyKHRoaXMscix0KTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4ganIodGhpcyxyLHQpO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiBKcih0aGlzLHIsdCk7ZGVmYXVsdDppZihuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIitpKTtpPShpK1wiXCIpLnRvTG93ZXJDYXNlKCksbj0hMH19aC5wcm90b3R5cGUuX2lzQnVmZmVyPSEwO2Z1bmN0aW9uIEkoaSxyLHQpe2xldCBuPWlbcl07aVtyXT1pW3RdLGlbdF09bn1oLnByb3RvdHlwZS5zd2FwMTY9ZnVuY3Rpb24oKXtsZXQgcj10aGlzLmxlbmd0aDtpZihyJTIhPT0wKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHNcIik7Zm9yKGxldCB0PTA7dDxyO3QrPTIpSSh0aGlzLHQsdCsxKTtyZXR1cm4gdGhpc307aC5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uKCl7bGV0IHI9dGhpcy5sZW5ndGg7aWYociU0IT09MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzXCIpO2ZvcihsZXQgdD0wO3Q8cjt0Kz00KUkodGhpcyx0LHQrMyksSSh0aGlzLHQrMSx0KzIpO3JldHVybiB0aGlzfTtoLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24oKXtsZXQgcj10aGlzLmxlbmd0aDtpZihyJTghPT0wKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHNcIik7Zm9yKGxldCB0PTA7dDxyO3QrPTgpSSh0aGlzLHQsdCs3KSxJKHRoaXMsdCsxLHQrNiksSSh0aGlzLHQrMix0KzUpLEkodGhpcyx0KzMsdCs0KTtyZXR1cm4gdGhpc307aC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtsZXQgcj10aGlzLmxlbmd0aDtyZXR1cm4gcj09PTA/XCJcIjphcmd1bWVudHMubGVuZ3RoPT09MD9mcih0aGlzLDAscik6UHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtoLnByb3RvdHlwZS50b0xvY2FsZVN0cmluZz1oLnByb3RvdHlwZS50b1N0cmluZztoLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24ocil7aWYoIWguaXNCdWZmZXIocikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXJcIik7cmV0dXJuIHRoaXM9PT1yPyEwOmguY29tcGFyZSh0aGlzLHIpPT09MH07aC5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbigpe2xldCByPVwiXCIsdD1ULklOU1BFQ1RfTUFYX0JZVEVTO3JldHVybiByPXRoaXMudG9TdHJpbmcoXCJoZXhcIiwwLHQpLnJlcGxhY2UoLyguezJ9KS9nLFwiJDEgXCIpLnRyaW0oKSx0aGlzLmxlbmd0aD50JiYocis9XCIgLi4uIFwiKSxcIjxCdWZmZXIgXCIrcitcIj5cIn07cnImJihoLnByb3RvdHlwZVtycl09aC5wcm90b3R5cGUuaW5zcGVjdCk7aC5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihyLHQsbixlLG8pe2lmKEUocixVaW50OEFycmF5KSYmKHI9aC5mcm9tKHIsci5vZmZzZXQsci5ieXRlTGVuZ3RoKSksIWguaXNCdWZmZXIocikpdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwidGFyZ2V0XCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiByKTtpZih0PT09dm9pZCAwJiYodD0wKSxuPT09dm9pZCAwJiYobj1yP3IubGVuZ3RoOjApLGU9PT12b2lkIDAmJihlPTApLG89PT12b2lkIDAmJihvPXRoaXMubGVuZ3RoKSx0PDB8fG4+ci5sZW5ndGh8fGU8MHx8bz50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm91dCBvZiByYW5nZSBpbmRleFwiKTtpZihlPj1vJiZ0Pj1uKXJldHVybiAwO2lmKGU+PW8pcmV0dXJuLTE7aWYodD49bilyZXR1cm4gMTtpZih0Pj4+PTAsbj4+Pj0wLGU+Pj49MCxvPj4+PTAsdGhpcz09PXIpcmV0dXJuIDA7bGV0IHU9by1lLGY9bi10LGM9TWF0aC5taW4odSxmKSxsPXRoaXMuc2xpY2UoZSxvKSxzPXIuc2xpY2UodCxuKTtmb3IobGV0IHA9MDtwPGM7KytwKWlmKGxbcF0hPT1zW3BdKXt1PWxbcF0sZj1zW3BdO2JyZWFrfXJldHVybiB1PGY/LTE6Zjx1PzE6MH07ZnVuY3Rpb24gaHIoaSxyLHQsbixlKXtpZihpLmxlbmd0aD09PTApcmV0dXJuLTE7aWYodHlwZW9mIHQ9PVwic3RyaW5nXCI/KG49dCx0PTApOnQ+MjE0NzQ4MzY0Nz90PTIxNDc0ODM2NDc6dDwtMjE0NzQ4MzY0OCYmKHQ9LTIxNDc0ODM2NDgpLHQ9K3QsWCh0KSYmKHQ9ZT8wOmkubGVuZ3RoLTEpLHQ8MCYmKHQ9aS5sZW5ndGgrdCksdD49aS5sZW5ndGgpe2lmKGUpcmV0dXJuLTE7dD1pLmxlbmd0aC0xfWVsc2UgaWYodDwwKWlmKGUpdD0wO2Vsc2UgcmV0dXJuLTE7aWYodHlwZW9mIHI9PVwic3RyaW5nXCImJihyPWguZnJvbShyLG4pKSxoLmlzQnVmZmVyKHIpKXJldHVybiByLmxlbmd0aD09PTA/LTE6dHIoaSxyLHQsbixlKTtpZih0eXBlb2Ygcj09XCJudW1iZXJcIilyZXR1cm4gcj1yJjI1NSx0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZj09XCJmdW5jdGlvblwiP2U/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGkscix0KTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGkscix0KTp0cihpLFtyXSx0LG4sZSk7dGhyb3cgbmV3IFR5cGVFcnJvcihcInZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlclwiKX1mdW5jdGlvbiB0cihpLHIsdCxuLGUpe2xldCBvPTEsdT1pLmxlbmd0aCxmPXIubGVuZ3RoO2lmKG4hPT12b2lkIDAmJihuPVN0cmluZyhuKS50b0xvd2VyQ2FzZSgpLG49PT1cInVjczJcInx8bj09PVwidWNzLTJcInx8bj09PVwidXRmMTZsZVwifHxuPT09XCJ1dGYtMTZsZVwiKSl7aWYoaS5sZW5ndGg8Mnx8ci5sZW5ndGg8MilyZXR1cm4tMTtvPTIsdS89MixmLz0yLHQvPTJ9ZnVuY3Rpb24gYyhzLHApe3JldHVybiBvPT09MT9zW3BdOnMucmVhZFVJbnQxNkJFKHAqbyl9bGV0IGw7aWYoZSl7bGV0IHM9LTE7Zm9yKGw9dDtsPHU7bCsrKWlmKGMoaSxsKT09PWMocixzPT09LTE/MDpsLXMpKXtpZihzPT09LTEmJihzPWwpLGwtcysxPT09ZilyZXR1cm4gcypvfWVsc2UgcyE9PS0xJiYobC09bC1zKSxzPS0xfWVsc2UgZm9yKHQrZj51JiYodD11LWYpLGw9dDtsPj0wO2wtLSl7bGV0IHM9ITA7Zm9yKGxldCBwPTA7cDxmO3ArKylpZihjKGksbCtwKSE9PWMocixwKSl7cz0hMTticmVha31pZihzKXJldHVybiBsfXJldHVybi0xfWgucHJvdG90eXBlLmluY2x1ZGVzPWZ1bmN0aW9uKHIsdCxuKXtyZXR1cm4gdGhpcy5pbmRleE9mKHIsdCxuKSE9PS0xfTtoLnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKHIsdCxuKXtyZXR1cm4gaHIodGhpcyxyLHQsbiwhMCl9O2gucHJvdG90eXBlLmxhc3RJbmRleE9mPWZ1bmN0aW9uKHIsdCxuKXtyZXR1cm4gaHIodGhpcyxyLHQsbiwhMSl9O2Z1bmN0aW9uIE9yKGkscix0LG4pe3Q9TnVtYmVyKHQpfHwwO2xldCBlPWkubGVuZ3RoLXQ7bj8obj1OdW1iZXIobiksbj5lJiYobj1lKSk6bj1lO2xldCBvPXIubGVuZ3RoO24+by8yJiYobj1vLzIpO2xldCB1O2Zvcih1PTA7dTxuOysrdSl7bGV0IGY9cGFyc2VJbnQoci5zdWJzdHIodSoyLDIpLDE2KTtpZihYKGYpKXJldHVybiB1O2lbdCt1XT1mfXJldHVybiB1fWZ1bmN0aW9uIEdyKGkscix0LG4pe3JldHVybiBEKFcocixpLmxlbmd0aC10KSxpLHQsbil9ZnVuY3Rpb24gWXIoaSxyLHQsbil7cmV0dXJuIEQodnIociksaSx0LG4pfWZ1bmN0aW9uIHFyKGkscix0LG4pe3JldHVybiBEKHdyKHIpLGksdCxuKX1mdW5jdGlvbiBXcihpLHIsdCxuKXtyZXR1cm4gRChydChyLGkubGVuZ3RoLXQpLGksdCxuKX1oLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihyLHQsbixlKXtpZih0PT09dm9pZCAwKWU9XCJ1dGY4XCIsbj10aGlzLmxlbmd0aCx0PTA7ZWxzZSBpZihuPT09dm9pZCAwJiZ0eXBlb2YgdD09XCJzdHJpbmdcIillPXQsbj10aGlzLmxlbmd0aCx0PTA7ZWxzZSBpZihpc0Zpbml0ZSh0KSl0PXQ+Pj4wLGlzRmluaXRlKG4pPyhuPW4+Pj4wLGU9PT12b2lkIDAmJihlPVwidXRmOFwiKSk6KGU9bixuPXZvaWQgMCk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZFwiKTtsZXQgbz10aGlzLmxlbmd0aC10O2lmKChuPT09dm9pZCAwfHxuPm8pJiYobj1vKSxyLmxlbmd0aD4wJiYobjwwfHx0PDApfHx0PnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHNcIik7ZXx8KGU9XCJ1dGY4XCIpO2xldCB1PSExO2Zvcig7Oylzd2l0Y2goZSl7Y2FzZVwiaGV4XCI6cmV0dXJuIE9yKHRoaXMscix0LG4pO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiBHcih0aGlzLHIsdCxuKTtjYXNlXCJhc2NpaVwiOmNhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBZcih0aGlzLHIsdCxuKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gcXIodGhpcyxyLHQsbik7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIFdyKHRoaXMscix0LG4pO2RlZmF1bHQ6aWYodSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrZSk7ZT0oXCJcIitlKS50b0xvd2VyQ2FzZSgpLHU9ITB9fTtoLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIkJ1ZmZlclwiLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX07ZnVuY3Rpb24ganIoaSxyLHQpe3JldHVybiByPT09MCYmdD09PWkubGVuZ3RoP0cuZnJvbUJ5dGVBcnJheShpKTpHLmZyb21CeXRlQXJyYXkoaS5zbGljZShyLHQpKX1mdW5jdGlvbiBmcihpLHIsdCl7dD1NYXRoLm1pbihpLmxlbmd0aCx0KTtsZXQgbj1bXSxlPXI7Zm9yKDtlPHQ7KXtsZXQgbz1pW2VdLHU9bnVsbCxmPW8+MjM5PzQ6bz4yMjM/MzpvPjE5MT8yOjE7aWYoZStmPD10KXtsZXQgYyxsLHMscDtzd2l0Y2goZil7Y2FzZSAxOm88MTI4JiYodT1vKTticmVhaztjYXNlIDI6Yz1pW2UrMV0sKGMmMTkyKT09PTEyOCYmKHA9KG8mMzEpPDw2fGMmNjMscD4xMjcmJih1PXApKTticmVhaztjYXNlIDM6Yz1pW2UrMV0sbD1pW2UrMl0sKGMmMTkyKT09PTEyOCYmKGwmMTkyKT09PTEyOCYmKHA9KG8mMTUpPDwxMnwoYyY2Myk8PDZ8bCY2MyxwPjIwNDcmJihwPDU1Mjk2fHxwPjU3MzQzKSYmKHU9cCkpO2JyZWFrO2Nhc2UgNDpjPWlbZSsxXSxsPWlbZSsyXSxzPWlbZSszXSwoYyYxOTIpPT09MTI4JiYobCYxOTIpPT09MTI4JiYocyYxOTIpPT09MTI4JiYocD0obyYxNSk8PDE4fChjJjYzKTw8MTJ8KGwmNjMpPDw2fHMmNjMscD42NTUzNSYmcDwxMTE0MTEyJiYodT1wKSl9fXU9PT1udWxsPyh1PTY1NTMzLGY9MSk6dT42NTUzNSYmKHUtPTY1NTM2LG4ucHVzaCh1Pj4+MTAmMTAyM3w1NTI5NiksdT01NjMyMHx1JjEwMjMpLG4ucHVzaCh1KSxlKz1mfXJldHVybiBIcihuKX12YXIgaXI9NDA5NjtmdW5jdGlvbiBIcihpKXtsZXQgcj1pLmxlbmd0aDtpZihyPD1pcilyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsaSk7bGV0IHQ9XCJcIixuPTA7Zm9yKDtuPHI7KXQrPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGkuc2xpY2UobixuKz1pcikpO3JldHVybiB0fWZ1bmN0aW9uIFZyKGkscix0KXtsZXQgbj1cIlwiO3Q9TWF0aC5taW4oaS5sZW5ndGgsdCk7Zm9yKGxldCBlPXI7ZTx0OysrZSluKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGlbZV0mMTI3KTtyZXR1cm4gbn1mdW5jdGlvbiBYcihpLHIsdCl7bGV0IG49XCJcIjt0PU1hdGgubWluKGkubGVuZ3RoLHQpO2ZvcihsZXQgZT1yO2U8dDsrK2Upbis9U3RyaW5nLmZyb21DaGFyQ29kZShpW2VdKTtyZXR1cm4gbn1mdW5jdGlvbiB6cihpLHIsdCl7bGV0IG49aS5sZW5ndGg7KCFyfHxyPDApJiYocj0wKSwoIXR8fHQ8MHx8dD5uKSYmKHQ9bik7bGV0IGU9XCJcIjtmb3IobGV0IG89cjtvPHQ7KytvKWUrPXR0W2lbb11dO3JldHVybiBlfWZ1bmN0aW9uIEpyKGkscix0KXtsZXQgbj1pLnNsaWNlKHIsdCksZT1cIlwiO2ZvcihsZXQgbz0wO288bi5sZW5ndGgtMTtvKz0yKWUrPVN0cmluZy5mcm9tQ2hhckNvZGUobltvXStuW28rMV0qMjU2KTtyZXR1cm4gZX1oLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbihyLHQpe2xldCBuPXRoaXMubGVuZ3RoO3I9fn5yLHQ9dD09PXZvaWQgMD9uOn5+dCxyPDA/KHIrPW4scjwwJiYocj0wKSk6cj5uJiYocj1uKSx0PDA/KHQrPW4sdDwwJiYodD0wKSk6dD5uJiYodD1uKSx0PHImJih0PXIpO2xldCBlPXRoaXMuc3ViYXJyYXkocix0KTtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsaC5wcm90b3R5cGUpLGV9O2Z1bmN0aW9uIGEoaSxyLHQpe2lmKGklMSE9PTB8fGk8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm9mZnNldCBpcyBub3QgdWludFwiKTtpZihpK3I+dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIil9aC5wcm90b3R5cGUucmVhZFVpbnRMRT1oLnByb3RvdHlwZS5yZWFkVUludExFPWZ1bmN0aW9uKHIsdCxuKXtyPXI+Pj4wLHQ9dD4+PjAsbnx8YShyLHQsdGhpcy5sZW5ndGgpO2xldCBlPXRoaXNbcl0sbz0xLHU9MDtmb3IoOysrdTx0JiYobyo9MjU2KTspZSs9dGhpc1tyK3VdKm87cmV0dXJuIGV9O2gucHJvdG90eXBlLnJlYWRVaW50QkU9aC5wcm90b3R5cGUucmVhZFVJbnRCRT1mdW5jdGlvbihyLHQsbil7cj1yPj4+MCx0PXQ+Pj4wLG58fGEocix0LHRoaXMubGVuZ3RoKTtsZXQgZT10aGlzW3IrLS10XSxvPTE7Zm9yKDt0PjAmJihvKj0yNTYpOyllKz10aGlzW3IrLS10XSpvO3JldHVybiBlfTtoLnByb3RvdHlwZS5yZWFkVWludDg9aC5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKHIsdCl7cmV0dXJuIHI9cj4+PjAsdHx8YShyLDEsdGhpcy5sZW5ndGgpLHRoaXNbcl19O2gucHJvdG90eXBlLnJlYWRVaW50MTZMRT1oLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24ocix0KXtyZXR1cm4gcj1yPj4+MCx0fHxhKHIsMix0aGlzLmxlbmd0aCksdGhpc1tyXXx0aGlzW3IrMV08PDh9O2gucHJvdG90eXBlLnJlYWRVaW50MTZCRT1oLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24ocix0KXtyZXR1cm4gcj1yPj4+MCx0fHxhKHIsMix0aGlzLmxlbmd0aCksdGhpc1tyXTw8OHx0aGlzW3IrMV19O2gucHJvdG90eXBlLnJlYWRVaW50MzJMRT1oLnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24ocix0KXtyZXR1cm4gcj1yPj4+MCx0fHxhKHIsNCx0aGlzLmxlbmd0aCksKHRoaXNbcl18dGhpc1tyKzFdPDw4fHRoaXNbcisyXTw8MTYpK3RoaXNbciszXSoxNjc3NzIxNn07aC5wcm90b3R5cGUucmVhZFVpbnQzMkJFPWgucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbihyLHQpe3JldHVybiByPXI+Pj4wLHR8fGEociw0LHRoaXMubGVuZ3RoKSx0aGlzW3JdKjE2Nzc3MjE2Kyh0aGlzW3IrMV08PDE2fHRoaXNbcisyXTw8OHx0aGlzW3IrM10pfTtoLnByb3RvdHlwZS5yZWFkQmlnVUludDY0TEU9ZyhmdW5jdGlvbihyKXtyPXI+Pj4wLFIocixcIm9mZnNldFwiKTtsZXQgdD10aGlzW3JdLG49dGhpc1tyKzddOyh0PT09dm9pZCAwfHxuPT09dm9pZCAwKSYmXyhyLHRoaXMubGVuZ3RoLTgpO2xldCBlPXQrdGhpc1srK3JdKjIqKjgrdGhpc1srK3JdKjIqKjE2K3RoaXNbKytyXSoyKioyNCxvPXRoaXNbKytyXSt0aGlzWysrcl0qMioqOCt0aGlzWysrcl0qMioqMTYrbioyKioyNDtyZXR1cm4gQmlnSW50KGUpKyhCaWdJbnQobyk8PEJpZ0ludCgzMikpfSk7aC5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NEJFPWcoZnVuY3Rpb24ocil7cj1yPj4+MCxSKHIsXCJvZmZzZXRcIik7bGV0IHQ9dGhpc1tyXSxuPXRoaXNbcis3XTsodD09PXZvaWQgMHx8bj09PXZvaWQgMCkmJl8ocix0aGlzLmxlbmd0aC04KTtsZXQgZT10KjIqKjI0K3RoaXNbKytyXSoyKioxNit0aGlzWysrcl0qMioqOCt0aGlzWysrcl0sbz10aGlzWysrcl0qMioqMjQrdGhpc1srK3JdKjIqKjE2K3RoaXNbKytyXSoyKio4K247cmV0dXJuKEJpZ0ludChlKTw8QmlnSW50KDMyKSkrQmlnSW50KG8pfSk7aC5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKHIsdCxuKXtyPXI+Pj4wLHQ9dD4+PjAsbnx8YShyLHQsdGhpcy5sZW5ndGgpO2xldCBlPXRoaXNbcl0sbz0xLHU9MDtmb3IoOysrdTx0JiYobyo9MjU2KTspZSs9dGhpc1tyK3VdKm87cmV0dXJuIG8qPTEyOCxlPj1vJiYoZS09TWF0aC5wb3coMiw4KnQpKSxlfTtoLnByb3RvdHlwZS5yZWFkSW50QkU9ZnVuY3Rpb24ocix0LG4pe3I9cj4+PjAsdD10Pj4+MCxufHxhKHIsdCx0aGlzLmxlbmd0aCk7bGV0IGU9dCxvPTEsdT10aGlzW3IrLS1lXTtmb3IoO2U+MCYmKG8qPTI1Nik7KXUrPXRoaXNbcistLWVdKm87cmV0dXJuIG8qPTEyOCx1Pj1vJiYodS09TWF0aC5wb3coMiw4KnQpKSx1fTtoLnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbihyLHQpe3JldHVybiByPXI+Pj4wLHR8fGEociwxLHRoaXMubGVuZ3RoKSx0aGlzW3JdJjEyOD8oMjU1LXRoaXNbcl0rMSkqLTE6dGhpc1tyXX07aC5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24ocix0KXtyPXI+Pj4wLHR8fGEociwyLHRoaXMubGVuZ3RoKTtsZXQgbj10aGlzW3JdfHRoaXNbcisxXTw8ODtyZXR1cm4gbiYzMjc2OD9ufDQyOTQ5MDE3NjA6bn07aC5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24ocix0KXtyPXI+Pj4wLHR8fGEociwyLHRoaXMubGVuZ3RoKTtsZXQgbj10aGlzW3IrMV18dGhpc1tyXTw8ODtyZXR1cm4gbiYzMjc2OD9ufDQyOTQ5MDE3NjA6bn07aC5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24ocix0KXtyZXR1cm4gcj1yPj4+MCx0fHxhKHIsNCx0aGlzLmxlbmd0aCksdGhpc1tyXXx0aGlzW3IrMV08PDh8dGhpc1tyKzJdPDwxNnx0aGlzW3IrM108PDI0fTtoLnByb3RvdHlwZS5yZWFkSW50MzJCRT1mdW5jdGlvbihyLHQpe3JldHVybiByPXI+Pj4wLHR8fGEociw0LHRoaXMubGVuZ3RoKSx0aGlzW3JdPDwyNHx0aGlzW3IrMV08PDE2fHRoaXNbcisyXTw8OHx0aGlzW3IrM119O2gucHJvdG90eXBlLnJlYWRCaWdJbnQ2NExFPWcoZnVuY3Rpb24ocil7cj1yPj4+MCxSKHIsXCJvZmZzZXRcIik7bGV0IHQ9dGhpc1tyXSxuPXRoaXNbcis3XTsodD09PXZvaWQgMHx8bj09PXZvaWQgMCkmJl8ocix0aGlzLmxlbmd0aC04KTtsZXQgZT10aGlzW3IrNF0rdGhpc1tyKzVdKjIqKjgrdGhpc1tyKzZdKjIqKjE2KyhuPDwyNCk7cmV0dXJuKEJpZ0ludChlKTw8QmlnSW50KDMyKSkrQmlnSW50KHQrdGhpc1srK3JdKjIqKjgrdGhpc1srK3JdKjIqKjE2K3RoaXNbKytyXSoyKioyNCl9KTtoLnByb3RvdHlwZS5yZWFkQmlnSW50NjRCRT1nKGZ1bmN0aW9uKHIpe3I9cj4+PjAsUihyLFwib2Zmc2V0XCIpO2xldCB0PXRoaXNbcl0sbj10aGlzW3IrN107KHQ9PT12b2lkIDB8fG49PT12b2lkIDApJiZfKHIsdGhpcy5sZW5ndGgtOCk7bGV0IGU9KHQ8PDI0KSt0aGlzWysrcl0qMioqMTYrdGhpc1srK3JdKjIqKjgrdGhpc1srK3JdO3JldHVybihCaWdJbnQoZSk8PEJpZ0ludCgzMikpK0JpZ0ludCh0aGlzWysrcl0qMioqMjQrdGhpc1srK3JdKjIqKjE2K3RoaXNbKytyXSoyKio4K24pfSk7aC5wcm90b3R5cGUucmVhZEZsb2F0TEU9ZnVuY3Rpb24ocix0KXtyZXR1cm4gcj1yPj4+MCx0fHxhKHIsNCx0aGlzLmxlbmd0aCksVS5yZWFkKHRoaXMsciwhMCwyMyw0KX07aC5wcm90b3R5cGUucmVhZEZsb2F0QkU9ZnVuY3Rpb24ocix0KXtyZXR1cm4gcj1yPj4+MCx0fHxhKHIsNCx0aGlzLmxlbmd0aCksVS5yZWFkKHRoaXMsciwhMSwyMyw0KX07aC5wcm90b3R5cGUucmVhZERvdWJsZUxFPWZ1bmN0aW9uKHIsdCl7cmV0dXJuIHI9cj4+PjAsdHx8YShyLDgsdGhpcy5sZW5ndGgpLFUucmVhZCh0aGlzLHIsITAsNTIsOCl9O2gucHJvdG90eXBlLnJlYWREb3VibGVCRT1mdW5jdGlvbihyLHQpe3JldHVybiByPXI+Pj4wLHR8fGEociw4LHRoaXMubGVuZ3RoKSxVLnJlYWQodGhpcyxyLCExLDUyLDgpfTtmdW5jdGlvbiB5KGkscix0LG4sZSxvKXtpZighaC5pc0J1ZmZlcihpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZihyPmV8fHI8byl0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKTtpZih0K24+aS5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIil9aC5wcm90b3R5cGUud3JpdGVVaW50TEU9aC5wcm90b3R5cGUud3JpdGVVSW50TEU9ZnVuY3Rpb24ocix0LG4sZSl7aWYocj0rcix0PXQ+Pj4wLG49bj4+PjAsIWUpe2xldCBmPU1hdGgucG93KDIsOCpuKS0xO3kodGhpcyxyLHQsbixmLDApfWxldCBvPTEsdT0wO2Zvcih0aGlzW3RdPXImMjU1OysrdTxuJiYobyo9MjU2KTspdGhpc1t0K3VdPXIvbyYyNTU7cmV0dXJuIHQrbn07aC5wcm90b3R5cGUud3JpdGVVaW50QkU9aC5wcm90b3R5cGUud3JpdGVVSW50QkU9ZnVuY3Rpb24ocix0LG4sZSl7aWYocj0rcix0PXQ+Pj4wLG49bj4+PjAsIWUpe2xldCBmPU1hdGgucG93KDIsOCpuKS0xO3kodGhpcyxyLHQsbixmLDApfWxldCBvPW4tMSx1PTE7Zm9yKHRoaXNbdCtvXT1yJjI1NTstLW8+PTAmJih1Kj0yNTYpOyl0aGlzW3Qrb109ci91JjI1NTtyZXR1cm4gdCtufTtoLnByb3RvdHlwZS53cml0ZVVpbnQ4PWgucHJvdG90eXBlLndyaXRlVUludDg9ZnVuY3Rpb24ocix0LG4pe3JldHVybiByPStyLHQ9dD4+PjAsbnx8eSh0aGlzLHIsdCwxLDI1NSwwKSx0aGlzW3RdPXImMjU1LHQrMX07aC5wcm90b3R5cGUud3JpdGVVaW50MTZMRT1oLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKHIsdCxuKXtyZXR1cm4gcj0rcix0PXQ+Pj4wLG58fHkodGhpcyxyLHQsMiw2NTUzNSwwKSx0aGlzW3RdPXImMjU1LHRoaXNbdCsxXT1yPj4+OCx0KzJ9O2gucHJvdG90eXBlLndyaXRlVWludDE2QkU9aC5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbihyLHQsbil7cmV0dXJuIHI9K3IsdD10Pj4+MCxufHx5KHRoaXMscix0LDIsNjU1MzUsMCksdGhpc1t0XT1yPj4+OCx0aGlzW3QrMV09ciYyNTUsdCsyfTtoLnByb3RvdHlwZS53cml0ZVVpbnQzMkxFPWgucHJvdG90eXBlLndyaXRlVUludDMyTEU9ZnVuY3Rpb24ocix0LG4pe3JldHVybiByPStyLHQ9dD4+PjAsbnx8eSh0aGlzLHIsdCw0LDQyOTQ5NjcyOTUsMCksdGhpc1t0KzNdPXI+Pj4yNCx0aGlzW3QrMl09cj4+PjE2LHRoaXNbdCsxXT1yPj4+OCx0aGlzW3RdPXImMjU1LHQrNH07aC5wcm90b3R5cGUud3JpdGVVaW50MzJCRT1oLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uKHIsdCxuKXtyZXR1cm4gcj0rcix0PXQ+Pj4wLG58fHkodGhpcyxyLHQsNCw0Mjk0OTY3Mjk1LDApLHRoaXNbdF09cj4+PjI0LHRoaXNbdCsxXT1yPj4+MTYsdGhpc1t0KzJdPXI+Pj44LHRoaXNbdCszXT1yJjI1NSx0KzR9O2Z1bmN0aW9uIGNyKGkscix0LG4sZSl7eXIocixuLGUsaSx0LDcpO2xldCBvPU51bWJlcihyJkJpZ0ludCg0Mjk0OTY3Mjk1KSk7aVt0KytdPW8sbz1vPj44LGlbdCsrXT1vLG89bz4+OCxpW3QrK109byxvPW8+PjgsaVt0KytdPW87bGV0IHU9TnVtYmVyKHI+PkJpZ0ludCgzMikmQmlnSW50KDQyOTQ5NjcyOTUpKTtyZXR1cm4gaVt0KytdPXUsdT11Pj44LGlbdCsrXT11LHU9dT4+OCxpW3QrK109dSx1PXU+PjgsaVt0KytdPXUsdH1mdW5jdGlvbiBwcihpLHIsdCxuLGUpe3lyKHIsbixlLGksdCw3KTtsZXQgbz1OdW1iZXIociZCaWdJbnQoNDI5NDk2NzI5NSkpO2lbdCs3XT1vLG89bz4+OCxpW3QrNl09byxvPW8+PjgsaVt0KzVdPW8sbz1vPj44LGlbdCs0XT1vO2xldCB1PU51bWJlcihyPj5CaWdJbnQoMzIpJkJpZ0ludCg0Mjk0OTY3Mjk1KSk7cmV0dXJuIGlbdCszXT11LHU9dT4+OCxpW3QrMl09dSx1PXU+PjgsaVt0KzFdPXUsdT11Pj44LGlbdF09dSx0Kzh9aC5wcm90b3R5cGUud3JpdGVCaWdVSW50NjRMRT1nKGZ1bmN0aW9uKHIsdD0wKXtyZXR1cm4gY3IodGhpcyxyLHQsQmlnSW50KDApLEJpZ0ludChcIjB4ZmZmZmZmZmZmZmZmZmZmZlwiKSl9KTtoLnByb3RvdHlwZS53cml0ZUJpZ1VJbnQ2NEJFPWcoZnVuY3Rpb24ocix0PTApe3JldHVybiBwcih0aGlzLHIsdCxCaWdJbnQoMCksQmlnSW50KFwiMHhmZmZmZmZmZmZmZmZmZmZmXCIpKX0pO2gucHJvdG90eXBlLndyaXRlSW50TEU9ZnVuY3Rpb24ocix0LG4sZSl7aWYocj0rcix0PXQ+Pj4wLCFlKXtsZXQgYz1NYXRoLnBvdygyLDgqbi0xKTt5KHRoaXMscix0LG4sYy0xLC1jKX1sZXQgbz0wLHU9MSxmPTA7Zm9yKHRoaXNbdF09ciYyNTU7KytvPG4mJih1Kj0yNTYpOylyPDAmJmY9PT0wJiZ0aGlzW3Qrby0xXSE9PTAmJihmPTEpLHRoaXNbdCtvXT0oci91Pj4wKS1mJjI1NTtyZXR1cm4gdCtufTtoLnByb3RvdHlwZS53cml0ZUludEJFPWZ1bmN0aW9uKHIsdCxuLGUpe2lmKHI9K3IsdD10Pj4+MCwhZSl7bGV0IGM9TWF0aC5wb3coMiw4Km4tMSk7eSh0aGlzLHIsdCxuLGMtMSwtYyl9bGV0IG89bi0xLHU9MSxmPTA7Zm9yKHRoaXNbdCtvXT1yJjI1NTstLW8+PTAmJih1Kj0yNTYpOylyPDAmJmY9PT0wJiZ0aGlzW3QrbysxXSE9PTAmJihmPTEpLHRoaXNbdCtvXT0oci91Pj4wKS1mJjI1NTtyZXR1cm4gdCtufTtoLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24ocix0LG4pe3JldHVybiByPStyLHQ9dD4+PjAsbnx8eSh0aGlzLHIsdCwxLDEyNywtMTI4KSxyPDAmJihyPTI1NStyKzEpLHRoaXNbdF09ciYyNTUsdCsxfTtoLnByb3RvdHlwZS53cml0ZUludDE2TEU9ZnVuY3Rpb24ocix0LG4pe3JldHVybiByPStyLHQ9dD4+PjAsbnx8eSh0aGlzLHIsdCwyLDMyNzY3LC0zMjc2OCksdGhpc1t0XT1yJjI1NSx0aGlzW3QrMV09cj4+PjgsdCsyfTtoLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24ocix0LG4pe3JldHVybiByPStyLHQ9dD4+PjAsbnx8eSh0aGlzLHIsdCwyLDMyNzY3LC0zMjc2OCksdGhpc1t0XT1yPj4+OCx0aGlzW3QrMV09ciYyNTUsdCsyfTtoLnByb3RvdHlwZS53cml0ZUludDMyTEU9ZnVuY3Rpb24ocix0LG4pe3JldHVybiByPStyLHQ9dD4+PjAsbnx8eSh0aGlzLHIsdCw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLHRoaXNbdF09ciYyNTUsdGhpc1t0KzFdPXI+Pj44LHRoaXNbdCsyXT1yPj4+MTYsdGhpc1t0KzNdPXI+Pj4yNCx0KzR9O2gucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbihyLHQsbil7cmV0dXJuIHI9K3IsdD10Pj4+MCxufHx5KHRoaXMscix0LDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCkscjwwJiYocj00Mjk0OTY3Mjk1K3IrMSksdGhpc1t0XT1yPj4+MjQsdGhpc1t0KzFdPXI+Pj4xNix0aGlzW3QrMl09cj4+PjgsdGhpc1t0KzNdPXImMjU1LHQrNH07aC5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NExFPWcoZnVuY3Rpb24ocix0PTApe3JldHVybiBjcih0aGlzLHIsdCwtQmlnSW50KFwiMHg4MDAwMDAwMDAwMDAwMDAwXCIpLEJpZ0ludChcIjB4N2ZmZmZmZmZmZmZmZmZmZlwiKSl9KTtoLnByb3RvdHlwZS53cml0ZUJpZ0ludDY0QkU9ZyhmdW5jdGlvbihyLHQ9MCl7cmV0dXJuIHByKHRoaXMscix0LC1CaWdJbnQoXCIweDgwMDAwMDAwMDAwMDAwMDBcIiksQmlnSW50KFwiMHg3ZmZmZmZmZmZmZmZmZmZmXCIpKX0pO2Z1bmN0aW9uIHNyKGkscix0LG4sZSxvKXtpZih0K24+aS5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIik7aWYodDwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpfWZ1bmN0aW9uIGxyKGkscix0LG4sZSl7cmV0dXJuIHI9K3IsdD10Pj4+MCxlfHxzcihpLHIsdCw0LDM0MDI4MjM0NjYzODUyODg2ZTIyLC0zNDAyODIzNDY2Mzg1Mjg4NmUyMiksVS53cml0ZShpLHIsdCxuLDIzLDQpLHQrNH1oLnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24ocix0LG4pe3JldHVybiBscih0aGlzLHIsdCwhMCxuKX07aC5wcm90b3R5cGUud3JpdGVGbG9hdEJFPWZ1bmN0aW9uKHIsdCxuKXtyZXR1cm4gbHIodGhpcyxyLHQsITEsbil9O2Z1bmN0aW9uIGFyKGkscix0LG4sZSl7cmV0dXJuIHI9K3IsdD10Pj4+MCxlfHxzcihpLHIsdCw4LDE3OTc2OTMxMzQ4NjIzMTU3ZTI5MiwtMTc5NzY5MzEzNDg2MjMxNTdlMjkyKSxVLndyaXRlKGkscix0LG4sNTIsOCksdCs4fWgucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24ocix0LG4pe3JldHVybiBhcih0aGlzLHIsdCwhMCxuKX07aC5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbihyLHQsbil7cmV0dXJuIGFyKHRoaXMscix0LCExLG4pfTtoLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHIsdCxuLGUpe2lmKCFoLmlzQnVmZmVyKHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhcmd1bWVudCBzaG91bGQgYmUgYSBCdWZmZXJcIik7aWYobnx8KG49MCksIWUmJmUhPT0wJiYoZT10aGlzLmxlbmd0aCksdD49ci5sZW5ndGgmJih0PXIubGVuZ3RoKSx0fHwodD0wKSxlPjAmJmU8biYmKGU9biksZT09PW58fHIubGVuZ3RoPT09MHx8dGhpcy5sZW5ndGg9PT0wKXJldHVybiAwO2lmKHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHNcIik7aWYobjwwfHxuPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKTtpZihlPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kc1wiKTtlPnRoaXMubGVuZ3RoJiYoZT10aGlzLmxlbmd0aCksci5sZW5ndGgtdDxlLW4mJihlPXIubGVuZ3RoLXQrbik7bGV0IG89ZS1uO3JldHVybiB0aGlzPT09ciYmdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW49PVwiZnVuY3Rpb25cIj90aGlzLmNvcHlXaXRoaW4odCxuLGUpOlVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKHIsdGhpcy5zdWJhcnJheShuLGUpLHQpLG99O2gucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24ocix0LG4sZSl7aWYodHlwZW9mIHI9PVwic3RyaW5nXCIpe2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiPyhlPXQsdD0wLG49dGhpcy5sZW5ndGgpOnR5cGVvZiBuPT1cInN0cmluZ1wiJiYoZT1uLG49dGhpcy5sZW5ndGgpLGUhPT12b2lkIDAmJnR5cGVvZiBlIT1cInN0cmluZ1wiKXRocm93IG5ldyBUeXBlRXJyb3IoXCJlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nXCIpO2lmKHR5cGVvZiBlPT1cInN0cmluZ1wiJiYhaC5pc0VuY29kaW5nKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIitlKTtpZihyLmxlbmd0aD09PTEpe2xldCB1PXIuY2hhckNvZGVBdCgwKTsoZT09PVwidXRmOFwiJiZ1PDEyOHx8ZT09PVwibGF0aW4xXCIpJiYocj11KX19ZWxzZSB0eXBlb2Ygcj09XCJudW1iZXJcIj9yPXImMjU1OnR5cGVvZiByPT1cImJvb2xlYW5cIiYmKHI9TnVtYmVyKHIpKTtpZih0PDB8fHRoaXMubGVuZ3RoPHR8fHRoaXMubGVuZ3RoPG4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJPdXQgb2YgcmFuZ2UgaW5kZXhcIik7aWYobjw9dClyZXR1cm4gdGhpczt0PXQ+Pj4wLG49bj09PXZvaWQgMD90aGlzLmxlbmd0aDpuPj4+MCxyfHwocj0wKTtsZXQgbztpZih0eXBlb2Ygcj09XCJudW1iZXJcIilmb3Iobz10O288bjsrK28pdGhpc1tvXT1yO2Vsc2V7bGV0IHU9aC5pc0J1ZmZlcihyKT9yOmguZnJvbShyLGUpLGY9dS5sZW5ndGg7aWYoZj09PTApdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIHZhbHVlIFwiJytyKydcIiBpcyBpbnZhbGlkIGZvciBhcmd1bWVudCBcInZhbHVlXCInKTtmb3Iobz0wO288bi10Oysrbyl0aGlzW28rdF09dVtvJWZdfXJldHVybiB0aGlzfTt2YXIgQT17fTtmdW5jdGlvbiBWKGkscix0KXtBW2ldPWNsYXNzIGV4dGVuZHMgdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJtZXNzYWdlXCIse3ZhbHVlOnIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHRoaXMubmFtZT1gJHt0aGlzLm5hbWV9IFske2l9XWAsdGhpcy5zdGFjayxkZWxldGUgdGhpcy5uYW1lfWdldCBjb2RlKCl7cmV0dXJuIGl9c2V0IGNvZGUoZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjb2RlXCIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOmUsd3JpdGFibGU6ITB9KX10b1N0cmluZygpe3JldHVybmAke3RoaXMubmFtZX0gWyR7aX1dOiAke3RoaXMubWVzc2FnZX1gfX19VihcIkVSUl9CVUZGRVJfT1VUX09GX0JPVU5EU1wiLGZ1bmN0aW9uKGkpe3JldHVybiBpP2Ake2l9IGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kc2A6XCJBdHRlbXB0IHRvIGFjY2VzcyBtZW1vcnkgb3V0c2lkZSBidWZmZXIgYm91bmRzXCJ9LFJhbmdlRXJyb3IpO1YoXCJFUlJfSU5WQUxJRF9BUkdfVFlQRVwiLGZ1bmN0aW9uKGkscil7cmV0dXJuYFRoZSBcIiR7aX1cIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlICR7dHlwZW9mIHJ9YH0sVHlwZUVycm9yKTtWKFwiRVJSX09VVF9PRl9SQU5HRVwiLGZ1bmN0aW9uKGkscix0KXtsZXQgbj1gVGhlIHZhbHVlIG9mIFwiJHtpfVwiIGlzIG91dCBvZiByYW5nZS5gLGU9dDtyZXR1cm4gTnVtYmVyLmlzSW50ZWdlcih0KSYmTWF0aC5hYnModCk+MioqMzI/ZT1ucihTdHJpbmcodCkpOnR5cGVvZiB0PT1cImJpZ2ludFwiJiYoZT1TdHJpbmcodCksKHQ+QmlnSW50KDIpKipCaWdJbnQoMzIpfHx0PC0oQmlnSW50KDIpKipCaWdJbnQoMzIpKSkmJihlPW5yKGUpKSxlKz1cIm5cIiksbis9YCBJdCBtdXN0IGJlICR7cn0uIFJlY2VpdmVkICR7ZX1gLG59LFJhbmdlRXJyb3IpO2Z1bmN0aW9uIG5yKGkpe2xldCByPVwiXCIsdD1pLmxlbmd0aCxuPWlbMF09PT1cIi1cIj8xOjA7Zm9yKDt0Pj1uKzQ7dC09MylyPWBfJHtpLnNsaWNlKHQtMyx0KX0ke3J9YDtyZXR1cm5gJHtpLnNsaWNlKDAsdCl9JHtyfWB9ZnVuY3Rpb24gS3IoaSxyLHQpe1IocixcIm9mZnNldFwiKSwoaVtyXT09PXZvaWQgMHx8aVtyK3RdPT09dm9pZCAwKSYmXyhyLGkubGVuZ3RoLSh0KzEpKX1mdW5jdGlvbiB5cihpLHIsdCxuLGUsbyl7aWYoaT50fHxpPHIpe2xldCB1PXR5cGVvZiByPT1cImJpZ2ludFwiP1wiblwiOlwiXCIsZjt0aHJvdyBvPjM/cj09PTB8fHI9PT1CaWdJbnQoMCk/Zj1gPj0gMCR7dX0gYW5kIDwgMiR7dX0gKiogJHsobysxKSo4fSR7dX1gOmY9YD49IC0oMiR7dX0gKiogJHsobysxKSo4LTF9JHt1fSkgYW5kIDwgMiAqKiAkeyhvKzEpKjgtMX0ke3V9YDpmPWA+PSAke3J9JHt1fSBhbmQgPD0gJHt0fSR7dX1gLG5ldyBBLkVSUl9PVVRfT0ZfUkFOR0UoXCJ2YWx1ZVwiLGYsaSl9S3IobixlLG8pfWZ1bmN0aW9uIFIoaSxyKXtpZih0eXBlb2YgaSE9XCJudW1iZXJcIil0aHJvdyBuZXcgQS5FUlJfSU5WQUxJRF9BUkdfVFlQRShyLFwibnVtYmVyXCIsaSl9ZnVuY3Rpb24gXyhpLHIsdCl7dGhyb3cgTWF0aC5mbG9vcihpKSE9PWk/KFIoaSx0KSxuZXcgQS5FUlJfT1VUX09GX1JBTkdFKHR8fFwib2Zmc2V0XCIsXCJhbiBpbnRlZ2VyXCIsaSkpOnI8MD9uZXcgQS5FUlJfQlVGRkVSX09VVF9PRl9CT1VORFM6bmV3IEEuRVJSX09VVF9PRl9SQU5HRSh0fHxcIm9mZnNldFwiLGA+PSAke3Q/MTowfSBhbmQgPD0gJHtyfWAsaSl9dmFyIFpyPS9bXisvMC05QS1aYS16LV9dL2c7ZnVuY3Rpb24gUXIoaSl7aWYoaT1pLnNwbGl0KFwiPVwiKVswXSxpPWkudHJpbSgpLnJlcGxhY2UoWnIsXCJcIiksaS5sZW5ndGg8MilyZXR1cm5cIlwiO2Zvcig7aS5sZW5ndGglNCE9PTA7KWk9aStcIj1cIjtyZXR1cm4gaX1mdW5jdGlvbiBXKGkscil7cj1yfHwxLzA7bGV0IHQsbj1pLmxlbmd0aCxlPW51bGwsbz1bXTtmb3IobGV0IHU9MDt1PG47Kyt1KXtpZih0PWkuY2hhckNvZGVBdCh1KSx0PjU1Mjk1JiZ0PDU3MzQ0KXtpZighZSl7aWYodD41NjMxOSl7KHItPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWVsc2UgaWYodSsxPT09bil7KHItPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWU9dDtjb250aW51ZX1pZih0PDU2MzIwKXsoci09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSksZT10O2NvbnRpbnVlfXQ9KGUtNTUyOTY8PDEwfHQtNTYzMjApKzY1NTM2fWVsc2UgZSYmKHItPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2lmKGU9bnVsbCx0PDEyOCl7aWYoKHItPTEpPDApYnJlYWs7by5wdXNoKHQpfWVsc2UgaWYodDwyMDQ4KXtpZigoci09Mik8MClicmVhaztvLnB1c2godD4+NnwxOTIsdCY2M3wxMjgpfWVsc2UgaWYodDw2NTUzNil7aWYoKHItPTMpPDApYnJlYWs7by5wdXNoKHQ+PjEyfDIyNCx0Pj42JjYzfDEyOCx0JjYzfDEyOCl9ZWxzZSBpZih0PDExMTQxMTIpe2lmKChyLT00KTwwKWJyZWFrO28ucHVzaCh0Pj4xOHwyNDAsdD4+MTImNjN8MTI4LHQ+PjYmNjN8MTI4LHQmNjN8MTI4KX1lbHNlIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29kZSBwb2ludFwiKX1yZXR1cm4gb31mdW5jdGlvbiB2cihpKXtsZXQgcj1bXTtmb3IobGV0IHQ9MDt0PGkubGVuZ3RoOysrdClyLnB1c2goaS5jaGFyQ29kZUF0KHQpJjI1NSk7cmV0dXJuIHJ9ZnVuY3Rpb24gcnQoaSxyKXtsZXQgdCxuLGUsbz1bXTtmb3IobGV0IHU9MDt1PGkubGVuZ3RoJiYhKChyLT0yKTwwKTsrK3UpdD1pLmNoYXJDb2RlQXQodSksbj10Pj44LGU9dCUyNTYsby5wdXNoKGUpLG8ucHVzaChuKTtyZXR1cm4gb31mdW5jdGlvbiB3cihpKXtyZXR1cm4gRy50b0J5dGVBcnJheShRcihpKSl9ZnVuY3Rpb24gRChpLHIsdCxuKXtsZXQgZTtmb3IoZT0wO2U8biYmIShlK3Q+PXIubGVuZ3RofHxlPj1pLmxlbmd0aCk7KytlKXJbZSt0XT1pW2VdO3JldHVybiBlfWZ1bmN0aW9uIEUoaSxyKXtyZXR1cm4gaSBpbnN0YW5jZW9mIHJ8fGkhPW51bGwmJmkuY29uc3RydWN0b3IhPW51bGwmJmkuY29uc3RydWN0b3IubmFtZSE9bnVsbCYmaS5jb25zdHJ1Y3Rvci5uYW1lPT09ci5uYW1lfWZ1bmN0aW9uIFgoaSl7cmV0dXJuIGkhPT1pfXZhciB0dD1mdW5jdGlvbigpe2xldCBpPVwiMDEyMzQ1Njc4OWFiY2RlZlwiLHI9bmV3IEFycmF5KDI1Nik7Zm9yKGxldCB0PTA7dDwxNjsrK3Qpe2xldCBuPXQqMTY7Zm9yKGxldCBlPTA7ZTwxNjsrK2UpcltuK2VdPWlbdF0raVtlXX1yZXR1cm4gcn0oKTtmdW5jdGlvbiBnKGkpe3JldHVybiB0eXBlb2YgQmlnSW50PlwidVwiP2l0Oml9ZnVuY3Rpb24gaXQoKXt0aHJvdyBuZXcgRXJyb3IoXCJCaWdJbnQgbm90IHN1cHBvcnRlZFwiKX19KTt2YXIgQz17fTtGcihDLHtkZWZhdWx0OigpPT5udH0pO21vZHVsZS5leHBvcnRzPUFyKEMpO3ZhciB4cj1KKHooKSk7UyhDLEooeigpKSxtb2R1bGUuZXhwb3J0cyk7dmFyIG50PXhyLmRlZmF1bHQ7XG4vKiEgQnVuZGxlZCBsaWNlbnNlIGluZm9ybWF0aW9uOlxuXG5pZWVlNzU0L2luZGV4LmpzOlxuICAoKiEgaWVlZTc1NC4gQlNELTMtQ2xhdXNlIExpY2Vuc2UuIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZy9vcGVuc291cmNlPiAqKVxuXG5idWZmZXIvaW5kZXguanM6XG4gICgqIVxuICAgKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAgICpcbiAgICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZz5cbiAgICogQGxpY2Vuc2UgIE1JVFxuICAgKilcbiovXG4iLCIndXNlIHN0cmljdCc7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5WRVJTSU9OID0gdm9pZCAwO1xuZXhwb3J0cy5WRVJTSU9OID0gJzQuNC4wJzsgLy8geC1yZWxlYXNlLXBsZWFzZS12ZXJzaW9uXG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZXJzaW9uLmpzLm1hcFxuIiwiZXhwb3J0IGNvbnN0IFZFUlNJT04gPSAnNC40LjAnOyAvLyB4LXJlbGVhc2UtcGxlYXNlLXZlcnNpb25cbiIsIid1c2Ugc3RyaWN0Jztcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlN0cmVhbSA9IHZvaWQgMDtcbmNsYXNzIFN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKHJlc3BvbnNlLCBjb250cm9sbGVyKSB7XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gICAgdGhpcy5kZWNvZGVyID0gbmV3IFNTRURlY29kZXIoKTtcbiAgfVxuICBhc3luYyAqaXRlck1lc3NhZ2VzKCkge1xuICAgIGlmICghdGhpcy5yZXNwb25zZS5ib2R5KSB7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGl0ZXJhdGUgb3ZlciBhIHJlc3BvbnNlIHdpdGggbm8gYm9keWApO1xuICAgIH1cbiAgICBjb25zdCBsaW5lRGVjb2RlciA9IG5ldyBMaW5lRGVjb2RlcigpO1xuICAgIGNvbnN0IGl0ZXIgPSByZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmFibGUodGhpcy5yZXNwb25zZS5ib2R5KTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0ZXIpIHtcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5kZWNvZGUoY2h1bmspKSB7XG4gICAgICAgIGNvbnN0IHNzZSA9IHRoaXMuZGVjb2Rlci5kZWNvZGUobGluZSk7XG4gICAgICAgIGlmIChzc2UpIHlpZWxkIHNzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmZsdXNoKCkpIHtcbiAgICAgIGNvbnN0IHNzZSA9IHRoaXMuZGVjb2Rlci5kZWNvZGUobGluZSk7XG4gICAgICBpZiAoc3NlKSB5aWVsZCBzc2U7XG4gICAgfVxuICB9XG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGZvciBhd2FpdCAoY29uc3Qgc3NlIG9mIHRoaXMuaXRlck1lc3NhZ2VzKCkpIHtcbiAgICAgICAgaWYgKGRvbmUpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoc3NlLmRhdGEuc3RhcnRzV2l0aCgnW0RPTkVdJykpIHtcbiAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3NlLmV2ZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHlpZWxkIEpTT04ucGFyc2Uoc3NlLmRhdGEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYENvdWxkIG5vdCBwYXJzZSBtZXNzYWdlIGludG8gSlNPTjpgLCBzc2UuZGF0YSk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGcm9tIGNodW5rOmAsIHNzZS5yYXcpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIGNhbGxzIGBzdHJlYW0uY29udHJvbGxlci5hYm9ydCgpYCwgd2Ugc2hvdWxkIGV4aXQgd2l0aG91dCB0aHJvd2luZy5cbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHJldHVybjtcbiAgICAgIHRocm93IGU7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIGBicmVha2BzLCBhYm9ydCB0aGUgb25nb2luZyByZXF1ZXN0LlxuICAgICAgaWYgKCFkb25lKSB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICB9XG4gIH1cbn1cbmV4cG9ydHMuU3RyZWFtID0gU3RyZWFtO1xuY2xhc3MgU1NFRGVjb2RlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXZlbnQgPSBudWxsO1xuICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgIHRoaXMuY2h1bmtzID0gW107XG4gIH1cbiAgZGVjb2RlKGxpbmUpIHtcbiAgICBpZiAobGluZS5lbmRzV2l0aCgnXFxyJykpIHtcbiAgICAgIGxpbmUgPSBsaW5lLnN1YnN0cmluZygwLCBsaW5lLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIC8vIGVtcHR5IGxpbmUgYW5kIHdlIGRpZG4ndCBwcmV2aW91c2x5IGVuY291bnRlciBhbnkgbWVzc2FnZXNcbiAgICAgIGlmICghdGhpcy5ldmVudCAmJiAhdGhpcy5kYXRhLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICBjb25zdCBzc2UgPSB7XG4gICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLmRhdGEuam9pbignXFxuJyksXG4gICAgICAgIHJhdzogdGhpcy5jaHVua3MsXG4gICAgICB9O1xuICAgICAgdGhpcy5ldmVudCA9IG51bGw7XG4gICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgIHRoaXMuY2h1bmtzID0gW107XG4gICAgICByZXR1cm4gc3NlO1xuICAgIH1cbiAgICB0aGlzLmNodW5rcy5wdXNoKGxpbmUpO1xuICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJzonKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBbZmllbGRuYW1lLCBfLCB2YWx1ZV0gPSBwYXJ0aXRpb24obGluZSwgJzonKTtcbiAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnICcpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICB9XG4gICAgaWYgKGZpZWxkbmFtZSA9PT0gJ2V2ZW50Jykge1xuICAgICAgdGhpcy5ldmVudCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoZmllbGRuYW1lID09PSAnZGF0YScpIHtcbiAgICAgIHRoaXMuZGF0YS5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbi8qKlxuICogQSByZS1pbXBsZW1lbnRhdGlvbiBvZiBodHRweCdzIGBMaW5lRGVjb2RlcmAgaW4gUHl0aG9uIHRoYXQgaGFuZGxlcyBpbmNyZW1lbnRhbGx5XG4gKiByZWFkaW5nIGxpbmVzIGZyb20gdGV4dC5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZW5jb2RlL2h0dHB4L2Jsb2IvOTIwMzMzZWE5ODExOGU5Y2Y2MTdmMjQ2OTA1ZDdiMjAyNTEwOTQxYy9odHRweC9fZGVjb2RlcnMucHkjTDI1OFxuICovXG5jbGFzcyBMaW5lRGVjb2RlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgdGhpcy50cmFpbGluZ0NSID0gZmFsc2U7XG4gIH1cbiAgZGVjb2RlKGNodW5rKSB7XG4gICAgbGV0IHRleHQgPSB0aGlzLmRlY29kZVRleHQoY2h1bmspO1xuICAgIGlmICh0aGlzLnRyYWlsaW5nQ1IpIHtcbiAgICAgIHRleHQgPSAnXFxyJyArIHRleHQ7XG4gICAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRleHQuZW5kc1dpdGgoJ1xccicpKSB7XG4gICAgICB0aGlzLnRyYWlsaW5nQ1IgPSB0cnVlO1xuICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMCwgLTEpO1xuICAgIH1cbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgY29uc3QgdHJhaWxpbmdOZXdsaW5lID0gTGluZURlY29kZXIuTkVXTElORV9DSEFSUy5oYXModGV4dFt0ZXh0Lmxlbmd0aCAtIDFdIHx8ICcnKTtcbiAgICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KExpbmVEZWNvZGVyLk5FV0xJTkVfUkVHRVhQKTtcbiAgICBpZiAobGluZXMubGVuZ3RoID09PSAxICYmICF0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIHRoaXMuYnVmZmVyLnB1c2gobGluZXNbMF0pO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgbGluZXMgPSBbdGhpcy5idWZmZXIuam9pbignJykgKyBsaW5lc1swXSwgLi4ubGluZXMuc2xpY2UoMSldO1xuICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB9XG4gICAgaWYgKCF0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gW2xpbmVzLnBvcCgpIHx8ICcnXTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG4gIGRlY29kZVRleHQoYnl0ZXMpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKGJ5dGVzID09IG51bGwpIHJldHVybiAnJztcbiAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykgcmV0dXJuIGJ5dGVzO1xuICAgIC8vIE5vZGU6XG4gICAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIGJ5dGVzLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShieXRlcykudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQ6IHJlY2VpdmVkIG5vbi1VaW50OEFycmF5ICgke2J5dGVzLmNvbnN0cnVjdG9yLm5hbWV9KSBzdHJlYW0gY2h1bmsgaW4gYW4gZW52aXJvbm1lbnQgd2l0aCBhIGdsb2JhbCBcIkJ1ZmZlclwiIGRlZmluZWQsIHdoaWNoIHRoaXMgbGlicmFyeSBhc3N1bWVzIHRvIGJlIE5vZGUuIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICAgKTtcbiAgICB9XG4gICAgLy8gQnJvd3NlclxuICAgIGlmICh0eXBlb2YgVGV4dERlY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IGJ5dGVzIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgKF9hID0gdGhpcy50ZXh0RGVjb2RlcikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKHRoaXMudGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoJ3V0ZjgnKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHREZWNvZGVyLmRlY29kZShieXRlcyk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBVbmV4cGVjdGVkOiByZWNlaXZlZCBub24tVWludDhBcnJheS9BcnJheUJ1ZmZlciAoJHtieXRlcy5jb25zdHJ1Y3Rvci5uYW1lfSkgaW4gYSB3ZWIgcGxhdGZvcm0uIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFVuZXhwZWN0ZWQ6IG5laXRoZXIgQnVmZmVyIG5vciBUZXh0RGVjb2RlciBhcmUgYXZhaWxhYmxlIGFzIGdsb2JhbHMuIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICk7XG4gIH1cbiAgZmx1c2goKSB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5sZW5ndGggJiYgIXRoaXMudHJhaWxpbmdDUikge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBjb25zdCBsaW5lcyA9IFt0aGlzLmJ1ZmZlci5qb2luKCcnKV07XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgICByZXR1cm4gbGluZXM7XG4gIH1cbn1cbi8vIHByZXR0aWVyLWlnbm9yZVxuTGluZURlY29kZXIuTkVXTElORV9DSEFSUyA9IG5ldyBTZXQoWydcXG4nLCAnXFxyJywgJ1xceDBiJywgJ1xceDBjJywgJ1xceDFjJywgJ1xceDFkJywgJ1xceDFlJywgJ1xceDg1JywgJ1xcdTIwMjgnLCAnXFx1MjAyOSddKTtcbkxpbmVEZWNvZGVyLk5FV0xJTkVfUkVHRVhQID0gL1xcclxcbnxbXFxuXFxyXFx4MGJcXHgwY1xceDFjXFx4MWRcXHgxZVxceDg1XFx1MjAyOFxcdTIwMjldL2c7XG5mdW5jdGlvbiBwYXJ0aXRpb24oc3RyLCBkZWxpbWl0ZXIpIHtcbiAgY29uc3QgaW5kZXggPSBzdHIuaW5kZXhPZihkZWxpbWl0ZXIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgcmV0dXJuIFtzdHIuc3Vic3RyaW5nKDAsIGluZGV4KSwgZGVsaW1pdGVyLCBzdHIuc3Vic3RyaW5nKGluZGV4ICsgZGVsaW1pdGVyLmxlbmd0aCldO1xuICB9XG4gIHJldHVybiBbc3RyLCAnJywgJyddO1xufVxuLyoqXG4gKiBNb3N0IGJyb3dzZXJzIGRvbid0IHlldCBoYXZlIGFzeW5jIGl0ZXJhYmxlIHN1cHBvcnQgZm9yIFJlYWRhYmxlU3RyZWFtLFxuICogYW5kIE5vZGUgaGFzIGEgdmVyeSBkaWZmZXJlbnQgd2F5IG9mIHJlYWRpbmcgYnl0ZXMgZnJvbSBpdHMgXCJSZWFkYWJsZVN0cmVhbVwiLlxuICpcbiAqIFRoaXMgcG9seWZpbGwgd2FzIHB1bGxlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9NYXR0aWFzQnVlbGVucy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9wdWxsLzEyMiNpc3N1ZWNvbW1lbnQtMTYyNzM1NDQ5MFxuICovXG5mdW5jdGlvbiByZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmFibGUoc3RyZWFtKSB7XG4gIGlmIChzdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKSByZXR1cm4gc3RyZWFtO1xuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gIHJldHVybiB7XG4gICAgYXN5bmMgbmV4dCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHQuZG9uZSkgcmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGNsb3NlZFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgZXJyb3JlZFxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHJlYWRlci5jYW5jZWwoKTtcbiAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTtcbiAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICB9LFxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyZWFtaW5nLmpzLm1hcFxuIiwiaW1wb3J0IHR5cGUgeyBSZXNwb25zZSB9IGZyb20gJy4vX3NoaW1zL2ZldGNoLmpzJztcblxudHlwZSBCeXRlcyA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgVWludDhBcnJheSB8IEJ1ZmZlciB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbnR5cGUgU2VydmVyU2VudEV2ZW50ID0ge1xuICBldmVudDogc3RyaW5nIHwgbnVsbDtcbiAgZGF0YTogc3RyaW5nO1xuICByYXc6IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IGNsYXNzIFN0cmVhbTxJdGVtPiBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8SXRlbT4ge1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG5cbiAgcHJpdmF0ZSByZXNwb25zZTogUmVzcG9uc2U7XG4gIHByaXZhdGUgZGVjb2RlcjogU1NFRGVjb2RlcjtcblxuICBjb25zdHJ1Y3RvcihyZXNwb25zZTogUmVzcG9uc2UsIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcikge1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTU0VEZWNvZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jICppdGVyTWVzc2FnZXMoKTogQXN5bmNHZW5lcmF0b3I8U2VydmVyU2VudEV2ZW50LCB2b2lkLCB1bmtub3duPiB7XG4gICAgaWYgKCF0aGlzLnJlc3BvbnNlLmJvZHkpIHtcbiAgICAgIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gaXRlcmF0ZSBvdmVyIGEgcmVzcG9uc2Ugd2l0aCBubyBib2R5YCk7XG4gICAgfVxuICAgIGNvbnN0IGxpbmVEZWNvZGVyID0gbmV3IExpbmVEZWNvZGVyKCk7XG5cbiAgICBjb25zdCBpdGVyID0gcmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhYmxlPEJ5dGVzPih0aGlzLnJlc3BvbnNlLmJvZHkpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcikge1xuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmRlY29kZShjaHVuaykpIHtcbiAgICAgICAgY29uc3Qgc3NlID0gdGhpcy5kZWNvZGVyLmRlY29kZShsaW5lKTtcbiAgICAgICAgaWYgKHNzZSkgeWllbGQgc3NlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5mbHVzaCgpKSB7XG4gICAgICBjb25zdCBzc2UgPSB0aGlzLmRlY29kZXIuZGVjb2RlKGxpbmUpO1xuICAgICAgaWYgKHNzZSkgeWllbGQgc3NlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmF0b3I8SXRlbSwgYW55LCB1bmRlZmluZWQ+IHtcbiAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBmb3IgYXdhaXQgKGNvbnN0IHNzZSBvZiB0aGlzLml0ZXJNZXNzYWdlcygpKSB7XG4gICAgICAgIGlmIChkb25lKSBjb250aW51ZTtcblxuICAgICAgICBpZiAoc3NlLmRhdGEuc3RhcnRzV2l0aCgnW0RPTkVdJykpIHtcbiAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzc2UuZXZlbnQgPT09IG51bGwpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgeWllbGQgSlNPTi5wYXJzZShzc2UuZGF0YSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ291bGQgbm90IHBhcnNlIG1lc3NhZ2UgaW50byBKU09OOmAsIHNzZS5kYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZyb20gY2h1bms6YCwgc3NlLnJhdyk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZG9uZSA9IHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgY2FsbHMgYHN0cmVhbS5jb250cm9sbGVyLmFib3J0KClgLCB3ZSBzaG91bGQgZXhpdCB3aXRob3V0IHRocm93aW5nLlxuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm5hbWUgPT09ICdBYm9ydEVycm9yJykgcmV0dXJuO1xuICAgICAgdGhyb3cgZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgYGJyZWFrYHMsIGFib3J0IHRoZSBvbmdvaW5nIHJlcXVlc3QuXG4gICAgICBpZiAoIWRvbmUpIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBTU0VEZWNvZGVyIHtcbiAgcHJpdmF0ZSBkYXRhOiBzdHJpbmdbXTtcbiAgcHJpdmF0ZSBldmVudDogc3RyaW5nIHwgbnVsbDtcbiAgcHJpdmF0ZSBjaHVua3M6IHN0cmluZ1tdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXZlbnQgPSBudWxsO1xuICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgIHRoaXMuY2h1bmtzID0gW107XG4gIH1cblxuICBkZWNvZGUobGluZTogc3RyaW5nKSB7XG4gICAgaWYgKGxpbmUuZW5kc1dpdGgoJ1xccicpKSB7XG4gICAgICBsaW5lID0gbGluZS5zdWJzdHJpbmcoMCwgbGluZS5sZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIC8vIGVtcHR5IGxpbmUgYW5kIHdlIGRpZG4ndCBwcmV2aW91c2x5IGVuY291bnRlciBhbnkgbWVzc2FnZXNcbiAgICAgIGlmICghdGhpcy5ldmVudCAmJiAhdGhpcy5kYXRhLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHNzZTogU2VydmVyU2VudEV2ZW50ID0ge1xuICAgICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgICAgZGF0YTogdGhpcy5kYXRhLmpvaW4oJ1xcbicpLFxuICAgICAgICByYXc6IHRoaXMuY2h1bmtzLFxuICAgICAgfTtcblxuICAgICAgdGhpcy5ldmVudCA9IG51bGw7XG4gICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgIHRoaXMuY2h1bmtzID0gW107XG5cbiAgICAgIHJldHVybiBzc2U7XG4gICAgfVxuXG4gICAgdGhpcy5jaHVua3MucHVzaChsaW5lKTtcblxuICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJzonKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IFtmaWVsZG5hbWUsIF8sIHZhbHVlXSA9IHBhcnRpdGlvbihsaW5lLCAnOicpO1xuXG4gICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJyAnKSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgaWYgKGZpZWxkbmFtZSA9PT0gJ2V2ZW50Jykge1xuICAgICAgdGhpcy5ldmVudCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoZmllbGRuYW1lID09PSAnZGF0YScpIHtcbiAgICAgIHRoaXMuZGF0YS5wdXNoKHZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEEgcmUtaW1wbGVtZW50YXRpb24gb2YgaHR0cHgncyBgTGluZURlY29kZXJgIGluIFB5dGhvbiB0aGF0IGhhbmRsZXMgaW5jcmVtZW50YWxseVxuICogcmVhZGluZyBsaW5lcyBmcm9tIHRleHQuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9odHRweC9ibG9iLzkyMDMzM2VhOTgxMThlOWNmNjE3ZjI0NjkwNWQ3YjIwMjUxMDk0MWMvaHR0cHgvX2RlY29kZXJzLnB5I0wyNThcbiAqL1xuY2xhc3MgTGluZURlY29kZXIge1xuICAvLyBwcmV0dGllci1pZ25vcmVcbiAgc3RhdGljIE5FV0xJTkVfQ0hBUlMgPSBuZXcgU2V0KFsnXFxuJywgJ1xccicsICdcXHgwYicsICdcXHgwYycsICdcXHgxYycsICdcXHgxZCcsICdcXHgxZScsICdcXHg4NScsICdcXHUyMDI4JywgJ1xcdTIwMjknXSk7XG4gIHN0YXRpYyBORVdMSU5FX1JFR0VYUCA9IC9cXHJcXG58W1xcblxcclxceDBiXFx4MGNcXHgxY1xceDFkXFx4MWVcXHg4NVxcdTIwMjhcXHUyMDI5XS9nO1xuXG4gIGJ1ZmZlcjogc3RyaW5nW107XG4gIHRyYWlsaW5nQ1I6IGJvb2xlYW47XG4gIHRleHREZWNvZGVyOiBhbnk7IC8vIFRleHREZWNvZGVyIGZvdW5kIGluIGJyb3dzZXJzOyBub3QgdHlwZWQgdG8gYXZvaWQgcHVsbGluZyBpbiBlaXRoZXIgXCJkb21cIiBvciBcIm5vZGVcIiB0eXBlcy5cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIHRoaXMudHJhaWxpbmdDUiA9IGZhbHNlO1xuICB9XG5cbiAgZGVjb2RlKGNodW5rOiBCeXRlcyk6IHN0cmluZ1tdIHtcbiAgICBsZXQgdGV4dCA9IHRoaXMuZGVjb2RlVGV4dChjaHVuayk7XG5cbiAgICBpZiAodGhpcy50cmFpbGluZ0NSKSB7XG4gICAgICB0ZXh0ID0gJ1xccicgKyB0ZXh0O1xuICAgICAgdGhpcy50cmFpbGluZ0NSID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0ZXh0LmVuZHNXaXRoKCdcXHInKSkge1xuICAgICAgdGhpcy50cmFpbGluZ0NSID0gdHJ1ZTtcbiAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKDAsIC0xKTtcbiAgICB9XG5cbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFpbGluZ05ld2xpbmUgPSBMaW5lRGVjb2Rlci5ORVdMSU5FX0NIQVJTLmhhcyh0ZXh0W3RleHQubGVuZ3RoIC0gMV0gfHwgJycpO1xuICAgIGxldCBsaW5lcyA9IHRleHQuc3BsaXQoTGluZURlY29kZXIuTkVXTElORV9SRUdFWFApO1xuXG4gICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMSAmJiAhdHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICB0aGlzLmJ1ZmZlci5wdXNoKGxpbmVzWzBdISk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgIGxpbmVzID0gW3RoaXMuYnVmZmVyLmpvaW4oJycpICsgbGluZXNbMF0sIC4uLmxpbmVzLnNsaWNlKDEpXTtcbiAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgfVxuXG4gICAgaWYgKCF0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gW2xpbmVzLnBvcCgpIHx8ICcnXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBkZWNvZGVUZXh0KGJ5dGVzOiBCeXRlcyk6IHN0cmluZyB7XG4gICAgaWYgKGJ5dGVzID09IG51bGwpIHJldHVybiAnJztcbiAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykgcmV0dXJuIGJ5dGVzO1xuXG4gICAgLy8gTm9kZTpcbiAgICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gYnl0ZXMudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ5dGVzKS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBVbmV4cGVjdGVkOiByZWNlaXZlZCBub24tVWludDhBcnJheSAoJHtieXRlcy5jb25zdHJ1Y3Rvci5uYW1lfSkgc3RyZWFtIGNodW5rIGluIGFuIGVudmlyb25tZW50IHdpdGggYSBnbG9iYWwgXCJCdWZmZXJcIiBkZWZpbmVkLCB3aGljaCB0aGlzIGxpYnJhcnkgYXNzdW1lcyB0byBiZSBOb2RlLiBQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQnJvd3NlclxuICAgIGlmICh0eXBlb2YgVGV4dERlY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IGJ5dGVzIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgdGhpcy50ZXh0RGVjb2RlciA/Pz0gbmV3IFRleHREZWNvZGVyKCd1dGY4Jyk7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHREZWNvZGVyLmRlY29kZShieXRlcyk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQ6IHJlY2VpdmVkIG5vbi1VaW50OEFycmF5L0FycmF5QnVmZmVyICgke1xuICAgICAgICAgIChieXRlcyBhcyBhbnkpLmNvbnN0cnVjdG9yLm5hbWVcbiAgICAgICAgfSkgaW4gYSB3ZWIgcGxhdGZvcm0uIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVW5leHBlY3RlZDogbmVpdGhlciBCdWZmZXIgbm9yIFRleHREZWNvZGVyIGFyZSBhdmFpbGFibGUgYXMgZ2xvYmFscy4gUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLmAsXG4gICAgKTtcbiAgfVxuXG4gIGZsdXNoKCk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLmxlbmd0aCAmJiAhdGhpcy50cmFpbGluZ0NSKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgbGluZXMgPSBbdGhpcy5idWZmZXIuam9pbignJyldO1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgdGhpcy50cmFpbGluZ0NSID0gZmFsc2U7XG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnRpdGlvbihzdHI6IHN0cmluZywgZGVsaW1pdGVyOiBzdHJpbmcpOiBbc3RyaW5nLCBzdHJpbmcsIHN0cmluZ10ge1xuICBjb25zdCBpbmRleCA9IHN0ci5pbmRleE9mKGRlbGltaXRlcik7XG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICByZXR1cm4gW3N0ci5zdWJzdHJpbmcoMCwgaW5kZXgpLCBkZWxpbWl0ZXIsIHN0ci5zdWJzdHJpbmcoaW5kZXggKyBkZWxpbWl0ZXIubGVuZ3RoKV07XG4gIH1cblxuICByZXR1cm4gW3N0ciwgJycsICcnXTtcbn1cblxuLyoqXG4gKiBNb3N0IGJyb3dzZXJzIGRvbid0IHlldCBoYXZlIGFzeW5jIGl0ZXJhYmxlIHN1cHBvcnQgZm9yIFJlYWRhYmxlU3RyZWFtLFxuICogYW5kIE5vZGUgaGFzIGEgdmVyeSBkaWZmZXJlbnQgd2F5IG9mIHJlYWRpbmcgYnl0ZXMgZnJvbSBpdHMgXCJSZWFkYWJsZVN0cmVhbVwiLlxuICpcbiAqIFRoaXMgcG9seWZpbGwgd2FzIHB1bGxlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9NYXR0aWFzQnVlbGVucy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9wdWxsLzEyMiNpc3N1ZWNvbW1lbnQtMTYyNzM1NDQ5MFxuICovXG5mdW5jdGlvbiByZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmFibGU8VD4oc3RyZWFtOiBhbnkpOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8VD4ge1xuICBpZiAoc3RyZWFtW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSkgcmV0dXJuIHN0cmVhbTtcblxuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gIHJldHVybiB7XG4gICAgYXN5bmMgbmV4dCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChyZXN1bHQ/LmRvbmUpIHJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgd2hlbiBzdHJlYW0gYmVjb21lcyBjbG9zZWRcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGVycm9yZWRcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIHJldHVybigpIHtcbiAgICAgIGNvbnN0IGNhbmNlbFByb21pc2UgPSByZWFkZXIuY2FuY2VsKCk7XG4gICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgIGF3YWl0IGNhbmNlbFByb21pc2U7XG4gICAgICByZXR1cm4geyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XG4gICAgfSxcbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgfTtcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5JbnRlcm5hbFNlcnZlckVycm9yID1cbiAgZXhwb3J0cy5SYXRlTGltaXRFcnJvciA9XG4gIGV4cG9ydHMuVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yID1cbiAgZXhwb3J0cy5Db25mbGljdEVycm9yID1cbiAgZXhwb3J0cy5Ob3RGb3VuZEVycm9yID1cbiAgZXhwb3J0cy5QZXJtaXNzaW9uRGVuaWVkRXJyb3IgPVxuICBleHBvcnRzLkF1dGhlbnRpY2F0aW9uRXJyb3IgPVxuICBleHBvcnRzLkJhZFJlcXVlc3RFcnJvciA9XG4gIGV4cG9ydHMuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciA9XG4gIGV4cG9ydHMuQVBJQ29ubmVjdGlvbkVycm9yID1cbiAgZXhwb3J0cy5BUElVc2VyQWJvcnRFcnJvciA9XG4gIGV4cG9ydHMuQVBJRXJyb3IgPVxuICAgIHZvaWQgMDtcbmNvbnN0IGNvcmVfMSA9IHJlcXVpcmUoJy4vY29yZS5qcycpO1xuY2xhc3MgQVBJRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpIHtcbiAgICBzdXBlcihBUElFcnJvci5tYWtlTWVzc2FnZShlcnJvciwgbWVzc2FnZSkpO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgY29uc3QgZGF0YSA9IGVycm9yO1xuICAgIHRoaXMuZXJyb3IgPSBkYXRhO1xuICAgIHRoaXMuY29kZSA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YVsnY29kZSddO1xuICAgIHRoaXMucGFyYW0gPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGFbJ3BhcmFtJ107XG4gICAgdGhpcy50eXBlID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhWyd0eXBlJ107XG4gIH1cbiAgc3RhdGljIG1ha2VNZXNzYWdlKGVycm9yLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIChcbiAgICAgICAgZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLm1lc3NhZ2VcbiAgICAgICkgP1xuICAgICAgICB0eXBlb2YgZXJyb3IubWVzc2FnZSA9PT0gJ3N0cmluZycgPyBlcnJvci5tZXNzYWdlXG4gICAgICAgIDogSlNPTi5zdHJpbmdpZnkoZXJyb3IubWVzc2FnZSlcbiAgICAgIDogZXJyb3IgPyBKU09OLnN0cmluZ2lmeShlcnJvcilcbiAgICAgIDogbWVzc2FnZSB8fCAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcbiAgICApO1xuICB9XG4gIHN0YXRpYyBnZW5lcmF0ZShzdGF0dXMsIGVycm9yUmVzcG9uc2UsIG1lc3NhZ2UsIGhlYWRlcnMpIHtcbiAgICBpZiAoIXN0YXR1cykge1xuICAgICAgcmV0dXJuIG5ldyBBUElDb25uZWN0aW9uRXJyb3IoeyBjYXVzZTogKDAsIGNvcmVfMS5jYXN0VG9FcnJvcikoZXJyb3JSZXNwb25zZSkgfSk7XG4gICAgfVxuICAgIGNvbnN0IGVycm9yID0gZXJyb3JSZXNwb25zZSA9PT0gbnVsbCB8fCBlcnJvclJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvclJlc3BvbnNlWydlcnJvciddO1xuICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xuICAgICAgcmV0dXJuIG5ldyBCYWRSZXF1ZXN0RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuICAgIGlmIChzdGF0dXMgPT09IDQwMSkge1xuICAgICAgcmV0dXJuIG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzID09PSA0MDMpIHtcbiAgICAgIHJldHVybiBuZXcgUGVybWlzc2lvbkRlbmllZEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzID09PSA0MDQpIHtcbiAgICAgIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG4gICAgaWYgKHN0YXR1cyA9PT0gNDA5KSB7XG4gICAgICByZXR1cm4gbmV3IENvbmZsaWN0RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuICAgIGlmIChzdGF0dXMgPT09IDQyMikge1xuICAgICAgcmV0dXJuIG5ldyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuICAgIGlmIChzdGF0dXMgPT09IDQyOSkge1xuICAgICAgcmV0dXJuIG5ldyBSYXRlTGltaXRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG4gICAgaWYgKHN0YXR1cyA+PSA1MDApIHtcbiAgICAgIHJldHVybiBuZXcgSW50ZXJuYWxTZXJ2ZXJFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBUElFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgfVxufVxuZXhwb3J0cy5BUElFcnJvciA9IEFQSUVycm9yO1xuY2xhc3MgQVBJVXNlckFib3J0RXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9ID0ge30pIHtcbiAgICBzdXBlcih1bmRlZmluZWQsIHVuZGVmaW5lZCwgbWVzc2FnZSB8fCAnUmVxdWVzdCB3YXMgYWJvcnRlZC4nLCB1bmRlZmluZWQpO1xuICAgIHRoaXMuc3RhdHVzID0gdW5kZWZpbmVkO1xuICB9XG59XG5leHBvcnRzLkFQSVVzZXJBYm9ydEVycm9yID0gQVBJVXNlckFib3J0RXJyb3I7XG5jbGFzcyBBUElDb25uZWN0aW9uRXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSwgY2F1c2UgfSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdDb25uZWN0aW9uIGVycm9yLicsIHVuZGVmaW5lZCk7XG4gICAgdGhpcy5zdGF0dXMgPSB1bmRlZmluZWQ7XG4gICAgLy8gaW4gc29tZSBlbnZpcm9ubWVudHMgdGhlICdjYXVzZScgcHJvcGVydHkgaXMgYWxyZWFkeSBkZWNsYXJlZFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoY2F1c2UpIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuZXhwb3J0cy5BUElDb25uZWN0aW9uRXJyb3IgPSBBUElDb25uZWN0aW9uRXJyb3I7XG5jbGFzcyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yIGV4dGVuZHMgQVBJQ29ubmVjdGlvbkVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoeyBtZXNzYWdlOiAnUmVxdWVzdCB0aW1lZCBvdXQuJyB9KTtcbiAgfVxufVxuZXhwb3J0cy5BUElDb25uZWN0aW9uVGltZW91dEVycm9yID0gQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcjtcbmNsYXNzIEJhZFJlcXVlc3RFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLnN0YXR1cyA9IDQwMDtcbiAgfVxufVxuZXhwb3J0cy5CYWRSZXF1ZXN0RXJyb3IgPSBCYWRSZXF1ZXN0RXJyb3I7XG5jbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuc3RhdHVzID0gNDAxO1xuICB9XG59XG5leHBvcnRzLkF1dGhlbnRpY2F0aW9uRXJyb3IgPSBBdXRoZW50aWNhdGlvbkVycm9yO1xuY2xhc3MgUGVybWlzc2lvbkRlbmllZEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuc3RhdHVzID0gNDAzO1xuICB9XG59XG5leHBvcnRzLlBlcm1pc3Npb25EZW5pZWRFcnJvciA9IFBlcm1pc3Npb25EZW5pZWRFcnJvcjtcbmNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy5zdGF0dXMgPSA0MDQ7XG4gIH1cbn1cbmV4cG9ydHMuTm90Rm91bmRFcnJvciA9IE5vdEZvdW5kRXJyb3I7XG5jbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuc3RhdHVzID0gNDA5O1xuICB9XG59XG5leHBvcnRzLkNvbmZsaWN0RXJyb3IgPSBDb25mbGljdEVycm9yO1xuY2xhc3MgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuc3RhdHVzID0gNDIyO1xuICB9XG59XG5leHBvcnRzLlVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciA9IFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvcjtcbmNsYXNzIFJhdGVMaW1pdEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuc3RhdHVzID0gNDI5O1xuICB9XG59XG5leHBvcnRzLlJhdGVMaW1pdEVycm9yID0gUmF0ZUxpbWl0RXJyb3I7XG5jbGFzcyBJbnRlcm5hbFNlcnZlckVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige31cbmV4cG9ydHMuSW50ZXJuYWxTZXJ2ZXJFcnJvciA9IEludGVybmFsU2VydmVyRXJyb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvci5qcy5tYXBcbiIsIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCB7IGNhc3RUb0Vycm9yLCBIZWFkZXJzIH0gZnJvbSAnLi9jb3JlJztcblxuZXhwb3J0IGNsYXNzIEFQSUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICByZWFkb25seSBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgZXJyb3I6IE9iamVjdCB8IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBjb2RlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICByZWFkb25seSBwYXJhbTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yOiBPYmplY3QgfCB1bmRlZmluZWQsXG4gICAgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gICkge1xuICAgIHN1cGVyKEFQSUVycm9yLm1ha2VNZXNzYWdlKGVycm9yLCBtZXNzYWdlKSk7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcblxuICAgIGNvbnN0IGRhdGEgPSBlcnJvciBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIHRoaXMuZXJyb3IgPSBkYXRhO1xuICAgIHRoaXMuY29kZSA9IGRhdGE/LlsnY29kZSddO1xuICAgIHRoaXMucGFyYW0gPSBkYXRhPy5bJ3BhcmFtJ107XG4gICAgdGhpcy50eXBlID0gZGF0YT8uWyd0eXBlJ107XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBtYWtlTWVzc2FnZShlcnJvcjogYW55LCBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZXJyb3I/Lm1lc3NhZ2UgP1xuICAgICAgICB0eXBlb2YgZXJyb3IubWVzc2FnZSA9PT0gJ3N0cmluZycgPyBlcnJvci5tZXNzYWdlXG4gICAgICAgIDogSlNPTi5zdHJpbmdpZnkoZXJyb3IubWVzc2FnZSlcbiAgICAgIDogZXJyb3IgPyBKU09OLnN0cmluZ2lmeShlcnJvcilcbiAgICAgIDogbWVzc2FnZSB8fCAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGdlbmVyYXRlKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yUmVzcG9uc2U6IE9iamVjdCB8IHVuZGVmaW5lZCxcbiAgICBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKSB7XG4gICAgaWYgKCFzdGF0dXMpIHtcbiAgICAgIHJldHVybiBuZXcgQVBJQ29ubmVjdGlvbkVycm9yKHsgY2F1c2U6IGNhc3RUb0Vycm9yKGVycm9yUmVzcG9uc2UpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yID0gKGVycm9yUmVzcG9uc2UgYXMgUmVjb3JkPHN0cmluZywgYW55Pik/LlsnZXJyb3InXTtcblxuICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xuICAgICAgcmV0dXJuIG5ldyBCYWRSZXF1ZXN0RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICByZXR1cm4gbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICByZXR1cm4gbmV3IFBlcm1pc3Npb25EZW5pZWRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDQpIHtcbiAgICAgIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDkpIHtcbiAgICAgIHJldHVybiBuZXcgQ29uZmxpY3RFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MjIpIHtcbiAgICAgIHJldHVybiBuZXcgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQyOSkge1xuICAgICAgcmV0dXJuIG5ldyBSYXRlTGltaXRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID49IDUwMCkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcm5hbFNlcnZlckVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgQVBJRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSVVzZXJBYm9ydEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UgfTogeyBtZXNzYWdlPzogc3RyaW5nIH0gPSB7fSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdSZXF1ZXN0IHdhcyBhYm9ydGVkLicsIHVuZGVmaW5lZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSUNvbm5lY3Rpb25FcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBjYXVzZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmc7IGNhdXNlPzogRXJyb3IgfCB1bmRlZmluZWQgfSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdDb25uZWN0aW9uIGVycm9yLicsIHVuZGVmaW5lZCk7XG4gICAgLy8gaW4gc29tZSBlbnZpcm9ubWVudHMgdGhlICdjYXVzZScgcHJvcGVydHkgaXMgYWxyZWFkeSBkZWNsYXJlZFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoY2F1c2UpIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciBleHRlbmRzIEFQSUNvbm5lY3Rpb25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHsgbWVzc2FnZTogJ1JlcXVlc3QgdGltZWQgb3V0LicgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJhZFJlcXVlc3RFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MDAgPSA0MDA7XG59XG5cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQwMSA9IDQwMTtcbn1cblxuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb25EZW5pZWRFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MDMgPSA0MDM7XG59XG5cbmV4cG9ydCBjbGFzcyBOb3RGb3VuZEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQwNCA9IDQwNDtcbn1cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogNDA5ID0gNDA5O1xufVxuXG5leHBvcnQgY2xhc3MgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQyMiA9IDQyMjtcbn1cblxuZXhwb3J0IGNsYXNzIFJhdGVMaW1pdEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQyOSA9IDQyOTtcbn1cblxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyRXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7fVxuIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICpcbiAqIFRoaXMgaXMgYSBzdHViIGZvciBub24tbm9kZSBlbnZpcm9ubWVudHMuXG4gKiBJbiBub2RlIGVudmlyb25tZW50cywgaXQgZ2V0cyByZXBsYWNlZCBhZ2VudC5ub2RlLnRzIGJ5IHRoZSBwYWNrYWdlIGV4cG9ydCBtYXBcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0RGVmYXVsdEFnZW50ID0gdm9pZCAwO1xuY29uc3QgZ2V0RGVmYXVsdEFnZW50ID0gKHVybCkgPT4ge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbmV4cG9ydHMuZ2V0RGVmYXVsdEFnZW50ID0gZ2V0RGVmYXVsdEFnZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWdlbnQuanMubWFwXG4iLCIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKlxuICogVGhpcyBpcyBhIHN0dWIgZm9yIG5vbi1ub2RlIGVudmlyb25tZW50cy5cbiAqIEluIG5vZGUgZW52aXJvbm1lbnRzLCBpdCBnZXRzIHJlcGxhY2VkIGFnZW50Lm5vZGUudHMgYnkgdGhlIHBhY2thZ2UgZXhwb3J0IG1hcFxuICovXG5cbmV4cG9ydCB0eXBlIEFnZW50ID0gYW55O1xuXG5leHBvcnQgY29uc3QgZ2V0RGVmYXVsdEFnZW50ID0gKHVybDogc3RyaW5nKTogYW55ID0+IHtcbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG4iLCIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cblxuLy8gSWYgd2UgYWNjaWRlbnRhbGx5IGNhbGwgZmV0Y2ggd2l0aCB0aGUgd3JvbmcgdGhpcyBiaW5kaW5nLFxuLy8gaW4gdGhlIGJyb3dzZXIgaXQgd291bGQgdGhyb3c6XG4vLyAgIFR5cGVFcnJvcjogRmFpbGVkIHRvIGV4ZWN1dGUgJ2ZldGNoJyBvbiAnV2luZG93JzogSWxsZWdhbCBpbnZvY2F0aW9uXG5leHBvcnRzLmZldGNoID0gZmV0Y2guYmluZCh1bmRlZmluZWQpO1xuZXhwb3J0cy5SZXF1ZXN0ID0gUmVxdWVzdDtcbmV4cG9ydHMuUmVzcG9uc2UgPSBSZXNwb25zZTtcbmV4cG9ydHMuSGVhZGVycyA9IEhlYWRlcnM7XG5cbmV4cG9ydHMuaXNQb2x5ZmlsbGVkID0gZmFsc2U7XG4iLCIndXNlIHN0cmljdCc7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jcmVhdGVGb3JtID1cbiAgZXhwb3J0cy5tdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPVxuICBleHBvcnRzLm1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zID1cbiAgZXhwb3J0cy5pc011bHRpcGFydEJvZHkgPVxuICBleHBvcnRzLk11bHRpcGFydEJvZHkgPVxuICBleHBvcnRzLnRvRmlsZSA9XG4gIGV4cG9ydHMuaXNVcGxvYWRhYmxlID1cbiAgZXhwb3J0cy5pc0Jsb2JMaWtlID1cbiAgZXhwb3J0cy5pc0ZpbGVMaWtlID1cbiAgZXhwb3J0cy5pc1Jlc3BvbnNlTGlrZSA9XG4gIGV4cG9ydHMuZmlsZUZyb21QYXRoID1cbiAgICB2b2lkIDA7XG5jb25zdCBmb3JtZGF0YV8xID0gcmVxdWlyZSgnb3BlbmFpL19zaGltcy9mb3JtZGF0YScpO1xuY29uc3QgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnNfMSA9IHJlcXVpcmUoJ29wZW5haS9fc2hpbXMvZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMnKTtcbmNvbnN0IGZpbGVGcm9tUGF0aF8xID0gcmVxdWlyZSgnb3BlbmFpL19zaGltcy9maWxlRnJvbVBhdGgnKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnZmlsZUZyb21QYXRoJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmlsZUZyb21QYXRoXzEuZmlsZUZyb21QYXRoO1xuICB9LFxufSk7XG5jb25zdCBub2RlX3JlYWRhYmxlXzEgPSByZXF1aXJlKCdvcGVuYWkvX3NoaW1zL25vZGUtcmVhZGFibGUnKTtcbmNvbnN0IGlzUmVzcG9uc2VMaWtlID0gKHZhbHVlKSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLnVybCA9PT0gJ3N0cmluZycgJiZcbiAgdHlwZW9mIHZhbHVlLmJsb2IgPT09ICdmdW5jdGlvbic7XG5leHBvcnRzLmlzUmVzcG9uc2VMaWtlID0gaXNSZXNwb25zZUxpa2U7XG5jb25zdCBpc0ZpbGVMaWtlID0gKHZhbHVlKSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLm5hbWUgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS5sYXN0TW9kaWZpZWQgPT09ICdudW1iZXInICYmXG4gICgwLCBleHBvcnRzLmlzQmxvYkxpa2UpKHZhbHVlKTtcbmV4cG9ydHMuaXNGaWxlTGlrZSA9IGlzRmlsZUxpa2U7XG4vKipcbiAqIFRoZSBCbG9iTGlrZSB0eXBlIG9taXRzIGFycmF5QnVmZmVyKCkgYmVjYXVzZSBAdHlwZXMvbm9kZS1mZXRjaEBeMi42LjQgbGFja3MgaXQ7IGJ1dCB0aGlzIGNoZWNrXG4gKiBhZGRzIHRoZSBhcnJheUJ1ZmZlcigpIG1ldGhvZCB0eXBlIGJlY2F1c2UgaXQgaXMgYXZhaWxhYmxlIGFuZCB1c2VkIGF0IHJ1bnRpbWVcbiAqL1xuY29uc3QgaXNCbG9iTGlrZSA9ICh2YWx1ZSkgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS5zaXplID09PSAnbnVtYmVyJyAmJlxuICB0eXBlb2YgdmFsdWUudHlwZSA9PT0gJ3N0cmluZycgJiZcbiAgdHlwZW9mIHZhbHVlLnRleHQgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIHZhbHVlLnNsaWNlID09PSAnZnVuY3Rpb24nICYmXG4gIHR5cGVvZiB2YWx1ZS5hcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJztcbmV4cG9ydHMuaXNCbG9iTGlrZSA9IGlzQmxvYkxpa2U7XG5jb25zdCBpc1VwbG9hZGFibGUgPSAodmFsdWUpID0+IHtcbiAgcmV0dXJuIChcbiAgICAoMCwgZXhwb3J0cy5pc0ZpbGVMaWtlKSh2YWx1ZSkgfHxcbiAgICAoMCwgZXhwb3J0cy5pc1Jlc3BvbnNlTGlrZSkodmFsdWUpIHx8XG4gICAgKDAsIG5vZGVfcmVhZGFibGVfMS5pc0ZzUmVhZFN0cmVhbSkodmFsdWUpXG4gICk7XG59O1xuZXhwb3J0cy5pc1VwbG9hZGFibGUgPSBpc1VwbG9hZGFibGU7XG4vKipcbiAqIEhlbHBlciBmb3IgY3JlYXRpbmcgYSB7QGxpbmsgRmlsZX0gdG8gcGFzcyB0byBhbiBTREsgdXBsb2FkIG1ldGhvZCBmcm9tIGEgdmFyaWV0eSBvZiBkaWZmZXJlbnQgZGF0YSBmb3JtYXRzXG4gKiBAcGFyYW0gdmFsdWUgdGhlIHJhdyBjb250ZW50IG9mIHRoZSBmaWxlLiAgQ2FuIGJlIGFuIHtAbGluayBVcGxvYWRhYmxlfSwge0BsaW5rIEJsb2JMaWtlUGFydH0sIG9yIHtAbGluayBBc3luY0l0ZXJhYmxlfSBvZiB7QGxpbmsgQmxvYkxpa2VQYXJ0fXNcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgZmlsZS4gSWYgb21pdHRlZCwgdG9GaWxlIHdpbGwgdHJ5IHRvIGRldGVybWluZSBhIGZpbGUgbmFtZSBmcm9tIGJpdHMgaWYgcG9zc2libGVcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyBhZGRpdGlvbmFsIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0aW9ucy50eXBlIHRoZSBNSU1FIHR5cGUgb2YgdGhlIGNvbnRlbnRcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0aW9ucy5sYXN0TW9kaWZpZWQgdGhlIGxhc3QgbW9kaWZpZWQgdGltZXN0YW1wXG4gKiBAcmV0dXJucyBhIHtAbGluayBGaWxlfSB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0aWVzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHRvRmlsZSh2YWx1ZSwgbmFtZSwgb3B0aW9ucyA9IHt9KSB7XG4gIHZhciBfYSwgX2IsIF9jO1xuICAvLyBJZiBpdCdzIGEgcHJvbWlzZSwgcmVzb2x2ZSBpdC5cbiAgdmFsdWUgPSBhd2FpdCB2YWx1ZTtcbiAgaWYgKCgwLCBleHBvcnRzLmlzUmVzcG9uc2VMaWtlKSh2YWx1ZSkpIHtcbiAgICBjb25zdCBibG9iID0gYXdhaXQgdmFsdWUuYmxvYigpO1xuICAgIG5hbWUgfHxcbiAgICAgIChuYW1lID1cbiAgICAgICAgKF9hID0gbmV3IFVSTCh2YWx1ZS51cmwpLnBhdGhuYW1lLnNwbGl0KC9bXFxcXC9dLykucG9wKCkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgP1xuICAgICAgICAgIF9hXG4gICAgICAgIDogJ3Vua25vd25fZmlsZScpO1xuICAgIHJldHVybiBuZXcgZm9ybWRhdGFfMS5GaWxlKFtibG9iXSwgbmFtZSwgb3B0aW9ucyk7XG4gIH1cbiAgY29uc3QgYml0cyA9IGF3YWl0IGdldEJ5dGVzKHZhbHVlKTtcbiAgbmFtZSB8fCAobmFtZSA9IChfYiA9IGdldE5hbWUodmFsdWUpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAndW5rbm93bl9maWxlJyk7XG4gIGlmICghb3B0aW9ucy50eXBlKSB7XG4gICAgY29uc3QgdHlwZSA9IChfYyA9IGJpdHNbMF0pID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50eXBlO1xuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9wdGlvbnMgPSB7IC4uLm9wdGlvbnMsIHR5cGUgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBmb3JtZGF0YV8xLkZpbGUoYml0cywgbmFtZSwgb3B0aW9ucyk7XG59XG5leHBvcnRzLnRvRmlsZSA9IHRvRmlsZTtcbmFzeW5jIGZ1bmN0aW9uIGdldEJ5dGVzKHZhbHVlKSB7XG4gIHZhciBfYTtcbiAgbGV0IHBhcnRzID0gW107XG4gIGlmIChcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8XG4gICAgQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKSB8fCAvLyBpbmNsdWRlcyBVaW50OEFycmF5LCBCdWZmZXIsIGV0Yy5cbiAgICB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyXG4gICkge1xuICAgIHBhcnRzLnB1c2godmFsdWUpO1xuICB9IGVsc2UgaWYgKCgwLCBleHBvcnRzLmlzQmxvYkxpa2UpKHZhbHVlKSkge1xuICAgIHBhcnRzLnB1c2goYXdhaXQgdmFsdWUuYXJyYXlCdWZmZXIoKSk7XG4gIH0gZWxzZSBpZiAoXG4gICAgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IodmFsdWUpIC8vIGluY2x1ZGVzIFJlYWRhYmxlLCBSZWFkYWJsZVN0cmVhbSwgZXRjLlxuICApIHtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHZhbHVlKSB7XG4gICAgICBwYXJ0cy5wdXNoKGNodW5rKTsgLy8gVE9ETywgY29uc2lkZXIgdmFsaWRhdGluZz9cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFVuZXhwZWN0ZWQgZGF0YSB0eXBlOiAke3R5cGVvZiB2YWx1ZX07IGNvbnN0cnVjdG9yOiAke1xuICAgICAgICAoX2EgPSB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsdWUuY29uc3RydWN0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgP1xuICAgICAgICAgIHZvaWQgMFxuICAgICAgICA6IF9hLm5hbWVcbiAgICAgIH07IHByb3BzOiAke3Byb3BzRm9yRXJyb3IodmFsdWUpfWAsXG4gICAgKTtcbiAgfVxuICByZXR1cm4gcGFydHM7XG59XG5mdW5jdGlvbiBwcm9wc0ZvckVycm9yKHZhbHVlKSB7XG4gIGNvbnN0IHByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICByZXR1cm4gYFske3Byb3BzLm1hcCgocCkgPT4gYFwiJHtwfVwiYCkuam9pbignLCAnKX1dYDtcbn1cbmZ1bmN0aW9uIGdldE5hbWUodmFsdWUpIHtcbiAgdmFyIF9hO1xuICByZXR1cm4gKFxuICAgIGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlcih2YWx1ZS5uYW1lKSB8fFxuICAgIGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlcih2YWx1ZS5maWxlbmFtZSkgfHxcbiAgICAvLyBGb3IgZnMuUmVhZFN0cmVhbVxuICAgICgoX2EgPSBnZXRTdHJpbmdGcm9tTWF5YmVCdWZmZXIodmFsdWUucGF0aCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zcGxpdCgvW1xcXFwvXS8pLnBvcCgpKVxuICApO1xufVxuY29uc3QgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyID0gKHgpID0+IHtcbiAgaWYgKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgcmV0dXJuIHg7XG4gIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB4IGluc3RhbmNlb2YgQnVmZmVyKSByZXR1cm4gU3RyaW5nKHgpO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbmNvbnN0IGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yID0gKHZhbHVlKSA9PlxuICB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJztcbmNsYXNzIE11bHRpcGFydEJvZHkge1xuICBjb25zdHJ1Y3Rvcihib2R5KSB7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgfVxuICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG4gICAgcmV0dXJuICdNdWx0aXBhcnRCb2R5JztcbiAgfVxufVxuZXhwb3J0cy5NdWx0aXBhcnRCb2R5ID0gTXVsdGlwYXJ0Qm9keTtcbmNvbnN0IGlzTXVsdGlwYXJ0Qm9keSA9IChib2R5KSA9PlxuICBib2R5ICYmIHR5cGVvZiBib2R5ID09PSAnb2JqZWN0JyAmJiBib2R5LmJvZHkgJiYgYm9keVtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTXVsdGlwYXJ0Qm9keSc7XG5leHBvcnRzLmlzTXVsdGlwYXJ0Qm9keSA9IGlzTXVsdGlwYXJ0Qm9keTtcbi8qKlxuICogUmV0dXJucyBhIG11bHRpcGFydC9mb3JtLWRhdGEgcmVxdWVzdCBpZiBhbnkgcGFydCBvZiB0aGUgZ2l2ZW4gcmVxdWVzdCBib2R5IGNvbnRhaW5zIGEgRmlsZSAvIEJsb2IgdmFsdWUuXG4gKiBPdGhlcndpc2UgcmV0dXJucyB0aGUgcmVxdWVzdCBhcyBpcy5cbiAqL1xuY29uc3QgbWF5YmVNdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPSBhc3luYyAob3B0cykgPT4ge1xuICBpZiAoIWhhc1VwbG9hZGFibGVWYWx1ZShvcHRzLmJvZHkpKSByZXR1cm4gb3B0cztcbiAgY29uc3QgZm9ybSA9IGF3YWl0ICgwLCBleHBvcnRzLmNyZWF0ZUZvcm0pKG9wdHMuYm9keSk7XG4gIHJldHVybiAoMCwgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnNfMS5nZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucykoZm9ybSwgb3B0cyk7XG59O1xuZXhwb3J0cy5tYXliZU11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyA9IG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zO1xuY29uc3QgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zID0gYXN5bmMgKG9wdHMpID0+IHtcbiAgY29uc3QgZm9ybSA9IGF3YWl0ICgwLCBleHBvcnRzLmNyZWF0ZUZvcm0pKG9wdHMuYm9keSk7XG4gIHJldHVybiAoMCwgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnNfMS5nZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucykoZm9ybSwgb3B0cyk7XG59O1xuZXhwb3J0cy5tdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPSBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnM7XG5jb25zdCBjcmVhdGVGb3JtID0gYXN5bmMgKGJvZHkpID0+IHtcbiAgY29uc3QgZm9ybSA9IG5ldyBmb3JtZGF0YV8xLkZvcm1EYXRhKCk7XG4gIGF3YWl0IFByb21pc2UuYWxsKE9iamVjdC5lbnRyaWVzKGJvZHkgfHwge30pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBhZGRGb3JtVmFsdWUoZm9ybSwga2V5LCB2YWx1ZSkpKTtcbiAgcmV0dXJuIGZvcm07XG59O1xuZXhwb3J0cy5jcmVhdGVGb3JtID0gY3JlYXRlRm9ybTtcbmNvbnN0IGhhc1VwbG9hZGFibGVWYWx1ZSA9ICh2YWx1ZSkgPT4ge1xuICBpZiAoKDAsIGV4cG9ydHMuaXNVcGxvYWRhYmxlKSh2YWx1ZSkpIHJldHVybiB0cnVlO1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHJldHVybiB2YWx1ZS5zb21lKGhhc1VwbG9hZGFibGVWYWx1ZSk7XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgZm9yIChjb25zdCBrIGluIHZhbHVlKSB7XG4gICAgICBpZiAoaGFzVXBsb2FkYWJsZVZhbHVlKHZhbHVlW2tdKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5jb25zdCBhZGRGb3JtVmFsdWUgPSBhc3luYyAoZm9ybSwga2V5LCB2YWx1ZSkgPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgUmVjZWl2ZWQgbnVsbCBmb3IgXCIke2tleX1cIjsgdG8gcGFzcyBudWxsIGluIEZvcm1EYXRhLCB5b3UgbXVzdCB1c2UgdGhlIHN0cmluZyAnbnVsbCdgLFxuICAgICk7XG4gIH1cbiAgLy8gVE9ETzogbWFrZSBuZXN0ZWQgZm9ybWF0cyBjb25maWd1cmFibGVcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgIGZvcm0uYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gIH0gZWxzZSBpZiAoKDAsIGV4cG9ydHMuaXNVcGxvYWRhYmxlKSh2YWx1ZSkpIHtcbiAgICBjb25zdCBmaWxlID0gYXdhaXQgdG9GaWxlKHZhbHVlKTtcbiAgICBmb3JtLmFwcGVuZChrZXksIGZpbGUpO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodmFsdWUubWFwKChlbnRyeSkgPT4gYWRkRm9ybVZhbHVlKGZvcm0sIGtleSArICdbXScsIGVudHJ5KSkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5tYXAoKFtuYW1lLCBwcm9wXSkgPT4gYWRkRm9ybVZhbHVlKGZvcm0sIGAke2tleX1bJHtuYW1lfV1gLCBwcm9wKSksXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYEludmFsaWQgdmFsdWUgZ2l2ZW4gdG8gZm9ybSwgZXhwZWN0ZWQgYSBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb2JqZWN0LCBBcnJheSwgRmlsZSBvciBCbG9iIGJ1dCBnb3QgJHt2YWx1ZX0gaW5zdGVhZGAsXG4gICAgKTtcbiAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwbG9hZHMuanMubWFwXG4iLCJpbXBvcnQgeyB0eXBlIFJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi9jb3JlJztcbmltcG9ydCB7IHR5cGUgUmVhZGFibGUgfSBmcm9tICcuL19zaGltcy9ub2RlLXJlYWRhYmxlJztcbmltcG9ydCB7IHR5cGUgQm9keUluaXQgfSBmcm9tICcuL19zaGltcy9mZXRjaC5qcyc7XG5pbXBvcnQgeyBGb3JtRGF0YSwgRmlsZSwgdHlwZSBCbG9iLCB0eXBlIEZpbGVQcm9wZXJ0eUJhZyB9IGZyb20gJy4vX3NoaW1zL2Zvcm1kYXRhLmpzJztcbmltcG9ydCB7IGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi9fc2hpbXMvZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMnO1xuaW1wb3J0IHsgZmlsZUZyb21QYXRoIH0gZnJvbSAnLi9fc2hpbXMvZmlsZUZyb21QYXRoJztcbmltcG9ydCB7IHR5cGUgRnNSZWFkU3RyZWFtLCBpc0ZzUmVhZFN0cmVhbSB9IGZyb20gJy4vX3NoaW1zL25vZGUtcmVhZGFibGUnO1xuXG5leHBvcnQgeyBmaWxlRnJvbVBhdGggfTtcblxudHlwZSBCbG9iTGlrZVBhcnQgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IEFycmF5QnVmZmVyVmlldyB8IEJsb2JMaWtlIHwgVWludDhBcnJheSB8IERhdGFWaWV3O1xuZXhwb3J0IHR5cGUgQmxvYlBhcnQgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IEFycmF5QnVmZmVyVmlldyB8IEJsb2IgfCBVaW50OEFycmF5IHwgRGF0YVZpZXc7XG5cbi8qKlxuICogVHlwaWNhbGx5LCB0aGlzIGlzIGEgbmF0aXZlIFwiRmlsZVwiIGNsYXNzLlxuICpcbiAqIFdlIHByb3ZpZGUgdGhlIHtAbGluayB0b0ZpbGV9IHV0aWxpdHkgdG8gY29udmVydCBhIHZhcmlldHkgb2Ygb2JqZWN0c1xuICogaW50byB0aGUgRmlsZSBjbGFzcy5cbiAqXG4gKiBGb3IgY29udmVuaWVuY2UsIHlvdSBjYW4gYWxzbyBwYXNzIGEgZmV0Y2ggUmVzcG9uc2UsIG9yIGluIE5vZGUsXG4gKiB0aGUgcmVzdWx0IG9mIGZzLmNyZWF0ZVJlYWRTdHJlYW0oKS5cbiAqL1xuZXhwb3J0IHR5cGUgVXBsb2FkYWJsZSA9IEZpbGVMaWtlIHwgUmVzcG9uc2VMaWtlIHwgRnNSZWFkU3RyZWFtO1xuXG4vKipcbiAqIEludGVuZGVkIHRvIG1hdGNoIHdlYi5CbG9iLCBub2RlLkJsb2IsIG5vZGUtZmV0Y2guQmxvYiwgZXRjLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJsb2JMaWtlIHtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi9zaXplKSAqL1xuICByZWFkb25seSBzaXplOiBudW1iZXI7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2IvdHlwZSkgKi9cbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nO1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3RleHQpICovXG4gIHRleHQoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3NsaWNlKSAqL1xuICBzbGljZShzdGFydD86IG51bWJlciwgZW5kPzogbnVtYmVyKTogQmxvYkxpa2U7XG4gIC8vIHVuZm9ydHVuYXRlbHkgQHR5cGVzL25vZGUtZmV0Y2hAXjIuNi40IGRvZXNuJ3QgdHlwZSB0aGUgYXJyYXlCdWZmZXIgbWV0aG9kXG59XG5cbi8qKlxuICogSW50ZW5kZWQgdG8gbWF0Y2ggd2ViLkZpbGUsIG5vZGUuRmlsZSwgbm9kZS1mZXRjaC5GaWxlLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUxpa2UgZXh0ZW5kcyBCbG9iTGlrZSB7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZpbGUvbGFzdE1vZGlmaWVkKSAqL1xuICByZWFkb25seSBsYXN0TW9kaWZpZWQ6IG51bWJlcjtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvRmlsZS9uYW1lKSAqL1xuICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG59XG5cbi8qKlxuICogSW50ZW5kZWQgdG8gbWF0Y2ggd2ViLlJlc3BvbnNlLCBub2RlLlJlc3BvbnNlLCBub2RlLWZldGNoLlJlc3BvbnNlLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVzcG9uc2VMaWtlIHtcbiAgdXJsOiBzdHJpbmc7XG4gIGJsb2IoKTogUHJvbWlzZTxCbG9iTGlrZT47XG59XG5cbmV4cG9ydCBjb25zdCBpc1Jlc3BvbnNlTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgUmVzcG9uc2VMaWtlID0+XG4gIHZhbHVlICE9IG51bGwgJiZcbiAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICB0eXBlb2YgdmFsdWUudXJsID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUuYmxvYiA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlzRmlsZUxpa2UgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEZpbGVMaWtlID0+XG4gIHZhbHVlICE9IG51bGwgJiZcbiAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICB0eXBlb2YgdmFsdWUubmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgdHlwZW9mIHZhbHVlLmxhc3RNb2RpZmllZCA9PT0gJ251bWJlcicgJiZcbiAgaXNCbG9iTGlrZSh2YWx1ZSk7XG5cbi8qKlxuICogVGhlIEJsb2JMaWtlIHR5cGUgb21pdHMgYXJyYXlCdWZmZXIoKSBiZWNhdXNlIEB0eXBlcy9ub2RlLWZldGNoQF4yLjYuNCBsYWNrcyBpdDsgYnV0IHRoaXMgY2hlY2tcbiAqIGFkZHMgdGhlIGFycmF5QnVmZmVyKCkgbWV0aG9kIHR5cGUgYmVjYXVzZSBpdCBpcyBhdmFpbGFibGUgYW5kIHVzZWQgYXQgcnVudGltZVxuICovXG5leHBvcnQgY29uc3QgaXNCbG9iTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgQmxvYkxpa2UgJiB7IGFycmF5QnVmZmVyKCk6IFByb21pc2U8QXJyYXlCdWZmZXI+IH0gPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS5zaXplID09PSAnbnVtYmVyJyAmJlxuICB0eXBlb2YgdmFsdWUudHlwZSA9PT0gJ3N0cmluZycgJiZcbiAgdHlwZW9mIHZhbHVlLnRleHQgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIHZhbHVlLnNsaWNlID09PSAnZnVuY3Rpb24nICYmXG4gIHR5cGVvZiB2YWx1ZS5hcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlzVXBsb2FkYWJsZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgVXBsb2FkYWJsZSA9PiB7XG4gIHJldHVybiBpc0ZpbGVMaWtlKHZhbHVlKSB8fCBpc1Jlc3BvbnNlTGlrZSh2YWx1ZSkgfHwgaXNGc1JlYWRTdHJlYW0odmFsdWUpO1xufTtcblxuZXhwb3J0IHR5cGUgVG9GaWxlSW5wdXQgPSBVcGxvYWRhYmxlIHwgRXhjbHVkZTxCbG9iTGlrZVBhcnQsIHN0cmluZz4gfCBBc3luY0l0ZXJhYmxlPEJsb2JMaWtlUGFydD47XG5cbi8qKlxuICogSGVscGVyIGZvciBjcmVhdGluZyBhIHtAbGluayBGaWxlfSB0byBwYXNzIHRvIGFuIFNESyB1cGxvYWQgbWV0aG9kIGZyb20gYSB2YXJpZXR5IG9mIGRpZmZlcmVudCBkYXRhIGZvcm1hdHNcbiAqIEBwYXJhbSB2YWx1ZSB0aGUgcmF3IGNvbnRlbnQgb2YgdGhlIGZpbGUuICBDYW4gYmUgYW4ge0BsaW5rIFVwbG9hZGFibGV9LCB7QGxpbmsgQmxvYkxpa2VQYXJ0fSwgb3Ige0BsaW5rIEFzeW5jSXRlcmFibGV9IG9mIHtAbGluayBCbG9iTGlrZVBhcnR9c1xuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBmaWxlLiBJZiBvbWl0dGVkLCB0b0ZpbGUgd2lsbCB0cnkgdG8gZGV0ZXJtaW5lIGEgZmlsZSBuYW1lIGZyb20gYml0cyBpZiBwb3NzaWJsZVxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zIGFkZGl0aW9uYWwgcHJvcGVydGllc1xuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRpb25zLnR5cGUgdGhlIE1JTUUgdHlwZSBvZiB0aGUgY29udGVudFxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRpb25zLmxhc3RNb2RpZmllZCB0aGUgbGFzdCBtb2RpZmllZCB0aW1lc3RhbXBcbiAqIEByZXR1cm5zIGEge0BsaW5rIEZpbGV9IHdpdGggdGhlIGdpdmVuIHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvRmlsZShcbiAgdmFsdWU6IFRvRmlsZUlucHV0IHwgUHJvbWlzZUxpa2U8VG9GaWxlSW5wdXQ+LFxuICBuYW1lPzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgb3B0aW9uczogRmlsZVByb3BlcnR5QmFnIHwgdW5kZWZpbmVkID0ge30sXG4pOiBQcm9taXNlPEZpbGVMaWtlPiB7XG4gIC8vIElmIGl0J3MgYSBwcm9taXNlLCByZXNvbHZlIGl0LlxuICB2YWx1ZSA9IGF3YWl0IHZhbHVlO1xuXG4gIGlmIChpc1Jlc3BvbnNlTGlrZSh2YWx1ZSkpIHtcbiAgICBjb25zdCBibG9iID0gYXdhaXQgdmFsdWUuYmxvYigpO1xuICAgIG5hbWUgfHw9IG5ldyBVUkwodmFsdWUudXJsKS5wYXRobmFtZS5zcGxpdCgvW1xcXFwvXS8pLnBvcCgpID8/ICd1bmtub3duX2ZpbGUnO1xuXG4gICAgcmV0dXJuIG5ldyBGaWxlKFtibG9iIGFzIGFueV0sIG5hbWUsIG9wdGlvbnMpO1xuICB9XG5cbiAgY29uc3QgYml0cyA9IGF3YWl0IGdldEJ5dGVzKHZhbHVlKTtcblxuICBuYW1lIHx8PSBnZXROYW1lKHZhbHVlKSA/PyAndW5rbm93bl9maWxlJztcblxuICBpZiAoIW9wdGlvbnMudHlwZSkge1xuICAgIGNvbnN0IHR5cGUgPSAoYml0c1swXSBhcyBhbnkpPy50eXBlO1xuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9wdGlvbnMgPSB7IC4uLm9wdGlvbnMsIHR5cGUgfTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IEZpbGUoYml0cywgbmFtZSwgb3B0aW9ucyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEJ5dGVzKHZhbHVlOiBUb0ZpbGVJbnB1dCk6IFByb21pc2U8QXJyYXk8QmxvYlBhcnQ+PiB7XG4gIGxldCBwYXJ0czogQXJyYXk8QmxvYlBhcnQ+ID0gW107XG4gIGlmIChcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8XG4gICAgQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKSB8fCAvLyBpbmNsdWRlcyBVaW50OEFycmF5LCBCdWZmZXIsIGV0Yy5cbiAgICB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyXG4gICkge1xuICAgIHBhcnRzLnB1c2godmFsdWUpO1xuICB9IGVsc2UgaWYgKGlzQmxvYkxpa2UodmFsdWUpKSB7XG4gICAgcGFydHMucHVzaChhd2FpdCB2YWx1ZS5hcnJheUJ1ZmZlcigpKTtcbiAgfSBlbHNlIGlmIChcbiAgICBpc0FzeW5jSXRlcmFibGVJdGVyYXRvcih2YWx1ZSkgLy8gaW5jbHVkZXMgUmVhZGFibGUsIFJlYWRhYmxlU3RyZWFtLCBldGMuXG4gICkge1xuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgdmFsdWUpIHtcbiAgICAgIHBhcnRzLnB1c2goY2h1bmsgYXMgQmxvYlBhcnQpOyAvLyBUT0RPLCBjb25zaWRlciB2YWxpZGF0aW5nP1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVW5leHBlY3RlZCBkYXRhIHR5cGU6ICR7dHlwZW9mIHZhbHVlfTsgY29uc3RydWN0b3I6ICR7XG4gICAgICAgIHZhbHVlPy5jb25zdHJ1Y3Rvcj8ubmFtZVxuICAgICAgfTsgcHJvcHM6ICR7cHJvcHNGb3JFcnJvcih2YWx1ZSl9YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG5mdW5jdGlvbiBwcm9wc0ZvckVycm9yKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgcmV0dXJuIGBbJHtwcm9wcy5tYXAoKHApID0+IGBcIiR7cH1cImApLmpvaW4oJywgJyl9XWA7XG59XG5cbmZ1bmN0aW9uIGdldE5hbWUodmFsdWU6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiAoXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLm5hbWUpIHx8XG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLmZpbGVuYW1lKSB8fFxuICAgIC8vIEZvciBmcy5SZWFkU3RyZWFtXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLnBhdGgpPy5zcGxpdCgvW1xcXFwvXS8pLnBvcCgpXG4gICk7XG59XG5cbmNvbnN0IGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlciA9ICh4OiBzdHJpbmcgfCBCdWZmZXIgfCB1bmtub3duKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgcmV0dXJuIHg7XG4gIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB4IGluc3RhbmNlb2YgQnVmZmVyKSByZXR1cm4gU3RyaW5nKHgpO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuY29uc3QgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEFzeW5jSXRlcmFibGVJdGVyYXRvcjx1bmtub3duPiA9PlxuICB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNsYXNzIE11bHRpcGFydEJvZHkge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgYm9keTogUmVhZGFibGUgfCBCb2R5SW5pdCkge31cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdNdWx0aXBhcnRCb2R5JztcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaXNNdWx0aXBhcnRCb2R5ID0gKGJvZHk6IGFueSk6IGJvZHkgaXMgTXVsdGlwYXJ0Qm9keSA9PlxuICBib2R5ICYmIHR5cGVvZiBib2R5ID09PSAnb2JqZWN0JyAmJiBib2R5LmJvZHkgJiYgYm9keVtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTXVsdGlwYXJ0Qm9keSc7XG5cbi8qKlxuICogUmV0dXJucyBhIG11bHRpcGFydC9mb3JtLWRhdGEgcmVxdWVzdCBpZiBhbnkgcGFydCBvZiB0aGUgZ2l2ZW4gcmVxdWVzdCBib2R5IGNvbnRhaW5zIGEgRmlsZSAvIEJsb2IgdmFsdWUuXG4gKiBPdGhlcndpc2UgcmV0dXJucyB0aGUgcmVxdWVzdCBhcyBpcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zID0gYXN5bmMgPFQgZXh0ZW5kcyB7fSA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQgfCBNdWx0aXBhcnRCb2R5Pj4gPT4ge1xuICBpZiAoIWhhc1VwbG9hZGFibGVWYWx1ZShvcHRzLmJvZHkpKSByZXR1cm4gb3B0cztcblxuICBjb25zdCBmb3JtID0gYXdhaXQgY3JlYXRlRm9ybShvcHRzLmJvZHkpO1xuICByZXR1cm4gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMoZm9ybSwgb3B0cyk7XG59O1xuXG5leHBvcnQgY29uc3QgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zID0gYXN5bmMgPFQgZXh0ZW5kcyB7fSA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQgfCBNdWx0aXBhcnRCb2R5Pj4gPT4ge1xuICBjb25zdCBmb3JtID0gYXdhaXQgY3JlYXRlRm9ybShvcHRzLmJvZHkpO1xuICByZXR1cm4gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMoZm9ybSwgb3B0cyk7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRm9ybSA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGJvZHk6IFQgfCB1bmRlZmluZWQpOiBQcm9taXNlPEZvcm1EYXRhPiA9PiB7XG4gIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXMoYm9keSB8fCB7fSkubWFwKChba2V5LCB2YWx1ZV0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXksIHZhbHVlKSkpO1xuICByZXR1cm4gZm9ybTtcbn07XG5cbmNvbnN0IGhhc1VwbG9hZGFibGVWYWx1ZSA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLnNvbWUoaGFzVXBsb2FkYWJsZVZhbHVlKTtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgIGlmIChoYXNVcGxvYWRhYmxlVmFsdWUoKHZhbHVlIGFzIGFueSlba10pKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgYWRkRm9ybVZhbHVlID0gYXN5bmMgKGZvcm06IEZvcm1EYXRhLCBrZXk6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFJlY2VpdmVkIG51bGwgZm9yIFwiJHtrZXl9XCI7IHRvIHBhc3MgbnVsbCBpbiBGb3JtRGF0YSwgeW91IG11c3QgdXNlIHRoZSBzdHJpbmcgJ251bGwnYCxcbiAgICApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSBuZXN0ZWQgZm9ybWF0cyBjb25maWd1cmFibGVcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgIGZvcm0uYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gIH0gZWxzZSBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkge1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0b0ZpbGUodmFsdWUpO1xuICAgIGZvcm0uYXBwZW5kKGtleSwgZmlsZSBhcyBGaWxlKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHZhbHVlLm1hcCgoZW50cnkpID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXkgKyAnW10nLCBlbnRyeSkpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkubWFwKChbbmFtZSwgcHJvcF0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBgJHtrZXl9WyR7bmFtZX1dYCwgcHJvcCkpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBJbnZhbGlkIHZhbHVlIGdpdmVuIHRvIGZvcm0sIGV4cGVjdGVkIGEgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9iamVjdCwgQXJyYXksIEZpbGUgb3IgQmxvYiBidXQgZ290ICR7dmFsdWV9IGluc3RlYWRgLFxuICAgICk7XG4gIH1cbn07XG4iLCIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cblxuZXhwb3J0cy5Gb3JtRGF0YSA9IEZvcm1EYXRhO1xuZXhwb3J0cy5CbG9iID0gQmxvYjtcbmV4cG9ydHMuRmlsZSA9XG4gIHR5cGVvZiBGaWxlICE9PSAndW5kZWZpbmVkJyA/IEZpbGUgOiAoXG4gICAgLy8gQnVuIGRvZXNuJ3QgaW1wbGVtZW50IEZpbGUgeWV0LCBzbyBqdXN0IG1ha2UgYSBzaGltIHRoYXQgdGhyb3dzIGEgaGVscGZ1bCBlcnJvciBtZXNzYWdlXG4gICAgY2xhc3MgRmlsZSBleHRlbmRzIEJsb2Ige1xuICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZmlsZSB1cGxvYWRzIGFyZW4ndCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCB5ZXQgYXMgJ0ZpbGUnIGlzIG5vdCBkZWZpbmVkYCk7XG4gICAgICB9XG4gICAgfVxuICApO1xuXG5leHBvcnRzLmlzUG9seWZpbGxlZCA9IGZhbHNlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyA9IHZvaWQgMDtcbmNvbnN0IHVwbG9hZHNfMSA9IHJlcXVpcmUoJy4uL3VwbG9hZHMuanMnKTtcbmFzeW5jIGZ1bmN0aW9uIGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zKGZvcm0sIG9wdHMpIHtcbiAgcmV0dXJuIHsgLi4ub3B0cywgYm9keTogbmV3IHVwbG9hZHNfMS5NdWx0aXBhcnRCb2R5KGZvcm0pIH07XG59XG5leHBvcnRzLmdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zID0gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucy5qcy5tYXBcbiIsIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuXG5pbXBvcnQgeyBGb3JtRGF0YSB9IGZyb20gJy4vZm9ybWRhdGEuanMnO1xuaW1wb3J0IHR5cGUgeyBSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4uL2NvcmUnO1xuaW1wb3J0IHsgTXVsdGlwYXJ0Qm9keSB9IGZyb20gJy4uL3VwbG9hZHMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM8VCBleHRlbmRzIHt9ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBmb3JtOiBGb3JtRGF0YSxcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQ+PiB7XG4gIHJldHVybiB7IC4uLm9wdHMsIGJvZHk6IG5ldyBNdWx0aXBhcnRCb2R5KGZvcm0pIGFzIGFueSB9O1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICpcbiAqIFRoaXMgaXMgYSBzdHViIHRoYXQgZ2V0cyByZXBsYWNlZCBieSBmaWxlRnJvbVBhdGgubm9kZS5qcyBmb3Igbm9kZSBlbnZpcm9ubWVudHNcbiAqIGluIHRoZSBwYWNrYWdlIGV4cG9ydCBtYXBcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZmlsZUZyb21QYXRoID0gdm9pZCAwO1xuYXN5bmMgZnVuY3Rpb24gZmlsZUZyb21QYXRoKCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ1RoZSBgZmlsZUZyb21QYXRoYCBmdW5jdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBpbiBOb2RlLiBTZWUgdGhlIFJFQURNRSBmb3IgbW9yZSBkZXRhaWxzOiBodHRwczovL3d3dy5naXRodWIuY29tL29wZW5haS9vcGVuYWktbm9kZSNmaWxlLXVwbG9hZHMnLFxuICApO1xufVxuZXhwb3J0cy5maWxlRnJvbVBhdGggPSBmaWxlRnJvbVBhdGg7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWxlRnJvbVBhdGguanMubWFwXG4iLCIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKlxuICogVGhpcyBpcyBhIHN0dWIgdGhhdCBnZXRzIHJlcGxhY2VkIGJ5IGZpbGVGcm9tUGF0aC5ub2RlLmpzIGZvciBub2RlIGVudmlyb25tZW50c1xuICogaW4gdGhlIHBhY2thZ2UgZXhwb3J0IG1hcFxuICovXG5cbmltcG9ydCB0eXBlIHsgRmlsZVByb3BlcnR5QmFnLCBGaWxlIH0gZnJvbSAnLi9mb3JtZGF0YS5qcyc7XG5cbmV4cG9ydCB0eXBlIEZpbGVGcm9tUGF0aE9wdGlvbnMgPSBPbWl0PEZpbGVQcm9wZXJ0eUJhZywgJ2xhc3RNb2RpZmllZCc+O1xuXG4vKipcbiAqIFRoaXMgaXMgYSBzdHViIGZvciBub24tbm9kZSBlbnZpcm9ubWVudHMgdGhhdCBqdXN0IHRocm93cyBhbiBlcnJvci5cbiAqIEluIG5vZGUgZW52aXJvbm1lbnRzLCB0aGlzIG1vZHVsZSB3aWxsIGJlIHJlcGxhY2VkIGJ5IHV0aWwvbm9kZS9maWxlRnJvbVBhdGggYnkgdGhlXG4gKiBwYWNrYWdlIGltcG9ydCBtYXAuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWxlRnJvbVBhdGgocGF0aDogc3RyaW5nKTogUHJvbWlzZTxGaWxlPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWxlRnJvbVBhdGgocGF0aDogc3RyaW5nLCBmaWxlbmFtZT86IHN0cmluZyk6IFByb21pc2U8RmlsZT47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmlsZUZyb21QYXRoKHBhdGg6IHN0cmluZywgb3B0aW9ucz86IEZpbGVGcm9tUGF0aE9wdGlvbnMpOiBQcm9taXNlPEZpbGU+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGVGcm9tUGF0aChcbiAgcGF0aDogc3RyaW5nLFxuICBmaWxlbmFtZT86IHN0cmluZyxcbiAgb3B0aW9ucz86IEZpbGVGcm9tUGF0aE9wdGlvbnMsXG4pOiBQcm9taXNlPEZpbGU+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGVGcm9tUGF0aCgpOiBQcm9taXNlPEZpbGU+IHtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICdUaGUgYGZpbGVGcm9tUGF0aGAgZnVuY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgaW4gTm9kZS4gU2VlIHRoZSBSRUFETUUgZm9yIG1vcmUgZGV0YWlsczogaHR0cHM6Ly93d3cuZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLW5vZGUjZmlsZS11cGxvYWRzJyxcbiAgKTtcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaXNGc1JlYWRTdHJlYW0gPSB2b2lkIDA7XG5mdW5jdGlvbiBpc0ZzUmVhZFN0cmVhbSh2YWx1ZSkge1xuICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLmlzRnNSZWFkU3RyZWFtID0gaXNGc1JlYWRTdHJlYW07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub2RlLXJlYWRhYmxlLmpzLm1hcFxuIiwiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5cbi8vIHNoaW0gdGhlc2UgTm9kZSB0eXBlcyB0byBhdm9pZCBpbXBvcnRpbmcgQHR5cGVzL25vZGUgYW5kIHBvbGx1dGluZyB0aGUgdXNlcidzXG4vLyB0eXBlIGVudmlyb25tZW50IGluIG5vbi1ub2RlIHByb2plY3RzXG5cbmV4cG9ydCBkZWNsYXJlIGNsYXNzIFJlYWRhYmxlIHtcbiAgcmVhZGFibGU6IGJvb2xlYW47XG4gIHJlYWRvbmx5IHJlYWRhYmxlRW5kZWQ6IGJvb2xlYW47XG4gIHJlYWRvbmx5IHJlYWRhYmxlRmxvd2luZzogYm9vbGVhbiB8IG51bGw7XG4gIHJlYWRvbmx5IHJlYWRhYmxlSGlnaFdhdGVyTWFyazogbnVtYmVyO1xuICByZWFkb25seSByZWFkYWJsZUxlbmd0aDogbnVtYmVyO1xuICByZWFkb25seSByZWFkYWJsZU9iamVjdE1vZGU6IGJvb2xlYW47XG4gIGRlc3Ryb3llZDogYm9vbGVhbjtcbiAgcmVhZChzaXplPzogbnVtYmVyKTogYW55O1xuICBwYXVzZSgpOiB0aGlzO1xuICByZXN1bWUoKTogdGhpcztcbiAgaXNQYXVzZWQoKTogYm9vbGVhbjtcbiAgZGVzdHJveShlcnJvcj86IEVycm9yKTogdGhpcztcbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8YW55Pjtcbn1cblxuZXhwb3J0IGRlY2xhcmUgY2xhc3MgRnNSZWFkU3RyZWFtIGV4dGVuZHMgUmVhZGFibGUge1xuICBwYXRoOiB7fTsgLy8gbm9kZSB0eXBlIGlzIHN0cmluZyB8IEJ1ZmZlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGc1JlYWRTdHJlYW0odmFsdWU6IGFueSk6IHZhbHVlIGlzIEZzUmVhZFN0cmVhbSB7XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DdXJzb3JQYWdlID0gZXhwb3J0cy5QYWdlID0gdm9pZCAwO1xuY29uc3QgY29yZV8xID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG4vKipcbiAqIE5vdGU6IG5vIHBhZ2luYXRpb24gYWN0dWFsbHkgb2NjdXJzIHlldCwgdGhpcyBpcyBmb3IgZm9yd2FyZHMtY29tcGF0aWJpbGl0eS5cbiAqL1xuY2xhc3MgUGFnZSBleHRlbmRzIGNvcmVfMS5BYnN0cmFjdFBhZ2Uge1xuICBjb25zdHJ1Y3RvcihjbGllbnQsIHJlc3BvbnNlLCBib2R5LCBvcHRpb25zKSB7XG4gICAgc3VwZXIoY2xpZW50LCByZXNwb25zZSwgYm9keSwgb3B0aW9ucyk7XG4gICAgdGhpcy5vYmplY3QgPSBib2R5Lm9iamVjdDtcbiAgICB0aGlzLmRhdGEgPSBib2R5LmRhdGE7XG4gIH1cbiAgZ2V0UGFnaW5hdGVkSXRlbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxuICAvLyBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXh0UGFnZUluZm8oKWAgaW5zdGVhZFxuICAvKipcbiAgICogVGhpcyBwYWdlIHJlcHJlc2VudHMgYSByZXNwb25zZSB0aGF0IGlzbid0IGFjdHVhbGx5IHBhZ2luYXRlZCBhdCB0aGUgQVBJIGxldmVsXG4gICAqIHNvIHRoZXJlIHdpbGwgbmV2ZXIgYmUgYW55IG5leHQgcGFnZSBwYXJhbXMuXG4gICAqL1xuICBuZXh0UGFnZVBhcmFtcygpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBuZXh0UGFnZUluZm8oKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmV4cG9ydHMuUGFnZSA9IFBhZ2U7XG5jbGFzcyBDdXJzb3JQYWdlIGV4dGVuZHMgY29yZV8xLkFic3RyYWN0UGFnZSB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgcmVzcG9uc2UsIGJvZHksIG9wdGlvbnMpIHtcbiAgICBzdXBlcihjbGllbnQsIHJlc3BvbnNlLCBib2R5LCBvcHRpb25zKTtcbiAgICB0aGlzLmRhdGEgPSBib2R5LmRhdGE7XG4gIH1cbiAgZ2V0UGFnaW5hdGVkSXRlbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxuICAvLyBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXh0UGFnZUluZm8oKWAgaW5zdGVhZFxuICBuZXh0UGFnZVBhcmFtcygpIHtcbiAgICBjb25zdCBpbmZvID0gdGhpcy5uZXh0UGFnZUluZm8oKTtcbiAgICBpZiAoIWluZm8pIHJldHVybiBudWxsO1xuICAgIGlmICgncGFyYW1zJyBpbiBpbmZvKSByZXR1cm4gaW5mby5wYXJhbXM7XG4gICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmZyb21FbnRyaWVzKGluZm8udXJsLnNlYXJjaFBhcmFtcyk7XG4gICAgaWYgKCFPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuICBuZXh0UGFnZUluZm8oKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAoISgoX2EgPSB0aGlzLmRhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgbmV4dCA9IChfYiA9IHRoaXMuZGF0YVt0aGlzLmRhdGEubGVuZ3RoIC0gMV0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pZDtcbiAgICBpZiAoIW5leHQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7IHBhcmFtczogeyBhZnRlcjogbmV4dCB9IH07XG4gIH1cbn1cbmV4cG9ydHMuQ3Vyc29yUGFnZSA9IEN1cnNvclBhZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdpbmF0aW9uLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHsgQWJzdHJhY3RQYWdlLCBSZXNwb25zZSwgQVBJQ2xpZW50LCBGaW5hbFJlcXVlc3RPcHRpb25zLCBQYWdlSW5mbyB9IGZyb20gJy4vY29yZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZVJlc3BvbnNlPEl0ZW0+IHtcbiAgZGF0YTogQXJyYXk8SXRlbT47XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbi8qKlxuICogTm90ZTogbm8gcGFnaW5hdGlvbiBhY3R1YWxseSBvY2N1cnMgeWV0LCB0aGlzIGlzIGZvciBmb3J3YXJkcy1jb21wYXRpYmlsaXR5LlxuICovXG5leHBvcnQgY2xhc3MgUGFnZTxJdGVtPiBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiBpbXBsZW1lbnRzIFBhZ2VSZXNwb25zZTxJdGVtPiB7XG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIGRhdGE6IEFycmF5PEl0ZW0+O1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogQVBJQ2xpZW50LCByZXNwb25zZTogUmVzcG9uc2UsIGJvZHk6IFBhZ2VSZXNwb25zZTxJdGVtPiwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHN1cGVyKGNsaWVudCwgcmVzcG9uc2UsIGJvZHksIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5vYmplY3QgPSBib2R5Lm9iamVjdDtcbiAgICB0aGlzLmRhdGEgPSBib2R5LmRhdGE7XG4gIH1cblxuICBnZXRQYWdpbmF0ZWRJdGVtcygpOiBJdGVtW10ge1xuICAgIHJldHVybiB0aGlzLmRhdGE7XG4gIH1cblxuICAvLyBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXh0UGFnZUluZm8oKWAgaW5zdGVhZFxuICAvKipcbiAgICogVGhpcyBwYWdlIHJlcHJlc2VudHMgYSByZXNwb25zZSB0aGF0IGlzbid0IGFjdHVhbGx5IHBhZ2luYXRlZCBhdCB0aGUgQVBJIGxldmVsXG4gICAqIHNvIHRoZXJlIHdpbGwgbmV2ZXIgYmUgYW55IG5leHQgcGFnZSBwYXJhbXMuXG4gICAqL1xuICBuZXh0UGFnZVBhcmFtcygpOiBudWxsIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG5leHRQYWdlSW5mbygpOiBudWxsIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1cnNvclBhZ2VSZXNwb25zZTxJdGVtPiB7XG4gIGRhdGE6IEFycmF5PEl0ZW0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1cnNvclBhZ2VQYXJhbXMge1xuICAvKipcbiAgICogSWRlbnRpZmllciBmb3IgdGhlIGxhc3Qgam9iIGZyb20gdGhlIHByZXZpb3VzIHBhZ2luYXRpb24gcmVxdWVzdC5cbiAgICovXG4gIGFmdGVyPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgZmluZS10dW5pbmcgam9icyB0byByZXRyaWV2ZS5cbiAgICovXG4gIGxpbWl0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgQ3Vyc29yUGFnZTxJdGVtIGV4dGVuZHMgeyBpZDogc3RyaW5nIH0+XG4gIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+XG4gIGltcGxlbWVudHMgQ3Vyc29yUGFnZVJlc3BvbnNlPEl0ZW0+XG57XG4gIGRhdGE6IEFycmF5PEl0ZW0+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNsaWVudDogQVBJQ2xpZW50LFxuICAgIHJlc3BvbnNlOiBSZXNwb25zZSxcbiAgICBib2R5OiBDdXJzb3JQYWdlUmVzcG9uc2U8SXRlbT4sXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgKSB7XG4gICAgc3VwZXIoY2xpZW50LCByZXNwb25zZSwgYm9keSwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLmRhdGEgPSBib2R5LmRhdGE7XG4gIH1cblxuICBnZXRQYWdpbmF0ZWRJdGVtcygpOiBJdGVtW10ge1xuICAgIHJldHVybiB0aGlzLmRhdGE7XG4gIH1cblxuICAvLyBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXh0UGFnZUluZm8oKWAgaW5zdGVhZFxuICBuZXh0UGFnZVBhcmFtcygpOiBQYXJ0aWFsPEN1cnNvclBhZ2VQYXJhbXM+IHwgbnVsbCB7XG4gICAgY29uc3QgaW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFpbmZvKSByZXR1cm4gbnVsbDtcbiAgICBpZiAoJ3BhcmFtcycgaW4gaW5mbykgcmV0dXJuIGluZm8ucGFyYW1zO1xuICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5mcm9tRW50cmllcyhpbmZvLnVybC5zZWFyY2hQYXJhbXMpO1xuICAgIGlmICghT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuZGF0YT8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0ID0gdGhpcy5kYXRhW3RoaXMuZGF0YS5sZW5ndGggLSAxXT8uaWQ7XG4gICAgaWYgKCFuZXh0KSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4geyBwYXJhbXM6IHsgYWZ0ZXI6IG5leHQgfSB9O1xuICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG4vLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9kZXJhdGlvbnMgPVxuICBleHBvcnRzLk1vZGVscyA9XG4gIGV4cG9ydHMuTW9kZWxzUGFnZSA9XG4gIGV4cG9ydHMuSW1hZ2VzID1cbiAgZXhwb3J0cy5GaW5lVHVuaW5nID1cbiAgZXhwb3J0cy5GaW5lVHVuZXMgPVxuICBleHBvcnRzLkZpbmVUdW5lc1BhZ2UgPVxuICBleHBvcnRzLkZpbGVzID1cbiAgZXhwb3J0cy5GaWxlT2JqZWN0c1BhZ2UgPVxuICBleHBvcnRzLkVkaXRzID1cbiAgZXhwb3J0cy5FbWJlZGRpbmdzID1cbiAgZXhwb3J0cy5Db21wbGV0aW9ucyA9XG4gIGV4cG9ydHMuQ2hhdCA9XG4gIGV4cG9ydHMuQXVkaW8gPVxuICAgIHZvaWQgMDtcbnZhciBhdWRpb18xID0gcmVxdWlyZSgnLi9hdWRpby9hdWRpby5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdBdWRpbycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGF1ZGlvXzEuQXVkaW87XG4gIH0sXG59KTtcbnZhciBjaGF0XzEgPSByZXF1aXJlKCcuL2NoYXQvY2hhdC5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdDaGF0Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2hhdF8xLkNoYXQ7XG4gIH0sXG59KTtcbnZhciBjb21wbGV0aW9uc18xID0gcmVxdWlyZSgnLi9jb21wbGV0aW9ucy5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdDb21wbGV0aW9ucycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvbXBsZXRpb25zXzEuQ29tcGxldGlvbnM7XG4gIH0sXG59KTtcbnZhciBlbWJlZGRpbmdzXzEgPSByZXF1aXJlKCcuL2VtYmVkZGluZ3MuanMnKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRW1iZWRkaW5ncycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGVtYmVkZGluZ3NfMS5FbWJlZGRpbmdzO1xuICB9LFxufSk7XG52YXIgZWRpdHNfMSA9IHJlcXVpcmUoJy4vZWRpdHMuanMnKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRWRpdHMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBlZGl0c18xLkVkaXRzO1xuICB9LFxufSk7XG52YXIgZmlsZXNfMSA9IHJlcXVpcmUoJy4vZmlsZXMuanMnKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRmlsZU9iamVjdHNQYWdlJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmlsZXNfMS5GaWxlT2JqZWN0c1BhZ2U7XG4gIH0sXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRmlsZXMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmaWxlc18xLkZpbGVzO1xuICB9LFxufSk7XG52YXIgZmluZV90dW5lc18xID0gcmVxdWlyZSgnLi9maW5lLXR1bmVzLmpzJyk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0ZpbmVUdW5lc1BhZ2UnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmaW5lX3R1bmVzXzEuRmluZVR1bmVzUGFnZTtcbiAgfSxcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdGaW5lVHVuZXMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmaW5lX3R1bmVzXzEuRmluZVR1bmVzO1xuICB9LFxufSk7XG52YXIgZmluZV90dW5pbmdfMSA9IHJlcXVpcmUoJy4vZmluZS10dW5pbmcvZmluZS10dW5pbmcuanMnKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRmluZVR1bmluZycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZpbmVfdHVuaW5nXzEuRmluZVR1bmluZztcbiAgfSxcbn0pO1xudmFyIGltYWdlc18xID0gcmVxdWlyZSgnLi9pbWFnZXMuanMnKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnSW1hZ2VzJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gaW1hZ2VzXzEuSW1hZ2VzO1xuICB9LFxufSk7XG52YXIgbW9kZWxzXzEgPSByZXF1aXJlKCcuL21vZGVscy5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdNb2RlbHNQYWdlJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbW9kZWxzXzEuTW9kZWxzUGFnZTtcbiAgfSxcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdNb2RlbHMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBtb2RlbHNfMS5Nb2RlbHM7XG4gIH0sXG59KTtcbnZhciBtb2RlcmF0aW9uc18xID0gcmVxdWlyZSgnLi9tb2RlcmF0aW9ucy5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdNb2RlcmF0aW9ucycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG1vZGVyYXRpb25zXzEuTW9kZXJhdGlvbnM7XG4gIH0sXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuZXhwb3J0IHsgQXVkaW8gfSBmcm9tICcuL2F1ZGlvL2F1ZGlvJztcbmV4cG9ydCB7IENoYXQgfSBmcm9tICcuL2NoYXQvY2hhdCc7XG5leHBvcnQge1xuICBDb21wbGV0aW9uLFxuICBDb21wbGV0aW9uQ2hvaWNlLFxuICBDb21wbGV0aW9uVXNhZ2UsXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIENvbXBsZXRpb25zLFxufSBmcm9tICcuL2NvbXBsZXRpb25zJztcbmV4cG9ydCB7IENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlLCBFbWJlZGRpbmcsIEVtYmVkZGluZ0NyZWF0ZVBhcmFtcywgRW1iZWRkaW5ncyB9IGZyb20gJy4vZW1iZWRkaW5ncyc7XG5leHBvcnQgeyBFZGl0LCBFZGl0Q3JlYXRlUGFyYW1zLCBFZGl0cyB9IGZyb20gJy4vZWRpdHMnO1xuZXhwb3J0IHsgRmlsZUNvbnRlbnQsIEZpbGVEZWxldGVkLCBGaWxlT2JqZWN0LCBGaWxlQ3JlYXRlUGFyYW1zLCBGaWxlT2JqZWN0c1BhZ2UsIEZpbGVzIH0gZnJvbSAnLi9maWxlcyc7XG5leHBvcnQge1xuICBGaW5lVHVuZSxcbiAgRmluZVR1bmVFdmVudCxcbiAgRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2UsXG4gIEZpbmVUdW5lQ3JlYXRlUGFyYW1zLFxuICBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXMsXG4gIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZyxcbiAgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nLFxuICBGaW5lVHVuZXNQYWdlLFxuICBGaW5lVHVuZXMsXG59IGZyb20gJy4vZmluZS10dW5lcyc7XG5leHBvcnQgeyBGaW5lVHVuaW5nIH0gZnJvbSAnLi9maW5lLXR1bmluZy9maW5lLXR1bmluZyc7XG5leHBvcnQge1xuICBJbWFnZSxcbiAgSW1hZ2VzUmVzcG9uc2UsXG4gIEltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zLFxuICBJbWFnZUVkaXRQYXJhbXMsXG4gIEltYWdlR2VuZXJhdGVQYXJhbXMsXG4gIEltYWdlcyxcbn0gZnJvbSAnLi9pbWFnZXMnO1xuZXhwb3J0IHsgTW9kZWwsIE1vZGVsRGVsZXRlZCwgTW9kZWxzUGFnZSwgTW9kZWxzIH0gZnJvbSAnLi9tb2RlbHMnO1xuZXhwb3J0IHsgTW9kZXJhdGlvbiwgTW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlLCBNb2RlcmF0aW9uQ3JlYXRlUGFyYW1zLCBNb2RlcmF0aW9ucyB9IGZyb20gJy4vbW9kZXJhdGlvbnMnO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbnZhciBfX2NyZWF0ZUJpbmRpbmcgPVxuICAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHxcbiAgKE9iamVjdC5jcmVhdGUgP1xuICAgIGZ1bmN0aW9uIChvLCBtLCBrLCBrMikge1xuICAgICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICAgIGlmICghZGVzYyB8fCAoJ2dldCcgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgICBkZXNjID0ge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbVtrXTtcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbiAgICB9XG4gIDogZnVuY3Rpb24gKG8sIG0sIGssIGsyKSB7XG4gICAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgICAgb1trMl0gPSBtW2tdO1xuICAgIH0pO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9XG4gICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fFxuICAoT2JqZWN0LmNyZWF0ZSA/XG4gICAgZnVuY3Rpb24gKG8sIHYpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG4gICAgfVxuICA6IGZ1bmN0aW9uIChvLCB2KSB7XG4gICAgICBvWydkZWZhdWx0J10gPSB2O1xuICAgIH0pO1xudmFyIF9faW1wb3J0U3RhciA9XG4gICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fFxuICBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKVxuICAgICAgZm9yICh2YXIgayBpbiBtb2QpXG4gICAgICAgIGlmIChrICE9PSAnZGVmYXVsdCcgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQXVkaW8gPSB2b2lkIDA7XG5jb25zdCByZXNvdXJjZV8xID0gcmVxdWlyZSgnb3BlbmFpL3Jlc291cmNlJyk7XG5jb25zdCB0cmFuc2NyaXB0aW9uc18xID0gcmVxdWlyZSgnLi90cmFuc2NyaXB0aW9ucy5qcycpO1xuY29uc3QgdHJhbnNsYXRpb25zXzEgPSByZXF1aXJlKCcuL3RyYW5zbGF0aW9ucy5qcycpO1xuY29uc3QgQVBJID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoJy4vaW5kZXguanMnKSk7XG5jbGFzcyBBdWRpbyBleHRlbmRzIHJlc291cmNlXzEuQVBJUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMudHJhbnNjcmlwdGlvbnMgPSBuZXcgdHJhbnNjcmlwdGlvbnNfMS5UcmFuc2NyaXB0aW9ucyh0aGlzLmNsaWVudCk7XG4gICAgdGhpcy50cmFuc2xhdGlvbnMgPSBuZXcgdHJhbnNsYXRpb25zXzEuVHJhbnNsYXRpb25zKHRoaXMuY2xpZW50KTtcbiAgfVxufVxuZXhwb3J0cy5BdWRpbyA9IEF1ZGlvO1xuKGZ1bmN0aW9uIChBdWRpbykge1xuICBBdWRpby5UcmFuc2NyaXB0aW9ucyA9IEFQSS5UcmFuc2NyaXB0aW9ucztcbiAgQXVkaW8uVHJhbnNsYXRpb25zID0gQVBJLlRyYW5zbGF0aW9ucztcbn0pKChBdWRpbyA9IGV4cG9ydHMuQXVkaW8gfHwgKGV4cG9ydHMuQXVkaW8gPSB7fSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1ZGlvLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZSc7XG5pbXBvcnQgeyBUcmFuc2NyaXB0aW9ucyB9IGZyb20gJy4vdHJhbnNjcmlwdGlvbnMnO1xuaW1wb3J0IHsgVHJhbnNsYXRpb25zIH0gZnJvbSAnLi90cmFuc2xhdGlvbnMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXgnO1xuXG5leHBvcnQgY2xhc3MgQXVkaW8gZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIHRyYW5zY3JpcHRpb25zOiBUcmFuc2NyaXB0aW9ucyA9IG5ldyBUcmFuc2NyaXB0aW9ucyh0aGlzLmNsaWVudCk7XG4gIHRyYW5zbGF0aW9uczogVHJhbnNsYXRpb25zID0gbmV3IFRyYW5zbGF0aW9ucyh0aGlzLmNsaWVudCk7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQXVkaW8ge1xuICBleHBvcnQgaW1wb3J0IFRyYW5zY3JpcHRpb25zID0gQVBJLlRyYW5zY3JpcHRpb25zO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zY3JpcHRpb24gPSBBUEkuVHJhbnNjcmlwdGlvbjtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2NyaXB0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLlRyYW5zY3JpcHRpb25DcmVhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBUcmFuc2xhdGlvbnMgPSBBUEkuVHJhbnNsYXRpb25zO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zbGF0aW9uID0gQVBJLlRyYW5zbGF0aW9uO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLlRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFQSVJlc291cmNlID0gdm9pZCAwO1xuY2xhc3MgQVBJUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihjbGllbnQpIHtcbiAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgICB0aGlzLmdldCA9IGNsaWVudC5nZXQuYmluZChjbGllbnQpO1xuICAgIHRoaXMucG9zdCA9IGNsaWVudC5wb3N0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnBhdGNoID0gY2xpZW50LnBhdGNoLmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnB1dCA9IGNsaWVudC5wdXQuYmluZChjbGllbnQpO1xuICAgIHRoaXMuZGVsZXRlID0gY2xpZW50LmRlbGV0ZS5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5nZXRBUElMaXN0ID0gY2xpZW50LmdldEFQSUxpc3QuYmluZChjbGllbnQpO1xuICB9XG59XG5leHBvcnRzLkFQSVJlc291cmNlID0gQVBJUmVzb3VyY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXNvdXJjZS5qcy5tYXBcbiIsIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCB0eXBlIHsgT3BlbkFJIH0gZnJvbSAnLi9pbmRleCc7XG5cbmV4cG9ydCBjbGFzcyBBUElSZXNvdXJjZSB7XG4gIHByb3RlY3RlZCBjbGllbnQ6IE9wZW5BSTtcbiAgY29uc3RydWN0b3IoY2xpZW50OiBPcGVuQUkpIHtcbiAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcblxuICAgIHRoaXMuZ2V0ID0gY2xpZW50LmdldC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wb3N0ID0gY2xpZW50LnBvc3QuYmluZChjbGllbnQpO1xuICAgIHRoaXMucGF0Y2ggPSBjbGllbnQucGF0Y2guYmluZChjbGllbnQpO1xuICAgIHRoaXMucHV0ID0gY2xpZW50LnB1dC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5kZWxldGUgPSBjbGllbnQuZGVsZXRlLmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLmdldEFQSUxpc3QgPSBjbGllbnQuZ2V0QVBJTGlzdC5iaW5kKGNsaWVudCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0OiBPcGVuQUlbJ2dldCddO1xuICBwcm90ZWN0ZWQgcG9zdDogT3BlbkFJWydwb3N0J107XG4gIHByb3RlY3RlZCBwYXRjaDogT3BlbkFJWydwYXRjaCddO1xuICBwcm90ZWN0ZWQgcHV0OiBPcGVuQUlbJ3B1dCddO1xuICBwcm90ZWN0ZWQgZGVsZXRlOiBPcGVuQUlbJ2RlbGV0ZSddO1xuICBwcm90ZWN0ZWQgZ2V0QVBJTGlzdDogT3BlbkFJWydnZXRBUElMaXN0J107XG59XG4iLCIndXNlIHN0cmljdCc7XG4vLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVHJhbnNjcmlwdGlvbnMgPSB2b2lkIDA7XG5jb25zdCByZXNvdXJjZV8xID0gcmVxdWlyZSgnb3BlbmFpL3Jlc291cmNlJyk7XG5jb25zdCBjb3JlXzEgPSByZXF1aXJlKCdvcGVuYWkvY29yZScpO1xuY2xhc3MgVHJhbnNjcmlwdGlvbnMgZXh0ZW5kcyByZXNvdXJjZV8xLkFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFRyYW5zY3JpYmVzIGF1ZGlvIGludG8gdGhlIGlucHV0IGxhbmd1YWdlLlxuICAgKi9cbiAgY3JlYXRlKGJvZHksIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvYXVkaW8vdHJhbnNjcmlwdGlvbnMnLCAoMCwgY29yZV8xLm11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucykoeyBib2R5LCAuLi5vcHRpb25zIH0pKTtcbiAgfVxufVxuZXhwb3J0cy5UcmFuc2NyaXB0aW9ucyA9IFRyYW5zY3JpcHRpb25zO1xuKGZ1bmN0aW9uIChUcmFuc2NyaXB0aW9ucykge30pKChUcmFuc2NyaXB0aW9ucyA9IGV4cG9ydHMuVHJhbnNjcmlwdGlvbnMgfHwgKGV4cG9ydHMuVHJhbnNjcmlwdGlvbnMgPSB7fSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zY3JpcHRpb25zLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi8uLi9jb3JlJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vLi4vcmVzb3VyY2UnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXgnO1xuaW1wb3J0IHsgdHlwZSBVcGxvYWRhYmxlLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb3JlJztcblxuZXhwb3J0IGNsYXNzIFRyYW5zY3JpcHRpb25zIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogVHJhbnNjcmliZXMgYXVkaW8gaW50byB0aGUgaW5wdXQgbGFuZ3VhZ2UuXG4gICAqL1xuICBjcmVhdGUoYm9keTogVHJhbnNjcmlwdGlvbkNyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8VHJhbnNjcmlwdGlvbj4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9hdWRpby90cmFuc2NyaXB0aW9ucycsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyh7IGJvZHksIC4uLm9wdGlvbnMgfSkpO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNjcmlwdGlvbiB7XG4gIHRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2NyaXB0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBhdWRpbyBmaWxlIG9iamVjdCAobm90IGZpbGUgbmFtZSkgdG8gdHJhbnNjcmliZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6XG4gICAqIGZsYWMsIG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIG9nZywgd2F2LCBvciB3ZWJtLlxuICAgKi9cbiAgZmlsZTogVXBsb2FkYWJsZTtcblxuICAvKipcbiAgICogSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSBgd2hpc3Blci0xYCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgKi9cbiAgbW9kZWw6IChzdHJpbmcgJiB7fSkgfCAnd2hpc3Blci0xJztcblxuICAvKipcbiAgICogVGhlIGxhbmd1YWdlIG9mIHRoZSBpbnB1dCBhdWRpby4gU3VwcGx5aW5nIHRoZSBpbnB1dCBsYW5ndWFnZSBpblxuICAgKiBbSVNPLTYzOS0xXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0lTT182MzktMV9jb2RlcykgZm9ybWF0IHdpbGxcbiAgICogaW1wcm92ZSBhY2N1cmFjeSBhbmQgbGF0ZW5jeS5cbiAgICovXG4gIGxhbmd1YWdlPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbCdzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW9cbiAgICogc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBtYXRjaCB0aGVcbiAgICogYXVkaW8gbGFuZ3VhZ2UuXG4gICAqL1xuICBwcm9tcHQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LFxuICAgKiB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICovXG4gIHJlc3BvbnNlX2Zvcm1hdD86ICdqc29uJyB8ICd0ZXh0JyB8ICdzcnQnIHwgJ3ZlcmJvc2VfanNvbicgfCAndnR0JztcblxuICAvKipcbiAgICogVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZVxuICAgKiBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZFxuICAgKiBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlXG4gICAqIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG9cbiAgICogYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBUcmFuc2NyaXB0aW9ucyB7XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNjcmlwdGlvbiA9IEFQSS5UcmFuc2NyaXB0aW9uO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zY3JpcHRpb25DcmVhdGVQYXJhbXMgPSBBUEkuVHJhbnNjcmlwdGlvbkNyZWF0ZVBhcmFtcztcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5UcmFuc2xhdGlvbnMgPSB2b2lkIDA7XG5jb25zdCByZXNvdXJjZV8xID0gcmVxdWlyZSgnb3BlbmFpL3Jlc291cmNlJyk7XG5jb25zdCBjb3JlXzEgPSByZXF1aXJlKCdvcGVuYWkvY29yZScpO1xuY2xhc3MgVHJhbnNsYXRpb25zIGV4dGVuZHMgcmVzb3VyY2VfMS5BUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIGF1ZGlvIGludG8gRW5nbGlzaC5cbiAgICovXG4gIGNyZWF0ZShib2R5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2F1ZGlvL3RyYW5zbGF0aW9ucycsICgwLCBjb3JlXzEubXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zKSh7IGJvZHksIC4uLm9wdGlvbnMgfSkpO1xuICB9XG59XG5leHBvcnRzLlRyYW5zbGF0aW9ucyA9IFRyYW5zbGF0aW9ucztcbihmdW5jdGlvbiAoVHJhbnNsYXRpb25zKSB7fSkoKFRyYW5zbGF0aW9ucyA9IGV4cG9ydHMuVHJhbnNsYXRpb25zIHx8IChleHBvcnRzLlRyYW5zbGF0aW9ucyA9IHt9KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNsYXRpb25zLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi8uLi9jb3JlJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vLi4vcmVzb3VyY2UnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXgnO1xuaW1wb3J0IHsgdHlwZSBVcGxvYWRhYmxlLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb3JlJztcblxuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9ucyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgYXVkaW8gaW50byBFbmdsaXNoLlxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IFRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxUcmFuc2xhdGlvbj4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9hdWRpby90cmFuc2xhdGlvbnMnLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMoeyBib2R5LCAuLi5vcHRpb25zIH0pKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zbGF0aW9uIHtcbiAgdGV4dDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBhdWRpbyBmaWxlIG9iamVjdCAobm90IGZpbGUgbmFtZSkgdHJhbnNsYXRlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogZmxhYyxcbiAgICogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgb2dnLCB3YXYsIG9yIHdlYm0uXG4gICAqL1xuICBmaWxlOiBVcGxvYWRhYmxlO1xuXG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5IGB3aGlzcGVyLTFgIGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAqL1xuICBtb2RlbDogKHN0cmluZyAmIHt9KSB8ICd3aGlzcGVyLTEnO1xuXG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbCdzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW9cbiAgICogc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBiZSBpblxuICAgKiBFbmdsaXNoLlxuICAgKi9cbiAgcHJvbXB0Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCxcbiAgICogdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAqL1xuICByZXNwb25zZV9mb3JtYXQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGVcbiAgICogb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmRcbiAgICogZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZVxuICAgKiBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvXG4gICAqIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgVHJhbnNsYXRpb25zIHtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2xhdGlvbiA9IEFQSS5UcmFuc2xhdGlvbjtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2xhdGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5UcmFuc2xhdGlvbkNyZWF0ZVBhcmFtcztcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5UcmFuc2xhdGlvbnMgPSBleHBvcnRzLlRyYW5zY3JpcHRpb25zID0gZXhwb3J0cy5BdWRpbyA9IHZvaWQgMDtcbnZhciBhdWRpb18xID0gcmVxdWlyZSgnLi9hdWRpby5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdBdWRpbycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGF1ZGlvXzEuQXVkaW87XG4gIH0sXG59KTtcbnZhciB0cmFuc2NyaXB0aW9uc18xID0gcmVxdWlyZSgnLi90cmFuc2NyaXB0aW9ucy5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdUcmFuc2NyaXB0aW9ucycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRyYW5zY3JpcHRpb25zXzEuVHJhbnNjcmlwdGlvbnM7XG4gIH0sXG59KTtcbnZhciB0cmFuc2xhdGlvbnNfMSA9IHJlcXVpcmUoJy4vdHJhbnNsYXRpb25zLmpzJyk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1RyYW5zbGF0aW9ucycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRyYW5zbGF0aW9uc18xLlRyYW5zbGF0aW9ucztcbiAgfSxcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5leHBvcnQgeyBBdWRpbyB9IGZyb20gJy4vYXVkaW8nO1xuZXhwb3J0IHsgVHJhbnNjcmlwdGlvbiwgVHJhbnNjcmlwdGlvbkNyZWF0ZVBhcmFtcywgVHJhbnNjcmlwdGlvbnMgfSBmcm9tICcuL3RyYW5zY3JpcHRpb25zJztcbmV4cG9ydCB7IFRyYW5zbGF0aW9uLCBUcmFuc2xhdGlvbkNyZWF0ZVBhcmFtcywgVHJhbnNsYXRpb25zIH0gZnJvbSAnLi90cmFuc2xhdGlvbnMnO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbnZhciBfX2NyZWF0ZUJpbmRpbmcgPVxuICAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHxcbiAgKE9iamVjdC5jcmVhdGUgP1xuICAgIGZ1bmN0aW9uIChvLCBtLCBrLCBrMikge1xuICAgICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICAgIGlmICghZGVzYyB8fCAoJ2dldCcgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgICBkZXNjID0ge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbVtrXTtcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbiAgICB9XG4gIDogZnVuY3Rpb24gKG8sIG0sIGssIGsyKSB7XG4gICAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgICAgb1trMl0gPSBtW2tdO1xuICAgIH0pO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9XG4gICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fFxuICAoT2JqZWN0LmNyZWF0ZSA/XG4gICAgZnVuY3Rpb24gKG8sIHYpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG4gICAgfVxuICA6IGZ1bmN0aW9uIChvLCB2KSB7XG4gICAgICBvWydkZWZhdWx0J10gPSB2O1xuICAgIH0pO1xudmFyIF9faW1wb3J0U3RhciA9XG4gICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fFxuICBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKVxuICAgICAgZm9yICh2YXIgayBpbiBtb2QpXG4gICAgICAgIGlmIChrICE9PSAnZGVmYXVsdCcgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2hhdCA9IHZvaWQgMDtcbmNvbnN0IHJlc291cmNlXzEgPSByZXF1aXJlKCdvcGVuYWkvcmVzb3VyY2UnKTtcbmNvbnN0IGNvbXBsZXRpb25zXzEgPSByZXF1aXJlKCcuL2NvbXBsZXRpb25zLmpzJyk7XG5jb25zdCBBUEkgPSBfX2ltcG9ydFN0YXIocmVxdWlyZSgnLi9pbmRleC5qcycpKTtcbmNsYXNzIENoYXQgZXh0ZW5kcyByZXNvdXJjZV8xLkFQSVJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLmNvbXBsZXRpb25zID0gbmV3IGNvbXBsZXRpb25zXzEuQ29tcGxldGlvbnModGhpcy5jbGllbnQpO1xuICB9XG59XG5leHBvcnRzLkNoYXQgPSBDaGF0O1xuKGZ1bmN0aW9uIChDaGF0KSB7XG4gIENoYXQuQ29tcGxldGlvbnMgPSBBUEkuQ29tcGxldGlvbnM7XG59KSgoQ2hhdCA9IGV4cG9ydHMuQ2hhdCB8fCAoZXhwb3J0cy5DaGF0ID0ge30pKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGF0LmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZSc7XG5pbXBvcnQgeyBDb21wbGV0aW9ucyB9IGZyb20gJy4vY29tcGxldGlvbnMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXgnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdCBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgY29tcGxldGlvbnM6IENvbXBsZXRpb25zID0gbmV3IENvbXBsZXRpb25zKHRoaXMuY2xpZW50KTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGF0IHtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9ucyA9IEFQSS5Db21wbGV0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbiA9IEFQSS5DaGF0Q29tcGxldGlvbjtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNodW5rID0gQVBJLkNoYXRDb21wbGV0aW9uQ2h1bms7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25NZXNzYWdlID0gQVBJLkNoYXRDb21wbGV0aW9uTWVzc2FnZTtcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbSA9IEFQSS5DaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbTtcbiAgZXhwb3J0IGltcG9ydCBDcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlID0gQVBJLkNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdE1lc3NhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG4iLCIndXNlIHN0cmljdCc7XG4vLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29tcGxldGlvbnMgPSB2b2lkIDA7XG5jb25zdCByZXNvdXJjZV8xID0gcmVxdWlyZSgnb3BlbmFpL3Jlc291cmNlJyk7XG5jbGFzcyBDb21wbGV0aW9ucyBleHRlbmRzIHJlc291cmNlXzEuQVBJUmVzb3VyY2Uge1xuICBjcmVhdGUoYm9keSwgb3B0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvY2hhdC9jb21wbGV0aW9ucycsIHtcbiAgICAgIGJvZHksXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgc3RyZWFtOiAoX2EgPSBib2R5LnN0cmVhbSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2UsXG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydHMuQ29tcGxldGlvbnMgPSBDb21wbGV0aW9ucztcbihmdW5jdGlvbiAoQ29tcGxldGlvbnMpIHt9KSgoQ29tcGxldGlvbnMgPSBleHBvcnRzLkNvbXBsZXRpb25zIHx8IChleHBvcnRzLkNvbXBsZXRpb25zID0ge30pKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wbGV0aW9ucy5qcy5tYXBcbiIsIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vLi4vY29yZSc7XG5pbXBvcnQgeyBBUElQcm9taXNlIH0gZnJvbSAnLi4vLi4vY29yZSc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uLy4uL3Jlc291cmNlJztcbmltcG9ydCAqIGFzIENvbXBsZXRpb25zXyBmcm9tICcuLi9jb21wbGV0aW9ucyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleCc7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tICcuLi8uLi9zdHJlYW1pbmcnO1xuXG5leHBvcnQgY2xhc3MgQ29tcGxldGlvbnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbW9kZWwgcmVzcG9uc2UgZm9yIHRoZSBnaXZlbiBjaGF0IGNvbnZlcnNhdGlvbi5cbiAgICovXG4gIGNyZWF0ZShcbiAgICBib2R5OiBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxDaGF0Q29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q2hhdENvbXBsZXRpb25DaHVuaz4+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxDaGF0Q29tcGxldGlvbkNodW5rPiB8IENoYXRDb21wbGV0aW9uPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPENoYXRDb21wbGV0aW9uPiB8IEFQSVByb21pc2U8U3RyZWFtPENoYXRDb21wbGV0aW9uQ2h1bms+PiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2NoYXQvY29tcGxldGlvbnMnLCB7IGJvZHksIC4uLm9wdGlvbnMsIHN0cmVhbTogYm9keS5zdHJlYW0gPz8gZmFsc2UgfSkgYXNcbiAgICAgIHwgQVBJUHJvbWlzZTxDaGF0Q29tcGxldGlvbj5cbiAgICAgIHwgQVBJUHJvbWlzZTxTdHJlYW08Q2hhdENvbXBsZXRpb25DaHVuaz4+O1xuICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYXQgY29tcGxldGlvbiByZXNwb25zZSByZXR1cm5lZCBieSBtb2RlbCwgYmFzZWQgb24gdGhlIHByb3ZpZGVkXG4gKiBpbnB1dC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbiB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY2hhdCBjb21wbGV0aW9uLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogQSBsaXN0IG9mIGNoYXQgY29tcGxldGlvbiBjaG9pY2VzLiBDYW4gYmUgbW9yZSB0aGFuIG9uZSBpZiBgbmAgaXMgZ3JlYXRlclxuICAgKiB0aGFuIDEuXG4gICAqL1xuICBjaG9pY2VzOiBBcnJheTxDaGF0Q29tcGxldGlvbi5DaG9pY2U+O1xuXG4gIC8qKlxuICAgKiBBIHVuaXggdGltZXN0YW1wIG9mIHdoZW4gdGhlIGNoYXQgY29tcGxldGlvbiB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHVzZWQgZm9yIHRoZSBjaGF0IGNvbXBsZXRpb24uXG4gICAqL1xuICBtb2RlbDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBgY2hhdC5jb21wbGV0aW9uYC5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVc2FnZSBzdGF0aXN0aWNzIGZvciB0aGUgY29tcGxldGlvbiByZXF1ZXN0LlxuICAgKi9cbiAgdXNhZ2U/OiBDb21wbGV0aW9uc18uQ29tcGxldGlvblVzYWdlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENoYXRDb21wbGV0aW9uIHtcbiAgZXhwb3J0IGludGVyZmFjZSBDaG9pY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIG1vZGVsIHN0b3BwZWQgZ2VuZXJhdGluZyB0b2tlbnMuIFRoaXMgd2lsbCBiZSBgc3RvcGAgaWYgdGhlIG1vZGVsXG4gICAgICogaGl0IGEgbmF0dXJhbCBzdG9wIHBvaW50IG9yIGEgcHJvdmlkZWQgc3RvcCBzZXF1ZW5jZSwgYGxlbmd0aGAgaWYgdGhlIG1heGltdW1cbiAgICAgKiBudW1iZXIgb2YgdG9rZW5zIHNwZWNpZmllZCBpbiB0aGUgcmVxdWVzdCB3YXMgcmVhY2hlZCwgb3IgYGZ1bmN0aW9uX2NhbGxgIGlmIHRoZVxuICAgICAqIG1vZGVsIGNhbGxlZCBhIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZpbmlzaF9yZWFzb246ICdzdG9wJyB8ICdsZW5ndGgnIHwgJ2Z1bmN0aW9uX2NhbGwnO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBjaG9pY2UgaW4gdGhlIGxpc3Qgb2YgY2hvaWNlcy5cbiAgICAgKi9cbiAgICBpbmRleDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQSBjaGF0IGNvbXBsZXRpb24gbWVzc2FnZSBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIG1lc3NhZ2U6IENoYXRDb21wbGV0aW9uTWVzc2FnZTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBzdHJlYW1lZCBjaHVuayBvZiBhIGNoYXQgY29tcGxldGlvbiByZXNwb25zZSByZXR1cm5lZCBieSBtb2RlbCxcbiAqIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBpbnB1dC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbkNodW5rIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjaGF0IGNvbXBsZXRpb24gY2h1bmsuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgY2hhdCBjb21wbGV0aW9uIGNob2ljZXMuIENhbiBiZSBtb3JlIHRoYW4gb25lIGlmIGBuYCBpcyBncmVhdGVyXG4gICAqIHRoYW4gMS5cbiAgICovXG4gIGNob2ljZXM6IEFycmF5PENoYXRDb21wbGV0aW9uQ2h1bmsuQ2hvaWNlPjtcblxuICAvKipcbiAgICogQSB1bml4IHRpbWVzdGFtcCBvZiB3aGVuIHRoZSBjaGF0IGNvbXBsZXRpb24gY2h1bmsgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0byBnZW5lcmF0ZSB0aGUgY29tcGxldGlvbi5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIGBjaGF0LmNvbXBsZXRpb24uY2h1bmtgLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ2hhdENvbXBsZXRpb25DaHVuayB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2hvaWNlIHtcbiAgICAvKipcbiAgICAgKiBBIGNoYXQgY29tcGxldGlvbiBkZWx0YSBnZW5lcmF0ZWQgYnkgc3RyZWFtZWQgbW9kZWwgcmVzcG9uc2VzLlxuICAgICAqL1xuICAgIGRlbHRhOiBDaG9pY2UuRGVsdGE7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhc29uIHRoZSBtb2RlbCBzdG9wcGVkIGdlbmVyYXRpbmcgdG9rZW5zLiBUaGlzIHdpbGwgYmUgYHN0b3BgIGlmIHRoZSBtb2RlbFxuICAgICAqIGhpdCBhIG5hdHVyYWwgc3RvcCBwb2ludCBvciBhIHByb3ZpZGVkIHN0b3Agc2VxdWVuY2UsIGBsZW5ndGhgIGlmIHRoZSBtYXhpbXVtXG4gICAgICogbnVtYmVyIG9mIHRva2VucyBzcGVjaWZpZWQgaW4gdGhlIHJlcXVlc3Qgd2FzIHJlYWNoZWQsIG9yIGBmdW5jdGlvbl9jYWxsYCBpZiB0aGVcbiAgICAgKiBtb2RlbCBjYWxsZWQgYSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmaW5pc2hfcmVhc29uOiAnc3RvcCcgfCAnbGVuZ3RoJyB8ICdmdW5jdGlvbl9jYWxsJyB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGNob2ljZSBpbiB0aGUgbGlzdCBvZiBjaG9pY2VzLlxuICAgICAqL1xuICAgIGluZGV4OiBudW1iZXI7XG4gIH1cblxuICBleHBvcnQgbmFtZXNwYWNlIENob2ljZSB7XG4gICAgLyoqXG4gICAgICogQSBjaGF0IGNvbXBsZXRpb24gZGVsdGEgZ2VuZXJhdGVkIGJ5IHN0cmVhbWVkIG1vZGVsIHJlc3BvbnNlcy5cbiAgICAgKi9cbiAgICBleHBvcnQgaW50ZXJmYWNlIERlbHRhIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIGNvbnRlbnRzIG9mIHRoZSBjaHVuayBtZXNzYWdlLlxuICAgICAgICovXG4gICAgICBjb250ZW50Pzogc3RyaW5nIHwgbnVsbDtcblxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbmFtZSBhbmQgYXJndW1lbnRzIG9mIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLCBhcyBnZW5lcmF0ZWQgYnkgdGhlXG4gICAgICAgKiBtb2RlbC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb25fY2FsbD86IERlbHRhLkZ1bmN0aW9uQ2FsbDtcblxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgcm9sZSBvZiB0aGUgYXV0aG9yIG9mIHRoaXMgbWVzc2FnZS5cbiAgICAgICAqL1xuICAgICAgcm9sZT86ICdzeXN0ZW0nIHwgJ3VzZXInIHwgJ2Fzc2lzdGFudCcgfCAnZnVuY3Rpb24nO1xuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgRGVsdGEge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbmFtZSBhbmQgYXJndW1lbnRzIG9mIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLCBhcyBnZW5lcmF0ZWQgYnkgdGhlXG4gICAgICAgKiBtb2RlbC5cbiAgICAgICAqL1xuICAgICAgZXhwb3J0IGludGVyZmFjZSBGdW5jdGlvbkNhbGwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFyZ3VtZW50cyB0byBjYWxsIHRoZSBmdW5jdGlvbiB3aXRoLCBhcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGluIEpTT05cbiAgICAgICAgICogZm9ybWF0LiBOb3RlIHRoYXQgdGhlIG1vZGVsIGRvZXMgbm90IGFsd2F5cyBnZW5lcmF0ZSB2YWxpZCBKU09OLCBhbmQgbWF5XG4gICAgICAgICAqIGhhbGx1Y2luYXRlIHBhcmFtZXRlcnMgbm90IGRlZmluZWQgYnkgeW91ciBmdW5jdGlvbiBzY2hlbWEuIFZhbGlkYXRlIHRoZVxuICAgICAgICAgKiBhcmd1bWVudHMgaW4geW91ciBjb2RlIGJlZm9yZSBjYWxsaW5nIHlvdXIgZnVuY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICBhcmd1bWVudHM/OiBzdHJpbmc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICAgICAgICAgKi9cbiAgICAgICAgbmFtZT86IHN0cmluZztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBIGNoYXQgY29tcGxldGlvbiBtZXNzYWdlIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdENvbXBsZXRpb25NZXNzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZS5cbiAgICovXG4gIGNvbnRlbnQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSByb2xlIG9mIHRoZSBhdXRob3Igb2YgdGhpcyBtZXNzYWdlLlxuICAgKi9cbiAgcm9sZTogJ3N5c3RlbScgfCAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdmdW5jdGlvbic7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIGFuZCBhcmd1bWVudHMgb2YgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQsIGFzIGdlbmVyYXRlZCBieSB0aGVcbiAgICogbW9kZWwuXG4gICAqL1xuICBmdW5jdGlvbl9jYWxsPzogQ2hhdENvbXBsZXRpb25NZXNzYWdlLkZ1bmN0aW9uQ2FsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGF0Q29tcGxldGlvbk1lc3NhZ2Uge1xuICAvKipcbiAgICogVGhlIG5hbWUgYW5kIGFyZ3VtZW50cyBvZiBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZVxuICAgKiBtb2RlbC5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgRnVuY3Rpb25DYWxsIHtcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIHRvIGNhbGwgdGhlIGZ1bmN0aW9uIHdpdGgsIGFzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgaW4gSlNPTlxuICAgICAqIGZvcm1hdC4gTm90ZSB0aGF0IHRoZSBtb2RlbCBkb2VzIG5vdCBhbHdheXMgZ2VuZXJhdGUgdmFsaWQgSlNPTiwgYW5kIG1heVxuICAgICAqIGhhbGx1Y2luYXRlIHBhcmFtZXRlcnMgbm90IGRlZmluZWQgYnkgeW91ciBmdW5jdGlvbiBzY2hlbWEuIFZhbGlkYXRlIHRoZVxuICAgICAqIGFyZ3VtZW50cyBpbiB5b3VyIGNvZGUgYmVmb3JlIGNhbGxpbmcgeW91ciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICAgICAqL1xuICAgIG5hbWU6IHN0cmluZztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtIHtcbiAgLyoqXG4gICAqIFRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZS4gYGNvbnRlbnRgIGlzIHJlcXVpcmVkIGZvciBhbGwgbWVzc2FnZXMsIGFuZCBtYXkgYmVcbiAgICogbnVsbCBmb3IgYXNzaXN0YW50IG1lc3NhZ2VzIHdpdGggZnVuY3Rpb24gY2FsbHMuXG4gICAqL1xuICBjb250ZW50OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgcm9sZSBvZiB0aGUgbWVzc2FnZXMgYXV0aG9yLiBPbmUgb2YgYHN5c3RlbWAsIGB1c2VyYCwgYGFzc2lzdGFudGAsIG9yXG4gICAqIGBmdW5jdGlvbmAuXG4gICAqL1xuICByb2xlOiAnc3lzdGVtJyB8ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ2Z1bmN0aW9uJztcblxuICAvKipcbiAgICogVGhlIG5hbWUgYW5kIGFyZ3VtZW50cyBvZiBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZVxuICAgKiBtb2RlbC5cbiAgICovXG4gIGZ1bmN0aW9uX2NhbGw/OiBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbS5GdW5jdGlvbkNhbGw7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBhdXRob3Igb2YgdGhpcyBtZXNzYWdlLiBgbmFtZWAgaXMgcmVxdWlyZWQgaWYgcm9sZSBpc1xuICAgKiBgZnVuY3Rpb25gLCBhbmQgaXQgc2hvdWxkIGJlIHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB3aG9zZSByZXNwb25zZSBpcyBpbiB0aGVcbiAgICogYGNvbnRlbnRgLiBNYXkgY29udGFpbiBhLXosIEEtWiwgMC05LCBhbmQgdW5kZXJzY29yZXMsIHdpdGggYSBtYXhpbXVtIGxlbmd0aCBvZlxuICAgKiA2NCBjaGFyYWN0ZXJzLlxuICAgKi9cbiAgbmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbSB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBhbmQgYXJndW1lbnRzIG9mIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLCBhcyBnZW5lcmF0ZWQgYnkgdGhlXG4gICAqIG1vZGVsLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBGdW5jdGlvbkNhbGwge1xuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgdG8gY2FsbCB0aGUgZnVuY3Rpb24gd2l0aCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBpbiBKU09OXG4gICAgICogZm9ybWF0LiBOb3RlIHRoYXQgdGhlIG1vZGVsIGRvZXMgbm90IGFsd2F5cyBnZW5lcmF0ZSB2YWxpZCBKU09OLCBhbmQgbWF5XG4gICAgICogaGFsbHVjaW5hdGUgcGFyYW1ldGVycyBub3QgZGVmaW5lZCBieSB5b3VyIGZ1bmN0aW9uIHNjaGVtYS4gVmFsaWRhdGUgdGhlXG4gICAgICogYXJndW1lbnRzIGluIHlvdXIgY29kZSBiZWZvcmUgY2FsbGluZyB5b3VyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uIHRvIGNhbGwuXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nO1xuICB9XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0gc2hvdWxkIGJlIHVzZWQgaW5zdGVhZFxuICovXG5leHBvcnQgdHlwZSBDcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlID0gQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW07XG5cbmV4cG9ydCB0eXBlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID1cbiAgfCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZ1xuICB8IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgbWVzc2FnZXMgY29tcHJpc2luZyB0aGUgY29udmVyc2F0aW9uIHNvIGZhci5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fZm9ybWF0X2lucHV0c190b19DaGF0R1BUX21vZGVscy5pcHluYikuXG4gICAqL1xuICBtZXNzYWdlczogQXJyYXk8Q2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBTZWUgdGhlXG4gICAqIFttb2RlbCBlbmRwb2ludCBjb21wYXRpYmlsaXR5XSgvZG9jcy9tb2RlbHMvbW9kZWwtZW5kcG9pbnQtY29tcGF0aWJpbGl0eSkgdGFibGVcbiAgICogZm9yIGRldGFpbHMgb24gd2hpY2ggbW9kZWxzIHdvcmsgd2l0aCB0aGUgQ2hhdCBBUEkuXG4gICAqL1xuICBtb2RlbDpcbiAgICB8IChzdHJpbmcgJiB7fSlcbiAgICB8ICdncHQtNCdcbiAgICB8ICdncHQtNC0wMzE0J1xuICAgIHwgJ2dwdC00LTA2MTMnXG4gICAgfCAnZ3B0LTQtMzJrJ1xuICAgIHwgJ2dwdC00LTMyay0wMzE0J1xuICAgIHwgJ2dwdC00LTMyay0wNjEzJ1xuICAgIHwgJ2dwdC0zLjUtdHVyYm8nXG4gICAgfCAnZ3B0LTMuNS10dXJiby0xNmsnXG4gICAgfCAnZ3B0LTMuNS10dXJiby0wMzAxJ1xuICAgIHwgJ2dwdC0zLjUtdHVyYm8tMDYxMydcbiAgICB8ICdncHQtMy41LXR1cmJvLTE2ay0wNjEzJztcblxuICAvKipcbiAgICogTnVtYmVyIGJldHdlZW4gLTIuMCBhbmQgMi4wLiBQb3NpdGl2ZSB2YWx1ZXMgcGVuYWxpemUgbmV3IHRva2VucyBiYXNlZCBvbiB0aGVpclxuICAgKiBleGlzdGluZyBmcmVxdWVuY3kgaW4gdGhlIHRleHQgc28gZmFyLCBkZWNyZWFzaW5nIHRoZSBtb2RlbCdzIGxpa2VsaWhvb2QgdG9cbiAgICogcmVwZWF0IHRoZSBzYW1lIGxpbmUgdmVyYmF0aW0uXG4gICAqXG4gICAqIFtTZWUgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBmcmVxdWVuY3kgYW5kIHByZXNlbmNlIHBlbmFsdGllcy5dKC9kb2NzL2FwaS1yZWZlcmVuY2UvcGFyYW1ldGVyLWRldGFpbHMpXG4gICAqL1xuICBmcmVxdWVuY3lfcGVuYWx0eT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIENvbnRyb2xzIGhvdyB0aGUgbW9kZWwgcmVzcG9uZHMgdG8gZnVuY3Rpb24gY2FsbHMuIFwibm9uZVwiIG1lYW5zIHRoZSBtb2RlbCBkb2VzXG4gICAqIG5vdCBjYWxsIGEgZnVuY3Rpb24sIGFuZCByZXNwb25kcyB0byB0aGUgZW5kLXVzZXIuIFwiYXV0b1wiIG1lYW5zIHRoZSBtb2RlbCBjYW5cbiAgICogcGljayBiZXR3ZWVuIGFuIGVuZC11c2VyIG9yIGNhbGxpbmcgYSBmdW5jdGlvbi4gU3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZnVuY3Rpb25cbiAgICogdmlhIGB7XCJuYW1lXCI6XFwgXCJteV9mdW5jdGlvblwifWAgZm9yY2VzIHRoZSBtb2RlbCB0byBjYWxsIHRoYXQgZnVuY3Rpb24uIFwibm9uZVwiIGlzXG4gICAqIHRoZSBkZWZhdWx0IHdoZW4gbm8gZnVuY3Rpb25zIGFyZSBwcmVzZW50LiBcImF1dG9cIiBpcyB0aGUgZGVmYXVsdCBpZiBmdW5jdGlvbnNcbiAgICogYXJlIHByZXNlbnQuXG4gICAqL1xuICBmdW5jdGlvbl9jYWxsPzogJ25vbmUnIHwgJ2F1dG8nIHwgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMuRnVuY3Rpb25DYWxsT3B0aW9uO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgZnVuY3Rpb25zIHRoZSBtb2RlbCBtYXkgZ2VuZXJhdGUgSlNPTiBpbnB1dHMgZm9yLlxuICAgKi9cbiAgZnVuY3Rpb25zPzogQXJyYXk8Q2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMuRnVuY3Rpb24+O1xuXG4gIC8qKlxuICAgKiBNb2RpZnkgdGhlIGxpa2VsaWhvb2Qgb2Ygc3BlY2lmaWVkIHRva2VucyBhcHBlYXJpbmcgaW4gdGhlIGNvbXBsZXRpb24uXG4gICAqXG4gICAqIEFjY2VwdHMgYSBqc29uIG9iamVjdCB0aGF0IG1hcHMgdG9rZW5zIChzcGVjaWZpZWQgYnkgdGhlaXIgdG9rZW4gSUQgaW4gdGhlXG4gICAqIHRva2VuaXplcikgdG8gYW4gYXNzb2NpYXRlZCBiaWFzIHZhbHVlIGZyb20gLTEwMCB0byAxMDAuIE1hdGhlbWF0aWNhbGx5LCB0aGVcbiAgICogYmlhcyBpcyBhZGRlZCB0byB0aGUgbG9naXRzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgcHJpb3IgdG8gc2FtcGxpbmcuIFRoZSBleGFjdFxuICAgKiBlZmZlY3Qgd2lsbCB2YXJ5IHBlciBtb2RlbCwgYnV0IHZhbHVlcyBiZXR3ZWVuIC0xIGFuZCAxIHNob3VsZCBkZWNyZWFzZSBvclxuICAgKiBpbmNyZWFzZSBsaWtlbGlob29kIG9mIHNlbGVjdGlvbjsgdmFsdWVzIGxpa2UgLTEwMCBvciAxMDAgc2hvdWxkIHJlc3VsdCBpbiBhIGJhblxuICAgKiBvciBleGNsdXNpdmUgc2VsZWN0aW9uIG9mIHRoZSByZWxldmFudCB0b2tlbi5cbiAgICovXG4gIGxvZ2l0X2JpYXM/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIFt0b2tlbnNdKC90b2tlbml6ZXIpIHRvIGdlbmVyYXRlIGluIHRoZSBjaGF0IGNvbXBsZXRpb24uXG4gICAqXG4gICAqIFRoZSB0b3RhbCBsZW5ndGggb2YgaW5wdXQgdG9rZW5zIGFuZCBnZW5lcmF0ZWQgdG9rZW5zIGlzIGxpbWl0ZWQgYnkgdGhlIG1vZGVsJ3NcbiAgICogY29udGV4dCBsZW5ndGguXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX2NvdW50X3Rva2Vuc193aXRoX3Rpa3Rva2VuLmlweW5iKVxuICAgKiBmb3IgY291bnRpbmcgdG9rZW5zLlxuICAgKi9cbiAgbWF4X3Rva2Vucz86IG51bWJlcjtcblxuICAvKipcbiAgICogSG93IG1hbnkgY2hhdCBjb21wbGV0aW9uIGNob2ljZXMgdG8gZ2VuZXJhdGUgZm9yIGVhY2ggaW5wdXQgbWVzc2FnZS5cbiAgICovXG4gIG4/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgYmV0d2VlbiAtMi4wIGFuZCAyLjAuIFBvc2l0aXZlIHZhbHVlcyBwZW5hbGl6ZSBuZXcgdG9rZW5zIGJhc2VkIG9uXG4gICAqIHdoZXRoZXIgdGhleSBhcHBlYXIgaW4gdGhlIHRleHQgc28gZmFyLCBpbmNyZWFzaW5nIHRoZSBtb2RlbCdzIGxpa2VsaWhvb2QgdG9cbiAgICogdGFsayBhYm91dCBuZXcgdG9waWNzLlxuICAgKlxuICAgKiBbU2VlIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZnJlcXVlbmN5IGFuZCBwcmVzZW5jZSBwZW5hbHRpZXMuXSgvZG9jcy9hcGktcmVmZXJlbmNlL3BhcmFtZXRlci1kZXRhaWxzKVxuICAgKi9cbiAgcHJlc2VuY2VfcGVuYWx0eT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFVwIHRvIDQgc2VxdWVuY2VzIHdoZXJlIHRoZSBBUEkgd2lsbCBzdG9wIGdlbmVyYXRpbmcgZnVydGhlciB0b2tlbnMuXG4gICAqL1xuICBzdG9wPzogc3RyaW5nIHwgbnVsbCB8IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIElmIHNldCwgcGFydGlhbCBtZXNzYWdlIGRlbHRhcyB3aWxsIGJlIHNlbnQsIGxpa2UgaW4gQ2hhdEdQVC4gVG9rZW5zIHdpbGwgYmVcbiAgICogc2VudCBhcyBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLCB3aXRoIHRoZSBzdHJlYW0gdGVybWluYXRlZCBieSBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2UuXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX3N0cmVhbV9jb21wbGV0aW9ucy5pcHluYikuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuIHwgbnVsbDtcblxuICAvKipcbiAgICogV2hhdCBzYW1wbGluZyB0ZW1wZXJhdHVyZSB0byB1c2UsIGJldHdlZW4gMCBhbmQgMi4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsXG4gICAqIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlXG4gICAqIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuXG4gICAqXG4gICAqIFdlIGdlbmVyYWxseSByZWNvbW1lbmQgYWx0ZXJpbmcgdGhpcyBvciBgdG9wX3BgIGJ1dCBub3QgYm90aC5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogQW4gYWx0ZXJuYXRpdmUgdG8gc2FtcGxpbmcgd2l0aCB0ZW1wZXJhdHVyZSwgY2FsbGVkIG51Y2xldXMgc2FtcGxpbmcsIHdoZXJlIHRoZVxuICAgKiBtb2RlbCBjb25zaWRlcnMgdGhlIHJlc3VsdHMgb2YgdGhlIHRva2VucyB3aXRoIHRvcF9wIHByb2JhYmlsaXR5IG1hc3MuIFNvIDAuMVxuICAgKiBtZWFucyBvbmx5IHRoZSB0b2tlbnMgY29tcHJpc2luZyB0aGUgdG9wIDEwJSBwcm9iYWJpbGl0eSBtYXNzIGFyZSBjb25zaWRlcmVkLlxuICAgKlxuICAgKiBXZSBnZW5lcmFsbHkgcmVjb21tZW5kIGFsdGVyaW5nIHRoaXMgb3IgYHRlbXBlcmF0dXJlYCBidXQgbm90IGJvdGguXG4gICAqL1xuICB0b3BfcD86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yXG4gICAqIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAqL1xuICB1c2VyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgZXhwb3J0IGludGVyZmFjZSBGdW5jdGlvbkNhbGxPcHRpb24ge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICAgICAqL1xuICAgIG5hbWU6IHN0cmluZztcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgRnVuY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQuIE11c3QgYmUgYS16LCBBLVosIDAtOSwgb3IgY29udGFpblxuICAgICAqIHVuZGVyc2NvcmVzIGFuZCBkYXNoZXMsIHdpdGggYSBtYXhpbXVtIGxlbmd0aCBvZiA2NC5cbiAgICAgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcGFyYW1ldGVycyB0aGUgZnVuY3Rpb25zIGFjY2VwdHMsIGRlc2NyaWJlZCBhcyBhIEpTT04gU2NoZW1hIG9iamVjdC4gU2VlIHRoZVxuICAgICAqIFtndWlkZV0oL2RvY3MvZ3VpZGVzL2dwdC9mdW5jdGlvbi1jYWxsaW5nKSBmb3IgZXhhbXBsZXMsIGFuZCB0aGVcbiAgICAgKiBbSlNPTiBTY2hlbWEgcmVmZXJlbmNlXShodHRwczovL2pzb24tc2NoZW1hLm9yZy91bmRlcnN0YW5kaW5nLWpzb24tc2NoZW1hLykgZm9yXG4gICAgICogZG9jdW1lbnRhdGlvbiBhYm91dCB0aGUgZm9ybWF0LlxuICAgICAqXG4gICAgICogVG8gZGVzY3JpYmUgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgbm8gcGFyYW1ldGVycywgcHJvdmlkZSB0aGUgdmFsdWVcbiAgICAgKiBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjoge319YC5cbiAgICAgKi9cbiAgICBwYXJhbWV0ZXJzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuICAgIC8qKlxuICAgICAqIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgZnVuY3Rpb24gZG9lcywgdXNlZCBieSB0aGUgbW9kZWwgdG8gY2hvb3NlIHdoZW4gYW5kXG4gICAgICogaG93IHRvIGNhbGwgdGhlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICB9XG5cbiAgZXhwb3J0IHR5cGUgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcztcblxuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBJZiBzZXQsIHBhcnRpYWwgbWVzc2FnZSBkZWx0YXMgd2lsbCBiZSBzZW50LCBsaWtlIGluIENoYXRHUFQuIFRva2VucyB3aWxsIGJlXG4gICAqIHNlbnQgYXMgZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtPzogZmFsc2UgfCBudWxsO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyBleHRlbmRzIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBJZiBzZXQsIHBhcnRpYWwgbWVzc2FnZSBkZWx0YXMgd2lsbCBiZSBzZW50LCBsaWtlIGluIENoYXRHUFQuIFRva2VucyB3aWxsIGJlXG4gICAqIHNlbnQgYXMgZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyBpbnN0ZWFkXG4gKi9cbmV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IG5hbWVzcGFjZSBDb21wbGV0aW9ucyB7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb24gPSBBUEkuQ2hhdENvbXBsZXRpb247XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DaHVuayA9IEFQSS5DaGF0Q29tcGxldGlvbkNodW5rO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uTWVzc2FnZSA9IEFQSS5DaGF0Q29tcGxldGlvbk1lc3NhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0gPSBBUEkuQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW07XG4gIGV4cG9ydCBpbXBvcnQgQ3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0TWVzc2FnZSA9IEFQSS5DcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbXBsZXRpb25zID0gZXhwb3J0cy5DaGF0ID0gdm9pZCAwO1xudmFyIGNoYXRfMSA9IHJlcXVpcmUoJy4vY2hhdC5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdDaGF0Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2hhdF8xLkNoYXQ7XG4gIH0sXG59KTtcbnZhciBjb21wbGV0aW9uc18xID0gcmVxdWlyZSgnLi9jb21wbGV0aW9ucy5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdDb21wbGV0aW9ucycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNvbXBsZXRpb25zXzEuQ29tcGxldGlvbnM7XG4gIH0sXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuZXhwb3J0IHsgQ2hhdCB9IGZyb20gJy4vY2hhdCc7XG5leHBvcnQge1xuICBDaGF0Q29tcGxldGlvbixcbiAgQ2hhdENvbXBsZXRpb25DaHVuayxcbiAgQ2hhdENvbXBsZXRpb25NZXNzYWdlLFxuICBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbSxcbiAgQ3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0TWVzc2FnZSxcbiAgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgQ29tcGxldGlvbnMsXG59IGZyb20gJy4vY29tcGxldGlvbnMnO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbXBsZXRpb25zID0gdm9pZCAwO1xuY29uc3QgcmVzb3VyY2VfMSA9IHJlcXVpcmUoJ29wZW5haS9yZXNvdXJjZScpO1xuY2xhc3MgQ29tcGxldGlvbnMgZXh0ZW5kcyByZXNvdXJjZV8xLkFQSVJlc291cmNlIHtcbiAgY3JlYXRlKGJvZHksIG9wdGlvbnMpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2NvbXBsZXRpb25zJywge1xuICAgICAgYm9keSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBzdHJlYW06IChfYSA9IGJvZHkuc3RyZWFtKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSxcbiAgICB9KTtcbiAgfVxufVxuZXhwb3J0cy5Db21wbGV0aW9ucyA9IENvbXBsZXRpb25zO1xuKGZ1bmN0aW9uIChDb21wbGV0aW9ucykge30pKChDb21wbGV0aW9ucyA9IGV4cG9ydHMuQ29tcGxldGlvbnMgfHwgKGV4cG9ydHMuQ29tcGxldGlvbnMgPSB7fSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbXBsZXRpb25zLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXgnO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSAnLi4vc3RyZWFtaW5nJztcblxuZXhwb3J0IGNsYXNzIENvbXBsZXRpb25zIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBwcm92aWRlZCBwcm9tcHQgYW5kIHBhcmFtZXRlcnMuXG4gICAqL1xuICBjcmVhdGUoYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBBUElQcm9taXNlPENvbXBsZXRpb24+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+IHwgQ29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPENvbXBsZXRpb24+IHwgQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvY29tcGxldGlvbnMnLCB7IGJvZHksIC4uLm9wdGlvbnMsIHN0cmVhbTogYm9keS5zdHJlYW0gPz8gZmFsc2UgfSkgYXNcbiAgICAgIHwgQVBJUHJvbWlzZTxDb21wbGV0aW9uPlxuICAgICAgfCBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj47XG4gIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY29tcGxldGlvbiByZXNwb25zZSBmcm9tIHRoZSBBUEkuIE5vdGU6IGJvdGggdGhlIHN0cmVhbWVkIGFuZFxuICogbm9uLXN0cmVhbWVkIHJlc3BvbnNlIG9iamVjdHMgc2hhcmUgdGhlIHNhbWUgc2hhcGUgKHVubGlrZSB0aGUgY2hhdCBlbmRwb2ludCkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbiB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29tcGxldGlvbi5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIGNvbXBsZXRpb24gY2hvaWNlcyB0aGUgbW9kZWwgZ2VuZXJhdGVkIGZvciB0aGUgaW5wdXQgcHJvbXB0LlxuICAgKi9cbiAgY2hvaWNlczogQXJyYXk8Q29tcGxldGlvbkNob2ljZT47XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCBvZiB3aGVuIHRoZSBjb21wbGV0aW9uIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdXNlZCBmb3IgY29tcGxldGlvbi5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwidGV4dF9jb21wbGV0aW9uXCJcbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVc2FnZSBzdGF0aXN0aWNzIGZvciB0aGUgY29tcGxldGlvbiByZXF1ZXN0LlxuICAgKi9cbiAgdXNhZ2U/OiBDb21wbGV0aW9uVXNhZ2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNob2ljZSB7XG4gIC8qKlxuICAgKiBUaGUgcmVhc29uIHRoZSBtb2RlbCBzdG9wcGVkIGdlbmVyYXRpbmcgdG9rZW5zLiBUaGlzIHdpbGwgYmUgYHN0b3BgIGlmIHRoZSBtb2RlbFxuICAgKiBoaXQgYSBuYXR1cmFsIHN0b3AgcG9pbnQgb3IgYSBwcm92aWRlZCBzdG9wIHNlcXVlbmNlLCBvciBgbGVuZ3RoYCBpZiB0aGUgbWF4aW11bVxuICAgKiBudW1iZXIgb2YgdG9rZW5zIHNwZWNpZmllZCBpbiB0aGUgcmVxdWVzdCB3YXMgcmVhY2hlZC5cbiAgICovXG4gIGZpbmlzaF9yZWFzb246ICdzdG9wJyB8ICdsZW5ndGgnO1xuXG4gIGluZGV4OiBudW1iZXI7XG5cbiAgbG9ncHJvYnM6IENvbXBsZXRpb25DaG9pY2UuTG9ncHJvYnMgfCBudWxsO1xuXG4gIHRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDb21wbGV0aW9uQ2hvaWNlIHtcbiAgZXhwb3J0IGludGVyZmFjZSBMb2dwcm9icyB7XG4gICAgdGV4dF9vZmZzZXQ/OiBBcnJheTxudW1iZXI+O1xuXG4gICAgdG9rZW5fbG9ncHJvYnM/OiBBcnJheTxudW1iZXI+O1xuXG4gICAgdG9rZW5zPzogQXJyYXk8c3RyaW5nPjtcblxuICAgIHRvcF9sb2dwcm9icz86IEFycmF5PFJlY29yZDxzdHJpbmcsIG51bWJlcj4+O1xuICB9XG59XG5cbi8qKlxuICogVXNhZ2Ugc3RhdGlzdGljcyBmb3IgdGhlIGNvbXBsZXRpb24gcmVxdWVzdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uVXNhZ2Uge1xuICAvKipcbiAgICogTnVtYmVyIG9mIHRva2VucyBpbiB0aGUgZ2VuZXJhdGVkIGNvbXBsZXRpb24uXG4gICAqL1xuICBjb21wbGV0aW9uX3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdG9rZW5zIGluIHRoZSBwcm9tcHQuXG4gICAqL1xuICBwcm9tcHRfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRvdGFsIG51bWJlciBvZiB0b2tlbnMgdXNlZCBpbiB0aGUgcmVxdWVzdCAocHJvbXB0ICsgY29tcGxldGlvbikuXG4gICAqL1xuICB0b3RhbF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgfCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIFlvdSBjYW4gdXNlIHRoZVxuICAgKiBbTGlzdCBtb2RlbHNdKC9kb2NzL2FwaS1yZWZlcmVuY2UvbW9kZWxzL2xpc3QpIEFQSSB0byBzZWUgYWxsIG9mIHlvdXIgYXZhaWxhYmxlXG4gICAqIG1vZGVscywgb3Igc2VlIG91ciBbTW9kZWwgb3ZlcnZpZXddKC9kb2NzL21vZGVscy9vdmVydmlldykgZm9yIGRlc2NyaXB0aW9ucyBvZlxuICAgKiB0aGVtLlxuICAgKi9cbiAgbW9kZWw6XG4gICAgfCAoc3RyaW5nICYge30pXG4gICAgfCAnYmFiYmFnZS0wMDInXG4gICAgfCAnZGF2aW5jaS0wMDInXG4gICAgfCAndGV4dC1kYXZpbmNpLTAwMydcbiAgICB8ICd0ZXh0LWRhdmluY2ktMDAyJ1xuICAgIHwgJ3RleHQtZGF2aW5jaS0wMDEnXG4gICAgfCAnY29kZS1kYXZpbmNpLTAwMidcbiAgICB8ICd0ZXh0LWN1cmllLTAwMSdcbiAgICB8ICd0ZXh0LWJhYmJhZ2UtMDAxJ1xuICAgIHwgJ3RleHQtYWRhLTAwMSc7XG5cbiAgLyoqXG4gICAqIFRoZSBwcm9tcHQocykgdG8gZ2VuZXJhdGUgY29tcGxldGlvbnMgZm9yLCBlbmNvZGVkIGFzIGEgc3RyaW5nLCBhcnJheSBvZlxuICAgKiBzdHJpbmdzLCBhcnJheSBvZiB0b2tlbnMsIG9yIGFycmF5IG9mIHRva2VuIGFycmF5cy5cbiAgICpcbiAgICogTm90ZSB0aGF0IDx8ZW5kb2Z0ZXh0fD4gaXMgdGhlIGRvY3VtZW50IHNlcGFyYXRvciB0aGF0IHRoZSBtb2RlbCBzZWVzIGR1cmluZ1xuICAgKiB0cmFpbmluZywgc28gaWYgYSBwcm9tcHQgaXMgbm90IHNwZWNpZmllZCB0aGUgbW9kZWwgd2lsbCBnZW5lcmF0ZSBhcyBpZiBmcm9tIHRoZVxuICAgKiBiZWdpbm5pbmcgb2YgYSBuZXcgZG9jdW1lbnQuXG4gICAqL1xuICBwcm9tcHQ6IHN0cmluZyB8IEFycmF5PHN0cmluZz4gfCBBcnJheTxudW1iZXI+IHwgQXJyYXk8QXJyYXk8bnVtYmVyPj4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYGJlc3Rfb2ZgIGNvbXBsZXRpb25zIHNlcnZlci1zaWRlIGFuZCByZXR1cm5zIHRoZSBcImJlc3RcIiAodGhlIG9uZSB3aXRoXG4gICAqIHRoZSBoaWdoZXN0IGxvZyBwcm9iYWJpbGl0eSBwZXIgdG9rZW4pLiBSZXN1bHRzIGNhbm5vdCBiZSBzdHJlYW1lZC5cbiAgICpcbiAgICogV2hlbiB1c2VkIHdpdGggYG5gLCBgYmVzdF9vZmAgY29udHJvbHMgdGhlIG51bWJlciBvZiBjYW5kaWRhdGUgY29tcGxldGlvbnMgYW5kXG4gICAqIGBuYCBzcGVjaWZpZXMgaG93IG1hbnkgdG8gcmV0dXJuIOKAkyBgYmVzdF9vZmAgbXVzdCBiZSBncmVhdGVyIHRoYW4gYG5gLlxuICAgKlxuICAgKiAqKk5vdGU6KiogQmVjYXVzZSB0aGlzIHBhcmFtZXRlciBnZW5lcmF0ZXMgbWFueSBjb21wbGV0aW9ucywgaXQgY2FuIHF1aWNrbHlcbiAgICogY29uc3VtZSB5b3VyIHRva2VuIHF1b3RhLiBVc2UgY2FyZWZ1bGx5IGFuZCBlbnN1cmUgdGhhdCB5b3UgaGF2ZSByZWFzb25hYmxlXG4gICAqIHNldHRpbmdzIGZvciBgbWF4X3Rva2Vuc2AgYW5kIGBzdG9wYC5cbiAgICovXG4gIGJlc3Rfb2Y/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBFY2hvIGJhY2sgdGhlIHByb21wdCBpbiBhZGRpdGlvbiB0byB0aGUgY29tcGxldGlvblxuICAgKi9cbiAgZWNobz86IGJvb2xlYW4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgYmV0d2VlbiAtMi4wIGFuZCAyLjAuIFBvc2l0aXZlIHZhbHVlcyBwZW5hbGl6ZSBuZXcgdG9rZW5zIGJhc2VkIG9uIHRoZWlyXG4gICAqIGV4aXN0aW5nIGZyZXF1ZW5jeSBpbiB0aGUgdGV4dCBzbyBmYXIsIGRlY3JlYXNpbmcgdGhlIG1vZGVsJ3MgbGlrZWxpaG9vZCB0b1xuICAgKiByZXBlYXQgdGhlIHNhbWUgbGluZSB2ZXJiYXRpbS5cbiAgICpcbiAgICogW1NlZSBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGZyZXF1ZW5jeSBhbmQgcHJlc2VuY2UgcGVuYWx0aWVzLl0oL2RvY3MvYXBpLXJlZmVyZW5jZS9wYXJhbWV0ZXItZGV0YWlscylcbiAgICovXG4gIGZyZXF1ZW5jeV9wZW5hbHR5PzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogTW9kaWZ5IHRoZSBsaWtlbGlob29kIG9mIHNwZWNpZmllZCB0b2tlbnMgYXBwZWFyaW5nIGluIHRoZSBjb21wbGV0aW9uLlxuICAgKlxuICAgKiBBY2NlcHRzIGEganNvbiBvYmplY3QgdGhhdCBtYXBzIHRva2VucyAoc3BlY2lmaWVkIGJ5IHRoZWlyIHRva2VuIElEIGluIHRoZSBHUFRcbiAgICogdG9rZW5pemVyKSB0byBhbiBhc3NvY2lhdGVkIGJpYXMgdmFsdWUgZnJvbSAtMTAwIHRvIDEwMC4gWW91IGNhbiB1c2UgdGhpc1xuICAgKiBbdG9rZW5pemVyIHRvb2xdKC90b2tlbml6ZXI/dmlldz1icGUpICh3aGljaCB3b3JrcyBmb3IgYm90aCBHUFQtMiBhbmQgR1BULTMpIHRvXG4gICAqIGNvbnZlcnQgdGV4dCB0byB0b2tlbiBJRHMuIE1hdGhlbWF0aWNhbGx5LCB0aGUgYmlhcyBpcyBhZGRlZCB0byB0aGUgbG9naXRzXG4gICAqIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgcHJpb3IgdG8gc2FtcGxpbmcuIFRoZSBleGFjdCBlZmZlY3Qgd2lsbCB2YXJ5IHBlciBtb2RlbCxcbiAgICogYnV0IHZhbHVlcyBiZXR3ZWVuIC0xIGFuZCAxIHNob3VsZCBkZWNyZWFzZSBvciBpbmNyZWFzZSBsaWtlbGlob29kIG9mIHNlbGVjdGlvbjtcbiAgICogdmFsdWVzIGxpa2UgLTEwMCBvciAxMDAgc2hvdWxkIHJlc3VsdCBpbiBhIGJhbiBvciBleGNsdXNpdmUgc2VsZWN0aW9uIG9mIHRoZVxuICAgKiByZWxldmFudCB0b2tlbi5cbiAgICpcbiAgICogQXMgYW4gZXhhbXBsZSwgeW91IGNhbiBwYXNzIGB7XCI1MDI1NlwiOiAtMTAwfWAgdG8gcHJldmVudCB0aGUgPHxlbmRvZnRleHR8PiB0b2tlblxuICAgKiBmcm9tIGJlaW5nIGdlbmVyYXRlZC5cbiAgICovXG4gIGxvZ2l0X2JpYXM/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHwgbnVsbDtcblxuICAvKipcbiAgICogSW5jbHVkZSB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb24gdGhlIGBsb2dwcm9ic2AgbW9zdCBsaWtlbHkgdG9rZW5zLCBhcyB3ZWxsIHRoZVxuICAgKiBjaG9zZW4gdG9rZW5zLiBGb3IgZXhhbXBsZSwgaWYgYGxvZ3Byb2JzYCBpcyA1LCB0aGUgQVBJIHdpbGwgcmV0dXJuIGEgbGlzdCBvZlxuICAgKiB0aGUgNSBtb3N0IGxpa2VseSB0b2tlbnMuIFRoZSBBUEkgd2lsbCBhbHdheXMgcmV0dXJuIHRoZSBgbG9ncHJvYmAgb2YgdGhlXG4gICAqIHNhbXBsZWQgdG9rZW4sIHNvIHRoZXJlIG1heSBiZSB1cCB0byBgbG9ncHJvYnMrMWAgZWxlbWVudHMgaW4gdGhlIHJlc3BvbnNlLlxuICAgKlxuICAgKiBUaGUgbWF4aW11bSB2YWx1ZSBmb3IgYGxvZ3Byb2JzYCBpcyA1LlxuICAgKi9cbiAgbG9ncHJvYnM/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgW3Rva2Vuc10oL3Rva2VuaXplcikgdG8gZ2VuZXJhdGUgaW4gdGhlIGNvbXBsZXRpb24uXG4gICAqXG4gICAqIFRoZSB0b2tlbiBjb3VudCBvZiB5b3VyIHByb21wdCBwbHVzIGBtYXhfdG9rZW5zYCBjYW5ub3QgZXhjZWVkIHRoZSBtb2RlbCdzXG4gICAqIGNvbnRleHQgbGVuZ3RoLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19jb3VudF90b2tlbnNfd2l0aF90aWt0b2tlbi5pcHluYilcbiAgICogZm9yIGNvdW50aW5nIHRva2Vucy5cbiAgICovXG4gIG1heF90b2tlbnM/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBIb3cgbWFueSBjb21wbGV0aW9ucyB0byBnZW5lcmF0ZSBmb3IgZWFjaCBwcm9tcHQuXG4gICAqXG4gICAqICoqTm90ZToqKiBCZWNhdXNlIHRoaXMgcGFyYW1ldGVyIGdlbmVyYXRlcyBtYW55IGNvbXBsZXRpb25zLCBpdCBjYW4gcXVpY2tseVxuICAgKiBjb25zdW1lIHlvdXIgdG9rZW4gcXVvdGEuIFVzZSBjYXJlZnVsbHkgYW5kIGVuc3VyZSB0aGF0IHlvdSBoYXZlIHJlYXNvbmFibGVcbiAgICogc2V0dGluZ3MgZm9yIGBtYXhfdG9rZW5zYCBhbmQgYHN0b3BgLlxuICAgKi9cbiAgbj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE51bWJlciBiZXR3ZWVuIC0yLjAgYW5kIDIuMC4gUG9zaXRpdmUgdmFsdWVzIHBlbmFsaXplIG5ldyB0b2tlbnMgYmFzZWQgb25cbiAgICogd2hldGhlciB0aGV5IGFwcGVhciBpbiB0aGUgdGV4dCBzbyBmYXIsIGluY3JlYXNpbmcgdGhlIG1vZGVsJ3MgbGlrZWxpaG9vZCB0b1xuICAgKiB0YWxrIGFib3V0IG5ldyB0b3BpY3MuXG4gICAqXG4gICAqIFtTZWUgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBmcmVxdWVuY3kgYW5kIHByZXNlbmNlIHBlbmFsdGllcy5dKC9kb2NzL2FwaS1yZWZlcmVuY2UvcGFyYW1ldGVyLWRldGFpbHMpXG4gICAqL1xuICBwcmVzZW5jZV9wZW5hbHR5PzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVXAgdG8gNCBzZXF1ZW5jZXMgd2hlcmUgdGhlIEFQSSB3aWxsIHN0b3AgZ2VuZXJhdGluZyBmdXJ0aGVyIHRva2Vucy4gVGhlXG4gICAqIHJldHVybmVkIHRleHQgd2lsbCBub3QgY29udGFpbiB0aGUgc3RvcCBzZXF1ZW5jZS5cbiAgICovXG4gIHN0b3A/OiBzdHJpbmcgfCBudWxsIHwgQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBzdHJlYW0gYmFjayBwYXJ0aWFsIHByb2dyZXNzLiBJZiBzZXQsIHRva2VucyB3aWxsIGJlIHNlbnQgYXNcbiAgICogZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBzdWZmaXggdGhhdCBjb21lcyBhZnRlciBhIGNvbXBsZXRpb24gb2YgaW5zZXJ0ZWQgdGV4dC5cbiAgICovXG4gIHN1ZmZpeD86IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFdoYXQgc2FtcGxpbmcgdGVtcGVyYXR1cmUgdG8gdXNlLCBiZXR3ZWVuIDAgYW5kIDIuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbFxuICAgKiBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZVxuICAgKiBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLlxuICAgKlxuICAgKiBXZSBnZW5lcmFsbHkgcmVjb21tZW5kIGFsdGVyaW5nIHRoaXMgb3IgYHRvcF9wYCBidXQgbm90IGJvdGguXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEFuIGFsdGVybmF0aXZlIHRvIHNhbXBsaW5nIHdpdGggdGVtcGVyYXR1cmUsIGNhbGxlZCBudWNsZXVzIHNhbXBsaW5nLCB3aGVyZSB0aGVcbiAgICogbW9kZWwgY29uc2lkZXJzIHRoZSByZXN1bHRzIG9mIHRoZSB0b2tlbnMgd2l0aCB0b3BfcCBwcm9iYWJpbGl0eSBtYXNzLiBTbyAwLjFcbiAgICogbWVhbnMgb25seSB0aGUgdG9rZW5zIGNvbXByaXNpbmcgdGhlIHRvcCAxMCUgcHJvYmFiaWxpdHkgbWFzcyBhcmUgY29uc2lkZXJlZC5cbiAgICpcbiAgICogV2UgZ2VuZXJhbGx5IHJlY29tbWVuZCBhbHRlcmluZyB0aGlzIG9yIGB0ZW1wZXJhdHVyZWAgYnV0IG5vdCBib3RoLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvclxuICAgKiBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgKi9cbiAgdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3RyZWFtIGJhY2sgcGFydGlhbCBwcm9ncmVzcy4gSWYgc2V0LCB0b2tlbnMgd2lsbCBiZSBzZW50IGFzXG4gICAqIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUsIHdpdGggdGhlIHN0cmVhbSB0ZXJtaW5hdGVkIGJ5IGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZS5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fc3RyZWFtX2NvbXBsZXRpb25zLmlweW5iKS5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGV4dGVuZHMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBzdHJlYW0gYmFjayBwYXJ0aWFsIHByb2dyZXNzLiBJZiBzZXQsIHRva2VucyB3aWxsIGJlIHNlbnQgYXNcbiAgICogZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENvbXBsZXRpb25zIHtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uID0gQVBJLkNvbXBsZXRpb247XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNob2ljZSA9IEFQSS5Db21wbGV0aW9uQ2hvaWNlO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25Vc2FnZSA9IEFQSS5Db21wbGV0aW9uVXNhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG4iLCIndXNlIHN0cmljdCc7XG4vLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRW1iZWRkaW5ncyA9IHZvaWQgMDtcbmNvbnN0IHJlc291cmNlXzEgPSByZXF1aXJlKCdvcGVuYWkvcmVzb3VyY2UnKTtcbmNsYXNzIEVtYmVkZGluZ3MgZXh0ZW5kcyByZXNvdXJjZV8xLkFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZW1iZWRkaW5nIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGlucHV0IHRleHQuXG4gICAqL1xuICBjcmVhdGUoYm9keSwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9lbWJlZGRpbmdzJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5leHBvcnRzLkVtYmVkZGluZ3MgPSBFbWJlZGRpbmdzO1xuKGZ1bmN0aW9uIChFbWJlZGRpbmdzKSB7fSkoKEVtYmVkZGluZ3MgPSBleHBvcnRzLkVtYmVkZGluZ3MgfHwgKGV4cG9ydHMuRW1iZWRkaW5ncyA9IHt9KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1iZWRkaW5ncy5qcy5tYXBcbiIsIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZSc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4JztcblxuZXhwb3J0IGNsYXNzIEVtYmVkZGluZ3MgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGVtYmVkZGluZyB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBpbnB1dCB0ZXh0LlxuICAgKi9cbiAgY3JlYXRlKFxuICAgIGJvZHk6IEVtYmVkZGluZ0NyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2VtYmVkZGluZ3MnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVFbWJlZGRpbmdSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBlbWJlZGRpbmdzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAqL1xuICBkYXRhOiBBcnJheTxFbWJlZGRpbmc+O1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgbW9kZWwgdXNlZCB0byBnZW5lcmF0ZSB0aGUgZW1iZWRkaW5nLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgXCJlbWJlZGRpbmdcIi5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgdXNhZ2UgaW5mb3JtYXRpb24gZm9yIHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgdXNhZ2U6IENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlLlVzYWdlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIFRoZSB1c2FnZSBpbmZvcm1hdGlvbiBmb3IgdGhlIHJlcXVlc3QuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIFVzYWdlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRva2VucyB1c2VkIGJ5IHRoZSBwcm9tcHQuXG4gICAgICovXG4gICAgcHJvbXB0X3Rva2VuczogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgdXNlZCBieSB0aGUgcmVxdWVzdC5cbiAgICAgKi9cbiAgICB0b3RhbF90b2tlbnM6IG51bWJlcjtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gZW1iZWRkaW5nIHZlY3RvciByZXR1cm5lZCBieSBlbWJlZGRpbmcgZW5kcG9pbnQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRW1iZWRkaW5nIHtcbiAgLyoqXG4gICAqIFRoZSBlbWJlZGRpbmcgdmVjdG9yLCB3aGljaCBpcyBhIGxpc3Qgb2YgZmxvYXRzLiBUaGUgbGVuZ3RoIG9mIHZlY3RvciBkZXBlbmRzIG9uXG4gICAqIHRoZSBtb2RlbCBhcyBsaXN0ZWQgaW4gdGhlIFtlbWJlZGRpbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9lbWJlZGRpbmdzKS5cbiAgICovXG4gIGVtYmVkZGluZzogQXJyYXk8bnVtYmVyPjtcblxuICAvKipcbiAgICogVGhlIGluZGV4IG9mIHRoZSBlbWJlZGRpbmcgaW4gdGhlIGxpc3Qgb2YgZW1iZWRkaW5ncy5cbiAgICovXG4gIGluZGV4OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwiZW1iZWRkaW5nXCIuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbWJlZGRpbmdDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogSW5wdXQgdGV4dCB0byBlbWJlZCwgZW5jb2RlZCBhcyBhIHN0cmluZyBvciBhcnJheSBvZiB0b2tlbnMuIFRvIGVtYmVkIG11bHRpcGxlXG4gICAqIGlucHV0cyBpbiBhIHNpbmdsZSByZXF1ZXN0LCBwYXNzIGFuIGFycmF5IG9mIHN0cmluZ3Mgb3IgYXJyYXkgb2YgdG9rZW4gYXJyYXlzLlxuICAgKiBFYWNoIGlucHV0IG11c3Qgbm90IGV4Y2VlZCB0aGUgbWF4IGlucHV0IHRva2VucyBmb3IgdGhlIG1vZGVsICg4MTkxIHRva2VucyBmb3JcbiAgICogYHRleHQtZW1iZWRkaW5nLWFkYS0wMDJgKS5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fY291bnRfdG9rZW5zX3dpdGhfdGlrdG9rZW4uaXB5bmIpXG4gICAqIGZvciBjb3VudGluZyB0b2tlbnMuXG4gICAqL1xuICBpbnB1dDogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPiB8IEFycmF5PG51bWJlcj4gfCBBcnJheTxBcnJheTxudW1iZXI+PjtcblxuICAvKipcbiAgICogSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gWW91IGNhbiB1c2UgdGhlXG4gICAqIFtMaXN0IG1vZGVsc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9tb2RlbHMvbGlzdCkgQVBJIHRvIHNlZSBhbGwgb2YgeW91ciBhdmFpbGFibGVcbiAgICogbW9kZWxzLCBvciBzZWUgb3VyIFtNb2RlbCBvdmVydmlld10oL2RvY3MvbW9kZWxzL292ZXJ2aWV3KSBmb3IgZGVzY3JpcHRpb25zIG9mXG4gICAqIHRoZW0uXG4gICAqL1xuICBtb2RlbDogKHN0cmluZyAmIHt9KSB8ICd0ZXh0LWVtYmVkZGluZy1hZGEtMDAyJztcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3JcbiAgICogYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICovXG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRW1iZWRkaW5ncyB7XG4gIGV4cG9ydCBpbXBvcnQgQ3JlYXRlRW1iZWRkaW5nUmVzcG9uc2UgPSBBUEkuQ3JlYXRlRW1iZWRkaW5nUmVzcG9uc2U7XG4gIGV4cG9ydCBpbXBvcnQgRW1iZWRkaW5nID0gQVBJLkVtYmVkZGluZztcbiAgZXhwb3J0IGltcG9ydCBFbWJlZGRpbmdDcmVhdGVQYXJhbXMgPSBBUEkuRW1iZWRkaW5nQ3JlYXRlUGFyYW1zO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkVkaXRzID0gdm9pZCAwO1xuY29uc3QgcmVzb3VyY2VfMSA9IHJlcXVpcmUoJ29wZW5haS9yZXNvdXJjZScpO1xuY2xhc3MgRWRpdHMgZXh0ZW5kcyByZXNvdXJjZV8xLkFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgZWRpdCBmb3IgdGhlIHByb3ZpZGVkIGlucHV0LCBpbnN0cnVjdGlvbiwgYW5kIHBhcmFtZXRlcnMuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIFRoZSBFZGl0cyBBUEkgaXMgZGVwcmVjYXRlZDsgcGxlYXNlIHVzZSBDaGF0IENvbXBsZXRpb25zIGluc3RlYWQuXG4gICAqXG4gICAqIGh0dHBzOi8vb3BlbmFpLmNvbS9ibG9nL2dwdC00LWFwaS1nZW5lcmFsLWF2YWlsYWJpbGl0eSNkZXByZWNhdGlvbi1vZi10aGUtZWRpdHMtYXBpXG4gICAqL1xuICBjcmVhdGUoYm9keSwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9lZGl0cycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuZXhwb3J0cy5FZGl0cyA9IEVkaXRzO1xuKGZ1bmN0aW9uIChFZGl0cykge30pKChFZGl0cyA9IGV4cG9ydHMuRWRpdHMgfHwgKGV4cG9ydHMuRWRpdHMgPSB7fSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVkaXRzLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UnO1xuaW1wb3J0ICogYXMgQ29tcGxldGlvbnMgZnJvbSAnLi9jb21wbGV0aW9ucyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleCc7XG5cbmV4cG9ydCBjbGFzcyBFZGl0cyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgZWRpdCBmb3IgdGhlIHByb3ZpZGVkIGlucHV0LCBpbnN0cnVjdGlvbiwgYW5kIHBhcmFtZXRlcnMuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIFRoZSBFZGl0cyBBUEkgaXMgZGVwcmVjYXRlZDsgcGxlYXNlIHVzZSBDaGF0IENvbXBsZXRpb25zIGluc3RlYWQuXG4gICAqXG4gICAqIGh0dHBzOi8vb3BlbmFpLmNvbS9ibG9nL2dwdC00LWFwaS1nZW5lcmFsLWF2YWlsYWJpbGl0eSNkZXByZWNhdGlvbi1vZi10aGUtZWRpdHMtYXBpXG4gICAqL1xuICBjcmVhdGUoYm9keTogRWRpdENyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RWRpdD4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9lZGl0cycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXQge1xuICAvKipcbiAgICogQSBsaXN0IG9mIGVkaXQgY2hvaWNlcy4gQ2FuIGJlIG1vcmUgdGhhbiBvbmUgaWYgYG5gIGlzIGdyZWF0ZXIgdGhhbiAxLlxuICAgKi9cbiAgY2hvaWNlczogQXJyYXk8RWRpdC5DaG9pY2U+O1xuXG4gIC8qKlxuICAgKiBBIHVuaXggdGltZXN0YW1wIG9mIHdoZW4gdGhlIGVkaXQgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIGBlZGl0YC5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVc2FnZSBzdGF0aXN0aWNzIGZvciB0aGUgY29tcGxldGlvbiByZXF1ZXN0LlxuICAgKi9cbiAgdXNhZ2U6IENvbXBsZXRpb25zLkNvbXBsZXRpb25Vc2FnZTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBFZGl0IHtcbiAgZXhwb3J0IGludGVyZmFjZSBDaG9pY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIG1vZGVsIHN0b3BwZWQgZ2VuZXJhdGluZyB0b2tlbnMuIFRoaXMgd2lsbCBiZSBgc3RvcGAgaWYgdGhlIG1vZGVsXG4gICAgICogaGl0IGEgbmF0dXJhbCBzdG9wIHBvaW50IG9yIGEgcHJvdmlkZWQgc3RvcCBzZXF1ZW5jZSwgb3IgYGxlbmd0aGAgaWYgdGhlIG1heGltdW1cbiAgICAgKiBudW1iZXIgb2YgdG9rZW5zIHNwZWNpZmllZCBpbiB0aGUgcmVxdWVzdCB3YXMgcmVhY2hlZC5cbiAgICAgKi9cbiAgICBmaW5pc2hfcmVhc29uOiAnc3RvcCcgfCAnbGVuZ3RoJztcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgY2hvaWNlIGluIHRoZSBsaXN0IG9mIGNob2ljZXMuXG4gICAgICovXG4gICAgaW5kZXg6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBlZGl0ZWQgcmVzdWx0LlxuICAgICAqL1xuICAgIHRleHQ6IHN0cmluZztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIGluc3RydWN0aW9uIHRoYXQgdGVsbHMgdGhlIG1vZGVsIGhvdyB0byBlZGl0IHRoZSBwcm9tcHQuXG4gICAqL1xuICBpbnN0cnVjdGlvbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBZb3UgY2FuIHVzZSB0aGUgYHRleHQtZGF2aW5jaS1lZGl0LTAwMWAgb3JcbiAgICogYGNvZGUtZGF2aW5jaS1lZGl0LTAwMWAgbW9kZWwgd2l0aCB0aGlzIGVuZHBvaW50LlxuICAgKi9cbiAgbW9kZWw6IChzdHJpbmcgJiB7fSkgfCAndGV4dC1kYXZpbmNpLWVkaXQtMDAxJyB8ICdjb2RlLWRhdmluY2ktZWRpdC0wMDEnO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5wdXQgdGV4dCB0byB1c2UgYXMgYSBzdGFydGluZyBwb2ludCBmb3IgdGhlIGVkaXQuXG4gICAqL1xuICBpbnB1dD86IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEhvdyBtYW55IGVkaXRzIHRvIGdlbmVyYXRlIGZvciB0aGUgaW5wdXQgYW5kIGluc3RydWN0aW9uLlxuICAgKi9cbiAgbj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFdoYXQgc2FtcGxpbmcgdGVtcGVyYXR1cmUgdG8gdXNlLCBiZXR3ZWVuIDAgYW5kIDIuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbFxuICAgKiBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZVxuICAgKiBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLlxuICAgKlxuICAgKiBXZSBnZW5lcmFsbHkgcmVjb21tZW5kIGFsdGVyaW5nIHRoaXMgb3IgYHRvcF9wYCBidXQgbm90IGJvdGguXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEFuIGFsdGVybmF0aXZlIHRvIHNhbXBsaW5nIHdpdGggdGVtcGVyYXR1cmUsIGNhbGxlZCBudWNsZXVzIHNhbXBsaW5nLCB3aGVyZSB0aGVcbiAgICogbW9kZWwgY29uc2lkZXJzIHRoZSByZXN1bHRzIG9mIHRoZSB0b2tlbnMgd2l0aCB0b3BfcCBwcm9iYWJpbGl0eSBtYXNzLiBTbyAwLjFcbiAgICogbWVhbnMgb25seSB0aGUgdG9rZW5zIGNvbXByaXNpbmcgdGhlIHRvcCAxMCUgcHJvYmFiaWxpdHkgbWFzcyBhcmUgY29uc2lkZXJlZC5cbiAgICpcbiAgICogV2UgZ2VuZXJhbGx5IHJlY29tbWVuZCBhbHRlcmluZyB0aGlzIG9yIGB0ZW1wZXJhdHVyZWAgYnV0IG5vdCBib3RoLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXIgfCBudWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEVkaXRzIHtcbiAgZXhwb3J0IGltcG9ydCBFZGl0ID0gQVBJLkVkaXQ7XG4gIGV4cG9ydCBpbXBvcnQgRWRpdENyZWF0ZVBhcmFtcyA9IEFQSS5FZGl0Q3JlYXRlUGFyYW1zO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpbGVPYmplY3RzUGFnZSA9IGV4cG9ydHMuRmlsZXMgPSB2b2lkIDA7XG5jb25zdCByZXNvdXJjZV8xID0gcmVxdWlyZSgnb3BlbmFpL3Jlc291cmNlJyk7XG5jb25zdCBjb3JlXzEgPSByZXF1aXJlKCdvcGVuYWkvY29yZScpO1xuY29uc3QgcGFnaW5hdGlvbl8xID0gcmVxdWlyZSgnb3BlbmFpL3BhZ2luYXRpb24nKTtcbmNsYXNzIEZpbGVzIGV4dGVuZHMgcmVzb3VyY2VfMS5BUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBVcGxvYWQgYSBmaWxlIHRoYXQgY29udGFpbnMgZG9jdW1lbnQocykgdG8gYmUgdXNlZCBhY3Jvc3MgdmFyaW91c1xuICAgKiBlbmRwb2ludHMvZmVhdHVyZXMuIEN1cnJlbnRseSwgdGhlIHNpemUgb2YgYWxsIHRoZSBmaWxlcyB1cGxvYWRlZCBieSBvbmVcbiAgICogb3JnYW5pemF0aW9uIGNhbiBiZSB1cCB0byAxIEdCLiBQbGVhc2UgY29udGFjdCB1cyBpZiB5b3UgbmVlZCB0byBpbmNyZWFzZSB0aGVcbiAgICogc3RvcmFnZSBsaW1pdC5cbiAgICovXG4gIGNyZWF0ZShib2R5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ZpbGVzJywgKDAsIGNvcmVfMS5tdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMpKHsgYm9keSwgLi4ub3B0aW9ucyB9KSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpYyBmaWxlLlxuICAgKi9cbiAgcmV0cmlldmUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGAvZmlsZXMvJHtmaWxlSWR9YCwgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIGZpbGVzIHRoYXQgYmVsb25nIHRvIHRoZSB1c2VyJ3Mgb3JnYW5pemF0aW9uLlxuICAgKi9cbiAgbGlzdChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QVBJTGlzdCgnL2ZpbGVzJywgRmlsZU9iamVjdHNQYWdlLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgZmlsZS5cbiAgICovXG4gIGRlbChmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxldGUoYC9maWxlcy8ke2ZpbGVJZH1gLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY29udGVudHMgb2YgdGhlIHNwZWNpZmllZCBmaWxlXG4gICAqL1xuICByZXRyaWV2ZUNvbnRlbnQoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGAvZmlsZXMvJHtmaWxlSWR9L2NvbnRlbnRgLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgLi4uKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydHMuRmlsZXMgPSBGaWxlcztcbi8qKlxuICogTm90ZTogbm8gcGFnaW5hdGlvbiBhY3R1YWxseSBvY2N1cnMgeWV0LCB0aGlzIGlzIGZvciBmb3J3YXJkcy1jb21wYXRpYmlsaXR5LlxuICovXG5jbGFzcyBGaWxlT2JqZWN0c1BhZ2UgZXh0ZW5kcyBwYWdpbmF0aW9uXzEuUGFnZSB7fVxuZXhwb3J0cy5GaWxlT2JqZWN0c1BhZ2UgPSBGaWxlT2JqZWN0c1BhZ2U7XG4oZnVuY3Rpb24gKEZpbGVzKSB7fSkoKEZpbGVzID0gZXhwb3J0cy5GaWxlcyB8fCAoZXhwb3J0cy5GaWxlcyA9IHt9KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsZXMuanMubWFwXG4iLCIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uL2NvcmUnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi9yZXNvdXJjZSc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleCc7XG5pbXBvcnQgeyB0eXBlIFVwbG9hZGFibGUsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4uL2NvcmUnO1xuaW1wb3J0IHsgUGFnZSB9IGZyb20gJy4uL3BhZ2luYXRpb24nO1xuXG5leHBvcnQgY2xhc3MgRmlsZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBVcGxvYWQgYSBmaWxlIHRoYXQgY29udGFpbnMgZG9jdW1lbnQocykgdG8gYmUgdXNlZCBhY3Jvc3MgdmFyaW91c1xuICAgKiBlbmRwb2ludHMvZmVhdHVyZXMuIEN1cnJlbnRseSwgdGhlIHNpemUgb2YgYWxsIHRoZSBmaWxlcyB1cGxvYWRlZCBieSBvbmVcbiAgICogb3JnYW5pemF0aW9uIGNhbiBiZSB1cCB0byAxIEdCLiBQbGVhc2UgY29udGFjdCB1cyBpZiB5b3UgbmVlZCB0byBpbmNyZWFzZSB0aGVcbiAgICogc3RvcmFnZSBsaW1pdC5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBGaWxlQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaWxlT2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ZpbGVzJywgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zKHsgYm9keSwgLi4ub3B0aW9ucyB9KSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIGZpbGUuXG4gICAqL1xuICByZXRyaWV2ZShmaWxlSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmlsZU9iamVjdD4ge1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbGVzLyR7ZmlsZUlkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIGZpbGVzIHRoYXQgYmVsb25nIHRvIHRoZSB1c2VyJ3Mgb3JnYW5pemF0aW9uLlxuICAgKi9cbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8RmlsZU9iamVjdHNQYWdlLCBGaWxlT2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QVBJTGlzdCgnL2ZpbGVzJywgRmlsZU9iamVjdHNQYWdlLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmaWxlLlxuICAgKi9cbiAgZGVsKGZpbGVJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaWxlRGVsZXRlZD4ge1xuICAgIHJldHVybiB0aGlzLmRlbGV0ZShgL2ZpbGVzLyR7ZmlsZUlkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNvbnRlbnRzIG9mIHRoZSBzcGVjaWZpZWQgZmlsZVxuICAgKi9cbiAgcmV0cmlldmVDb250ZW50KGZpbGVJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9maWxlcy8ke2ZpbGVJZH0vY29udGVudGAsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLCAuLi5vcHRpb25zPy5oZWFkZXJzIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBOb3RlOiBubyBwYWdpbmF0aW9uIGFjdHVhbGx5IG9jY3VycyB5ZXQsIHRoaXMgaXMgZm9yIGZvcndhcmRzLWNvbXBhdGliaWxpdHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWxlT2JqZWN0c1BhZ2UgZXh0ZW5kcyBQYWdlPEZpbGVPYmplY3Q+IHt9XG4vLyBhbGlhcyBzbyB3ZSBjYW4gZXhwb3J0IGl0IGluIHRoZSBuYW1lc3BhY2VcbnR5cGUgX0ZpbGVPYmplY3RzUGFnZSA9IEZpbGVPYmplY3RzUGFnZTtcblxuZXhwb3J0IHR5cGUgRmlsZUNvbnRlbnQgPSBzdHJpbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZURlbGV0ZWQge1xuICBpZDogc3RyaW5nO1xuXG4gIGRlbGV0ZWQ6IGJvb2xlYW47XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbi8qKlxuICogVGhlIGBGaWxlYCBvYmplY3QgcmVwcmVzZW50cyBhIGRvY3VtZW50IHRoYXQgaGFzIGJlZW4gdXBsb2FkZWQgdG8gT3BlbkFJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVPYmplY3Qge1xuICAvKipcbiAgICogVGhlIGZpbGUgaWRlbnRpZmllciwgd2hpY2ggY2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIEFQSSBlbmRwb2ludHMuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgc2l6ZSBvZiB0aGUgZmlsZSBpbiBieXRlcy5cbiAgICovXG4gIGJ5dGVzOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSB1bml4IHRpbWVzdGFtcCBmb3Igd2hlbiB0aGUgZmlsZSB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGZpbGUuXG4gICAqL1xuICBmaWxlbmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBcImZpbGVcIi5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgaW50ZW5kZWQgcHVycG9zZSBvZiB0aGUgZmlsZS4gQ3VycmVudGx5LCBvbmx5IFwiZmluZS10dW5lXCIgaXMgc3VwcG9ydGVkLlxuICAgKi9cbiAgcHVycG9zZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIGZpbGUsIHdoaWNoIGNhbiBiZSBlaXRoZXIgYHVwbG9hZGVkYCwgYHByb2Nlc3NlZGAsXG4gICAqIGBwZW5kaW5nYCwgYGVycm9yYCwgYGRlbGV0aW5nYCBvciBgZGVsZXRlZGAuXG4gICAqL1xuICBzdGF0dXM/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgZGV0YWlscyBhYm91dCB0aGUgc3RhdHVzIG9mIHRoZSBmaWxlLiBJZiB0aGUgZmlsZSBpcyBpbiB0aGUgYGVycm9yYFxuICAgKiBzdGF0ZSwgdGhpcyB3aWxsIGluY2x1ZGUgYSBtZXNzYWdlIGRlc2NyaWJpbmcgdGhlIGVycm9yLlxuICAgKi9cbiAgc3RhdHVzX2RldGFpbHM/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogTmFtZSBvZiB0aGUgW0pTT04gTGluZXNdKGh0dHBzOi8vanNvbmxpbmVzLnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC8pIGZpbGUgdG8gYmVcbiAgICogdXBsb2FkZWQuXG4gICAqXG4gICAqIElmIHRoZSBgcHVycG9zZWAgaXMgc2V0IHRvIFwiZmluZS10dW5lXCIsIHRoZSBmaWxlIHdpbGwgYmUgdXNlZCBmb3IgZmluZS10dW5pbmcuXG4gICAqL1xuICBmaWxlOiBVcGxvYWRhYmxlO1xuXG4gIC8qKlxuICAgKiBUaGUgaW50ZW5kZWQgcHVycG9zZSBvZiB0aGUgdXBsb2FkZWQgZG9jdW1lbnRzLlxuICAgKlxuICAgKiBVc2UgXCJmaW5lLXR1bmVcIiBmb3IgW2ZpbmUtdHVuaW5nXSgvZG9jcy9hcGktcmVmZXJlbmNlL2ZpbmUtdHVuaW5nKS4gVGhpcyBhbGxvd3NcbiAgICogdXMgdG8gdmFsaWRhdGUgdGhlIGZvcm1hdCBvZiB0aGUgdXBsb2FkZWQgZmlsZS5cbiAgICovXG4gIHB1cnBvc2U6IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBGaWxlcyB7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZUNvbnRlbnQgPSBBUEkuRmlsZUNvbnRlbnQ7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZURlbGV0ZWQgPSBBUEkuRmlsZURlbGV0ZWQ7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZU9iamVjdCA9IEFQSS5GaWxlT2JqZWN0O1xuICBleHBvcnQgdHlwZSBGaWxlT2JqZWN0c1BhZ2UgPSBfRmlsZU9iamVjdHNQYWdlO1xuICBleHBvcnQgaW1wb3J0IEZpbGVDcmVhdGVQYXJhbXMgPSBBUEkuRmlsZUNyZWF0ZVBhcmFtcztcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GaW5lVHVuZXNQYWdlID0gZXhwb3J0cy5GaW5lVHVuZXMgPSB2b2lkIDA7XG5jb25zdCByZXNvdXJjZV8xID0gcmVxdWlyZSgnb3BlbmFpL3Jlc291cmNlJyk7XG5jb25zdCBwYWdpbmF0aW9uXzEgPSByZXF1aXJlKCdvcGVuYWkvcGFnaW5hdGlvbicpO1xuY2xhc3MgRmluZVR1bmVzIGV4dGVuZHMgcmVzb3VyY2VfMS5BUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgam9iIHRoYXQgZmluZS10dW5lcyBhIHNwZWNpZmllZCBtb2RlbCBmcm9tIGEgZ2l2ZW4gZGF0YXNldC5cbiAgICpcbiAgICogUmVzcG9uc2UgaW5jbHVkZXMgZGV0YWlscyBvZiB0aGUgZW5xdWV1ZWQgam9iIGluY2x1ZGluZyBqb2Igc3RhdHVzIGFuZCB0aGUgbmFtZVxuICAgKiBvZiB0aGUgZmluZS10dW5lZCBtb2RlbHMgb25jZSBjb21wbGV0ZS5cbiAgICpcbiAgICogW0xlYXJuIG1vcmUgYWJvdXQgZmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcpXG4gICAqL1xuICBjcmVhdGUoYm9keSwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9maW5lLXR1bmVzJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIGluZm8gYWJvdXQgdGhlIGZpbmUtdHVuZSBqb2IuXG4gICAqXG4gICAqIFtMZWFybiBtb3JlIGFib3V0IGZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nKVxuICAgKi9cbiAgcmV0cmlldmUoZmluZVR1bmVJZCwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbmUtdHVuZXMvJHtmaW5lVHVuZUlkfWAsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBMaXN0IHlvdXIgb3JnYW5pemF0aW9uJ3MgZmluZS10dW5pbmcgam9ic1xuICAgKi9cbiAgbGlzdChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QVBJTGlzdCgnL2ZpbmUtdHVuZXMnLCBGaW5lVHVuZXNQYWdlLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogSW1tZWRpYXRlbHkgY2FuY2VsIGEgZmluZS10dW5lIGpvYi5cbiAgICovXG4gIGNhbmNlbChmaW5lVHVuZUlkLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMucG9zdChgL2ZpbmUtdHVuZXMvJHtmaW5lVHVuZUlkfS9jYW5jZWxgLCBvcHRpb25zKTtcbiAgfVxuICBsaXN0RXZlbnRzKGZpbmVUdW5lSWQsIHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbmUtdHVuZXMvJHtmaW5lVHVuZUlkfS9ldmVudHNgLCB7XG4gICAgICBxdWVyeSxcbiAgICAgIHRpbWVvdXQ6IDg2NDAwMDAwLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHN0cmVhbTpcbiAgICAgICAgKF9hID0gcXVlcnkgPT09IG51bGwgfHwgcXVlcnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHF1ZXJ5LnN0cmVhbSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/XG4gICAgICAgICAgX2FcbiAgICAgICAgOiBmYWxzZSxcbiAgICB9KTtcbiAgfVxufVxuZXhwb3J0cy5GaW5lVHVuZXMgPSBGaW5lVHVuZXM7XG4vKipcbiAqIE5vdGU6IG5vIHBhZ2luYXRpb24gYWN0dWFsbHkgb2NjdXJzIHlldCwgdGhpcyBpcyBmb3IgZm9yd2FyZHMtY29tcGF0aWJpbGl0eS5cbiAqL1xuY2xhc3MgRmluZVR1bmVzUGFnZSBleHRlbmRzIHBhZ2luYXRpb25fMS5QYWdlIHt9XG5leHBvcnRzLkZpbmVUdW5lc1BhZ2UgPSBGaW5lVHVuZXNQYWdlO1xuKGZ1bmN0aW9uIChGaW5lVHVuZXMpIHt9KSgoRmluZVR1bmVzID0gZXhwb3J0cy5GaW5lVHVuZXMgfHwgKGV4cG9ydHMuRmluZVR1bmVzID0ge30pKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maW5lLXR1bmVzLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UnO1xuaW1wb3J0ICogYXMgRmlsZXMgZnJvbSAnLi9maWxlcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleCc7XG5pbXBvcnQgeyBQYWdlIH0gZnJvbSAnLi4vcGFnaW5hdGlvbic7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tICcuLi9zdHJlYW1pbmcnO1xuXG5leHBvcnQgY2xhc3MgRmluZVR1bmVzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGpvYiB0aGF0IGZpbmUtdHVuZXMgYSBzcGVjaWZpZWQgbW9kZWwgZnJvbSBhIGdpdmVuIGRhdGFzZXQuXG4gICAqXG4gICAqIFJlc3BvbnNlIGluY2x1ZGVzIGRldGFpbHMgb2YgdGhlIGVucXVldWVkIGpvYiBpbmNsdWRpbmcgam9iIHN0YXR1cyBhbmQgdGhlIG5hbWVcbiAgICogb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWxzIG9uY2UgY29tcGxldGUuXG4gICAqXG4gICAqIFtMZWFybiBtb3JlIGFib3V0IGZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nKVxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IEZpbmVUdW5lQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaW5lVHVuZT4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9maW5lLXR1bmVzJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgaW5mbyBhYm91dCB0aGUgZmluZS10dW5lIGpvYi5cbiAgICpcbiAgICogW0xlYXJuIG1vcmUgYWJvdXQgZmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcpXG4gICAqL1xuICByZXRyaWV2ZShmaW5lVHVuZUlkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbmVUdW5lPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGAvZmluZS10dW5lcy8ke2ZpbmVUdW5lSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCB5b3VyIG9yZ2FuaXphdGlvbidzIGZpbmUtdHVuaW5nIGpvYnNcbiAgICovXG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5lc1BhZ2UsIEZpbmVUdW5lPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QVBJTGlzdCgnL2ZpbmUtdHVuZXMnLCBGaW5lVHVuZXNQYWdlLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbW1lZGlhdGVseSBjYW5jZWwgYSBmaW5lLXR1bmUgam9iLlxuICAgKi9cbiAgY2FuY2VsKGZpbmVUdW5lSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmluZVR1bmU+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KGAvZmluZS10dW5lcy8ke2ZpbmVUdW5lSWR9L2NhbmNlbGAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaW5lLWdyYWluZWQgc3RhdHVzIHVwZGF0ZXMgZm9yIGEgZmluZS10dW5lIGpvYi5cbiAgICovXG4gIGxpc3RFdmVudHMoXG4gICAgZmluZVR1bmVJZDogc3RyaW5nLFxuICAgIHF1ZXJ5PzogRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPEZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlPjtcbiAgbGlzdEV2ZW50cyhcbiAgICBmaW5lVHVuZUlkOiBzdHJpbmcsXG4gICAgcXVlcnk6IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08RmluZVR1bmVFdmVudD4+O1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5lSWQ6IHN0cmluZyxcbiAgICBxdWVyeT86IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc0Jhc2UgfCB1bmRlZmluZWQsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPEZpbmVUdW5lRXZlbnQ+IHwgRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2U+O1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5lSWQ6IHN0cmluZyxcbiAgICBxdWVyeT86IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcyB8IHVuZGVmaW5lZCxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxGaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZT4gfCBBUElQcm9taXNlPFN0cmVhbTxGaW5lVHVuZUV2ZW50Pj4ge1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbmUtdHVuZXMvJHtmaW5lVHVuZUlkfS9ldmVudHNgLCB7XG4gICAgICBxdWVyeSxcbiAgICAgIHRpbWVvdXQ6IDg2NDAwMDAwLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHN0cmVhbTogcXVlcnk/LnN0cmVhbSA/PyBmYWxzZSxcbiAgICB9KSBhcyBBUElQcm9taXNlPEZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlPiB8IEFQSVByb21pc2U8U3RyZWFtPEZpbmVUdW5lRXZlbnQ+PjtcbiAgfVxufVxuXG4vKipcbiAqIE5vdGU6IG5vIHBhZ2luYXRpb24gYWN0dWFsbHkgb2NjdXJzIHlldCwgdGhpcyBpcyBmb3IgZm9yd2FyZHMtY29tcGF0aWJpbGl0eS5cbiAqL1xuZXhwb3J0IGNsYXNzIEZpbmVUdW5lc1BhZ2UgZXh0ZW5kcyBQYWdlPEZpbmVUdW5lPiB7fVxuLy8gYWxpYXMgc28gd2UgY2FuIGV4cG9ydCBpdCBpbiB0aGUgbmFtZXNwYWNlXG50eXBlIF9GaW5lVHVuZXNQYWdlID0gRmluZVR1bmVzUGFnZTtcblxuLyoqXG4gKiBUaGUgYEZpbmVUdW5lYCBvYmplY3QgcmVwcmVzZW50cyBhIGxlZ2FjeSBmaW5lLXR1bmUgam9iIHRoYXQgaGFzIGJlZW4gY3JlYXRlZFxuICogdGhyb3VnaCB0aGUgQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lIHtcbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgaWRlbnRpZmllciwgd2hpY2ggY2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIEFQSSBlbmRwb2ludHMuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgdW5peCB0aW1lc3RhbXAgZm9yIHdoZW4gdGhlIGZpbmUtdHVuaW5nIGpvYiB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWwgdGhhdCBpcyBiZWluZyBjcmVhdGVkLlxuICAgKi9cbiAgZmluZV90dW5lZF9tb2RlbDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIGh5cGVycGFyYW1ldGVycyB1c2VkIGZvciB0aGUgZmluZS10dW5pbmcgam9iLiBTZWUgdGhlXG4gICAqIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZy9oeXBlcnBhcmFtZXRlcnMpIGZvciBtb3JlXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBoeXBlcnBhcmFtczogRmluZVR1bmUuSHlwZXJwYXJhbXM7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIG1vZGVsIHRoYXQgaXMgYmVpbmcgZmluZS10dW5lZC5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwiZmluZS10dW5lXCIuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB0aGF0IG93bnMgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIG9yZ2FuaXphdGlvbl9pZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgY29tcGlsZWQgcmVzdWx0cyBmaWxlcyBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIHJlc3VsdF9maWxlczogQXJyYXk8RmlsZXMuRmlsZU9iamVjdD47XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgZmluZS10dW5pbmcgam9iLCB3aGljaCBjYW4gYmUgZWl0aGVyIGBjcmVhdGVkYCxcbiAgICogYHJ1bm5pbmdgLCBgc3VjY2VlZGVkYCwgYGZhaWxlZGAsIG9yIGBjYW5jZWxsZWRgLlxuICAgKi9cbiAgc3RhdHVzOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIGZpbGVzIHVzZWQgZm9yIHRyYWluaW5nLlxuICAgKi9cbiAgdHJhaW5pbmdfZmlsZXM6IEFycmF5PEZpbGVzLkZpbGVPYmplY3Q+O1xuXG4gIC8qKlxuICAgKiBUaGUgdW5peCB0aW1lc3RhbXAgZm9yIHdoZW4gdGhlIGZpbmUtdHVuaW5nIGpvYiB3YXMgbGFzdCB1cGRhdGVkLlxuICAgKi9cbiAgdXBkYXRlZF9hdDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBmaWxlcyB1c2VkIGZvciB2YWxpZGF0aW9uLlxuICAgKi9cbiAgdmFsaWRhdGlvbl9maWxlczogQXJyYXk8RmlsZXMuRmlsZU9iamVjdD47XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIGV2ZW50cyB0aGF0IGhhdmUgYmVlbiBvYnNlcnZlZCBpbiB0aGUgbGlmZWN5Y2xlIG9mIHRoZSBGaW5lVHVuZSBqb2IuXG4gICAqL1xuICBldmVudHM/OiBBcnJheTxGaW5lVHVuZUV2ZW50Pjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBGaW5lVHVuZSB7XG4gIC8qKlxuICAgKiBUaGUgaHlwZXJwYXJhbWV0ZXJzIHVzZWQgZm9yIHRoZSBmaW5lLXR1bmluZyBqb2IuIFNlZSB0aGVcbiAgICogW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nL2h5cGVycGFyYW1ldGVycykgZm9yIG1vcmVcbiAgICogZGV0YWlscy5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSHlwZXJwYXJhbXMge1xuICAgIC8qKlxuICAgICAqIFRoZSBiYXRjaCBzaXplIHRvIHVzZSBmb3IgdHJhaW5pbmcuIFRoZSBiYXRjaCBzaXplIGlzIHRoZSBudW1iZXIgb2YgdHJhaW5pbmdcbiAgICAgKiBleGFtcGxlcyB1c2VkIHRvIHRyYWluIGEgc2luZ2xlIGZvcndhcmQgYW5kIGJhY2t3YXJkIHBhc3MuXG4gICAgICovXG4gICAgYmF0Y2hfc2l6ZTogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxlYXJuaW5nIHJhdGUgbXVsdGlwbGllciB0byB1c2UgZm9yIHRyYWluaW5nLlxuICAgICAqL1xuICAgIGxlYXJuaW5nX3JhdGVfbXVsdGlwbGllcjogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBlcG9jaHMgdG8gdHJhaW4gdGhlIG1vZGVsIGZvci4gQW4gZXBvY2ggcmVmZXJzIHRvIG9uZSBmdWxsIGN5Y2xlXG4gICAgICogdGhyb3VnaCB0aGUgdHJhaW5pbmcgZGF0YXNldC5cbiAgICAgKi9cbiAgICBuX2Vwb2NoczogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHdlaWdodCB0byB1c2UgZm9yIGxvc3Mgb24gdGhlIHByb21wdCB0b2tlbnMuXG4gICAgICovXG4gICAgcHJvbXB0X2xvc3Nfd2VpZ2h0OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGNsYXNzZXMgdG8gdXNlIGZvciBjb21wdXRpbmcgY2xhc3NpZmljYXRpb24gbWV0cmljcy5cbiAgICAgKi9cbiAgICBjbGFzc2lmaWNhdGlvbl9uX2NsYXNzZXM/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcG9zaXRpdmUgY2xhc3MgdG8gdXNlIGZvciBjb21wdXRpbmcgY2xhc3NpZmljYXRpb24gbWV0cmljcy5cbiAgICAgKi9cbiAgICBjbGFzc2lmaWNhdGlvbl9wb3NpdGl2ZV9jbGFzcz86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjbGFzc2lmaWNhdGlvbiBtZXRyaWNzIHRvIGNvbXB1dGUgdXNpbmcgdGhlIHZhbGlkYXRpb24gZGF0YXNldCBhdCB0aGUgZW5kIG9mXG4gICAgICogZXZlcnkgZXBvY2guXG4gICAgICovXG4gICAgY29tcHV0ZV9jbGFzc2lmaWNhdGlvbl9tZXRyaWNzPzogYm9vbGVhbjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lRXZlbnQge1xuICBjcmVhdGVkX2F0OiBudW1iZXI7XG5cbiAgbGV2ZWw6IHN0cmluZztcblxuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2Uge1xuICBkYXRhOiBBcnJheTxGaW5lVHVuZUV2ZW50PjtcblxuICBvYmplY3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZUNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgYW4gdXBsb2FkZWQgZmlsZSB0aGF0IGNvbnRhaW5zIHRyYWluaW5nIGRhdGEuXG4gICAqXG4gICAqIFNlZSBbdXBsb2FkIGZpbGVdKC9kb2NzL2FwaS1yZWZlcmVuY2UvZmlsZXMvdXBsb2FkKSBmb3IgaG93IHRvIHVwbG9hZCBhIGZpbGUuXG4gICAqXG4gICAqIFlvdXIgZGF0YXNldCBtdXN0IGJlIGZvcm1hdHRlZCBhcyBhIEpTT05MIGZpbGUsIHdoZXJlIGVhY2ggdHJhaW5pbmcgZXhhbXBsZSBpcyBhXG4gICAqIEpTT04gb2JqZWN0IHdpdGggdGhlIGtleXMgXCJwcm9tcHRcIiBhbmQgXCJjb21wbGV0aW9uXCIuIEFkZGl0aW9uYWxseSwgeW91IG11c3RcbiAgICogdXBsb2FkIHlvdXIgZmlsZSB3aXRoIHRoZSBwdXJwb3NlIGBmaW5lLXR1bmVgLlxuICAgKlxuICAgKiBTZWUgdGhlXG4gICAqIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZy9jcmVhdGluZy10cmFpbmluZy1kYXRhKSBmb3JcbiAgICogbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdHJhaW5pbmdfZmlsZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgYmF0Y2ggc2l6ZSB0byB1c2UgZm9yIHRyYWluaW5nLiBUaGUgYmF0Y2ggc2l6ZSBpcyB0aGUgbnVtYmVyIG9mIHRyYWluaW5nXG4gICAqIGV4YW1wbGVzIHVzZWQgdG8gdHJhaW4gYSBzaW5nbGUgZm9yd2FyZCBhbmQgYmFja3dhcmQgcGFzcy5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIGJhdGNoIHNpemUgd2lsbCBiZSBkeW5hbWljYWxseSBjb25maWd1cmVkIHRvIGJlIH4wLjIlIG9mIHRoZVxuICAgKiBudW1iZXIgb2YgZXhhbXBsZXMgaW4gdGhlIHRyYWluaW5nIHNldCwgY2FwcGVkIGF0IDI1NiAtIGluIGdlbmVyYWwsIHdlJ3ZlIGZvdW5kXG4gICAqIHRoYXQgbGFyZ2VyIGJhdGNoIHNpemVzIHRlbmQgdG8gd29yayBiZXR0ZXIgZm9yIGxhcmdlciBkYXRhc2V0cy5cbiAgICovXG4gIGJhdGNoX3NpemU/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBJZiB0aGlzIGlzIHByb3ZpZGVkLCB3ZSBjYWxjdWxhdGUgRi1iZXRhIHNjb3JlcyBhdCB0aGUgc3BlY2lmaWVkIGJldGEgdmFsdWVzLlxuICAgKiBUaGUgRi1iZXRhIHNjb3JlIGlzIGEgZ2VuZXJhbGl6YXRpb24gb2YgRi0xIHNjb3JlLiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgYmluYXJ5XG4gICAqIGNsYXNzaWZpY2F0aW9uLlxuICAgKlxuICAgKiBXaXRoIGEgYmV0YSBvZiAxIChpLmUuIHRoZSBGLTEgc2NvcmUpLCBwcmVjaXNpb24gYW5kIHJlY2FsbCBhcmUgZ2l2ZW4gdGhlIHNhbWVcbiAgICogd2VpZ2h0LiBBIGxhcmdlciBiZXRhIHNjb3JlIHB1dHMgbW9yZSB3ZWlnaHQgb24gcmVjYWxsIGFuZCBsZXNzIG9uIHByZWNpc2lvbi4gQVxuICAgKiBzbWFsbGVyIGJldGEgc2NvcmUgcHV0cyBtb3JlIHdlaWdodCBvbiBwcmVjaXNpb24gYW5kIGxlc3Mgb24gcmVjYWxsLlxuICAgKi9cbiAgY2xhc3NpZmljYXRpb25fYmV0YXM/OiBBcnJheTxudW1iZXI+IHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBjbGFzc2VzIGluIGEgY2xhc3NpZmljYXRpb24gdGFzay5cbiAgICpcbiAgICogVGhpcyBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgZm9yIG11bHRpY2xhc3MgY2xhc3NpZmljYXRpb24uXG4gICAqL1xuICBjbGFzc2lmaWNhdGlvbl9uX2NsYXNzZXM/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgcG9zaXRpdmUgY2xhc3MgaW4gYmluYXJ5IGNsYXNzaWZpY2F0aW9uLlxuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciBpcyBuZWVkZWQgdG8gZ2VuZXJhdGUgcHJlY2lzaW9uLCByZWNhbGwsIGFuZCBGMSBtZXRyaWNzIHdoZW5cbiAgICogZG9pbmcgYmluYXJ5IGNsYXNzaWZpY2F0aW9uLlxuICAgKi9cbiAgY2xhc3NpZmljYXRpb25fcG9zaXRpdmVfY2xhc3M/OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBJZiBzZXQsIHdlIGNhbGN1bGF0ZSBjbGFzc2lmaWNhdGlvbi1zcGVjaWZpYyBtZXRyaWNzIHN1Y2ggYXMgYWNjdXJhY3kgYW5kIEYtMVxuICAgKiBzY29yZSB1c2luZyB0aGUgdmFsaWRhdGlvbiBzZXQgYXQgdGhlIGVuZCBvZiBldmVyeSBlcG9jaC4gVGhlc2UgbWV0cmljcyBjYW4gYmVcbiAgICogdmlld2VkIGluIHRoZVxuICAgKiBbcmVzdWx0cyBmaWxlXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nL2FuYWx5emluZy15b3VyLWZpbmUtdHVuZWQtbW9kZWwpLlxuICAgKlxuICAgKiBJbiBvcmRlciB0byBjb21wdXRlIGNsYXNzaWZpY2F0aW9uIG1ldHJpY3MsIHlvdSBtdXN0IHByb3ZpZGUgYVxuICAgKiBgdmFsaWRhdGlvbl9maWxlYC4gQWRkaXRpb25hbGx5LCB5b3UgbXVzdCBzcGVjaWZ5IGBjbGFzc2lmaWNhdGlvbl9uX2NsYXNzZXNgIGZvclxuICAgKiBtdWx0aWNsYXNzIGNsYXNzaWZpY2F0aW9uIG9yIGBjbGFzc2lmaWNhdGlvbl9wb3NpdGl2ZV9jbGFzc2AgZm9yIGJpbmFyeVxuICAgKiBjbGFzc2lmaWNhdGlvbi5cbiAgICovXG4gIGNvbXB1dGVfY2xhc3NpZmljYXRpb25fbWV0cmljcz86IGJvb2xlYW4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbGVhcm5pbmcgcmF0ZSBtdWx0aXBsaWVyIHRvIHVzZSBmb3IgdHJhaW5pbmcuIFRoZSBmaW5lLXR1bmluZyBsZWFybmluZyByYXRlXG4gICAqIGlzIHRoZSBvcmlnaW5hbCBsZWFybmluZyByYXRlIHVzZWQgZm9yIHByZXRyYWluaW5nIG11bHRpcGxpZWQgYnkgdGhpcyB2YWx1ZS5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIGxlYXJuaW5nIHJhdGUgbXVsdGlwbGllciBpcyB0aGUgMC4wNSwgMC4xLCBvciAwLjIgZGVwZW5kaW5nIG9uXG4gICAqIGZpbmFsIGBiYXRjaF9zaXplYCAobGFyZ2VyIGxlYXJuaW5nIHJhdGVzIHRlbmQgdG8gcGVyZm9ybSBiZXR0ZXIgd2l0aCBsYXJnZXJcbiAgICogYmF0Y2ggc2l6ZXMpLiBXZSByZWNvbW1lbmQgZXhwZXJpbWVudGluZyB3aXRoIHZhbHVlcyBpbiB0aGUgcmFuZ2UgMC4wMiB0byAwLjIgdG9cbiAgICogc2VlIHdoYXQgcHJvZHVjZXMgdGhlIGJlc3QgcmVzdWx0cy5cbiAgICovXG4gIGxlYXJuaW5nX3JhdGVfbXVsdGlwbGllcj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBiYXNlIG1vZGVsIHRvIGZpbmUtdHVuZS4gWW91IGNhbiBzZWxlY3Qgb25lIG9mIFwiYWRhXCIsIFwiYmFiYmFnZVwiLFxuICAgKiBcImN1cmllXCIsIFwiZGF2aW5jaVwiLCBvciBhIGZpbmUtdHVuZWQgbW9kZWwgY3JlYXRlZCBhZnRlciAyMDIyLTA0LTIxIGFuZCBiZWZvcmVcbiAgICogMjAyMy0wOC0yMi4gVG8gbGVhcm4gbW9yZSBhYm91dCB0aGVzZSBtb2RlbHMsIHNlZSB0aGUgW01vZGVsc10oL2RvY3MvbW9kZWxzKVxuICAgKiBkb2N1bWVudGF0aW9uLlxuICAgKi9cbiAgbW9kZWw/OiAoc3RyaW5nICYge30pIHwgJ2FkYScgfCAnYmFiYmFnZScgfCAnY3VyaWUnIHwgJ2RhdmluY2knIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBlcG9jaHMgdG8gdHJhaW4gdGhlIG1vZGVsIGZvci4gQW4gZXBvY2ggcmVmZXJzIHRvIG9uZSBmdWxsIGN5Y2xlXG4gICAqIHRocm91Z2ggdGhlIHRyYWluaW5nIGRhdGFzZXQuXG4gICAqL1xuICBuX2Vwb2Nocz86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSB3ZWlnaHQgdG8gdXNlIGZvciBsb3NzIG9uIHRoZSBwcm9tcHQgdG9rZW5zLiBUaGlzIGNvbnRyb2xzIGhvdyBtdWNoIHRoZVxuICAgKiBtb2RlbCB0cmllcyB0byBsZWFybiB0byBnZW5lcmF0ZSB0aGUgcHJvbXB0IChhcyBjb21wYXJlZCB0byB0aGUgY29tcGxldGlvbiB3aGljaFxuICAgKiBhbHdheXMgaGFzIGEgd2VpZ2h0IG9mIDEuMCksIGFuZCBjYW4gYWRkIGEgc3RhYmlsaXppbmcgZWZmZWN0IHRvIHRyYWluaW5nIHdoZW5cbiAgICogY29tcGxldGlvbnMgYXJlIHNob3J0LlxuICAgKlxuICAgKiBJZiBwcm9tcHRzIGFyZSBleHRyZW1lbHkgbG9uZyAocmVsYXRpdmUgdG8gY29tcGxldGlvbnMpLCBpdCBtYXkgbWFrZSBzZW5zZSB0b1xuICAgKiByZWR1Y2UgdGhpcyB3ZWlnaHQgc28gYXMgdG8gYXZvaWQgb3Zlci1wcmlvcml0aXppbmcgbGVhcm5pbmcgdGhlIHByb21wdC5cbiAgICovXG4gIHByb21wdF9sb3NzX3dlaWdodD86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgc3RyaW5nIG9mIHVwIHRvIDQwIGNoYXJhY3RlcnMgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHlvdXIgZmluZS10dW5lZCBtb2RlbFxuICAgKiBuYW1lLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYSBgc3VmZml4YCBvZiBcImN1c3RvbS1tb2RlbC1uYW1lXCIgd291bGQgcHJvZHVjZSBhIG1vZGVsIG5hbWUgbGlrZVxuICAgKiBgYWRhOmZ0LXlvdXItb3JnOmN1c3RvbS1tb2RlbC1uYW1lLTIwMjItMDItMTUtMDQtMjEtMDRgLlxuICAgKi9cbiAgc3VmZml4Pzogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIElEIG9mIGFuIHVwbG9hZGVkIGZpbGUgdGhhdCBjb250YWlucyB2YWxpZGF0aW9uIGRhdGEuXG4gICAqXG4gICAqIElmIHlvdSBwcm92aWRlIHRoaXMgZmlsZSwgdGhlIGRhdGEgaXMgdXNlZCB0byBnZW5lcmF0ZSB2YWxpZGF0aW9uIG1ldHJpY3NcbiAgICogcGVyaW9kaWNhbGx5IGR1cmluZyBmaW5lLXR1bmluZy4gVGhlc2UgbWV0cmljcyBjYW4gYmUgdmlld2VkIGluIHRoZVxuICAgKiBbZmluZS10dW5pbmcgcmVzdWx0cyBmaWxlXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nL2FuYWx5emluZy15b3VyLWZpbmUtdHVuZWQtbW9kZWwpLlxuICAgKiBZb3VyIHRyYWluIGFuZCB2YWxpZGF0aW9uIGRhdGEgc2hvdWxkIGJlIG11dHVhbGx5IGV4Y2x1c2l2ZS5cbiAgICpcbiAgICogWW91ciBkYXRhc2V0IG11c3QgYmUgZm9ybWF0dGVkIGFzIGEgSlNPTkwgZmlsZSwgd2hlcmUgZWFjaCB2YWxpZGF0aW9uIGV4YW1wbGUgaXNcbiAgICogYSBKU09OIG9iamVjdCB3aXRoIHRoZSBrZXlzIFwicHJvbXB0XCIgYW5kIFwiY29tcGxldGlvblwiLiBBZGRpdGlvbmFsbHksIHlvdSBtdXN0XG4gICAqIHVwbG9hZCB5b3VyIGZpbGUgd2l0aCB0aGUgcHVycG9zZSBgZmluZS10dW5lYC5cbiAgICpcbiAgICogU2VlIHRoZVxuICAgKiBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcvY3JlYXRpbmctdHJhaW5pbmctZGF0YSkgZm9yXG4gICAqIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHZhbGlkYXRpb25fZmlsZT86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCB0eXBlIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcyA9XG4gIHwgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nXG4gIHwgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBzdHJlYW0gZXZlbnRzIGZvciB0aGUgZmluZS10dW5lIGpvYi4gSWYgc2V0IHRvIHRydWUsIGV2ZW50cyB3aWxsIGJlXG4gICAqIHNlbnQgYXMgZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZS4gVGhlIHN0cmVhbSB3aWxsIHRlcm1pbmF0ZSB3aXRoIGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZSB3aGVuIHRoZSBqb2IgaXMgZmluaXNoZWQgKHN1Y2NlZWRlZCwgY2FuY2VsbGVkLCBvciBmYWlsZWQpLlxuICAgKlxuICAgKiBJZiBzZXQgdG8gZmFsc2UsIG9ubHkgZXZlbnRzIGdlbmVyYXRlZCBzbyBmYXIgd2lsbCBiZSByZXR1cm5lZC5cbiAgICovXG4gIHN0cmVhbT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zIHtcbiAgZXhwb3J0IHR5cGUgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IHR5cGUgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3RyZWFtIGV2ZW50cyBmb3IgdGhlIGZpbmUtdHVuZSBqb2IuIElmIHNldCB0byB0cnVlLCBldmVudHMgd2lsbCBiZVxuICAgKiBzZW50IGFzIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUuIFRoZSBzdHJlYW0gd2lsbCB0ZXJtaW5hdGUgd2l0aCBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2Ugd2hlbiB0aGUgam9iIGlzIGZpbmlzaGVkIChzdWNjZWVkZWQsIGNhbmNlbGxlZCwgb3IgZmFpbGVkKS5cbiAgICpcbiAgICogSWYgc2V0IHRvIGZhbHNlLCBvbmx5IGV2ZW50cyBnZW5lcmF0ZWQgc28gZmFyIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqL1xuICBzdHJlYW0/OiBmYWxzZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3RyZWFtIGV2ZW50cyBmb3IgdGhlIGZpbmUtdHVuZSBqb2IuIElmIHNldCB0byB0cnVlLCBldmVudHMgd2lsbCBiZVxuICAgKiBzZW50IGFzIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUuIFRoZSBzdHJlYW0gd2lsbCB0ZXJtaW5hdGUgd2l0aCBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2Ugd2hlbiB0aGUgam9iIGlzIGZpbmlzaGVkIChzdWNjZWVkZWQsIGNhbmNlbGxlZCwgb3IgZmFpbGVkKS5cbiAgICpcbiAgICogSWYgc2V0IHRvIGZhbHNlLCBvbmx5IGV2ZW50cyBnZW5lcmF0ZWQgc28gZmFyIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqL1xuICBzdHJlYW06IHRydWU7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmluZVR1bmVzIHtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZSA9IEFQSS5GaW5lVHVuZTtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUV2ZW50ID0gQVBJLkZpbmVUdW5lRXZlbnQ7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2UgPSBBUEkuRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2U7XG4gIGV4cG9ydCB0eXBlIEZpbmVUdW5lc1BhZ2UgPSBfRmluZVR1bmVzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUNyZWF0ZVBhcmFtcyA9IEFQSS5GaW5lVHVuZUNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXMgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZztcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG52YXIgX19jcmVhdGVCaW5kaW5nID1cbiAgKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8XG4gIChPYmplY3QuY3JlYXRlID9cbiAgICBmdW5jdGlvbiAobywgbSwgaywgazIpIHtcbiAgICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgICBpZiAoIWRlc2MgfHwgKCdnZXQnIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgICAgZGVzYyA9IHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG1ba107XG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG4gICAgfVxuICA6IGZ1bmN0aW9uIChvLCBtLCBrLCBrMikge1xuICAgICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICAgIG9bazJdID0gbVtrXTtcbiAgICB9KTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPVxuICAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHxcbiAgKE9iamVjdC5jcmVhdGUgP1xuICAgIGZ1bmN0aW9uIChvLCB2KSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xuICAgIH1cbiAgOiBmdW5jdGlvbiAobywgdikge1xuICAgICAgb1snZGVmYXVsdCddID0gdjtcbiAgICB9KTtcbnZhciBfX2ltcG9ydFN0YXIgPVxuICAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHxcbiAgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbClcbiAgICAgIGZvciAodmFyIGsgaW4gbW9kKVxuICAgICAgICBpZiAoayAhPT0gJ2RlZmF1bHQnICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpbmVUdW5pbmcgPSB2b2lkIDA7XG5jb25zdCByZXNvdXJjZV8xID0gcmVxdWlyZSgnb3BlbmFpL3Jlc291cmNlJyk7XG5jb25zdCBqb2JzXzEgPSByZXF1aXJlKCcuL2pvYnMuanMnKTtcbmNvbnN0IEFQSSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKCcuL2luZGV4LmpzJykpO1xuY2xhc3MgRmluZVR1bmluZyBleHRlbmRzIHJlc291cmNlXzEuQVBJUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuam9icyA9IG5ldyBqb2JzXzEuSm9icyh0aGlzLmNsaWVudCk7XG4gIH1cbn1cbmV4cG9ydHMuRmluZVR1bmluZyA9IEZpbmVUdW5pbmc7XG4oZnVuY3Rpb24gKEZpbmVUdW5pbmcpIHtcbiAgRmluZVR1bmluZy5Kb2JzID0gQVBJLkpvYnM7XG4gIEZpbmVUdW5pbmcuRmluZVR1bmluZ0pvYnNQYWdlID0gQVBJLkZpbmVUdW5pbmdKb2JzUGFnZTtcbiAgRmluZVR1bmluZy5GaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSA9IEFQSS5GaW5lVHVuaW5nSm9iRXZlbnRzUGFnZTtcbn0pKChGaW5lVHVuaW5nID0gZXhwb3J0cy5GaW5lVHVuaW5nIHx8IChleHBvcnRzLkZpbmVUdW5pbmcgPSB7fSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmUtdHVuaW5nLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZSc7XG5pbXBvcnQgeyBKb2JzIH0gZnJvbSAnLi9qb2JzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4JztcblxuZXhwb3J0IGNsYXNzIEZpbmVUdW5pbmcgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIGpvYnM6IEpvYnMgPSBuZXcgSm9icyh0aGlzLmNsaWVudCk7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmluZVR1bmluZyB7XG4gIGV4cG9ydCBpbXBvcnQgSm9icyA9IEFQSS5Kb2JzO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmdKb2IgPSBBUEkuRmluZVR1bmluZ0pvYjtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuaW5nSm9iRXZlbnQgPSBBUEkuRmluZVR1bmluZ0pvYkV2ZW50O1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmdKb2JzUGFnZSA9IEFQSS5GaW5lVHVuaW5nSm9ic1BhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UgPSBBUEkuRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgSm9iQ3JlYXRlUGFyYW1zID0gQVBJLkpvYkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBKb2JMaXN0UGFyYW1zID0gQVBJLkpvYkxpc3RQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSm9iTGlzdEV2ZW50c1BhcmFtcyA9IEFQSS5Kb2JMaXN0RXZlbnRzUGFyYW1zO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpbmVUdW5pbmdKb2JFdmVudHNQYWdlID0gZXhwb3J0cy5GaW5lVHVuaW5nSm9ic1BhZ2UgPSBleHBvcnRzLkpvYnMgPSB2b2lkIDA7XG5jb25zdCByZXNvdXJjZV8xID0gcmVxdWlyZSgnb3BlbmFpL3Jlc291cmNlJyk7XG5jb25zdCBjb3JlXzEgPSByZXF1aXJlKCdvcGVuYWkvY29yZScpO1xuY29uc3QgcGFnaW5hdGlvbl8xID0gcmVxdWlyZSgnb3BlbmFpL3BhZ2luYXRpb24nKTtcbmNsYXNzIEpvYnMgZXh0ZW5kcyByZXNvdXJjZV8xLkFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBqb2IgdGhhdCBmaW5lLXR1bmVzIGEgc3BlY2lmaWVkIG1vZGVsIGZyb20gYSBnaXZlbiBkYXRhc2V0LlxuICAgKlxuICAgKiBSZXNwb25zZSBpbmNsdWRlcyBkZXRhaWxzIG9mIHRoZSBlbnF1ZXVlZCBqb2IgaW5jbHVkaW5nIGpvYiBzdGF0dXMgYW5kIHRoZSBuYW1lXG4gICAqIG9mIHRoZSBmaW5lLXR1bmVkIG1vZGVscyBvbmNlIGNvbXBsZXRlLlxuICAgKlxuICAgKiBbTGVhcm4gbW9yZSBhYm91dCBmaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgKi9cbiAgY3JlYXRlKGJvZHksIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvZmluZV90dW5pbmcvam9icycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGluZm8gYWJvdXQgYSBmaW5lLXR1bmluZyBqb2IuXG4gICAqXG4gICAqIFtMZWFybiBtb3JlIGFib3V0IGZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAqL1xuICByZXRyaWV2ZShmaW5lVHVuaW5nSm9iSWQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9maW5lX3R1bmluZy9qb2JzLyR7ZmluZVR1bmluZ0pvYklkfWAsIG9wdGlvbnMpO1xuICB9XG4gIGxpc3QocXVlcnkgPSB7fSwgb3B0aW9ucykge1xuICAgIGlmICgoMCwgY29yZV8xLmlzUmVxdWVzdE9wdGlvbnMpKHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdCh7fSwgcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRBUElMaXN0KCcvZmluZV90dW5pbmcvam9icycsIEZpbmVUdW5pbmdKb2JzUGFnZSwgeyBxdWVyeSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxuICAvKipcbiAgICogSW1tZWRpYXRlbHkgY2FuY2VsIGEgZmluZS10dW5lIGpvYi5cbiAgICovXG4gIGNhbmNlbChmaW5lVHVuaW5nSm9iSWQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KGAvZmluZV90dW5pbmcvam9icy8ke2ZpbmVUdW5pbmdKb2JJZH0vY2FuY2VsYCwgb3B0aW9ucyk7XG4gIH1cbiAgbGlzdEV2ZW50cyhmaW5lVHVuaW5nSm9iSWQsIHF1ZXJ5ID0ge30sIG9wdGlvbnMpIHtcbiAgICBpZiAoKDAsIGNvcmVfMS5pc1JlcXVlc3RPcHRpb25zKShxdWVyeSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpc3RFdmVudHMoZmluZVR1bmluZ0pvYklkLCB7fSwgcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRBUElMaXN0KGAvZmluZV90dW5pbmcvam9icy8ke2ZpbmVUdW5pbmdKb2JJZH0vZXZlbnRzYCwgRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9KTtcbiAgfVxufVxuZXhwb3J0cy5Kb2JzID0gSm9icztcbmNsYXNzIEZpbmVUdW5pbmdKb2JzUGFnZSBleHRlbmRzIHBhZ2luYXRpb25fMS5DdXJzb3JQYWdlIHt9XG5leHBvcnRzLkZpbmVUdW5pbmdKb2JzUGFnZSA9IEZpbmVUdW5pbmdKb2JzUGFnZTtcbmNsYXNzIEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlIGV4dGVuZHMgcGFnaW5hdGlvbl8xLkN1cnNvclBhZ2Uge31cbmV4cG9ydHMuRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UgPSBGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZTtcbihmdW5jdGlvbiAoSm9icykge30pKChKb2JzID0gZXhwb3J0cy5Kb2JzIHx8IChleHBvcnRzLkpvYnMgPSB7fSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpvYnMuanMubWFwXG4iLCIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uLy4uL2NvcmUnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZSc7XG5pbXBvcnQgeyBpc1JlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29yZSc7XG5pbXBvcnQgKiBhcyBGaWxlcyBmcm9tICcuLi9maWxlcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleCc7XG5pbXBvcnQgeyBDdXJzb3JQYWdlLCBDdXJzb3JQYWdlUGFyYW1zIH0gZnJvbSAnLi4vLi4vcGFnaW5hdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBKb2JzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGpvYiB0aGF0IGZpbmUtdHVuZXMgYSBzcGVjaWZpZWQgbW9kZWwgZnJvbSBhIGdpdmVuIGRhdGFzZXQuXG4gICAqXG4gICAqIFJlc3BvbnNlIGluY2x1ZGVzIGRldGFpbHMgb2YgdGhlIGVucXVldWVkIGpvYiBpbmNsdWRpbmcgam9iIHN0YXR1cyBhbmQgdGhlIG5hbWVcbiAgICogb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWxzIG9uY2UgY29tcGxldGUuXG4gICAqXG4gICAqIFtMZWFybiBtb3JlIGFib3V0IGZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAqL1xuICBjcmVhdGUoYm9keTogSm9iQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaW5lVHVuaW5nSm9iPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ZpbmVfdHVuaW5nL2pvYnMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGluZm8gYWJvdXQgYSBmaW5lLXR1bmluZyBqb2IuXG4gICAqXG4gICAqIFtMZWFybiBtb3JlIGFib3V0IGZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAqL1xuICByZXRyaWV2ZShmaW5lVHVuaW5nSm9iSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmluZVR1bmluZ0pvYj4ge1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbmVfdHVuaW5nL2pvYnMvJHtmaW5lVHVuaW5nSm9iSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCB5b3VyIG9yZ2FuaXphdGlvbidzIGZpbmUtdHVuaW5nIGpvYnNcbiAgICovXG4gIGxpc3QoXG4gICAgcXVlcnk/OiBKb2JMaXN0UGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JzUGFnZSwgRmluZVR1bmluZ0pvYj47XG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JzUGFnZSwgRmluZVR1bmluZ0pvYj47XG4gIGxpc3QoXG4gICAgcXVlcnk6IEpvYkxpc3RQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8RmluZVR1bmluZ0pvYnNQYWdlLCBGaW5lVHVuaW5nSm9iPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocXVlcnkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0KHt9LCBxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldEFQSUxpc3QoJy9maW5lX3R1bmluZy9qb2JzJywgRmluZVR1bmluZ0pvYnNQYWdlLCB7IHF1ZXJ5LCAuLi5vcHRpb25zIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEltbWVkaWF0ZWx5IGNhbmNlbCBhIGZpbmUtdHVuZSBqb2IuXG4gICAqL1xuICBjYW5jZWwoZmluZVR1bmluZ0pvYklkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbmVUdW5pbmdKb2I+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KGAvZmluZV90dW5pbmcvam9icy8ke2ZpbmVUdW5pbmdKb2JJZH0vY2FuY2VsYCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN0YXR1cyB1cGRhdGVzIGZvciBhIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIGxpc3RFdmVudHMoXG4gICAgZmluZVR1bmluZ0pvYklkOiBzdHJpbmcsXG4gICAgcXVlcnk/OiBKb2JMaXN0RXZlbnRzUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlLCBGaW5lVHVuaW5nSm9iRXZlbnQ+O1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5pbmdKb2JJZDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlLCBGaW5lVHVuaW5nSm9iRXZlbnQ+O1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5pbmdKb2JJZDogc3RyaW5nLFxuICAgIHF1ZXJ5OiBKb2JMaXN0RXZlbnRzUGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlLCBGaW5lVHVuaW5nSm9iRXZlbnQ+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhxdWVyeSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpc3RFdmVudHMoZmluZVR1bmluZ0pvYklkLCB7fSwgcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRBUElMaXN0KGAvZmluZV90dW5pbmcvam9icy8ke2ZpbmVUdW5pbmdKb2JJZH0vZXZlbnRzYCwgRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmluZVR1bmluZ0pvYnNQYWdlIGV4dGVuZHMgQ3Vyc29yUGFnZTxGaW5lVHVuaW5nSm9iPiB7fVxuLy8gYWxpYXMgc28gd2UgY2FuIGV4cG9ydCBpdCBpbiB0aGUgbmFtZXNwYWNlXG50eXBlIF9GaW5lVHVuaW5nSm9ic1BhZ2UgPSBGaW5lVHVuaW5nSm9ic1BhZ2U7XG5cbmV4cG9ydCBjbGFzcyBGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSBleHRlbmRzIEN1cnNvclBhZ2U8RmluZVR1bmluZ0pvYkV2ZW50PiB7fVxuLy8gYWxpYXMgc28gd2UgY2FuIGV4cG9ydCBpdCBpbiB0aGUgbmFtZXNwYWNlXG50eXBlIF9GaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSA9IEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlO1xuXG4vKipcbiAqIFRoZSBgZmluZV90dW5pbmcuam9iYCBvYmplY3QgcmVwcmVzZW50cyBhIGZpbmUtdHVuaW5nIGpvYiB0aGF0IGhhcyBiZWVuIGNyZWF0ZWRcbiAqIHRocm91Z2ggdGhlIEFQSS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuaW5nSm9iIHtcbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgaWRlbnRpZmllciwgd2hpY2ggY2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIEFQSSBlbmRwb2ludHMuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgdW5peCB0aW1lc3RhbXAgZm9yIHdoZW4gdGhlIGZpbmUtdHVuaW5nIGpvYiB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWwgdGhhdCBpcyBiZWluZyBjcmVhdGVkLlxuICAgKi9cbiAgZmluZV90dW5lZF9tb2RlbDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIGh5cGVycGFyYW1ldGVycyB1c2VkIGZvciB0aGUgZmluZS10dW5pbmcgam9iLiBTZWUgdGhlXG4gICAqIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgaHlwZXJwYXJhbWV0ZXJzOiBGaW5lVHVuaW5nSm9iLkh5cGVycGFyYW1ldGVycztcblxuICAvKipcbiAgICogVGhlIGJhc2UgbW9kZWwgdGhhdCBpcyBiZWluZyBmaW5lLXR1bmVkLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgXCJmaW5lX3R1bmluZy5qb2JcIi5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHRoYXQgb3ducyB0aGUgZmluZS10dW5pbmcgam9iLlxuICAgKi9cbiAgb3JnYW5pemF0aW9uX2lkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBjb21waWxlZCByZXN1bHRzIGZpbGVzIGZvciB0aGUgZmluZS10dW5pbmcgam9iLlxuICAgKi9cbiAgcmVzdWx0X2ZpbGVzOiBBcnJheTxGaWxlcy5GaWxlT2JqZWN0PjtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBmaW5lLXR1bmluZyBqb2IsIHdoaWNoIGNhbiBiZSBlaXRoZXIgYGNyZWF0ZWRgLFxuICAgKiBgcGVuZGluZ2AsIGBydW5uaW5nYCwgYHN1Y2NlZWRlZGAsIGBmYWlsZWRgLCBvciBgY2FuY2VsbGVkYC5cbiAgICovXG4gIHN0YXR1czogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIGJpbGxhYmxlIHRva2VucyBwcm9jZXNzZWQgYnkgdGhpcyBmaW5lIHR1bmluZyBqb2IuXG4gICAqL1xuICB0cmFpbmVkX3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgZmlsZSBJRCB1c2VkIGZvciB0cmFpbmluZy5cbiAgICovXG4gIHRyYWluaW5nX2ZpbGU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGZpbGUgSUQgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAgICovXG4gIHZhbGlkYXRpb25fZmlsZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgdW5peCB0aW1lc3RhbXAgZm9yIHdoZW4gdGhlIGZpbmUtdHVuaW5nIGpvYiB3YXMgZmluaXNoZWQuXG4gICAqL1xuICBmaW5pc2hlZF9hdD86IG51bWJlcjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBGaW5lVHVuaW5nSm9iIHtcbiAgLyoqXG4gICAqIFRoZSBoeXBlcnBhcmFtZXRlcnMgdXNlZCBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi4gU2VlIHRoZVxuICAgKiBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZykgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSHlwZXJwYXJhbWV0ZXJzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGVwb2NocyB0byB0cmFpbiB0aGUgbW9kZWwgZm9yLiBBbiBlcG9jaCByZWZlcnMgdG8gb25lIGZ1bGwgY3ljbGVcbiAgICAgKiB0aHJvdWdoIHRoZSB0cmFpbmluZyBkYXRhc2V0LiBcIkF1dG9cIiBkZWNpZGVzIHRoZSBvcHRpbWFsIG51bWJlciBvZiBlcG9jaHMgYmFzZWRcbiAgICAgKiBvbiB0aGUgc2l6ZSBvZiB0aGUgZGF0YXNldC4gSWYgc2V0dGluZyB0aGUgbnVtYmVyIG1hbnVhbGx5LCB3ZSBzdXBwb3J0IGFueVxuICAgICAqIG51bWJlciBiZXR3ZWVuIDEgYW5kIDUwIGVwb2Nocy5cbiAgICAgKi9cbiAgICBuX2Vwb2Nocz86ICdhdXRvJyB8IG51bWJlcjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5pbmdKb2JFdmVudCB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgY3JlYXRlZF9hdDogbnVtYmVyO1xuXG4gIGxldmVsOiAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InO1xuXG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICBvYmplY3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBKb2JDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIG1vZGVsIHRvIGZpbmUtdHVuZS4gWW91IGNhbiBzZWxlY3Qgb25lIG9mIHRoZVxuICAgKiBbc3VwcG9ydGVkIG1vZGVsc10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nL3doYXQtbW9kZWxzLWNhbi1iZS1maW5lLXR1bmVkKS5cbiAgICovXG4gIG1vZGVsOiAoc3RyaW5nICYge30pIHwgJ2JhYmJhZ2UtMDAyJyB8ICdkYXZpbmNpLTAwMicgfCAnZ3B0LTMuNS10dXJibyc7XG5cbiAgLyoqXG4gICAqIFRoZSBJRCBvZiBhbiB1cGxvYWRlZCBmaWxlIHRoYXQgY29udGFpbnMgdHJhaW5pbmcgZGF0YS5cbiAgICpcbiAgICogU2VlIFt1cGxvYWQgZmlsZV0oL2RvY3MvYXBpLXJlZmVyZW5jZS9maWxlcy91cGxvYWQpIGZvciBob3cgdG8gdXBsb2FkIGEgZmlsZS5cbiAgICpcbiAgICogWW91ciBkYXRhc2V0IG11c3QgYmUgZm9ybWF0dGVkIGFzIGEgSlNPTkwgZmlsZS4gQWRkaXRpb25hbGx5LCB5b3UgbXVzdCB1cGxvYWRcbiAgICogeW91ciBmaWxlIHdpdGggdGhlIHB1cnBvc2UgYGZpbmUtdHVuZWAuXG4gICAqXG4gICAqIFNlZSB0aGUgW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0cmFpbmluZ19maWxlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBoeXBlcnBhcmFtZXRlcnMgdXNlZCBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIGh5cGVycGFyYW1ldGVycz86IEpvYkNyZWF0ZVBhcmFtcy5IeXBlcnBhcmFtZXRlcnM7XG5cbiAgLyoqXG4gICAqIEEgc3RyaW5nIG9mIHVwIHRvIDQwIGNoYXJhY3RlcnMgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHlvdXIgZmluZS10dW5lZCBtb2RlbFxuICAgKiBuYW1lLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYSBgc3VmZml4YCBvZiBcImN1c3RvbS1tb2RlbC1uYW1lXCIgd291bGQgcHJvZHVjZSBhIG1vZGVsIG5hbWUgbGlrZVxuICAgKiBgZnQ6Z3B0LTMuNS10dXJibzpvcGVuYWk6Y3VzdG9tLW1vZGVsLW5hbWU6N3A0bFVSZWxgLlxuICAgKi9cbiAgc3VmZml4Pzogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIElEIG9mIGFuIHVwbG9hZGVkIGZpbGUgdGhhdCBjb250YWlucyB2YWxpZGF0aW9uIGRhdGEuXG4gICAqXG4gICAqIElmIHlvdSBwcm92aWRlIHRoaXMgZmlsZSwgdGhlIGRhdGEgaXMgdXNlZCB0byBnZW5lcmF0ZSB2YWxpZGF0aW9uIG1ldHJpY3NcbiAgICogcGVyaW9kaWNhbGx5IGR1cmluZyBmaW5lLXR1bmluZy4gVGhlc2UgbWV0cmljcyBjYW4gYmUgdmlld2VkIGluIHRoZSBmaW5lLXR1bmluZ1xuICAgKiByZXN1bHRzIGZpbGUuIFRoZSBzYW1lIGRhdGEgc2hvdWxkIG5vdCBiZSBwcmVzZW50IGluIGJvdGggdHJhaW4gYW5kIHZhbGlkYXRpb25cbiAgICogZmlsZXMuXG4gICAqXG4gICAqIFlvdXIgZGF0YXNldCBtdXN0IGJlIGZvcm1hdHRlZCBhcyBhIEpTT05MIGZpbGUuIFlvdSBtdXN0IHVwbG9hZCB5b3VyIGZpbGUgd2l0aFxuICAgKiB0aGUgcHVycG9zZSBgZmluZS10dW5lYC5cbiAgICpcbiAgICogU2VlIHRoZSBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZykgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHZhbGlkYXRpb25fZmlsZT86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgSm9iQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBoeXBlcnBhcmFtZXRlcnMgdXNlZCBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSHlwZXJwYXJhbWV0ZXJzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGVwb2NocyB0byB0cmFpbiB0aGUgbW9kZWwgZm9yLiBBbiBlcG9jaCByZWZlcnMgdG8gb25lIGZ1bGwgY3ljbGVcbiAgICAgKiB0aHJvdWdoIHRoZSB0cmFpbmluZyBkYXRhc2V0LlxuICAgICAqL1xuICAgIG5fZXBvY2hzPzogJ2F1dG8nIHwgbnVtYmVyO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSm9iTGlzdFBhcmFtcyBleHRlbmRzIEN1cnNvclBhZ2VQYXJhbXMge31cblxuZXhwb3J0IGludGVyZmFjZSBKb2JMaXN0RXZlbnRzUGFyYW1zIGV4dGVuZHMgQ3Vyc29yUGFnZVBhcmFtcyB7fVxuXG5leHBvcnQgbmFtZXNwYWNlIEpvYnMge1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmdKb2IgPSBBUEkuRmluZVR1bmluZ0pvYjtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuaW5nSm9iRXZlbnQgPSBBUEkuRmluZVR1bmluZ0pvYkV2ZW50O1xuICBleHBvcnQgdHlwZSBGaW5lVHVuaW5nSm9ic1BhZ2UgPSBfRmluZVR1bmluZ0pvYnNQYWdlO1xuICBleHBvcnQgdHlwZSBGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSA9IF9GaW5lVHVuaW5nSm9iRXZlbnRzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBKb2JDcmVhdGVQYXJhbXMgPSBBUEkuSm9iQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEpvYkxpc3RQYXJhbXMgPSBBUEkuSm9iTGlzdFBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBKb2JMaXN0RXZlbnRzUGFyYW1zID0gQVBJLkpvYkxpc3RFdmVudHNQYXJhbXM7XG59XG4iLCIndXNlIHN0cmljdCc7XG4vLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSm9icyA9IGV4cG9ydHMuRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UgPSBleHBvcnRzLkZpbmVUdW5pbmdKb2JzUGFnZSA9IGV4cG9ydHMuRmluZVR1bmluZyA9IHZvaWQgMDtcbnZhciBmaW5lX3R1bmluZ18xID0gcmVxdWlyZSgnLi9maW5lLXR1bmluZy5qcycpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdGaW5lVHVuaW5nJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmluZV90dW5pbmdfMS5GaW5lVHVuaW5nO1xuICB9LFxufSk7XG52YXIgam9ic18xID0gcmVxdWlyZSgnLi9qb2JzLmpzJyk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0ZpbmVUdW5pbmdKb2JzUGFnZScsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGpvYnNfMS5GaW5lVHVuaW5nSm9ic1BhZ2U7XG4gIH0sXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBqb2JzXzEuRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2U7XG4gIH0sXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnSm9icycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGpvYnNfMS5Kb2JzO1xuICB9LFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmV4cG9ydCB7IEZpbmVUdW5pbmcgfSBmcm9tICcuL2ZpbmUtdHVuaW5nJztcbmV4cG9ydCB7XG4gIEZpbmVUdW5pbmdKb2IsXG4gIEZpbmVUdW5pbmdKb2JFdmVudCxcbiAgSm9iQ3JlYXRlUGFyYW1zLFxuICBKb2JMaXN0UGFyYW1zLFxuICBKb2JMaXN0RXZlbnRzUGFyYW1zLFxuICBGaW5lVHVuaW5nSm9ic1BhZ2UsXG4gIEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlLFxuICBKb2JzLFxufSBmcm9tICcuL2pvYnMnO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkltYWdlcyA9IHZvaWQgMDtcbmNvbnN0IHJlc291cmNlXzEgPSByZXF1aXJlKCdvcGVuYWkvcmVzb3VyY2UnKTtcbmNvbnN0IGNvcmVfMSA9IHJlcXVpcmUoJ29wZW5haS9jb3JlJyk7XG5jbGFzcyBJbWFnZXMgZXh0ZW5kcyByZXNvdXJjZV8xLkFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB2YXJpYXRpb24gb2YgYSBnaXZlbiBpbWFnZS5cbiAgICovXG4gIGNyZWF0ZVZhcmlhdGlvbihib2R5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ltYWdlcy92YXJpYXRpb25zJywgKDAsIGNvcmVfMS5tdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMpKHsgYm9keSwgLi4ub3B0aW9ucyB9KSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZWRpdGVkIG9yIGV4dGVuZGVkIGltYWdlIGdpdmVuIGFuIG9yaWdpbmFsIGltYWdlIGFuZCBhIHByb21wdC5cbiAgICovXG4gIGVkaXQoYm9keSwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9pbWFnZXMvZWRpdHMnLCAoMCwgY29yZV8xLm11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucykoeyBib2R5LCAuLi5vcHRpb25zIH0pKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbWFnZSBnaXZlbiBhIHByb21wdC5cbiAgICovXG4gIGdlbmVyYXRlKGJvZHksIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvaW1hZ2VzL2dlbmVyYXRpb25zJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5leHBvcnRzLkltYWdlcyA9IEltYWdlcztcbihmdW5jdGlvbiAoSW1hZ2VzKSB7fSkoKEltYWdlcyA9IGV4cG9ydHMuSW1hZ2VzIHx8IChleHBvcnRzLkltYWdlcyA9IHt9KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW1hZ2VzLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXgnO1xuaW1wb3J0IHsgdHlwZSBVcGxvYWRhYmxlLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuLi9jb3JlJztcblxuZXhwb3J0IGNsYXNzIEltYWdlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB2YXJpYXRpb24gb2YgYSBnaXZlbiBpbWFnZS5cbiAgICovXG4gIGNyZWF0ZVZhcmlhdGlvbihcbiAgICBib2R5OiBJbWFnZUNyZWF0ZVZhcmlhdGlvblBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEltYWdlc1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ltYWdlcy92YXJpYXRpb25zJywgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zKHsgYm9keSwgLi4ub3B0aW9ucyB9KSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlZGl0ZWQgb3IgZXh0ZW5kZWQgaW1hZ2UgZ2l2ZW4gYW4gb3JpZ2luYWwgaW1hZ2UgYW5kIGEgcHJvbXB0LlxuICAgKi9cbiAgZWRpdChib2R5OiBJbWFnZUVkaXRQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEltYWdlc1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ltYWdlcy9lZGl0cycsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyh7IGJvZHksIC4uLm9wdGlvbnMgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW1hZ2UgZ2l2ZW4gYSBwcm9tcHQuXG4gICAqL1xuICBnZW5lcmF0ZShib2R5OiBJbWFnZUdlbmVyYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxJbWFnZXNSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9pbWFnZXMvZ2VuZXJhdGlvbnMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSB1cmwgb3IgdGhlIGNvbnRlbnQgb2YgYW4gaW1hZ2UgZ2VuZXJhdGVkIGJ5IHRoZSBPcGVuQUkgQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBiYXNlNjQtZW5jb2RlZCBKU09OIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2UsIGlmIGByZXNwb25zZV9mb3JtYXRgIGlzXG4gICAqIGBiNjRfanNvbmAuXG4gICAqL1xuICBiNjRfanNvbj86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIFVSTCBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlLCBpZiBgcmVzcG9uc2VfZm9ybWF0YCBpcyBgdXJsYCAoZGVmYXVsdCkuXG4gICAqL1xuICB1cmw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VzUmVzcG9uc2Uge1xuICBjcmVhdGVkOiBudW1iZXI7XG5cbiAgZGF0YTogQXJyYXk8SW1hZ2U+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBpbWFnZSB0byB1c2UgYXMgdGhlIGJhc2lzIGZvciB0aGUgdmFyaWF0aW9uKHMpLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsXG4gICAqIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuXG4gICAqL1xuICBpbWFnZTogVXBsb2FkYWJsZTtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICovXG4gIG4/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgYHVybGAgb3JcbiAgICogYGI2NF9qc29uYC5cbiAgICovXG4gIHJlc3BvbnNlX2Zvcm1hdD86ICd1cmwnIHwgJ2I2NF9qc29uJyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiBgMjU2eDI1NmAsIGA1MTJ4NTEyYCwgb3JcbiAgICogYDEwMjR4MTAyNGAuXG4gICAqL1xuICBzaXplPzogJzI1NngyNTYnIHwgJzUxMng1MTInIHwgJzEwMjR4MTAyNCcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvclxuICAgKiBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgKi9cbiAgdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbWFnZUVkaXRQYXJhbXMge1xuICAvKipcbiAgICogVGhlIGltYWdlIHRvIGVkaXQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS4gSWYgbWFza1xuICAgKiBpcyBub3QgcHJvdmlkZWQsIGltYWdlIG11c3QgaGF2ZSB0cmFuc3BhcmVuY3ksIHdoaWNoIHdpbGwgYmUgdXNlZCBhcyB0aGUgbWFzay5cbiAgICovXG4gIGltYWdlOiBVcGxvYWRhYmxlO1xuXG4gIC8qKlxuICAgKiBBIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGRlc2lyZWQgaW1hZ2UocykuIFRoZSBtYXhpbXVtIGxlbmd0aCBpcyAxMDAwXG4gICAqIGNoYXJhY3RlcnMuXG4gICAqL1xuICBwcm9tcHQ6IHN0cmluZztcblxuICAvKipcbiAgICogQW4gYWRkaXRpb25hbCBpbWFnZSB3aG9zZSBmdWxseSB0cmFuc3BhcmVudCBhcmVhcyAoZS5nLiB3aGVyZSBhbHBoYSBpcyB6ZXJvKVxuICAgKiBpbmRpY2F0ZSB3aGVyZSBgaW1hZ2VgIHNob3VsZCBiZSBlZGl0ZWQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuXG4gICAqIDRNQiwgYW5kIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9ucyBhcyBgaW1hZ2VgLlxuICAgKi9cbiAgbWFzaz86IFVwbG9hZGFibGU7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAqL1xuICBuPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mIGB1cmxgIG9yXG4gICAqIGBiNjRfanNvbmAuXG4gICAqL1xuICByZXNwb25zZV9mb3JtYXQ/OiAndXJsJyB8ICdiNjRfanNvbicgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgYDI1NngyNTZgLCBgNTEyeDUxMmAsIG9yXG4gICAqIGAxMDI0eDEwMjRgLlxuICAgKi9cbiAgc2l6ZT86ICcyNTZ4MjU2JyB8ICc1MTJ4NTEyJyB8ICcxMDI0eDEwMjQnIHwgbnVsbDtcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3JcbiAgICogYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICovXG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VHZW5lcmF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBBIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGRlc2lyZWQgaW1hZ2UocykuIFRoZSBtYXhpbXVtIGxlbmd0aCBpcyAxMDAwXG4gICAqIGNoYXJhY3RlcnMuXG4gICAqL1xuICBwcm9tcHQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICovXG4gIG4/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgYHVybGAgb3JcbiAgICogYGI2NF9qc29uYC5cbiAgICovXG4gIHJlc3BvbnNlX2Zvcm1hdD86ICd1cmwnIHwgJ2I2NF9qc29uJyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiBgMjU2eDI1NmAsIGA1MTJ4NTEyYCwgb3JcbiAgICogYDEwMjR4MTAyNGAuXG4gICAqL1xuICBzaXplPzogJzI1NngyNTYnIHwgJzUxMng1MTInIHwgJzEwMjR4MTAyNCcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvclxuICAgKiBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgKi9cbiAgdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBJbWFnZXMge1xuICBleHBvcnQgaW1wb3J0IEltYWdlID0gQVBJLkltYWdlO1xuICBleHBvcnQgaW1wb3J0IEltYWdlc1Jlc3BvbnNlID0gQVBJLkltYWdlc1Jlc3BvbnNlO1xuICBleHBvcnQgaW1wb3J0IEltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zID0gQVBJLkltYWdlQ3JlYXRlVmFyaWF0aW9uUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEltYWdlRWRpdFBhcmFtcyA9IEFQSS5JbWFnZUVkaXRQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VHZW5lcmF0ZVBhcmFtcyA9IEFQSS5JbWFnZUdlbmVyYXRlUGFyYW1zO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1vZGVsc1BhZ2UgPSBleHBvcnRzLk1vZGVscyA9IHZvaWQgMDtcbmNvbnN0IHJlc291cmNlXzEgPSByZXF1aXJlKCdvcGVuYWkvcmVzb3VyY2UnKTtcbmNvbnN0IHBhZ2luYXRpb25fMSA9IHJlcXVpcmUoJ29wZW5haS9wYWdpbmF0aW9uJyk7XG5jbGFzcyBNb2RlbHMgZXh0ZW5kcyByZXNvdXJjZV8xLkFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZGVsIHN1Y2ggYXNcbiAgICogdGhlIG93bmVyIGFuZCBwZXJtaXNzaW9uaW5nLlxuICAgKi9cbiAgcmV0cmlldmUobW9kZWwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9tb2RlbHMvJHttb2RlbH1gLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaFxuICAgKiBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICovXG4gIGxpc3Qob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmdldEFQSUxpc3QoJy9tb2RlbHMnLCBNb2RlbHNQYWdlLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgZmluZS10dW5lZCBtb2RlbC4gWW91IG11c3QgaGF2ZSB0aGUgT3duZXIgcm9sZSBpbiB5b3VyIG9yZ2FuaXphdGlvbi5cbiAgICovXG4gIGRlbChtb2RlbCwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmRlbGV0ZShgL21vZGVscy8ke21vZGVsfWAsIG9wdGlvbnMpO1xuICB9XG59XG5leHBvcnRzLk1vZGVscyA9IE1vZGVscztcbi8qKlxuICogTm90ZTogbm8gcGFnaW5hdGlvbiBhY3R1YWxseSBvY2N1cnMgeWV0LCB0aGlzIGlzIGZvciBmb3J3YXJkcy1jb21wYXRpYmlsaXR5LlxuICovXG5jbGFzcyBNb2RlbHNQYWdlIGV4dGVuZHMgcGFnaW5hdGlvbl8xLlBhZ2Uge31cbmV4cG9ydHMuTW9kZWxzUGFnZSA9IE1vZGVsc1BhZ2U7XG4oZnVuY3Rpb24gKE1vZGVscykge30pKChNb2RlbHMgPSBleHBvcnRzLk1vZGVscyB8fCAoZXhwb3J0cy5Nb2RlbHMgPSB7fSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGVscy5qcy5tYXBcbiIsIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZSc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4JztcbmltcG9ydCB7IFBhZ2UgfSBmcm9tICcuLi9wYWdpbmF0aW9uJztcblxuZXhwb3J0IGNsYXNzIE1vZGVscyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZGVsIHN1Y2ggYXNcbiAgICogdGhlIG93bmVyIGFuZCBwZXJtaXNzaW9uaW5nLlxuICAgKi9cbiAgcmV0cmlldmUobW9kZWw6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8TW9kZWw+IHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9tb2RlbHMvJHttb2RlbH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoXG4gICAqIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgKi9cbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8TW9kZWxzUGFnZSwgTW9kZWw+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBUElMaXN0KCcvbW9kZWxzJywgTW9kZWxzUGFnZSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgZmluZS10dW5lZCBtb2RlbC4gWW91IG11c3QgaGF2ZSB0aGUgT3duZXIgcm9sZSBpbiB5b3VyIG9yZ2FuaXphdGlvbi5cbiAgICovXG4gIGRlbChtb2RlbDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxNb2RlbERlbGV0ZWQ+IHtcbiAgICByZXR1cm4gdGhpcy5kZWxldGUoYC9tb2RlbHMvJHttb2RlbH1gLCBvcHRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIE5vdGU6IG5vIHBhZ2luYXRpb24gYWN0dWFsbHkgb2NjdXJzIHlldCwgdGhpcyBpcyBmb3IgZm9yd2FyZHMtY29tcGF0aWJpbGl0eS5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsc1BhZ2UgZXh0ZW5kcyBQYWdlPE1vZGVsPiB7fVxuLy8gYWxpYXMgc28gd2UgY2FuIGV4cG9ydCBpdCBpbiB0aGUgbmFtZXNwYWNlXG50eXBlIF9Nb2RlbHNQYWdlID0gTW9kZWxzUGFnZTtcblxuLyoqXG4gKiBEZXNjcmliZXMgYW4gT3BlbkFJIG1vZGVsIG9mZmVyaW5nIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB0aGUgQVBJLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsIHtcbiAgLyoqXG4gICAqIFRoZSBtb2RlbCBpZGVudGlmaWVyLCB3aGljaCBjYW4gYmUgcmVmZXJlbmNlZCBpbiB0aGUgQVBJIGVuZHBvaW50cy5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBkYXRlIGFuZCB0aW1lIHdoZW4gdGhlIG1vZGVsIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBcIm1vZGVsXCIuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB0aGF0IG93bnMgdGhlIG1vZGVsLlxuICAgKi9cbiAgb3duZWRfYnk6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbERlbGV0ZWQge1xuICBpZDogc3RyaW5nO1xuXG4gIGRlbGV0ZWQ6IGJvb2xlYW47XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgTW9kZWxzIHtcbiAgZXhwb3J0IGltcG9ydCBNb2RlbCA9IEFQSS5Nb2RlbDtcbiAgZXhwb3J0IGltcG9ydCBNb2RlbERlbGV0ZWQgPSBBUEkuTW9kZWxEZWxldGVkO1xuICBleHBvcnQgdHlwZSBNb2RlbHNQYWdlID0gX01vZGVsc1BhZ2U7XG59XG4iLCIndXNlIHN0cmljdCc7XG4vLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9kZXJhdGlvbnMgPSB2b2lkIDA7XG5jb25zdCByZXNvdXJjZV8xID0gcmVxdWlyZSgnb3BlbmFpL3Jlc291cmNlJyk7XG5jbGFzcyBNb2RlcmF0aW9ucyBleHRlbmRzIHJlc291cmNlXzEuQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ2xhc3NpZmllcyBpZiB0ZXh0IHZpb2xhdGVzIE9wZW5BSSdzIENvbnRlbnQgUG9saWN5XG4gICAqL1xuICBjcmVhdGUoYm9keSwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9tb2RlcmF0aW9ucycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuZXhwb3J0cy5Nb2RlcmF0aW9ucyA9IE1vZGVyYXRpb25zO1xuKGZ1bmN0aW9uIChNb2RlcmF0aW9ucykge30pKChNb2RlcmF0aW9ucyA9IGV4cG9ydHMuTW9kZXJhdGlvbnMgfHwgKGV4cG9ydHMuTW9kZXJhdGlvbnMgPSB7fSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGVyYXRpb25zLmpzLm1hcFxuIiwiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXgnO1xuXG5leHBvcnQgY2xhc3MgTW9kZXJhdGlvbnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDbGFzc2lmaWVzIGlmIHRleHQgdmlvbGF0ZXMgT3BlbkFJJ3MgQ29udGVudCBQb2xpY3lcbiAgICovXG4gIGNyZWF0ZShcbiAgICBib2R5OiBNb2RlcmF0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8TW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL21vZGVyYXRpb25zJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZXJhdGlvbiB7XG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgdGhlIGNhdGVnb3JpZXMsIGFuZCB3aGV0aGVyIHRoZXkgYXJlIGZsYWdnZWQgb3Igbm90LlxuICAgKi9cbiAgY2F0ZWdvcmllczogTW9kZXJhdGlvbi5DYXRlZ29yaWVzO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgdGhlIGNhdGVnb3JpZXMgYWxvbmcgd2l0aCB0aGVpciBzY29yZXMgYXMgcHJlZGljdGVkIGJ5IG1vZGVsLlxuICAgKi9cbiAgY2F0ZWdvcnlfc2NvcmVzOiBNb2RlcmF0aW9uLkNhdGVnb3J5U2NvcmVzO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBjb250ZW50IHZpb2xhdGVzXG4gICAqIFtPcGVuQUkncyB1c2FnZSBwb2xpY2llc10oL3BvbGljaWVzL3VzYWdlLXBvbGljaWVzKS5cbiAgICovXG4gIGZsYWdnZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgTW9kZXJhdGlvbiB7XG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgdGhlIGNhdGVnb3JpZXMsIGFuZCB3aGV0aGVyIHRoZXkgYXJlIGZsYWdnZWQgb3Igbm90LlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBDYXRlZ29yaWVzIHtcbiAgICAvKipcbiAgICAgKiBDb250ZW50IHRoYXQgZXhwcmVzc2VzLCBpbmNpdGVzLCBvciBwcm9tb3RlcyBoYXJhc3NpbmcgbGFuZ3VhZ2UgdG93YXJkcyBhbnlcbiAgICAgKiB0YXJnZXQuXG4gICAgICovXG4gICAgaGFyYXNzbWVudDogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIEhhcmFzc21lbnQgY29udGVudCB0aGF0IGFsc28gaW5jbHVkZXMgdmlvbGVuY2Ugb3Igc2VyaW91cyBoYXJtIHRvd2FyZHMgYW55XG4gICAgICogdGFyZ2V0LlxuICAgICAqL1xuICAgICdoYXJhc3NtZW50L3RocmVhdGVuaW5nJzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgdGhhdCBleHByZXNzZXMsIGluY2l0ZXMsIG9yIHByb21vdGVzIGhhdGUgYmFzZWQgb24gcmFjZSwgZ2VuZGVyLFxuICAgICAqIGV0aG5pY2l0eSwgcmVsaWdpb24sIG5hdGlvbmFsaXR5LCBzZXh1YWwgb3JpZW50YXRpb24sIGRpc2FiaWxpdHkgc3RhdHVzLCBvclxuICAgICAqIGNhc3RlLiBIYXRlZnVsIGNvbnRlbnQgYWltZWQgYXQgbm9uLXByb3RlY3RlZCBncm91cHMgKGUuZy4sIGNoZXNzIHBsYXllcnMpIGlzXG4gICAgICogaGFycmFzc21lbnQuXG4gICAgICovXG4gICAgaGF0ZTogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIEhhdGVmdWwgY29udGVudCB0aGF0IGFsc28gaW5jbHVkZXMgdmlvbGVuY2Ugb3Igc2VyaW91cyBoYXJtIHRvd2FyZHMgdGhlIHRhcmdldGVkXG4gICAgICogZ3JvdXAgYmFzZWQgb24gcmFjZSwgZ2VuZGVyLCBldGhuaWNpdHksIHJlbGlnaW9uLCBuYXRpb25hbGl0eSwgc2V4dWFsXG4gICAgICogb3JpZW50YXRpb24sIGRpc2FiaWxpdHkgc3RhdHVzLCBvciBjYXN0ZS5cbiAgICAgKi9cbiAgICAnaGF0ZS90aHJlYXRlbmluZyc6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDb250ZW50IHRoYXQgcHJvbW90ZXMsIGVuY291cmFnZXMsIG9yIGRlcGljdHMgYWN0cyBvZiBzZWxmLWhhcm0sIHN1Y2ggYXNcbiAgICAgKiBzdWljaWRlLCBjdXR0aW5nLCBhbmQgZWF0aW5nIGRpc29yZGVycy5cbiAgICAgKi9cbiAgICAnc2VsZi1oYXJtJzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgdGhhdCBlbmNvdXJhZ2VzIHBlcmZvcm1pbmcgYWN0cyBvZiBzZWxmLWhhcm0sIHN1Y2ggYXMgc3VpY2lkZSwgY3V0dGluZyxcbiAgICAgKiBhbmQgZWF0aW5nIGRpc29yZGVycywgb3IgdGhhdCBnaXZlcyBpbnN0cnVjdGlvbnMgb3IgYWR2aWNlIG9uIGhvdyB0byBjb21taXQgc3VjaFxuICAgICAqIGFjdHMuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybS9pbnN0cnVjdGlvbnMnOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCB3aGVyZSB0aGUgc3BlYWtlciBleHByZXNzZXMgdGhhdCB0aGV5IGFyZSBlbmdhZ2luZyBvciBpbnRlbmQgdG8gZW5nYWdlXG4gICAgICogaW4gYWN0cyBvZiBzZWxmLWhhcm0sIHN1Y2ggYXMgc3VpY2lkZSwgY3V0dGluZywgYW5kIGVhdGluZyBkaXNvcmRlcnMuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybS9pbnRlbnQnOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCBtZWFudCB0byBhcm91c2Ugc2V4dWFsIGV4Y2l0ZW1lbnQsIHN1Y2ggYXMgdGhlIGRlc2NyaXB0aW9uIG9mIHNleHVhbFxuICAgICAqIGFjdGl2aXR5LCBvciB0aGF0IHByb21vdGVzIHNleHVhbCBzZXJ2aWNlcyAoZXhjbHVkaW5nIHNleCBlZHVjYXRpb24gYW5kXG4gICAgICogd2VsbG5lc3MpLlxuICAgICAqL1xuICAgIHNleHVhbDogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFNleHVhbCBjb250ZW50IHRoYXQgaW5jbHVkZXMgYW4gaW5kaXZpZHVhbCB3aG8gaXMgdW5kZXIgMTggeWVhcnMgb2xkLlxuICAgICAqL1xuICAgICdzZXh1YWwvbWlub3JzJzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgdGhhdCBkZXBpY3RzIGRlYXRoLCB2aW9sZW5jZSwgb3IgcGh5c2ljYWwgaW5qdXJ5LlxuICAgICAqL1xuICAgIHZpb2xlbmNlOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCB0aGF0IGRlcGljdHMgZGVhdGgsIHZpb2xlbmNlLCBvciBwaHlzaWNhbCBpbmp1cnkgaW4gZ3JhcGhpYyBkZXRhaWwuXG4gICAgICovXG4gICAgJ3Zpb2xlbmNlL2dyYXBoaWMnOiBib29sZWFuO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiB0aGUgY2F0ZWdvcmllcyBhbG9uZyB3aXRoIHRoZWlyIHNjb3JlcyBhcyBwcmVkaWN0ZWQgYnkgbW9kZWwuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIENhdGVnb3J5U2NvcmVzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnaGFyYXNzbWVudCcuXG4gICAgICovXG4gICAgaGFyYXNzbWVudDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ2hhcmFzc21lbnQvdGhyZWF0ZW5pbmcnLlxuICAgICAqL1xuICAgICdoYXJhc3NtZW50L3RocmVhdGVuaW5nJzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ2hhdGUnLlxuICAgICAqL1xuICAgIGhhdGU6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdoYXRlL3RocmVhdGVuaW5nJy5cbiAgICAgKi9cbiAgICAnaGF0ZS90aHJlYXRlbmluZyc6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdzZWxmLWhhcm0nLlxuICAgICAqL1xuICAgICdzZWxmLWhhcm0nOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnc2VsZi1oYXJtL2luc3RydWN0aW9ucycuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybS9pbnN0cnVjdGlvbnMnOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnc2VsZi1oYXJtL2ludGVudCcuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybS9pbnRlbnQnOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnc2V4dWFsJy5cbiAgICAgKi9cbiAgICBzZXh1YWw6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdzZXh1YWwvbWlub3JzJy5cbiAgICAgKi9cbiAgICAnc2V4dWFsL21pbm9ycyc6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICd2aW9sZW5jZScuXG4gICAgICovXG4gICAgdmlvbGVuY2U6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICd2aW9sZW5jZS9ncmFwaGljJy5cbiAgICAgKi9cbiAgICAndmlvbGVuY2UvZ3JhcGhpYyc6IG51bWJlcjtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgcG9saWN5IGNvbXBsaWFuY2UgcmVwb3J0IGJ5IE9wZW5BSSdzIGNvbnRlbnQgbW9kZXJhdGlvbiBtb2RlbCBhZ2FpbnN0XG4gKiBhIGdpdmVuIGlucHV0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVyYXRpb25DcmVhdGVSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBtb2RlcmF0aW9uIHJlcXVlc3QuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdXNlZCB0byBnZW5lcmF0ZSB0aGUgbW9kZXJhdGlvbiByZXN1bHRzLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogQSBsaXN0IG9mIG1vZGVyYXRpb24gb2JqZWN0cy5cbiAgICovXG4gIHJlc3VsdHM6IEFycmF5PE1vZGVyYXRpb24+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVyYXRpb25DcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIGlucHV0IHRleHQgdG8gY2xhc3NpZnlcbiAgICovXG4gIGlucHV0OiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBUd28gY29udGVudCBtb2RlcmF0aW9ucyBtb2RlbHMgYXJlIGF2YWlsYWJsZTogYHRleHQtbW9kZXJhdGlvbi1zdGFibGVgIGFuZFxuICAgKiBgdGV4dC1tb2RlcmF0aW9uLWxhdGVzdGAuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IGlzIGB0ZXh0LW1vZGVyYXRpb24tbGF0ZXN0YCB3aGljaCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgdXBncmFkZWRcbiAgICogb3ZlciB0aW1lLiBUaGlzIGVuc3VyZXMgeW91IGFyZSBhbHdheXMgdXNpbmcgb3VyIG1vc3QgYWNjdXJhdGUgbW9kZWwuIElmIHlvdSB1c2VcbiAgICogYHRleHQtbW9kZXJhdGlvbi1zdGFibGVgLCB3ZSB3aWxsIHByb3ZpZGUgYWR2YW5jZWQgbm90aWNlIGJlZm9yZSB1cGRhdGluZyB0aGVcbiAgICogbW9kZWwuIEFjY3VyYWN5IG9mIGB0ZXh0LW1vZGVyYXRpb24tc3RhYmxlYCBtYXkgYmUgc2xpZ2h0bHkgbG93ZXIgdGhhbiBmb3JcbiAgICogYHRleHQtbW9kZXJhdGlvbi1sYXRlc3RgLlxuICAgKi9cbiAgbW9kZWw/OiAoc3RyaW5nICYge30pIHwgJ3RleHQtbW9kZXJhdGlvbi1sYXRlc3QnIHwgJ3RleHQtbW9kZXJhdGlvbi1zdGFibGUnO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIE1vZGVyYXRpb25zIHtcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uID0gQVBJLk1vZGVyYXRpb247XG4gIGV4cG9ydCBpbXBvcnQgTW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlID0gQVBJLk1vZGVyYXRpb25DcmVhdGVSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLk1vZGVyYXRpb25DcmVhdGVQYXJhbXM7XG59XG4iLCJpbXBvcnQgeyBlbmNvZGluZ0Zvck1vZGVsIH0gZnJvbSBcIi4uL3V0aWwvdGlrdG9rZW4uanNcIjtcbi8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2pzLXRpa3Rva2VuXG5leHBvcnQgY29uc3QgZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4gPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby0xNmtcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTMuNS10dXJiby0xNmtcIjtcbiAgICB9XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby1cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTMuNS10dXJib1wiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNC0zMmtcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTQtMzJrXCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LVwiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtNFwiO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxOYW1lO1xufTtcbmV4cG9ydCBjb25zdCBnZXRFbWJlZGRpbmdDb250ZXh0U2l6ZSA9IChtb2RlbE5hbWUpID0+IHtcbiAgICBzd2l0Y2ggKG1vZGVsTmFtZSkge1xuICAgICAgICBjYXNlIFwidGV4dC1lbWJlZGRpbmctYWRhLTAwMlwiOlxuICAgICAgICAgICAgcmV0dXJuIDgxOTE7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gMjA0NjtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGdldE1vZGVsQ29udGV4dFNpemUgPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgc3dpdGNoIChnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbihtb2RlbE5hbWUpKSB7XG4gICAgICAgIGNhc2UgXCJncHQtMy41LXR1cmJvLTE2a1wiOlxuICAgICAgICAgICAgcmV0dXJuIDE2Mzg0O1xuICAgICAgICBjYXNlIFwiZ3B0LTMuNS10dXJib1wiOlxuICAgICAgICAgICAgcmV0dXJuIDQwOTY7XG4gICAgICAgIGNhc2UgXCJncHQtNC0zMmtcIjpcbiAgICAgICAgICAgIHJldHVybiAzMjc2ODtcbiAgICAgICAgY2FzZSBcImdwdC00XCI6XG4gICAgICAgICAgICByZXR1cm4gODE5MjtcbiAgICAgICAgY2FzZSBcInRleHQtZGF2aW5jaS0wMDNcIjpcbiAgICAgICAgICAgIHJldHVybiA0MDk3O1xuICAgICAgICBjYXNlIFwidGV4dC1jdXJpZS0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBjYXNlIFwidGV4dC1iYWJiYWdlLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWFkYS0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBjYXNlIFwiY29kZS1kYXZpbmNpLTAwMlwiOlxuICAgICAgICAgICAgcmV0dXJuIDgwMDA7XG4gICAgICAgIGNhc2UgXCJjb2RlLWN1c2htYW4tMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiA0MDk3O1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgY2FsY3VsYXRlTWF4VG9rZW5zID0gYXN5bmMgKHsgcHJvbXB0LCBtb2RlbE5hbWUsIH0pID0+IHtcbiAgICBsZXQgbnVtVG9rZW5zO1xuICAgIHRyeSB7XG4gICAgICAgIG51bVRva2VucyA9IChhd2FpdCBlbmNvZGluZ0Zvck1vZGVsKG1vZGVsTmFtZSkpLmVuY29kZShwcm9tcHQpLmxlbmd0aDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIpO1xuICAgICAgICAvLyBmYWxsYmFjayB0byBhcHByb3hpbWF0ZSBjYWxjdWxhdGlvbiBpZiB0aWt0b2tlbiBpcyBub3QgYXZhaWxhYmxlXG4gICAgICAgIG51bVRva2VucyA9IE1hdGguY2VpbChwcm9tcHQubGVuZ3RoIC8gNCk7XG4gICAgfVxuICAgIGNvbnN0IG1heFRva2VucyA9IGdldE1vZGVsQ29udGV4dFNpemUobW9kZWxOYW1lKTtcbiAgICByZXR1cm4gbWF4VG9rZW5zIC0gbnVtVG9rZW5zO1xufTtcbiIsImltcG9ydCB7IFRpa3Rva2VuLCBnZXRFbmNvZGluZ05hbWVGb3JNb2RlbCwgfSBmcm9tIFwianMtdGlrdG9rZW4vbGl0ZVwiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi9hc3luY19jYWxsZXIuanNcIjtcbmNvbnN0IGNhY2hlID0ge307XG5jb25zdCBjYWxsZXIgPSAvKiAjX19QVVJFX18gKi8gbmV3IEFzeW5jQ2FsbGVyKHt9KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbmNvZGluZyhlbmNvZGluZywgb3B0aW9ucykge1xuICAgIGlmICghKGVuY29kaW5nIGluIGNhY2hlKSkge1xuICAgICAgICBjYWNoZVtlbmNvZGluZ10gPSBjYWxsZXJcbiAgICAgICAgICAgIC5mZXRjaChgaHR0cHM6Ly90aWt0b2tlbi5wYWdlcy5kZXYvanMvJHtlbmNvZGluZ30uanNvbmAsIHtcbiAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2VuY29kaW5nXTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFRpa3Rva2VuKGF3YWl0IGNhY2hlW2VuY29kaW5nXSwgb3B0aW9ucz8uZXh0ZW5kZWRTcGVjaWFsVG9rZW5zKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNvZGluZ0Zvck1vZGVsKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGdldEVuY29kaW5nKGdldEVuY29kaW5nTmFtZUZvck1vZGVsKG1vZGVsKSwgb3B0aW9ucyk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZGlzdC9saXRlLmNqcycpOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQgKGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgZGVmYXVsdDogZSB9OyB9XG5cbnZhciBiYXNlNjRfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0KGJhc2U2NCk7XG5cbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IHtcbiAgX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLy8gc3JjL2NvcmUudHNcbmZ1bmN0aW9uIGJ5dGVQYWlyTWVyZ2UocGllY2UsIHJhbmtzKSB7XG4gIGxldCBwYXJ0cyA9IEFycmF5LmZyb20oXG4gICAgeyBsZW5ndGg6IHBpZWNlLmxlbmd0aCB9LFxuICAgIChfLCBpKSA9PiAoeyBzdGFydDogaSwgZW5kOiBpICsgMSB9KVxuICApO1xuICB3aGlsZSAocGFydHMubGVuZ3RoID4gMSkge1xuICAgIGxldCBtaW5SYW5rID0gbnVsbDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgY29uc3Qgc2xpY2UgPSBwaWVjZS5zbGljZShwYXJ0c1tpXS5zdGFydCwgcGFydHNbaSArIDFdLmVuZCk7XG4gICAgICBjb25zdCByYW5rID0gcmFua3MuZ2V0KHNsaWNlLmpvaW4oXCIsXCIpKTtcbiAgICAgIGlmIChyYW5rID09IG51bGwpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgaWYgKG1pblJhbmsgPT0gbnVsbCB8fCByYW5rIDwgbWluUmFua1swXSkge1xuICAgICAgICBtaW5SYW5rID0gW3JhbmssIGldO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWluUmFuayAhPSBudWxsKSB7XG4gICAgICBjb25zdCBpID0gbWluUmFua1sxXTtcbiAgICAgIHBhcnRzW2ldID0geyBzdGFydDogcGFydHNbaV0uc3RhcnQsIGVuZDogcGFydHNbaSArIDFdLmVuZCB9O1xuICAgICAgcGFydHMuc3BsaWNlKGkgKyAxLCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJ0cztcbn1cbmZ1bmN0aW9uIGJ5dGVQYWlyRW5jb2RlKHBpZWNlLCByYW5rcykge1xuICBpZiAocGllY2UubGVuZ3RoID09PSAxKVxuICAgIHJldHVybiBbcmFua3MuZ2V0KHBpZWNlLmpvaW4oXCIsXCIpKV07XG4gIHJldHVybiBieXRlUGFpck1lcmdlKHBpZWNlLCByYW5rcykubWFwKChwKSA9PiByYW5rcy5nZXQocGllY2Uuc2xpY2UocC5zdGFydCwgcC5lbmQpLmpvaW4oXCIsXCIpKSkuZmlsdGVyKCh4KSA9PiB4ICE9IG51bGwpO1xufVxuZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvW1xcXFxeJCorPy4oKXxbXFxde31dL2csIFwiXFxcXCQmXCIpO1xufVxudmFyIF9UaWt0b2tlbiA9IGNsYXNzIHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBzcGVjaWFsVG9rZW5zO1xuICAvKiogQGludGVybmFsICovXG4gIGludmVyc2VTcGVjaWFsVG9rZW5zO1xuICAvKiogQGludGVybmFsICovXG4gIHBhdFN0cjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAvKiogQGludGVybmFsICovXG4gIHRleHREZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKFwidXRmLThcIik7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcmFua01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgdGV4dE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGNvbnN0cnVjdG9yKHJhbmtzLCBleHRlbmRlZFNwZWNpYWxUb2tlbnMpIHtcbiAgICB0aGlzLnBhdFN0ciA9IHJhbmtzLnBhdF9zdHI7XG4gICAgY29uc3QgdW5jb21wcmVzc2VkID0gcmFua3MuYnBlX3JhbmtzLnNwbGl0KFwiXFxuXCIpLmZpbHRlcihCb29sZWFuKS5yZWR1Y2UoKG1lbW8sIHgpID0+IHtcbiAgICAgIGNvbnN0IFtfLCBvZmZzZXRTdHIsIC4uLnRva2Vuc10gPSB4LnNwbGl0KFwiIFwiKTtcbiAgICAgIGNvbnN0IG9mZnNldCA9IE51bWJlci5wYXJzZUludChvZmZzZXRTdHIsIDEwKTtcbiAgICAgIHRva2Vucy5mb3JFYWNoKCh0b2tlbiwgaSkgPT4gbWVtb1t0b2tlbl0gPSBvZmZzZXQgKyBpKTtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH0sIHt9KTtcbiAgICBmb3IgKGNvbnN0IFt0b2tlbiwgcmFua10gb2YgT2JqZWN0LmVudHJpZXModW5jb21wcmVzc2VkKSkge1xuICAgICAgY29uc3QgYnl0ZXMgPSBiYXNlNjRfX2RlZmF1bHQuZGVmYXVsdC50b0J5dGVBcnJheSh0b2tlbik7XG4gICAgICB0aGlzLnJhbmtNYXAuc2V0KGJ5dGVzLmpvaW4oXCIsXCIpLCByYW5rKTtcbiAgICAgIHRoaXMudGV4dE1hcC5zZXQocmFuaywgYnl0ZXMpO1xuICAgIH1cbiAgICB0aGlzLnNwZWNpYWxUb2tlbnMgPSB7IC4uLnJhbmtzLnNwZWNpYWxfdG9rZW5zLCAuLi5leHRlbmRlZFNwZWNpYWxUb2tlbnMgfTtcbiAgICB0aGlzLmludmVyc2VTcGVjaWFsVG9rZW5zID0gT2JqZWN0LmVudHJpZXModGhpcy5zcGVjaWFsVG9rZW5zKS5yZWR1Y2UoKG1lbW8sIFt0ZXh0LCByYW5rXSkgPT4ge1xuICAgICAgbWVtb1tyYW5rXSA9IHRoaXMudGV4dEVuY29kZXIuZW5jb2RlKHRleHQpO1xuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfSwge30pO1xuICB9XG4gIGVuY29kZSh0ZXh0LCBhbGxvd2VkU3BlY2lhbCA9IFtdLCBkaXNhbGxvd2VkU3BlY2lhbCA9IFwiYWxsXCIpIHtcbiAgICBjb25zdCByZWdleGVzID0gbmV3IFJlZ0V4cCh0aGlzLnBhdFN0ciwgXCJ1Z1wiKTtcbiAgICBjb25zdCBzcGVjaWFsUmVnZXggPSBfVGlrdG9rZW4uc3BlY2lhbFRva2VuUmVnZXgoXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnNwZWNpYWxUb2tlbnMpXG4gICAgKTtcbiAgICBjb25zdCByZXQgPSBbXTtcbiAgICBjb25zdCBhbGxvd2VkU3BlY2lhbFNldCA9IG5ldyBTZXQoXG4gICAgICBhbGxvd2VkU3BlY2lhbCA9PT0gXCJhbGxcIiA/IE9iamVjdC5rZXlzKHRoaXMuc3BlY2lhbFRva2VucykgOiBhbGxvd2VkU3BlY2lhbFxuICAgICk7XG4gICAgY29uc3QgZGlzYWxsb3dlZFNwZWNpYWxTZXQgPSBuZXcgU2V0KFxuICAgICAgZGlzYWxsb3dlZFNwZWNpYWwgPT09IFwiYWxsXCIgPyBPYmplY3Qua2V5cyh0aGlzLnNwZWNpYWxUb2tlbnMpLmZpbHRlcihcbiAgICAgICAgKHgpID0+ICFhbGxvd2VkU3BlY2lhbFNldC5oYXMoeClcbiAgICAgICkgOiBkaXNhbGxvd2VkU3BlY2lhbFxuICAgICk7XG4gICAgaWYgKGRpc2FsbG93ZWRTcGVjaWFsU2V0LnNpemUgPiAwKSB7XG4gICAgICBjb25zdCBkaXNhbGxvd2VkU3BlY2lhbFJlZ2V4ID0gX1Rpa3Rva2VuLnNwZWNpYWxUb2tlblJlZ2V4KFtcbiAgICAgICAgLi4uZGlzYWxsb3dlZFNwZWNpYWxTZXRcbiAgICAgIF0pO1xuICAgICAgY29uc3Qgc3BlY2lhbE1hdGNoID0gdGV4dC5tYXRjaChkaXNhbGxvd2VkU3BlY2lhbFJlZ2V4KTtcbiAgICAgIGlmIChzcGVjaWFsTWF0Y2ggIT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFRoZSB0ZXh0IGNvbnRhaW5zIGEgc3BlY2lhbCB0b2tlbiB0aGF0IGlzIG5vdCBhbGxvd2VkOiAke3NwZWNpYWxNYXRjaFswXX1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBzdGFydCA9IDA7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGxldCBuZXh0U3BlY2lhbCA9IG51bGw7XG4gICAgICBsZXQgc3RhcnRGaW5kID0gc3RhcnQ7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzcGVjaWFsUmVnZXgubGFzdEluZGV4ID0gc3RhcnRGaW5kO1xuICAgICAgICBuZXh0U3BlY2lhbCA9IHNwZWNpYWxSZWdleC5leGVjKHRleHQpO1xuICAgICAgICBpZiAobmV4dFNwZWNpYWwgPT0gbnVsbCB8fCBhbGxvd2VkU3BlY2lhbFNldC5oYXMobmV4dFNwZWNpYWxbMF0pKVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBzdGFydEZpbmQgPSBuZXh0U3BlY2lhbC5pbmRleCArIDE7XG4gICAgICB9XG4gICAgICBjb25zdCBlbmQgPSBuZXh0U3BlY2lhbD8uaW5kZXggPz8gdGV4dC5sZW5ndGg7XG4gICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIHRleHQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpLm1hdGNoQWxsKHJlZ2V4ZXMpKSB7XG4gICAgICAgIGNvbnN0IHBpZWNlID0gdGhpcy50ZXh0RW5jb2Rlci5lbmNvZGUobWF0Y2hbMF0pO1xuICAgICAgICBjb25zdCB0b2tlbjIgPSB0aGlzLnJhbmtNYXAuZ2V0KHBpZWNlLmpvaW4oXCIsXCIpKTtcbiAgICAgICAgaWYgKHRva2VuMiAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0LnB1c2godG9rZW4yKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXQucHVzaCguLi5ieXRlUGFpckVuY29kZShwaWVjZSwgdGhpcy5yYW5rTWFwKSk7XG4gICAgICB9XG4gICAgICBpZiAobmV4dFNwZWNpYWwgPT0gbnVsbClcbiAgICAgICAgYnJlYWs7XG4gICAgICBsZXQgdG9rZW4gPSB0aGlzLnNwZWNpYWxUb2tlbnNbbmV4dFNwZWNpYWxbMF1dO1xuICAgICAgcmV0LnB1c2godG9rZW4pO1xuICAgICAgc3RhcnQgPSBuZXh0U3BlY2lhbC5pbmRleCArIG5leHRTcGVjaWFsWzBdLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICBkZWNvZGUodG9rZW5zKSB7XG4gICAgY29uc3QgcmVzID0gW107XG4gICAgbGV0IGxlbmd0aCA9IDA7XG4gICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IHRva2Vucy5sZW5ndGg7ICsraTIpIHtcbiAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zW2kyXTtcbiAgICAgIGNvbnN0IGJ5dGVzID0gdGhpcy50ZXh0TWFwLmdldCh0b2tlbikgPz8gdGhpcy5pbnZlcnNlU3BlY2lhbFRva2Vuc1t0b2tlbl07XG4gICAgICBpZiAoYnl0ZXMgIT0gbnVsbCkge1xuICAgICAgICByZXMucHVzaChieXRlcyk7XG4gICAgICAgIGxlbmd0aCArPSBieXRlcy5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG1lcmdlZEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChjb25zdCBieXRlcyBvZiByZXMpIHtcbiAgICAgIG1lcmdlZEFycmF5LnNldChieXRlcywgaSk7XG4gICAgICBpICs9IGJ5dGVzLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudGV4dERlY29kZXIuZGVjb2RlKG1lcmdlZEFycmF5KTtcbiAgfVxufTtcbnZhciBUaWt0b2tlbiA9IF9UaWt0b2tlbjtcbl9fcHVibGljRmllbGQoVGlrdG9rZW4sIFwic3BlY2lhbFRva2VuUmVnZXhcIiwgKHRva2VucykgPT4ge1xuICByZXR1cm4gbmV3IFJlZ0V4cCh0b2tlbnMubWFwKChpKSA9PiBlc2NhcGVSZWdleChpKSkuam9pbihcInxcIiksIFwiZ1wiKTtcbn0pO1xuZnVuY3Rpb24gZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwobW9kZWwpIHtcbiAgc3dpdGNoIChtb2RlbCkge1xuICAgIGNhc2UgXCJncHQyXCI6IHtcbiAgICAgIHJldHVybiBcImdwdDJcIjtcbiAgICB9XG4gICAgY2FzZSBcImNvZGUtY3VzaG1hbi0wMDFcIjpcbiAgICBjYXNlIFwiY29kZS1jdXNobWFuLTAwMlwiOlxuICAgIGNhc2UgXCJjb2RlLWRhdmluY2ktMDAxXCI6XG4gICAgY2FzZSBcImNvZGUtZGF2aW5jaS0wMDJcIjpcbiAgICBjYXNlIFwiY3VzaG1hbi1jb2RleFwiOlxuICAgIGNhc2UgXCJkYXZpbmNpLWNvZGV4XCI6XG4gICAgY2FzZSBcInRleHQtZGF2aW5jaS0wMDJcIjpcbiAgICBjYXNlIFwidGV4dC1kYXZpbmNpLTAwM1wiOiB7XG4gICAgICByZXR1cm4gXCJwNTBrX2Jhc2VcIjtcbiAgICB9XG4gICAgY2FzZSBcImNvZGUtZGF2aW5jaS1lZGl0LTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LWRhdmluY2ktZWRpdC0wMDFcIjoge1xuICAgICAgcmV0dXJuIFwicDUwa19lZGl0XCI7XG4gICAgfVxuICAgIGNhc2UgXCJhZGFcIjpcbiAgICBjYXNlIFwiYmFiYmFnZVwiOlxuICAgIGNhc2UgXCJjb2RlLXNlYXJjaC1hZGEtY29kZS0wMDFcIjpcbiAgICBjYXNlIFwiY29kZS1zZWFyY2gtYmFiYmFnZS1jb2RlLTAwMVwiOlxuICAgIGNhc2UgXCJjdXJpZVwiOlxuICAgIGNhc2UgXCJkYXZpbmNpXCI6XG4gICAgY2FzZSBcInRleHQtYWRhLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LWJhYmJhZ2UtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtY3VyaWUtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtZGF2aW5jaS0wMDFcIjpcbiAgICBjYXNlIFwidGV4dC1zZWFyY2gtYWRhLWRvYy0wMDFcIjpcbiAgICBjYXNlIFwidGV4dC1zZWFyY2gtYmFiYmFnZS1kb2MtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2VhcmNoLWN1cmllLWRvYy0wMDFcIjpcbiAgICBjYXNlIFwidGV4dC1zZWFyY2gtZGF2aW5jaS1kb2MtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2ltaWxhcml0eS1hZGEtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2ltaWxhcml0eS1iYWJiYWdlLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LXNpbWlsYXJpdHktY3VyaWUtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2ltaWxhcml0eS1kYXZpbmNpLTAwMVwiOiB7XG4gICAgICByZXR1cm4gXCJyNTBrX2Jhc2VcIjtcbiAgICB9XG4gICAgY2FzZSBcImdwdC0zLjUtdHVyYm8tMTZrLTA2MTNcIjpcbiAgICBjYXNlIFwiZ3B0LTMuNS10dXJiby0xNmtcIjpcbiAgICBjYXNlIFwiZ3B0LTMuNS10dXJiby0wNjEzXCI6XG4gICAgY2FzZSBcImdwdC0zLjUtdHVyYm8tMDMwMVwiOlxuICAgIGNhc2UgXCJncHQtMy41LXR1cmJvXCI6XG4gICAgY2FzZSBcImdwdC00LTMyay0wNjEzXCI6XG4gICAgY2FzZSBcImdwdC00LTMyay0wMzE0XCI6XG4gICAgY2FzZSBcImdwdC00LTMya1wiOlxuICAgIGNhc2UgXCJncHQtNC0wNjEzXCI6XG4gICAgY2FzZSBcImdwdC00LTAzMTRcIjpcbiAgICBjYXNlIFwiZ3B0LTRcIjpcbiAgICBjYXNlIFwidGV4dC1lbWJlZGRpbmctYWRhLTAwMlwiOiB7XG4gICAgICByZXR1cm4gXCJjbDEwMGtfYmFzZVwiO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBtb2RlbFwiKTtcbiAgfVxufVxuXG5leHBvcnRzLlRpa3Rva2VuID0gVGlrdG9rZW47XG5leHBvcnRzLmdldEVuY29kaW5nTmFtZUZvck1vZGVsID0gZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWw7XG4iLCIndXNlIHN0cmljdCdcblxuZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5XG5leHBvcnRzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5XG5cbnZhciBsb29rdXAgPSBbXVxudmFyIHJldkxvb2t1cCA9IFtdXG52YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5XG5cbnZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nXG5mb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICBsb29rdXBbaV0gPSBjb2RlW2ldXG4gIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaVxufVxuXG4vLyBTdXBwb3J0IGRlY29kaW5nIFVSTC1zYWZlIGJhc2U2NCBzdHJpbmdzLCBhcyBOb2RlLmpzIGRvZXMuXG4vLyBTZWU6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jhc2U2NCNVUkxfYXBwbGljYXRpb25zXG5yZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjJcbnJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2M1xuXG5mdW5jdGlvbiBnZXRMZW5zIChiNjQpIHtcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcblxuICBpZiAobGVuICUgNCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuICB9XG5cbiAgLy8gVHJpbSBvZmYgZXh0cmEgYnl0ZXMgYWZ0ZXIgcGxhY2Vob2xkZXIgYnl0ZXMgYXJlIGZvdW5kXG4gIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2JlYXRnYW1taXQvYmFzZTY0LWpzL2lzc3Vlcy80MlxuICB2YXIgdmFsaWRMZW4gPSBiNjQuaW5kZXhPZignPScpXG4gIGlmICh2YWxpZExlbiA9PT0gLTEpIHZhbGlkTGVuID0gbGVuXG5cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IHZhbGlkTGVuID09PSBsZW5cbiAgICA/IDBcbiAgICA6IDQgLSAodmFsaWRMZW4gJSA0KVxuXG4gIHJldHVybiBbdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbl1cbn1cblxuLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChiNjQpIHtcbiAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NClcbiAgdmFyIHZhbGlkTGVuID0gbGVuc1swXVxuICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gbGVuc1sxXVxuICByZXR1cm4gKCh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCkgLSBwbGFjZUhvbGRlcnNMZW5cbn1cblxuZnVuY3Rpb24gX2J5dGVMZW5ndGggKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikge1xuICByZXR1cm4gKCh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCkgLSBwbGFjZUhvbGRlcnNMZW5cbn1cblxuZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkge1xuICB2YXIgdG1wXG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cblxuICB2YXIgYXJyID0gbmV3IEFycihfYnl0ZUxlbmd0aChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pKVxuXG4gIHZhciBjdXJCeXRlID0gMFxuXG4gIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcbiAgdmFyIGxlbiA9IHBsYWNlSG9sZGVyc0xlbiA+IDBcbiAgICA/IHZhbGlkTGVuIC0gNFxuICAgIDogdmFsaWRMZW5cblxuICB2YXIgaVxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTgpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHxcbiAgICAgIHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDE2KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAyKSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KVxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMSkge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA+PiAyKVxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcbiAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArXG4gICAgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArXG4gICAgbG9va3VwW251bSAmIDB4M0ZdXG59XG5cbmZ1bmN0aW9uIGVuY29kZUNodW5rICh1aW50OCwgc3RhcnQsIGVuZCkge1xuICB2YXIgdG1wXG4gIHZhciBvdXRwdXQgPSBbXVxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykge1xuICAgIHRtcCA9XG4gICAgICAoKHVpbnQ4W2ldIDw8IDE2KSAmIDB4RkYwMDAwKSArXG4gICAgICAoKHVpbnQ4W2kgKyAxXSA8PCA4KSAmIDB4RkYwMCkgK1xuICAgICAgKHVpbnQ4W2kgKyAyXSAmIDB4RkYpXG4gICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpXG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkge1xuICB2YXIgdG1wXG4gIHZhciBsZW4gPSB1aW50OC5sZW5ndGhcbiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG4gIHZhciBwYXJ0cyA9IFtdXG4gIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzIC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgM1xuXG4gIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcbiAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkge1xuICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpXG4gIH1cblxuICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG4gIGlmIChleHRyYUJ5dGVzID09PSAxKSB7XG4gICAgdG1wID0gdWludDhbbGVuIC0gMV1cbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgbG9va3VwW3RtcCA+PiAyXSArXG4gICAgICBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdICtcbiAgICAgICc9PSdcbiAgICApXG4gIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikge1xuICAgIHRtcCA9ICh1aW50OFtsZW4gLSAyXSA8PCA4KSArIHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMTBdICtcbiAgICAgIGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXSArXG4gICAgICAnPSdcbiAgICApXG4gIH1cblxuICByZXR1cm4gcGFydHMuam9pbignJylcbn1cbiIsImltcG9ydCB7IHpvZFRvSnNvblNjaGVtYSB9IGZyb20gXCJ6b2QtdG8tanNvbi1zY2hlbWFcIjtcbi8qKlxuICogRm9ybWF0cyBhIGBTdHJ1Y3R1cmVkVG9vbGAgaW5zdGFuY2UgaW50byBhIGZvcm1hdCB0aGF0IGlzIGNvbXBhdGlibGVcbiAqIHdpdGggT3BlbkFJJ3MgQ2hhdENvbXBsZXRpb25GdW5jdGlvbnMuIEl0IHVzZXMgdGhlIGB6b2RUb0pzb25TY2hlbWFgXG4gKiBmdW5jdGlvbiB0byBjb252ZXJ0IHRoZSBzY2hlbWEgb2YgdGhlIGBTdHJ1Y3R1cmVkVG9vbGAgaW50byBhIEpTT05cbiAqIHNjaGVtYSwgd2hpY2ggaXMgdGhlbiB1c2VkIGFzIHRoZSBwYXJhbWV0ZXJzIGZvciB0aGUgT3BlbkFJIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VG9PcGVuQUlGdW5jdGlvbih0b29sKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKHRvb2wuc2NoZW1hKSxcbiAgICB9O1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnpvZFRvSnNvblNjaGVtYSA9IHZvaWQgMDtcbmNvbnN0IHpvZFRvSnNvblNjaGVtYV8xID0gcmVxdWlyZShcIi4vc3JjL3pvZFRvSnNvblNjaGVtYVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInpvZFRvSnNvblNjaGVtYVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gem9kVG9Kc29uU2NoZW1hXzEuem9kVG9Kc29uU2NoZW1hOyB9IH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gem9kVG9Kc29uU2NoZW1hXzEuem9kVG9Kc29uU2NoZW1hO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnpvZFRvSnNvblNjaGVtYSA9IHZvaWQgMDtcbmNvbnN0IHBhcnNlRGVmXzEgPSByZXF1aXJlKFwiLi9wYXJzZURlZlwiKTtcbmNvbnN0IFJlZnNfMSA9IHJlcXVpcmUoXCIuL1JlZnNcIik7XG5jb25zdCB6b2RUb0pzb25TY2hlbWEgPSAoc2NoZW1hLCBvcHRpb25zKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHJlZnMgPSAoMCwgUmVmc18xLmdldFJlZnMpKG9wdGlvbnMpO1xuICAgIGNvbnN0IGRlZmluaXRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5kZWZpbml0aW9uc1xuICAgICAgICA/IE9iamVjdC5lbnRyaWVzKG9wdGlvbnMuZGVmaW5pdGlvbnMpLnJlZHVjZSgoYWNjLCBbbmFtZSwgc2NoZW1hXSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGFjYyksIHsgW25hbWVdOiAoX2EgPSAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoc2NoZW1hLl9kZWYsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVmcyksIHsgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSB9KSwgdHJ1ZSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9IH0pKTtcbiAgICAgICAgfSwge30pXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/IG9wdGlvbnMgOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubmFtZTtcbiAgICBjb25zdCBtYWluID0gKF9hID0gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWRcbiAgICAgICAgPyByZWZzXG4gICAgICAgIDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZWZzKSwgeyBjdXJyZW50UGF0aDogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdIH0pLCBmYWxzZSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gZGVmaW5pdGlvbnNcbiAgICAgICAgICAgID8gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYWluKSwgeyBbcmVmcy5kZWZpbml0aW9uUGF0aF06IGRlZmluaXRpb25zIH0pIDogbWFpblxuICAgICAgICA6IHtcbiAgICAgICAgICAgICRyZWY6IFtcbiAgICAgICAgICAgICAgICAuLi4ocmVmcy4kcmVmU3RyYXRlZ3kgPT09IFwicmVsYXRpdmVcIiA/IFtdIDogcmVmcy5iYXNlUGF0aCksXG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uUGF0aCxcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgXS5qb2luKFwiL1wiKSxcbiAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZpbml0aW9ucyksIHsgW25hbWVdOiBtYWluIH0pLFxuICAgICAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gXCJqc29uU2NoZW1hN1wiKSB7XG4gICAgICAgIGNvbWJpbmVkLiRzY2hlbWEgPSBcImh0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hI1wiO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gXCJqc29uU2NoZW1hMjAxOS0wOVwiKSB7XG4gICAgICAgIGNvbWJpbmVkLiRzY2hlbWEgPSBcImh0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hI1wiO1xuICAgIH1cbiAgICByZXR1cm4gY29tYmluZWQ7XG59O1xuZXhwb3J0cy56b2RUb0pzb25TY2hlbWEgPSB6b2RUb0pzb25TY2hlbWE7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VEZWYgPSB2b2lkIDA7XG5jb25zdCB6b2RfMSA9IHJlcXVpcmUoXCJ6b2RcIik7XG5jb25zdCBhbnlfMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvYW55XCIpO1xuY29uc3QgYXJyYXlfMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvYXJyYXlcIik7XG5jb25zdCBiaWdpbnRfMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvYmlnaW50XCIpO1xuY29uc3QgYm9vbGVhbl8xID0gcmVxdWlyZShcIi4vcGFyc2Vycy9ib29sZWFuXCIpO1xuY29uc3QgYnJhbmRlZF8xID0gcmVxdWlyZShcIi4vcGFyc2Vycy9icmFuZGVkXCIpO1xuY29uc3QgY2F0Y2hfMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvY2F0Y2hcIik7XG5jb25zdCBkYXRlXzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL2RhdGVcIik7XG5jb25zdCBkZWZhdWx0XzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL2RlZmF1bHRcIik7XG5jb25zdCBlZmZlY3RzXzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL2VmZmVjdHNcIik7XG5jb25zdCBlbnVtXzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL2VudW1cIik7XG5jb25zdCBpbnRlcnNlY3Rpb25fMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvaW50ZXJzZWN0aW9uXCIpO1xuY29uc3QgbGl0ZXJhbF8xID0gcmVxdWlyZShcIi4vcGFyc2Vycy9saXRlcmFsXCIpO1xuY29uc3QgbWFwXzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL21hcFwiKTtcbmNvbnN0IG5hdGl2ZUVudW1fMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvbmF0aXZlRW51bVwiKTtcbmNvbnN0IG5ldmVyXzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL25ldmVyXCIpO1xuY29uc3QgbnVsbF8xID0gcmVxdWlyZShcIi4vcGFyc2Vycy9udWxsXCIpO1xuY29uc3QgbnVsbGFibGVfMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvbnVsbGFibGVcIik7XG5jb25zdCBudW1iZXJfMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvbnVtYmVyXCIpO1xuY29uc3Qgb2JqZWN0XzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL29iamVjdFwiKTtcbmNvbnN0IG9wdGlvbmFsXzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL29wdGlvbmFsXCIpO1xuY29uc3QgcGlwZWxpbmVfMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvcGlwZWxpbmVcIik7XG5jb25zdCBwcm9taXNlXzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL3Byb21pc2VcIik7XG5jb25zdCByZWNvcmRfMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvcmVjb3JkXCIpO1xuY29uc3Qgc2V0XzEgPSByZXF1aXJlKFwiLi9wYXJzZXJzL3NldFwiKTtcbmNvbnN0IHN0cmluZ18xID0gcmVxdWlyZShcIi4vcGFyc2Vycy9zdHJpbmdcIik7XG5jb25zdCB0dXBsZV8xID0gcmVxdWlyZShcIi4vcGFyc2Vycy90dXBsZVwiKTtcbmNvbnN0IHVuZGVmaW5lZF8xID0gcmVxdWlyZShcIi4vcGFyc2Vycy91bmRlZmluZWRcIik7XG5jb25zdCB1bmlvbl8xID0gcmVxdWlyZShcIi4vcGFyc2Vycy91bmlvblwiKTtcbmNvbnN0IHVua25vd25fMSA9IHJlcXVpcmUoXCIuL3BhcnNlcnMvdW5rbm93blwiKTtcbmZ1bmN0aW9uIHBhcnNlRGVmKGRlZiwgcmVmcywgZm9yY2VSZXNvbHV0aW9uID0gZmFsc2UgLy8gRm9yY2VzIGEgbmV3IHNjaGVtYSB0byBiZSBpbnN0YW50aWF0ZWQgZXZlbiB0aG91Z2ggaXRzIGRlZiBoYXMgYmVlbiBzZWVuLiBVc2VkIGZvciBpbXByb3ZpbmcgcmVmcyBpbiBkZWZpbml0aW9ucy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9TdGVmYW5UZXJkZWxsL3pvZC10by1qc29uLXNjaGVtYS9wdWxsLzYxLlxuKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHNlZW5JdGVtICYmICFmb3JjZVJlc29sdXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2VlblNjaGVtYSA9IGdldCRyZWYoc2Vlbkl0ZW0sIHJlZnMpO1xuICAgICAgICBpZiAoc2VlblNjaGVtYSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VlblNjaGVtYTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXdJdGVtID0geyBkZWYsIHBhdGg6IHJlZnMuY3VycmVudFBhdGgsIGpzb25TY2hlbWE6IHVuZGVmaW5lZCB9O1xuICAgIHJlZnMuc2Vlbi5zZXQoZGVmLCBuZXdJdGVtKTtcbiAgICBjb25zdCBqc29uU2NoZW1hID0gc2VsZWN0UGFyc2VyKGRlZiwgZGVmLnR5cGVOYW1lLCByZWZzKTtcbiAgICBpZiAoanNvblNjaGVtYSkge1xuICAgICAgICBhZGRNZXRhKGRlZiwgcmVmcywganNvblNjaGVtYSk7XG4gICAgfVxuICAgIG5ld0l0ZW0uanNvblNjaGVtYSA9IGpzb25TY2hlbWE7XG4gICAgcmV0dXJuIGpzb25TY2hlbWE7XG59XG5leHBvcnRzLnBhcnNlRGVmID0gcGFyc2VEZWY7XG5jb25zdCBnZXQkcmVmID0gKGl0ZW0sIHJlZnMpID0+IHtcbiAgICBzd2l0Y2ggKHJlZnMuJHJlZlN0cmF0ZWd5KSB7XG4gICAgICAgIGNhc2UgXCJyb290XCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICRyZWY6IGl0ZW0ucGF0aC5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICAgIDogaXRlbS5wYXRoLmxlbmd0aCA9PT0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgJHtpdGVtLnBhdGhbMF19L2BcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaXRlbS5wYXRoLmpvaW4oXCIvXCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBcInJlbGF0aXZlXCI6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlIFwibm9uZVwiOiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5wYXRoLmxlbmd0aCA8IHJlZnMuY3VycmVudFBhdGgubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgaXRlbS5wYXRoLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHJlZnMuY3VycmVudFBhdGhbaW5kZXhdID09PSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJlY3Vyc2l2ZSByZWZlcmVuY2UgZGV0ZWN0ZWQgYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oXCIvXCIpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJzZWVuXCI6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbihcIi9cIil9ISBEZWZhdWx0aW5nIHRvIGFueWApO1xuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmpzb25TY2hlbWE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuY29uc3QgZ2V0UmVsYXRpdmVQYXRoID0gKHBhdGhBLCBwYXRoQikgPT4ge1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKDsgaSA8IHBhdGhBLmxlbmd0aCAmJiBpIDwgcGF0aEIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHBhdGhBW2ldICE9PSBwYXRoQltpXSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gWyhwYXRoQS5sZW5ndGggLSBpKS50b1N0cmluZygpLCAuLi5wYXRoQi5zbGljZShpKV0uam9pbihcIi9cIik7XG59O1xuY29uc3Qgc2VsZWN0UGFyc2VyID0gKGRlZiwgdHlwZU5hbWUsIHJlZnMpID0+IHtcbiAgICBzd2l0Y2ggKHR5cGVOYW1lKSB7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZzpcbiAgICAgICAgICAgIHJldHVybiAoMCwgc3RyaW5nXzEucGFyc2VTdHJpbmdEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bWJlcjpcbiAgICAgICAgICAgIHJldHVybiAoMCwgbnVtYmVyXzEucGFyc2VOdW1iZXJEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiAoMCwgb2JqZWN0XzEucGFyc2VPYmplY3REZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJpZ0ludDpcbiAgICAgICAgICAgIHJldHVybiAoMCwgYmlnaW50XzEucGFyc2VCaWdpbnREZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW46XG4gICAgICAgICAgICByZXR1cm4gKDAsIGJvb2xlYW5fMS5wYXJzZUJvb2xlYW5EZWYpKCk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGU6XG4gICAgICAgICAgICByZXR1cm4gKDAsIGRhdGVfMS5wYXJzZURhdGVEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuZGVmaW5lZDpcbiAgICAgICAgICAgIHJldHVybiAoMCwgdW5kZWZpbmVkXzEucGFyc2VVbmRlZmluZWREZWYpKCk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gKDAsIG51bGxfMS5wYXJzZU51bGxEZWYpKHJlZnMpO1xuICAgICAgICBjYXNlIHpvZF8xLlpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiAoMCwgYXJyYXlfMS5wYXJzZUFycmF5RGVmKShkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIHpvZF8xLlpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbjpcbiAgICAgICAgY2FzZSB6b2RfMS5ab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uOlxuICAgICAgICAgICAgcmV0dXJuICgwLCB1bmlvbl8xLnBhcnNlVW5pb25EZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEludGVyc2VjdGlvbjpcbiAgICAgICAgICAgIHJldHVybiAoMCwgaW50ZXJzZWN0aW9uXzEucGFyc2VJbnRlcnNlY3Rpb25EZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFR1cGxlOlxuICAgICAgICAgICAgcmV0dXJuICgwLCB0dXBsZV8xLnBhcnNlVHVwbGVEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZDpcbiAgICAgICAgICAgIHJldHVybiAoMCwgcmVjb3JkXzEucGFyc2VSZWNvcmREZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExpdGVyYWw6XG4gICAgICAgICAgICByZXR1cm4gKDAsIGxpdGVyYWxfMS5wYXJzZUxpdGVyYWxEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW06XG4gICAgICAgICAgICByZXR1cm4gKDAsIGVudW1fMS5wYXJzZUVudW1EZWYpKGRlZik7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW06XG4gICAgICAgICAgICByZXR1cm4gKDAsIG5hdGl2ZUVudW1fMS5wYXJzZU5hdGl2ZUVudW1EZWYpKGRlZik7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGxhYmxlOlxuICAgICAgICAgICAgcmV0dXJuICgwLCBudWxsYWJsZV8xLnBhcnNlTnVsbGFibGVEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9wdGlvbmFsOlxuICAgICAgICAgICAgcmV0dXJuICgwLCBvcHRpb25hbF8xLnBhcnNlT3B0aW9uYWxEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiAoMCwgbWFwXzEucGFyc2VNYXBEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFNldDpcbiAgICAgICAgICAgIHJldHVybiAoMCwgc2V0XzEucGFyc2VTZXREZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmdldHRlcigpLl9kZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIHpvZF8xLlpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlOlxuICAgICAgICAgICAgcmV0dXJuICgwLCBwcm9taXNlXzEucGFyc2VQcm9taXNlRGVmKShkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIHpvZF8xLlpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU46XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5ldmVyOlxuICAgICAgICAgICAgcmV0dXJuICgwLCBuZXZlcl8xLnBhcnNlTmV2ZXJEZWYpKCk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHM6XG4gICAgICAgICAgICByZXR1cm4gKDAsIGVmZmVjdHNfMS5wYXJzZUVmZmVjdHNEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiAoMCwgYW55XzEucGFyc2VBbnlEZWYpKCk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVua25vd246XG4gICAgICAgICAgICByZXR1cm4gKDAsIHVua25vd25fMS5wYXJzZVVua25vd25EZWYpKCk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gKDAsIGRlZmF1bHRfMS5wYXJzZURlZmF1bHREZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQ6XG4gICAgICAgICAgICByZXR1cm4gKDAsIGJyYW5kZWRfMS5wYXJzZUJyYW5kZWREZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuICgwLCBjYXRjaF8xLnBhcnNlQ2F0Y2hEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lOlxuICAgICAgICAgICAgcmV0dXJuICgwLCBwaXBlbGluZV8xLnBhcnNlUGlwZWxpbmVEZWYpKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2Ugem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEZ1bmN0aW9uOlxuICAgICAgICBjYXNlIHpvZF8xLlpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RWb2lkOlxuICAgICAgICBjYXNlIHpvZF8xLlpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2w6XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICgoXykgPT4gdW5kZWZpbmVkKSh0eXBlTmFtZSk7XG4gICAgfVxufTtcbmNvbnN0IGFkZE1ldGEgPSAoZGVmLCByZWZzLCBqc29uU2NoZW1hKSA9PiB7XG4gICAgaWYgKGRlZi5kZXNjcmlwdGlvbikge1xuICAgICAgICBqc29uU2NoZW1hLmRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICBpZiAocmVmcy5tYXJrZG93bkRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBqc29uU2NoZW1hLm1hcmtkb3duRGVzY3JpcHRpb24gPSBkZWYuZGVzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGpzb25TY2hlbWE7XG59O1xuIiwidmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKHZhbCkgPT4gdmFsO1xuICAgIGZ1bmN0aW9uIGFzc2VydElzKF9hcmcpIHsgfVxuICAgIHV0aWwuYXNzZXJ0SXMgPSBhc3NlcnRJcztcbiAgICBmdW5jdGlvbiBhc3NlcnROZXZlcihfeCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG4gICAgdXRpbC5hc3NlcnROZXZlciA9IGFzc2VydE5ldmVyO1xuICAgIHV0aWwuYXJyYXlUb0VudW0gPSAoaXRlbXMpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgb2JqW2l0ZW1dID0gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG4gICAgdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkS2V5cyA9IHV0aWwub2JqZWN0S2V5cyhvYmopLmZpbHRlcigoaykgPT4gdHlwZW9mIG9ialtvYmpba11dICE9PSBcIm51bWJlclwiKTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIHZhbGlkS2V5cykge1xuICAgICAgICAgICAgZmlsdGVyZWRba10gPSBvYmpba107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKGZpbHRlcmVkKTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0VmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RLZXlzKG9iaikubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2VdO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0S2V5cyA9IHR5cGVvZiBPYmplY3Qua2V5cyA9PT0gXCJmdW5jdGlvblwiIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA/IChvYmopID0+IE9iamVjdC5rZXlzKG9iaikgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKG9iamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH07XG4gICAgdXRpbC5maW5kID0gKGFyciwgY2hlY2tlcikgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tlcihpdGVtKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgdXRpbC5pc0ludGVnZXIgPSB0eXBlb2YgTnVtYmVyLmlzSW50ZWdlciA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gKHZhbCkgPT4gTnVtYmVyLmlzSW50ZWdlcih2YWwpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgJiYgaXNGaW5pdGUodmFsKSAmJiBNYXRoLmZsb29yKHZhbCkgPT09IHZhbDtcbiAgICBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcIiB8IFwiKSB7XG4gICAgICAgIHJldHVybiBhcnJheVxuICAgICAgICAgICAgLm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKVxuICAgICAgICAgICAgLmpvaW4oc2VwYXJhdG9yKTtcbiAgICB9XG4gICAgdXRpbC5qb2luVmFsdWVzID0gam9pblZhbHVlcztcbiAgICB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciA9IChfLCB2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbn0pKHV0aWwgfHwgKHV0aWwgPSB7fSkpO1xudmFyIG9iamVjdFV0aWw7XG4oZnVuY3Rpb24gKG9iamVjdFV0aWwpIHtcbiAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmZpcnN0LFxuICAgICAgICAgICAgLi4uc2Vjb25kLCAvLyBzZWNvbmQgb3ZlcndyaXRlcyBmaXJzdFxuICAgICAgICB9O1xuICAgIH07XG59KShvYmplY3RVdGlsIHx8IChvYmplY3RVdGlsID0ge30pKTtcbmNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmNvbnN0IGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkO1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zdHJpbmc7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBpc05hTihkYXRhKSA/IFpvZFBhcnNlZFR5cGUubmFuIDogWm9kUGFyc2VkVHlwZS5udW1iZXI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmZ1bmN0aW9uO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5iaWdpbnQ7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICBkYXRhLmNhdGNoICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5vYmplY3Q7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmtub3duO1xuICAgIH1cbn07XG5cbmNvbnN0IFpvZElzc3VlQ29kZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwiaW52YWxpZF90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2xpdGVyYWxcIixcbiAgICBcImN1c3RvbVwiLFxuICAgIFwiaW52YWxpZF91bmlvblwiLFxuICAgIFwiaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yXCIsXG4gICAgXCJpbnZhbGlkX2VudW1fdmFsdWVcIixcbiAgICBcInVucmVjb2duaXplZF9rZXlzXCIsXG4gICAgXCJpbnZhbGlkX2FyZ3VtZW50c1wiLFxuICAgIFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiLFxuICAgIFwiaW52YWxpZF9kYXRlXCIsXG4gICAgXCJpbnZhbGlkX3N0cmluZ1wiLFxuICAgIFwidG9vX3NtYWxsXCIsXG4gICAgXCJ0b29fYmlnXCIsXG4gICAgXCJpbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlc1wiLFxuICAgIFwibm90X211bHRpcGxlX29mXCIsXG4gICAgXCJub3RfZmluaXRlXCIsXG5dKTtcbmNvbnN0IHF1b3RlbGVzc0pzb24gPSAob2JqKSA9PiB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvXCIoW15cIl0rKVwiOi9nLCBcIiQxOlwiKTtcbn07XG5jbGFzcyBab2RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZElzc3VlcyA9IChzdWJzID0gW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCAuLi5zdWJzXTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvdG8gPSBuZXcudGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IGFjdHVhbFByb3RvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgfVxuICAgIGdldCBlcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3VlcztcbiAgICB9XG4gICAgZm9ybWF0KF9tYXBwZXIpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyID0gX21hcHBlciB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3JldHVybl90eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLnJldHVyblR5cGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUuYXJndW1lbnRzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5wYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXNzdWUucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gaXNzdWUucGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAodHlwZW9mIGVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBlcnJvckFycmF5OiBhbnkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVycm9yQXJyYXkuX2Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCBlcnJvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvY2Vzc0Vycm9yKHRoaXMpO1xuICAgICAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuaXNzdWVzLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICBmbGF0dGVuKG1hcHBlciA9IChpc3N1ZSkgPT4gaXNzdWUubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHt9O1xuICAgICAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIHRoaXMuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoc3ViLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSA9IGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSB8fCBbXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcblxuY29uc3QgZXJyb3JNYXAgPSAoaXNzdWUsIF9jdHgpID0+IHtcbiAgICBsZXQgbWVzc2FnZTtcbiAgICBzd2l0Y2ggKGlzc3VlLmNvZGUpIHtcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnJlY2VpdmVkID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlJlcXVpcmVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEV4cGVjdGVkICR7aXNzdWUuZXhwZWN0ZWR9LCByZWNlaXZlZCAke2lzc3VlLnJlY2VpdmVkfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGxpdGVyYWwgdmFsdWUsIGV4cGVjdGVkICR7SlNPTi5zdHJpbmdpZnkoaXNzdWUuZXhwZWN0ZWQsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyKX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBVbnJlY29nbml6ZWQga2V5KHMpIGluIG9iamVjdDogJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUua2V5cywgXCIsIFwiKX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb246XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBkaXNjcmltaW5hdG9yIHZhbHVlLiBFeHBlY3RlZCAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5vcHRpb25zKX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBlbnVtIHZhbHVlLiBFeHBlY3RlZCAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5vcHRpb25zKX0sIHJlY2VpdmVkICcke2lzc3VlLnJlY2VpdmVkfSdgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfYXJndW1lbnRzOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIGFyZ3VtZW50c2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBmdW5jdGlvbiByZXR1cm4gdHlwZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9kYXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRhdGVgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nOlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZS52YWxpZGF0aW9uID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5jbHVkZXNcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBpbmNsdWRlIFwiJHtpc3N1ZS52YWxpZGF0aW9uLmluY2x1ZGVzfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZS52YWxpZGF0aW9uLnBvc2l0aW9uID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gYXQgb25lIG9yIG1vcmUgcG9zaXRpb25zIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAke2lzc3VlLnZhbGlkYXRpb24ucG9zaXRpb259YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChcInN0YXJ0c1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBzdGFydCB3aXRoIFwiJHtpc3N1ZS52YWxpZGF0aW9uLnN0YXJ0c1dpdGh9XCJgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChcImVuZHNXaXRoXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3QgZW5kIHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uZW5kc1dpdGh9XCJgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihpc3N1ZS52YWxpZGF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS52YWxpZGF0aW9uICE9PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgJHtpc3N1ZS52YWxpZGF0aW9ufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudG9vX3NtYWxsOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gXCJleGFjdGx5XCIgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbGVhc3RgIDogYG1vcmUgdGhhbmB9ICR7aXNzdWUubWluaW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gXCJleGFjdGx5XCIgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbGVhc3RgIDogYG92ZXJgfSAke2lzc3VlLm1pbmltdW19IGNoYXJhY3RlcihzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdFxuICAgICAgICAgICAgICAgICAgICA/IGBleGFjdGx5IGVxdWFsIHRvIGBcbiAgICAgICAgICAgICAgICAgICAgOiBpc3N1ZS5pbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3RcbiAgICAgICAgICAgICAgICAgICAgPyBgZXhhY3RseSBlcXVhbCB0byBgXG4gICAgICAgICAgICAgICAgICAgIDogaXNzdWUuaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBgZ3JlYXRlciB0aGFuIGB9JHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWluaW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19iaWc6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgdW5kZXJgfSAke2lzc3VlLm1heGltdW19IGNoYXJhY3RlcihzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdFxuICAgICAgICAgICAgICAgICAgICA/IGBleGFjdGx5YFxuICAgICAgICAgICAgICAgICAgICA6IGlzc3VlLmluY2x1c2l2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImJpZ2ludFwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQmlnSW50IG11c3QgYmUgJHtpc3N1ZS5leGFjdFxuICAgICAgICAgICAgICAgICAgICA/IGBleGFjdGx5YFxuICAgICAgICAgICAgICAgICAgICA6IGlzc3VlLmluY2x1c2l2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0XG4gICAgICAgICAgICAgICAgICAgID8gYGV4YWN0bHlgXG4gICAgICAgICAgICAgICAgICAgIDogaXNzdWUuaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGBzbWFsbGVyIHRoYW4gb3IgZXF1YWwgdG9gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGBzbWFsbGVyIHRoYW5gfSAke25ldyBEYXRlKE51bWJlcihpc3N1ZS5tYXhpbXVtKSl9YDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuY3VzdG9tOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlczpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW50ZXJzZWN0aW9uIHJlc3VsdHMgY291bGQgbm90IGJlIG1lcmdlZGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSBhIG11bHRpcGxlIG9mICR7aXNzdWUubXVsdGlwbGVPZn1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9maW5pdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJOdW1iZXIgbXVzdCBiZSBmaW5pdGVcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbWVzc2FnZSA9IF9jdHguZGVmYXVsdEVycm9yO1xuICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihpc3N1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7IG1lc3NhZ2UgfTtcbn07XG5cbmxldCBvdmVycmlkZUVycm9yTWFwID0gZXJyb3JNYXA7XG5mdW5jdGlvbiBzZXRFcnJvck1hcChtYXApIHtcbiAgICBvdmVycmlkZUVycm9yTWFwID0gbWFwO1xufVxuZnVuY3Rpb24gZ2V0RXJyb3JNYXAoKSB7XG4gICAgcmV0dXJuIG92ZXJyaWRlRXJyb3JNYXA7XG59XG5cbmNvbnN0IG1ha2VJc3N1ZSA9IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIHBhdGgsIGVycm9yTWFwcywgaXNzdWVEYXRhIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgZnVsbFBhdGggPSBbLi4ucGF0aCwgLi4uKGlzc3VlRGF0YS5wYXRoIHx8IFtdKV07XG4gICAgY29uc3QgZnVsbElzc3VlID0ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgIH07XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgY29uc3QgbWFwcyA9IGVycm9yTWFwc1xuICAgICAgICAuZmlsdGVyKChtKSA9PiAhIW0pXG4gICAgICAgIC5zbGljZSgpXG4gICAgICAgIC5yZXZlcnNlKCk7XG4gICAgZm9yIChjb25zdCBtYXAgb2YgbWFwcykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBtYXAoZnVsbElzc3VlLCB7IGRhdGEsIGRlZmF1bHRFcnJvcjogZXJyb3JNZXNzYWdlIH0pLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgIG1lc3NhZ2U6IGlzc3VlRGF0YS5tZXNzYWdlIHx8IGVycm9yTWVzc2FnZSxcbiAgICB9O1xufTtcbmNvbnN0IEVNUFRZX1BBVEggPSBbXTtcbmZ1bmN0aW9uIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgaXNzdWVEYXRhKSB7XG4gICAgY29uc3QgaXNzdWUgPSBtYWtlSXNzdWUoe1xuICAgICAgICBpc3N1ZURhdGE6IGlzc3VlRGF0YSxcbiAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICBlcnJvck1hcHM6IFtcbiAgICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgY3R4LnNjaGVtYUVycm9yTWFwLFxuICAgICAgICAgICAgZ2V0RXJyb3JNYXAoKSxcbiAgICAgICAgICAgIGVycm9yTWFwLCAvLyB0aGVuIGdsb2JhbCBkZWZhdWx0IG1hcFxuICAgICAgICBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICB9KTtcbiAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKGlzc3VlKTtcbn1cbmNsYXNzIFBhcnNlU3RhdHVzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwidmFsaWRcIjtcbiAgICB9XG4gICAgZGlydHkoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBcInZhbGlkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJkaXJ0eVwiO1xuICAgIH1cbiAgICBhYm9ydCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiYWJvcnRlZFwiO1xuICAgIH1cbiAgICBzdGF0aWMgbWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpIHtcbiAgICAgICAgY29uc3QgYXJyYXlWYWx1ZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmIChzLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgYXJyYXlWYWx1ZS5wdXNoKHMudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogYXJyYXlWYWx1ZSB9O1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgbWVyZ2VPYmplY3RBc3luYyhzdGF0dXMsIHBhaXJzKSB7XG4gICAgICAgIGNvbnN0IHN5bmNQYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IGF3YWl0IHBhaXIua2V5LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBwYWlyLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHN5bmNQYWlycyk7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBmaW5hbE9iamVjdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gcGFpcjtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmIChrZXkudmFsdWUgIT09IFwiX19wcm90b19fXCIgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIHZhbHVlLnZhbHVlICE9PSBcInVuZGVmaW5lZFwiIHx8IHBhaXIuYWx3YXlzU2V0KSkge1xuICAgICAgICAgICAgICAgIGZpbmFsT2JqZWN0W2tleS52YWx1ZV0gPSB2YWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsT2JqZWN0IH07XG4gICAgfVxufVxuY29uc3QgSU5WQUxJRCA9IE9iamVjdC5mcmVlemUoe1xuICAgIHN0YXR1czogXCJhYm9ydGVkXCIsXG59KTtcbmNvbnN0IERJUlRZID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwiZGlydHlcIiwgdmFsdWUgfSk7XG5jb25zdCBPSyA9ICh2YWx1ZSkgPT4gKHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlIH0pO1xuY29uc3QgaXNBYm9ydGVkID0gKHgpID0+IHguc3RhdHVzID09PSBcImFib3J0ZWRcIjtcbmNvbnN0IGlzRGlydHkgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiZGlydHlcIjtcbmNvbnN0IGlzVmFsaWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwidmFsaWRcIjtcbmNvbnN0IGlzQXN5bmMgPSAoeCkgPT4gdHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIgJiYgeCBpbnN0YW5jZW9mIFByb21pc2U7XG5cbnZhciBlcnJvclV0aWw7XG4oZnVuY3Rpb24gKGVycm9yVXRpbCkge1xuICAgIGVycm9yVXRpbC5lcnJUb09iaiA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZSB8fCB7fTtcbiAgICBlcnJvclV0aWwudG9TdHJpbmcgPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZSA9PT0gbnVsbCB8fCBtZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXNzYWdlLm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG5cbmNsYXNzIFBhcnNlSW5wdXRMYXp5UGF0aCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCB2YWx1ZSwgcGF0aCwga2V5KSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZFBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZWRQYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2tleSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIC4uLnRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgdGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUGF0aDtcbiAgICB9XG59XG5jb25zdCBoYW5kbGVSZXN1bHQgPSAoY3R4LCByZXN1bHQpID0+IHtcbiAgICBpZiAoaXNWYWxpZChyZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdC52YWx1ZSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFjdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZhbGlkYXRpb24gZmFpbGVkIGJ1dCBubyBpc3N1ZXMgZGV0ZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihjdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn07XG5mdW5jdGlvbiBwcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zKVxuICAgICAgICByZXR1cm4ge307XG4gICAgY29uc3QgeyBlcnJvck1hcCwgaW52YWxpZF90eXBlX2Vycm9yLCByZXF1aXJlZF9lcnJvciwgZGVzY3JpcHRpb24gfSA9IHBhcmFtcztcbiAgICBpZiAoZXJyb3JNYXAgJiYgKGludmFsaWRfdHlwZV9lcnJvciB8fCByZXF1aXJlZF9lcnJvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCB1c2UgXCJpbnZhbGlkX3R5cGVfZXJyb3JcIiBvciBcInJlcXVpcmVkX2Vycm9yXCIgaW4gY29uanVuY3Rpb24gd2l0aCBjdXN0b20gZXJyb3IgbWFwLmApO1xuICAgIH1cbiAgICBpZiAoZXJyb3JNYXApXG4gICAgICAgIHJldHVybiB7IGVycm9yTWFwOiBlcnJvck1hcCwgZGVzY3JpcHRpb24gfTtcbiAgICBjb25zdCBjdXN0b21NYXAgPSAoaXNzLCBjdHgpID0+IHtcbiAgICAgICAgaWYgKGlzcy5jb2RlICE9PSBcImludmFsaWRfdHlwZVwiKVxuICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiByZXF1aXJlZF9lcnJvciAhPT0gbnVsbCAmJiByZXF1aXJlZF9lcnJvciAhPT0gdm9pZCAwID8gcmVxdWlyZWRfZXJyb3IgOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogaW52YWxpZF90eXBlX2Vycm9yICE9PSBudWxsICYmIGludmFsaWRfdHlwZV9lcnJvciAhPT0gdm9pZCAwID8gaW52YWxpZF90eXBlX2Vycm9yIDogY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgZXJyb3JNYXA6IGN1c3RvbU1hcCwgZGVzY3JpcHRpb24gfTtcbn1cbmNsYXNzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKGRlZikge1xuICAgICAgICAvKiogQWxpYXMgb2Ygc2FmZVBhcnNlQXN5bmMgKi9cbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNhZmVQYXJzZUFzeW5jO1xuICAgICAgICB0aGlzLl9kZWYgPSBkZWY7XG4gICAgICAgIHRoaXMucGFyc2UgPSB0aGlzLnBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2FmZVBhcnNlID0gdGhpcy5zYWZlUGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJzZUFzeW5jID0gdGhpcy5wYXJzZUFzeW5jLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2FmZVBhcnNlQXN5bmMgPSB0aGlzLnNhZmVQYXJzZUFzeW5jLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zcGEuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmUgPSB0aGlzLnJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZW1lbnQgPSB0aGlzLnJlZmluZW1lbnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdXBlclJlZmluZSA9IHRoaXMuc3VwZXJSZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vcHRpb25hbCA9IHRoaXMub3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5udWxsYWJsZSA9IHRoaXMubnVsbGFibGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5udWxsaXNoID0gdGhpcy5udWxsaXNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXkgPSB0aGlzLmFycmF5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IHRoaXMucHJvbWlzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9yID0gdGhpcy5vci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFuZCA9IHRoaXMuYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gdGhpcy50cmFuc2Zvcm0uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5icmFuZCA9IHRoaXMuYnJhbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gdGhpcy5kZWZhdWx0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2F0Y2ggPSB0aGlzLmNhdGNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVzY3JpYmUgPSB0aGlzLmRlc2NyaWJlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGlwZSA9IHRoaXMucGlwZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gdGhpcy5yZWFkb25seS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzTnVsbGFibGUgPSB0aGlzLmlzTnVsbGFibGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc09wdGlvbmFsID0gdGhpcy5pc09wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgX2dldFR5cGUoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIF9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KSB7XG4gICAgICAgIHJldHVybiAoY3R4IHx8IHtcbiAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogbmV3IFBhcnNlU3RhdHVzKCksXG4gICAgICAgICAgICBjdHg6IHtcbiAgICAgICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpLFxuICAgICAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9wYXJzZVN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICBpZiAoaXNBc3luYyhyZXN1bHQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeW5jaHJvbm91cyBwYXJzZSBlbmNvdW50ZXJlZCBwcm9taXNlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBfcGFyc2VBc3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICB9XG4gICAgcGFyc2UoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2FmZVBhcnNlKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBzYWZlUGFyc2UoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogKF9hID0gcGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmFzeW5jKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5lcnJvck1hcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLnBhdGgpIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLnBhdGgpIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpXG4gICAgICAgICAgICA/IG1heWJlQXN5bmNSZXN1bHRcbiAgICAgICAgICAgIDogUHJvbWlzZS5yZXNvbHZlKG1heWJlQXN5bmNSZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJlZmluZShjaGVjaywgbWVzc2FnZSkge1xuICAgICAgICBjb25zdCBnZXRJc3N1ZVByb3BlcnRpZXMgPSAodmFsKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG1lc3NhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJc3N1ZVByb3BlcnRpZXModmFsKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGVjayh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICAgICAgICAgID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpXG4gICAgICAgICAgICAgICAgICAgIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlZmluZW1lbnQocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicmVmaW5lbWVudFwiLCByZWZpbmVtZW50IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdXBlclJlZmluZShyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICAgIH1cbiAgICBvcHRpb25hbCgpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBudWxsYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBudWxsaXNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5udWxsYWJsZSgpLm9wdGlvbmFsKCk7XG4gICAgfVxuICAgIGFycmF5KCkge1xuICAgICAgICByZXR1cm4gWm9kQXJyYXkuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlthLXpdW2EtejAtOV0qJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLztcbi8vIGNvbnN0IHV1aWRSZWdleCA9XG4vLyAgIC9eKFthLWYwLTldezh9LVthLWYwLTldezR9LVsxLTVdW2EtZjAtOV17M30tW2EtZjAtOV17NH0tW2EtZjAtOV17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7XG5jb25zdCB1dWlkUmVnZXggPSAvXlswLTlhLWZBLUZdezh9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezEyfSQvaTtcbi8vIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ2MTgxLzE1NTAxNTVcbi8vIG9sZCB2ZXJzaW9uOiB0b28gc2xvdywgZGlkbid0IHN1cHBvcnQgdW5pY29kZVxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaTtcbi8vb2xkIGVtYWlsIHJlZ2V4XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKFtePD4oKVtcXF0uLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXS4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKCg/IS0pKFtePD4oKVtcXF0uLDs6XFxzQFwiXStcXC4pK1tePD4oKVtcXF0uLDs6XFxzQFwiXXsxLH0pW14tPD4oKVtcXF0uLDs6XFxzQFwiXSQvaTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXSl8KFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKVxcXSl8KFtBLVphLXowLTldKFtBLVphLXowLTktXSpbQS1aYS16MC05XSkqKFxcLltBLVphLXpdezIsfSkrKSkkLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXpBLVowLTlcXC5cXCFcXCNcXCRcXCVcXCZcXCdcXCpcXCtcXC9cXD1cXD9cXF5cXF9cXGBcXHtcXHxcXH1cXH5cXC1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2k7XG5jb25zdCBlbWFpbFJlZ2V4ID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVowLTlfKy1cXC5dKilbQS1aMC05XystXUAoW0EtWjAtOV1bQS1aMC05XFwtXSpcXC4pK1tBLVpdezIsfSQvaTtcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtejAtOS1dKyg/OlxcLlthLXowLTlcXC1dKykqJC9pO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamlSZWdleCA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5sZXQgZW1vamlSZWdleDtcbmNvbnN0IGlwdjRSZWdleCA9IC9eKCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpJC87XG5jb25zdCBpcHY2UmVnZXggPSAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLztcbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzE0MzIzMVxuY29uc3QgZGF0ZXRpbWVSZWdleCA9IChhcmdzKSA9PiB7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIGlmIChhcmdzLm9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoYF5cXFxcZHs0fS1cXFxcZHsyfS1cXFxcZHsyfVRcXFxcZHsyfTpcXFxcZHsyfTpcXFxcZHsyfVxcXFwuXFxcXGR7JHthcmdzLnByZWNpc2lvbn19KChbKy1dXFxcXGR7Mn0oOj9cXFxcZHsyfSk/KXxaKSRgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGBeXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1UXFxcXGR7Mn06XFxcXGR7Mn06XFxcXGR7Mn1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fVokYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoYXJncy5wcmVjaXNpb24gPT09IDApIHtcbiAgICAgICAgaWYgKGFyZ3Mub2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChgXlxcXFxkezR9LVxcXFxkezJ9LVxcXFxkezJ9VFxcXFxkezJ9OlxcXFxkezJ9OlxcXFxkezJ9KChbKy1dXFxcXGR7Mn0oOj9cXFxcZHsyfSk/KXxaKSRgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGBeXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1UXFxcXGR7Mn06XFxcXGR7Mn06XFxcXGR7Mn1aJGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoYXJncy5vZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGBeXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1UXFxcXGR7Mn06XFxcXGR7Mn06XFxcXGR7Mn0oXFxcXC5cXFxcZCspPygoWystXVxcXFxkezJ9KDo/XFxcXGR7Mn0pPyl8WikkYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChgXlxcXFxkezR9LVxcXFxkezJ9LVxcXFxkezJ9VFxcXFxkezJ9OlxcXFxkezJ9OlxcXFxkezJ9KFxcXFwuXFxcXGQrKT9aJGApO1xuICAgICAgICB9XG4gICAgfVxufTtcbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImN1aWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjdWlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkMlwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdWlkMlJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjdWlkMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1bGlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInVsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVybFwiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFVSTChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgY2hlY2sucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gY2hlY2sucmVnZXgudGVzdChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRlc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJyZWdleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidHJpbVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJpbmNsdWRlc1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmluY2x1ZGVzKGNoZWNrLnZhbHVlLCBjaGVjay5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBpbmNsdWRlczogY2hlY2sudmFsdWUsIHBvc2l0aW9uOiBjaGVjay5wb3NpdGlvbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9Mb3dlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRvVXBwZXJDYXNlXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJzdGFydHNXaXRoXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuc3RhcnRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBzdGFydHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW5kc1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5lbmRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBlbmRzV2l0aDogY2hlY2sudmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGV0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGV0aW1lUmVnZXgoY2hlY2spO1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJpcFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSVAoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJpcFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBfcmVnZXgocmVnZXgsIHZhbGlkYXRpb24sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmaW5lbWVudCgoZGF0YSkgPT4gcmVnZXgudGVzdChkYXRhKSwge1xuICAgICAgICAgICAgdmFsaWRhdGlvbixcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbWFpbChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1haWxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1cmwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInVybFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGVtb2ppKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJlbW9qaVwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHV1aWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInV1aWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGRhdGV0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2YgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wcmVjaXNpb24pID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wcmVjaXNpb24sXG4gICAgICAgICAgICBvZmZzZXQ6IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vZmZzZXQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wb3NpdGlvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGFydHNXaXRoKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInN0YXJ0c1dpdGhcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVuZHNXaXRoKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImVuZHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtaW4obWluTGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IG1pbkxlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhMZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogbWF4TGVuZ3RoLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJsZW5ndGhcIixcbiAgICAgICAgICAgIHZhbHVlOiBsZW4sXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2Ugei5zdHJpbmcoKS5taW4oMSkgaW5zdGVhZC5cbiAgICAgKiBAc2VlIHtAbGluayBab2RTdHJpbmcubWlufVxuICAgICAqL1xuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIGVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSk7XG4gICAgfVxuICAgIHRyaW0oKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0cmltXCIgfV0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b0xvd2VyQ2FzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgeyBraW5kOiBcInRvTG93ZXJDYXNlXCIgfV0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b1VwcGVyQ2FzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgeyBraW5kOiBcInRvVXBwZXJDYXNlXCIgfV0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgaXNEYXRldGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkYXRldGltZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBtaW5MZW5ndGgoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heExlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZFN0cmluZy5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmcsXG4gICAgICAgIGNvZXJjZTogKF9hID0gcGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zOTY2NDg0L3doeS1kb2VzLW1vZHVsdXMtb3BlcmF0b3ItcmV0dXJuLWZyYWN0aW9uYWwtbnVtYmVyLWluLWphdmFzY3JpcHQvMzE3MTEwMzQjMzE3MTEwMzRcbmZ1bmN0aW9uIGZsb2F0U2FmZVJlbWFpbmRlcih2YWwsIHN0ZXApIHtcbiAgICBjb25zdCB2YWxEZWNDb3VudCA9ICh2YWwudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IHN0ZXBEZWNDb3VudCA9IChzdGVwLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBkZWNDb3VudCA9IHZhbERlY0NvdW50ID4gc3RlcERlY0NvdW50ID8gdmFsRGVjQ291bnQgOiBzdGVwRGVjQ291bnQ7XG4gICAgY29uc3QgdmFsSW50ID0gcGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICBjb25zdCBzdGVwSW50ID0gcGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIE1hdGgucG93KDEwLCBkZWNDb3VudCk7XG59XG5jbGFzcyBab2ROdW1iZXIgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLmd0ZTtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLmx0ZTtcbiAgICAgICAgdGhpcy5zdGVwID0gdGhpcy5tdWx0aXBsZU9mO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBOdW1iZXIoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVtYmVyLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwiaW50XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWwuaXNJbnRlZ2VyKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJpbnRlZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlZDogXCJmbG9hdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZVxuICAgICAgICAgICAgICAgICAgICA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZVxuICAgICAgICAgICAgICAgICAgICA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgICAgID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmxvYXRTYWZlUmVtYWluZGVyKGlucHV0LmRhdGEsIGNoZWNrLnZhbHVlKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJmaW5pdGVcIikge1xuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfZmluaXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBndGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGd0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHRlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIHNldExpbWl0KGtpbmQsIHZhbHVlLCBpbmNsdXNpdmUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2ROdW1iZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbXG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLmNoZWNrcyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbnQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbnRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbXVsdGlwbGVPZih2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtdWx0aXBsZU9mXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaW5pdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJmaW5pdGVcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNhZmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSkuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuICAgIGdldCBpc0ludCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJpbnRcIiB8fFxuICAgICAgICAgICAgKGNoLmtpbmQgPT09IFwibXVsdGlwbGVPZlwiICYmIHV0aWwuaXNJbnRlZ2VyKGNoLnZhbHVlKSkpO1xuICAgIH1cbiAgICBnZXQgaXNGaW5pdGUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsLCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcImZpbml0ZVwiIHx8XG4gICAgICAgICAgICAgICAgY2gua2luZCA9PT0gXCJpbnRcIiB8fFxuICAgICAgICAgICAgICAgIGNoLmtpbmQgPT09IFwibXVsdGlwbGVPZlwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShtaW4pICYmIE51bWJlci5pc0Zpbml0ZShtYXgpO1xuICAgIH1cbn1cblpvZE51bWJlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdW1iZXIoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bWJlcixcbiAgICAgICAgY29lcmNlOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RCaWdJbnQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLmd0ZTtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLmx0ZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmJpZ2ludCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBQYXJzZVN0YXR1cygpO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vU21hbGwgPSBjaGVjay5pbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgPyBpbnB1dC5kYXRhIDwgY2hlY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiBpbnB1dC5kYXRhIDw9IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGNoZWNrLmluY2x1c2l2ZVxuICAgICAgICAgICAgICAgICAgICA/IGlucHV0LmRhdGEgPiBjaGVjay52YWx1ZVxuICAgICAgICAgICAgICAgICAgICA6IGlucHV0LmRhdGEgPj0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb0JpZykge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibXVsdGlwbGVPZlwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEgJSBjaGVjay52YWx1ZSAhPT0gQmlnSW50KDApKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJpZ0ludCxcbiAgICAgICAgY29lcmNlOiAoX2EgPSBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuY29lcmNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOYU4oaW5wdXQuZGF0YS5nZXRUaW1lKCkpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9kYXRlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmdldFRpbWUoKSA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogc3RhdHVzLnZhbHVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKGlucHV0LmRhdGEuZ2V0VGltZSgpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGF0ZSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtaW4obWluRGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5EYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhEYXRlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heERhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IG1pbkRhdGUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbiAhPSBudWxsID8gbmV3IERhdGUobWluKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCBtYXhEYXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXggIT0gbnVsbCA/IG5ldyBEYXRlKG1heCkgOiBudWxsO1xuICAgIH1cbn1cblpvZERhdGUuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGF0ZSh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIGNvZXJjZTogKHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5jb2VyY2UpIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RTeW1ib2wgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zeW1ib2wpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc3ltYm9sLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFN5bWJvbC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTeW1ib2woe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN5bWJvbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZFVuZGVmaW5lZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS51bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5kZWZpbmVkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuZGVmaW5lZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RBbnkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gdG8gcHJldmVudCBpbnN0YW5jZXMgb2Ygb3RoZXIgY2xhc3NlcyBmcm9tIGV4dGVuZGluZyBab2RBbnkuIHRoaXMgY2F1c2VzIGlzc3VlcyB3aXRoIGNhdGNoYWxsIGluIFpvZE9iamVjdC5cbiAgICAgICAgdGhpcy5fYW55ID0gdHJ1ZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RBbnkuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQW55KHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBbnksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RVbmtub3duIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHJlcXVpcmVkXG4gICAgICAgIHRoaXMuX3Vua25vd24gPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFVua25vd24uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5rbm93bih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RWb2lkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnZvaWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVm9pZC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RWb2lkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RWb2lkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kQXJyYXkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHgsIHN0YXR1cyB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjdHguZGF0YS5sZW5ndGggPiBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdG9vQmlnID8gWm9kSXNzdWVDb2RlLnRvb19iaWcgOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiAodG9vU21hbGwgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiAodG9vQmlnID8gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1pbkxlbmd0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5taW5MZW5ndGgudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbkxlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pbkxlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoID4gZGVmLm1heExlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heExlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlQXN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgICAgICB9KSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VTeW5jKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBtaW4obWluTGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiB7IHZhbHVlOiBtaW5MZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heExlbmd0aDogeyB2YWx1ZTogbWF4TGVuZ3RoLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBleGFjdExlbmd0aDogeyB2YWx1ZTogbGVuLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZEFycmF5LmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIG1pbkxlbmd0aDogbnVsbCxcbiAgICAgICAgbWF4TGVuZ3RoOiBudWxsLFxuICAgICAgICBleGFjdExlbmd0aDogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYSkge1xuICAgIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RPYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hLnNoYXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHNjaGVtYS5zaGFwZVtrZXldO1xuICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShmaWVsZFNjaGVtYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgICAgICAgIHR5cGU6IGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYS5lbGVtZW50KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZFR1cGxlKSB7XG4gICAgICAgIHJldHVybiBab2RUdXBsZS5jcmVhdGUoc2NoZW1hLml0ZW1zLm1hcCgoaXRlbSkgPT4gZGVlcFBhcnRpYWxpZnkoaXRlbSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxufVxuY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHJldHVybiAodGhpcy5fY2FjaGVkID0geyBzaGFwZSwga2V5cyB9KTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJlxuICAgICAgICAgICAgdGhpcy5fZGVmLnVua25vd25LZXlzID09PSBcInN0cmlwXCIpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjdHguZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghc2hhcGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlWYWxpZGF0b3IgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5OiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZToga2V5IH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGtleVZhbGlkYXRvci5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gdGhpcy5fZGVmLnVua25vd25LZXlzO1xuICAgICAgICAgICAgaWYgKHVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogY3R4LmRhdGFba2V5XSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmtub3duS2V5cyA9PT0gXCJzdHJpY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChleHRyYUtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGV4dHJhS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmlwXCIpIDtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgWm9kT2JqZWN0IGVycm9yOiBpbnZhbGlkIHVua25vd25LZXlzIHZhbHVlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gcnVuIGNhdGNoYWxsIHZhbGlkYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNhdGNoYWxsID0gdGhpcy5fZGVmLmNhdGNoYWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhdGNoYWxsLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpIC8vLCBjdHguY2hpbGQoa2V5KSwgdmFsdWUsIGdldFBhcnNlZFR5cGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBzeW5jUGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXdhaXQgcGFpci52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsd2F5c1NldDogcGFpci5hbHdheXNTZXQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc3luY1BhaXJzO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbigoc3luY1BhaXJzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHN5bmNQYWlycyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNoYXBlKCk7XG4gICAgfVxuICAgIHN0cmljdChtZXNzYWdlKSB7XG4gICAgICAgIGVycm9yVXRpbC5lcnJUb09iajtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwic3RyaWN0XCIsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWFwOiAoaXNzdWUsIGN0eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdEVycm9yID0gKF9jID0gKF9iID0gKF9hID0gdGhpcy5fZGVmKS5lcnJvck1hcCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIGlzc3VlLCBjdHgpLm1lc3NhZ2UpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGN0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJ1bnJlY29nbml6ZWRfa2V5c1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IChfZCA9IGVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKS5tZXNzYWdlKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBkZWZhdWx0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdHJpcCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwic3RyaXBcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBhc3N0aHJvdWdoKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJwYXNzdGhyb3VnaFwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gY29uc3QgQXVnbWVudEZhY3RvcnkgPVxuICAgIC8vICAgPERlZiBleHRlbmRzIFpvZE9iamVjdERlZj4oZGVmOiBEZWYpID0+XG4gICAgLy8gICA8QXVnbWVudGF0aW9uIGV4dGVuZHMgWm9kUmF3U2hhcGU+KFxuICAgIC8vICAgICBhdWdtZW50YXRpb246IEF1Z21lbnRhdGlvblxuICAgIC8vICAgKTogWm9kT2JqZWN0PFxuICAgIC8vICAgICBleHRlbmRTaGFwZTxSZXR1cm5UeXBlPERlZltcInNoYXBlXCJdPiwgQXVnbWVudGF0aW9uPixcbiAgICAvLyAgICAgRGVmW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICAgIERlZltcImNhdGNoYWxsXCJdXG4gICAgLy8gICA+ID0+IHtcbiAgICAvLyAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICAgIC4uLmRlZixcbiAgICAvLyAgICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAvLyAgICAgICAgIC4uLmRlZi5zaGFwZSgpLFxuICAgIC8vICAgICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgIC8vICAgICAgIH0pLFxuICAgIC8vICAgICB9KSBhcyBhbnk7XG4gICAgLy8gICB9O1xuICAgIGV4dGVuZChhdWdtZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmlvciB0byB6b2RAMS4wLjEyIHRoZXJlIHdhcyBhIGJ1ZyBpbiB0aGVcbiAgICAgKiBpbmZlcnJlZCB0eXBlIG9mIG1lcmdlZCBvYmplY3RzLiBQbGVhc2VcbiAgICAgKiB1cGdyYWRlIGlmIHlvdSBhcmUgZXhwZXJpZW5jaW5nIGlzc3Vlcy5cbiAgICAgKi9cbiAgICBtZXJnZShtZXJnaW5nKSB7XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgdW5rbm93bktleXM6IG1lcmdpbmcuX2RlZi51bmtub3duS2V5cyxcbiAgICAgICAgICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgICAgICAgICAuLi5tZXJnaW5nLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWVyZ2VkO1xuICAgIH1cbiAgICAvLyBtZXJnZTxcbiAgICAvLyAgIEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0LFxuICAgIC8vICAgQXVnbWVudGF0aW9uIGV4dGVuZHMgSW5jb21pbmdbXCJzaGFwZVwiXSxcbiAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHtcbiAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgT3V0cHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIE91dHB1dFxuICAgIC8vICAgICAgID8gT3V0cHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH0sXG4gICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHtcbiAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgSW5wdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBJbnB1dFxuICAgIC8vICAgICAgID8gSW5wdXRba11cbiAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgIC8vICAgfVxuICAgIC8vID4oXG4gICAgLy8gICBtZXJnaW5nOiBJbmNvbWluZ1xuICAgIC8vICk6IFpvZE9iamVjdDxcbiAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIFJldHVyblR5cGU8SW5jb21pbmdbXCJfZGVmXCJdW1wic2hhcGVcIl0+PixcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1wiY2F0Y2hhbGxcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQsXG4gICAgLy8gICBOZXdJbnB1dFxuICAgIC8vID4ge1xuICAgIC8vICAgY29uc3QgbWVyZ2VkOiBhbnkgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgdW5rbm93bktleXM6IG1lcmdpbmcuX2RlZi51bmtub3duS2V5cyxcbiAgICAvLyAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgICAvLyAgICAgc2hhcGU6ICgpID0+XG4gICAgLy8gICAgICAgb2JqZWN0VXRpbC5tZXJnZVNoYXBlcyh0aGlzLl9kZWYuc2hhcGUoKSwgbWVyZ2luZy5fZGVmLnNoYXBlKCkpLFxuICAgIC8vICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAvLyAgIH0pIGFzIGFueTtcbiAgICAvLyAgIHJldHVybiBtZXJnZWQ7XG4gICAgLy8gfVxuICAgIHNldEtleShrZXksIHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdWdtZW50KHsgW2tleV06IHNjaGVtYSB9KTtcbiAgICB9XG4gICAgLy8gbWVyZ2U8SW5jb21pbmcgZXh0ZW5kcyBBbnlab2RPYmplY3Q+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiAvL1pvZE9iamVjdDxUICYgSW5jb21pbmdbXCJfc2hhcGVcIl0sIFVua25vd25LZXlzLCBDYXRjaGFsbD4gPSAobWVyZ2luZykgPT4ge1xuICAgIC8vIFpvZE9iamVjdDxcbiAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIFJldHVyblR5cGU8SW5jb21pbmdbXCJfZGVmXCJdW1wic2hhcGVcIl0+PixcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1wiY2F0Y2hhbGxcIl1cbiAgICAvLyA+IHtcbiAgICAvLyAgIC8vIGNvbnN0IG1lcmdlZFNoYXBlID0gb2JqZWN0VXRpbC5tZXJnZVNoYXBlcyhcbiAgICAvLyAgIC8vICAgdGhpcy5fZGVmLnNoYXBlKCksXG4gICAgLy8gICAvLyAgIG1lcmdpbmcuX2RlZi5zaGFwZSgpXG4gICAgLy8gICAvLyApO1xuICAgIC8vICAgY29uc3QgbWVyZ2VkOiBhbnkgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgdW5rbm93bktleXM6IG1lcmdpbmcuX2RlZi51bmtub3duS2V5cyxcbiAgICAvLyAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgICAvLyAgICAgc2hhcGU6ICgpID0+XG4gICAgLy8gICAgICAgb2JqZWN0VXRpbC5tZXJnZVNoYXBlcyh0aGlzLl9kZWYuc2hhcGUoKSwgbWVyZ2luZy5fZGVmLnNoYXBlKCkpLFxuICAgIC8vICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAvLyAgIH0pIGFzIGFueTtcbiAgICAvLyAgIHJldHVybiBtZXJnZWQ7XG4gICAgLy8gfVxuICAgIGNhdGNoYWxsKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNhdGNoYWxsOiBpbmRleCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpY2sobWFzaykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHt9O1xuICAgICAgICB1dGlsLm9iamVjdEtleXMobWFzaykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbWl0KG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKi9cbiAgICBkZWVwUGFydGlhbCgpIHtcbiAgICAgICAgcmV0dXJuIGRlZXBQYXJ0aWFsaWZ5KHRoaXMpO1xuICAgIH1cbiAgICBwYXJ0aWFsKG1hc2spIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXF1aXJlZChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAga2V5b2YoKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVab2RFbnVtKHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSk7XG4gICAgfVxufVxuWm9kT2JqZWN0LmNyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RPYmplY3Quc3RyaWN0Q3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgdW5rbm93bktleXM6IFwic3RyaWN0XCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RPYmplY3QubGF6eWNyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZSxcbiAgICAgICAgdW5rbm93bktleXM6IFwic3RyaXBcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdHMocmVzdWx0cykge1xuICAgICAgICAgICAgLy8gcmV0dXJuIGZpcnN0IGlzc3VlLWZyZWUgdmFsaWRhdGlvbiBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5yZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGlzc3VlcyBmcm9tIGRpcnR5IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKC4uLnJlc3VsdC5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJldHVybiBpbnZhbGlkXG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IG5ldyBab2RFcnJvcihyZXN1bHQuY3R4LmNvbW1vbi5pc3N1ZXMpKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uLFxuICAgICAgICAgICAgICAgIHVuaW9uRXJyb3JzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG9wdGlvbnMubWFwKGFzeW5jIChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGF3YWl0IG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGN0eDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKS50aGVuKGhhbmRsZVJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRpcnR5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDdHggPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIgJiYgIWRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpcnR5ID0geyByZXN1bHQsIGN0eDogY2hpbGRDdHggfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3Vlcy5wdXNoKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXJ0eSkge1xuICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4uZGlydHkuY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkaXJ0eS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IGlzc3Vlcy5tYXAoKGlzc3VlcykgPT4gbmV3IFpvZEVycm9yKGlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxufVxuWm9kVW5pb24uY3JlYXRlID0gKHR5cGVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuaW9uKHtcbiAgICAgICAgb3B0aW9uczogdHlwZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5pb24sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgWm9kRGlzY3JpbWluYXRlZFVuaW9uICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc3QgZ2V0RGlzY3JpbWluYXRvciA9ICh0eXBlKSA9PiB7XG4gICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMYXp5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuc2NoZW1hKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVmZmVjdHMpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5pbm5lclR5cGUoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMaXRlcmFsKSB7XG4gICAgICAgIHJldHVybiBbdHlwZS52YWx1ZV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB0eXBlLm9wdGlvbnM7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROYXRpdmVFbnVtKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0eXBlLmVudW0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRGVmYXVsdCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsKSB7XG4gICAgICAgIHJldHVybiBbbnVsbF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuY2xhc3MgWm9kRGlzY3JpbWluYXRlZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpc2NyaW1pbmF0b3IgPSB0aGlzLmRpc2NyaW1pbmF0b3I7XG4gICAgICAgIGNvbnN0IGRpc2NyaW1pbmF0b3JWYWx1ZSA9IGN0eC5kYXRhW2Rpc2NyaW1pbmF0b3JdO1xuICAgICAgICBjb25zdCBvcHRpb24gPSB0aGlzLm9wdGlvbnNNYXAuZ2V0KGRpc2NyaW1pbmF0b3JWYWx1ZSk7XG4gICAgICAgIGlmICghb3B0aW9uKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IEFycmF5LmZyb20odGhpcy5vcHRpb25zTWFwLmtleXMoKSksXG4gICAgICAgICAgICAgICAgcGF0aDogW2Rpc2NyaW1pbmF0b3JdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZGlzY3JpbWluYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5kaXNjcmltaW5hdG9yO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vcHRpb25zO1xuICAgIH1cbiAgICBnZXQgb3B0aW9uc01hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vcHRpb25zTWFwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3Igb2YgdGhlIGRpc2NyaW1pbmF0ZWQgdW5pb24gc2NoZW1hLiBJdHMgYmVoYXZpb3VyIGlzIHZlcnkgc2ltaWxhciB0byB0aGF0IG9mIHRoZSBub3JtYWwgei51bmlvbigpIGNvbnN0cnVjdG9yLlxuICAgICAqIEhvd2V2ZXIsIGl0IG9ubHkgYWxsb3dzIGEgdW5pb24gb2Ygb2JqZWN0cywgYWxsIG9mIHdoaWNoIG5lZWQgdG8gc2hhcmUgYSBkaXNjcmltaW5hdG9yIHByb3BlcnR5LiBUaGlzIHByb3BlcnR5IG11c3RcbiAgICAgKiBoYXZlIGEgZGlmZmVyZW50IHZhbHVlIGZvciBlYWNoIG9iamVjdCBpbiB0aGUgdW5pb24uXG4gICAgICogQHBhcmFtIGRpc2NyaW1pbmF0b3IgdGhlIG5hbWUgb2YgdGhlIGRpc2NyaW1pbmF0b3IgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gdHlwZXMgYW4gYXJyYXkgb2Ygb2JqZWN0IHNjaGVtYXNcbiAgICAgKiBAcGFyYW0gcGFyYW1zXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShkaXNjcmltaW5hdG9yLCBvcHRpb25zLCBwYXJhbXMpIHtcbiAgICAgICAgLy8gR2V0IGFsbCB0aGUgdmFsaWQgZGlzY3JpbWluYXRvciB2YWx1ZXNcbiAgICAgICAgY29uc3Qgb3B0aW9uc01hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgZm9yIChjb25zdCB0eXBlIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NyaW1pbmF0b3JWYWx1ZXMgPSBnZXREaXNjcmltaW5hdG9yKHR5cGUuc2hhcGVbZGlzY3JpbWluYXRvcl0pO1xuICAgICAgICAgICAgaWYgKCFkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIGRpc2NyaW1pbmF0b3IgdmFsdWUgZm9yIGtleSBcXGAke2Rpc2NyaW1pbmF0b3J9XFxgIGNvdWxkIG5vdCBiZSBleHRyYWN0ZWQgZnJvbSBhbGwgc2NoZW1hIG9wdGlvbnNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGlzY3JpbWluYXRvclZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zTWFwLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaXNjcmltaW5hdG9yIHByb3BlcnR5ICR7U3RyaW5nKGRpc2NyaW1pbmF0b3IpfSBoYXMgZHVwbGljYXRlIHZhbHVlICR7U3RyaW5nKHZhbHVlKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9uc01hcC5zZXQodmFsdWUsIHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGlzY3JpbWluYXRlZFVuaW9uKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uLFxuICAgICAgICAgICAgZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zTWFwLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBtZXJnZVZhbHVlcyhhLCBiKSB7XG4gICAgY29uc3QgYVR5cGUgPSBnZXRQYXJzZWRUeXBlKGEpO1xuICAgIGNvbnN0IGJUeXBlID0gZ2V0UGFyc2VkVHlwZShiKTtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGJLZXlzID0gdXRpbC5vYmplY3RLZXlzKGIpO1xuICAgICAgICBjb25zdCBzaGFyZWRLZXlzID0gdXRpbFxuICAgICAgICAgICAgLm9iamVjdEtleXMoYSlcbiAgICAgICAgICAgIC5maWx0ZXIoKGtleSkgPT4gYktleXMuaW5kZXhPZihrZXkpICE9PSAtMSk7XG4gICAgICAgIGNvbnN0IG5ld09iaiA9IHsgLi4uYSwgLi4uYiB9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFyZWRLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBzaGFyZWRWYWx1ZSA9IG1lcmdlVmFsdWVzKGFba2V5XSwgYltrZXldKTtcbiAgICAgICAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld09ialtrZXldID0gc2hhcmVkVmFsdWUuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3T2JqIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLmFycmF5ICYmIGJUeXBlID09PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld0FycmF5ID0gW107XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbUEgPSBhW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1CID0gYltpbmRleF07XG4gICAgICAgICAgICBjb25zdCBzaGFyZWRWYWx1ZSA9IG1lcmdlVmFsdWVzKGl0ZW1BLCBpdGVtQik7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdBcnJheS5wdXNoKHNoYXJlZFZhbHVlLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBuZXdBcnJheSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmXG4gICAgICAgIGJUeXBlID09PSBab2RQYXJzZWRUeXBlLmRhdGUgJiZcbiAgICAgICAgK2EgPT09ICtiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICB9XG59XG5jbGFzcyBab2RJbnRlcnNlY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgaGFuZGxlUGFyc2VkID0gKHBhcnNlZExlZnQsIHBhcnNlZFJpZ2h0KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNBYm9ydGVkKHBhcnNlZExlZnQpIHx8IGlzQWJvcnRlZChwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlVmFsdWVzKHBhcnNlZExlZnQudmFsdWUsIHBhcnNlZFJpZ2h0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmICghbWVyZ2VkLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RpcnR5KHBhcnNlZExlZnQpIHx8IGlzRGlydHkocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IG1lcmdlZC5kYXRhIH07XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWYucmlnaHQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSkudGhlbigoW2xlZnQsIHJpZ2h0XSkgPT4gaGFuZGxlUGFyc2VkKGxlZnQsIHJpZ2h0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlUGFyc2VkKHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSksIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZEludGVyc2VjdGlvbi5jcmVhdGUgPSAobGVmdCwgcmlnaHQsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kSW50ZXJzZWN0aW9uKHtcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEludGVyc2VjdGlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZFR1cGxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPCB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgIG1pbmltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3QgPSB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgaWYgKCFyZXN0ICYmIGN0eC5kYXRhLmxlbmd0aCA+IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgIG1heGltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gWy4uLmN0eC5kYXRhXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSwgaXRlbUluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLl9kZWYuaXRlbXNbaXRlbUluZGV4XSB8fCB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgICAgIGlmICghc2NoZW1hKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVtYS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpdGVtSW5kZXgpKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHgpID0+ICEheCk7IC8vIGZpbHRlciBudWxsc1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGl0ZW1zKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCBpdGVtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLml0ZW1zO1xuICAgIH1cbiAgICByZXN0KHJlc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RUdXBsZSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXN0LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RUdXBsZS5jcmVhdGUgPSAoc2NoZW1hcywgcGFyYW1zKSA9PiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgb2Ygc2NoZW1hcyB0byB6LnR1cGxlKFsgLi4uIF0pXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgaXRlbXM6IHNjaGVtYXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGUsXG4gICAgICAgIHJlc3Q6IG51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5jbGFzcyBab2RNYXAgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubWFwKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm1hcCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgY29uc3QgcGFpcnMgPSBbLi4uY3R4LmRhdGEuZW50cmllcygpXS5tYXAoKFtrZXksIHZhbHVlXSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAga2V5OiBrZXlUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwga2V5LCBjdHgucGF0aCwgW2luZGV4LCBcImtleVwiXSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIFtpbmRleCwgXCJ2YWx1ZVwiXSkpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICBjb25zdCBmaW5hbE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBmaW5hbE1hcCB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmaW5hbE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImFib3J0ZWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxNYXAuc2V0KGtleS52YWx1ZSwgdmFsdWUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBmaW5hbE1hcCB9O1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kTWFwLmNyZWF0ZSA9IChrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTWFwKHtcbiAgICAgICAgdmFsdWVUeXBlLFxuICAgICAgICBrZXlUeXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZFNldCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc2V0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnNldCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZiA9IHRoaXMuX2RlZjtcbiAgICAgICAgaWYgKGRlZi5taW5TaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEuc2l6ZSA8IGRlZi5taW5TaXplLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGRlZi5taW5TaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pblNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1heFNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplID4gZGVmLm1heFNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06IGRlZi5tYXhTaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heFNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBmdW5jdGlvbiBmaW5hbGl6ZVNldChlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIHBhcnNlZFNldC5hZGQoZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHBhcnNlZFNldCB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gWy4uLmN0eC5kYXRhLnZhbHVlcygpXS5tYXAoKGl0ZW0sIGkpID0+IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSkpO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGVsZW1lbnRzKS50aGVuKChlbGVtZW50cykgPT4gZmluYWxpemVTZXQoZWxlbWVudHMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZVNldChlbGVtZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWluKG1pblNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluU2l6ZTogeyB2YWx1ZTogbWluU2l6ZSwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4U2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtYXhTaXplOiB7IHZhbHVlOiBtYXhTaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpemUoc2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oc2l6ZSwgbWVzc2FnZSkubWF4KHNpemUsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBtZXNzYWdlKTtcbiAgICB9XG59XG5ab2RTZXQuY3JlYXRlID0gKHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIG1pblNpemU6IG51bGwsXG4gICAgICAgIG1heFNpemU6IG51bGwsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgICAgICAgICBjdHguc2NoZW1hRXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgICAgIGdldEVycm9yTWFwKCksXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWFwLFxuICAgICAgICAgICAgICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c0Vycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbWFrZVJldHVybnNJc3N1ZShyZXR1cm5zLCBlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VJc3N1ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogcmV0dXJucyxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvck1hcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCxcbiAgICAgICAgICAgICAgICAgICAgZ2V0RXJyb3JNYXAoKSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3JldHVybl90eXBlLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5UeXBlRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7IGVycm9yTWFwOiBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCB9O1xuICAgICAgICBjb25zdCBmbiA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAodGhpcy5fZGVmLnJldHVybnMgaW5zdGFuY2VvZiBab2RQcm9taXNlKSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soYXN5bmMgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihbXSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJncyA9IGF3YWl0IG1lLl9kZWYuYXJnc1xuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlQXJnc0lzc3VlKGFyZ3MsIGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmV0dXJucyA9IGF3YWl0IG1lLl9kZWYucmV0dXJucy5fZGVmLnR5cGVcbiAgICAgICAgICAgICAgICAgICAgLnBhcnNlQXN5bmMocmVzdWx0LCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJncyA9IG1lLl9kZWYuYXJncy5zYWZlUGFyc2UoYXJncywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZEFyZ3Muc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VBcmdzSXNzdWUoYXJncywgcGFyc2VkQXJncy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncy5kYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gbWUuX2RlZi5yZXR1cm5zLnNhZmVQYXJzZShyZXN1bHQsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJzZWRSZXR1cm5zLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFpvZEVycm9yKFttYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgcGFyc2VkUmV0dXJucy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZFJldHVybnMuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuYXJncztcbiAgICB9XG4gICAgcmV0dXJuVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5yZXR1cm5zO1xuICAgIH1cbiAgICBhcmdzKC4uLml0ZW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgYXJnczogWm9kVHVwbGUuY3JlYXRlKGl0ZW1zKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJucyhyZXR1cm5UeXBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgcmV0dXJuczogcmV0dXJuVHlwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGltcGxlbWVudChmdW5jKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEZ1bmMgPSB0aGlzLnBhcnNlKGZ1bmMpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRnVuYztcbiAgICB9XG4gICAgc3RyaWN0SW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGFyZ3MsIHJldHVybnMsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIGFyZ3M6IChhcmdzXG4gICAgICAgICAgICAgICAgPyBhcmdzXG4gICAgICAgICAgICAgICAgOiBab2RUdXBsZS5jcmVhdGUoW10pLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSkpLFxuICAgICAgICAgICAgcmV0dXJuczogcmV0dXJucyB8fCBab2RVbmtub3duLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbixcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuY2xhc3MgWm9kTGF6eSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZ2V0dGVyKCk7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgbGF6eVNjaGVtYSA9IHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICAgICAgcmV0dXJuIGxhenlTY2hlbWEuX3BhcnNlKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICB9XG59XG5ab2RMYXp5LmNyZWF0ZSA9IChnZXR0ZXIsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGF6eSh7XG4gICAgICAgIGdldHRlcjogZ2V0dGVyLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5jbGFzcyBab2RFbnVtIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQuZGF0YSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB0aGlzLl9kZWYudmFsdWVzO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IHV0aWwuam9pblZhbHVlcyhleHBlY3RlZFZhbHVlcyksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYudmFsdWVzLmluZGV4T2YoaW5wdXQuZGF0YSkgPT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgZW51bVZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICAgICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudW1WYWx1ZXM7XG4gICAgfVxuICAgIGdldCBFbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZXh0cmFjdCh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHZhbHVlcyk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZmlsdGVyKChvcHQpID0+ICF2YWx1ZXMuaW5jbHVkZXMob3B0KSkpO1xuICAgIH1cbn1cblpvZEVudW0uY3JlYXRlID0gY3JlYXRlWm9kRW51bTtcbmNsYXNzIFpvZE5hdGl2ZUVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgbmF0aXZlRW51bVZhbHVlcyA9IHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcgJiZcbiAgICAgICAgICAgIGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmF0aXZlRW51bVZhbHVlcy5pbmRleE9mKGlucHV0LmRhdGEpID09PSAtMSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RQcm9taXNlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnByb21pc2UgJiZcbiAgICAgICAgICAgIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2VcbiAgICAgICAgICAgID8gY3R4LmRhdGFcbiAgICAgICAgICAgIDogUHJvbWlzZS5yZXNvbHZlKGN0eC5kYXRhKTtcbiAgICAgICAgcmV0dXJuIE9LKHByb21pc2lmaWVkLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5wYXJzZUFzeW5jKGRhdGEsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblpvZFByb21pc2UuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RQcm9taXNlKHtcbiAgICAgICAgdHlwZTogc2NoZW1hLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RFZmZlY3RzIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgaW5uZXJUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgc291cmNlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWEuX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHNcbiAgICAgICAgICAgID8gdGhpcy5fZGVmLnNjaGVtYS5zb3VyY2VUeXBlKClcbiAgICAgICAgICAgIDogdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuX2RlZi5lZmZlY3QgfHwgbnVsbDtcbiAgICAgICAgY29uc3QgY2hlY2tDdHggPSB7XG4gICAgICAgICAgICBhZGRJc3N1ZTogKGFyZykgPT4ge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgYXJnKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJnLmZhdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBwYXRoKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdHgucGF0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNoZWNrQ3R4LmFkZElzc3VlID0gY2hlY2tDdHguYWRkSXNzdWUuYmluZChjaGVja0N0eCk7XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJwcmVwcm9jZXNzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IGVmZmVjdC50cmFuc2Zvcm0oY3R4LmRhdGEsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocHJvY2Vzc2VkKS50aGVuKChwcm9jZXNzZWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInJlZmluZW1lbnRcIikge1xuICAgICAgICAgICAgY29uc3QgZXhlY3V0ZVJlZmluZW1lbnQgPSAoYWNjXG4gICAgICAgICAgICAvLyBlZmZlY3Q6IFJlZmluZW1lbnRFZmZlY3Q8YW55PlxuICAgICAgICAgICAgKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZWZmZWN0LnJlZmluZW1lbnQoYWNjLCBjaGVja0N0eCk7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBc3luYyByZWZpbmVtZW50IGVuY291bnRlcmVkIGR1cmluZyBzeW5jaHJvbm91cyBwYXJzZSBvcGVyYXRpb24uIFVzZSAucGFyc2VBc3luYyBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbm5lciA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWRcbiAgICAgICAgICAgICAgICBleGVjdXRlUmVmaW5lbWVudChpbm5lci52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbm5lci52YWx1ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWFcbiAgICAgICAgICAgICAgICAgICAgLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoaW5uZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleGVjdXRlUmVmaW5lbWVudChpbm5lci52YWx1ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKGJhc2UpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFzeW5jaHJvbm91cyB0cmFuc2Zvcm0gZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcmVzdWx0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYVxuICAgICAgICAgICAgICAgICAgICAuX3BhcnNlQXN5bmMoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiYXNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcmVzdWx0IH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RPcHRpb25hbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIE9LKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RPcHRpb25hbC5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPcHRpb25hbCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZE51bGxhYmxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUubnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIE9LKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kTnVsbGFibGUuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVsbGFibGUoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICA/IHBhcmFtcy5kZWZhdWx0XG4gICAgICAgICAgICA6ICgpID0+IHBhcmFtcy5kZWZhdWx0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kQ2F0Y2ggZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIC8vIG5ld0N0eCBpcyB1c2VkIHRvIG5vdCBjb2xsZWN0IGlzc3VlcyBmcm9tIGlubmVyIHR5cGVzIGluIGN0eFxuICAgICAgICBjb25zdCBuZXdDdHggPSB7XG4gICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhOiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IG5ld0N0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgICAgICAgLi4ubmV3Q3R4LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcInZhbGlkXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUNhdGNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RDYXRjaC5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RDYXRjaCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgY2F0Y2hWYWx1ZTogdHlwZW9mIHBhcmFtcy5jYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmNhdGNoIDogKCkgPT4gcGFyYW1zLmNhdGNoLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNvbnN0IEJSQU5EID0gU3ltYm9sKFwiem9kX2JyYW5kXCIpO1xuY2xhc3MgWm9kQnJhbmRlZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxufVxuY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmNsYXNzIFpvZFJlYWRvbmx5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICAgICAgcmVzdWx0LnZhbHVlID0gT2JqZWN0LmZyZWV6ZShyZXN1bHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuWm9kUmVhZG9ubHkuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUmVhZG9ubHkoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVhZG9ubHksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jb25zdCBjdXN0b20gPSAoY2hlY2ssIHBhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpID0+IHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGlmICghY2hlY2soZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gdHlwZW9mIHBhcmFtcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICAgICAgICAgID8gcGFyYW1zKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIHBhcmFtcyA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHBhcmFtcztcbiAgICAgICAgICAgICAgICBjb25zdCBfZmF0YWwgPSAoX2IgPSAoX2EgPSBwLmZhdGFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYXRhbCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBwMiA9IHR5cGVvZiBwID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwIH0gOiBwO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnAyLCBmYXRhbDogX2ZhdGFsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpO1xufTtcbmNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG52YXIgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kO1xuKGZ1bmN0aW9uIChab2RGaXJzdFBhcnR5VHlwZUtpbmQpIHtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTdHJpbmdcIl0gPSBcIlpvZFN0cmluZ1wiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE51bWJlclwiXSA9IFwiWm9kTnVtYmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmFOXCJdID0gXCJab2ROYU5cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCaWdJbnRcIl0gPSBcIlpvZEJpZ0ludFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEJvb2xlYW5cIl0gPSBcIlpvZEJvb2xlYW5cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2REYXRlXCJdID0gXCJab2REYXRlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3ltYm9sXCJdID0gXCJab2RTeW1ib2xcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmRlZmluZWRcIl0gPSBcIlpvZFVuZGVmaW5lZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE51bGxcIl0gPSBcIlpvZE51bGxcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RBbnlcIl0gPSBcIlpvZEFueVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVua25vd25cIl0gPSBcIlpvZFVua25vd25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROZXZlclwiXSA9IFwiWm9kTmV2ZXJcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RWb2lkXCJdID0gXCJab2RWb2lkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQXJyYXlcIl0gPSBcIlpvZEFycmF5XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT2JqZWN0XCJdID0gXCJab2RPYmplY3RcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmlvblwiXSA9IFwiWm9kVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2REaXNjcmltaW5hdGVkVW5pb25cIl0gPSBcIlpvZERpc2NyaW1pbmF0ZWRVbmlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEludGVyc2VjdGlvblwiXSA9IFwiWm9kSW50ZXJzZWN0aW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVHVwbGVcIl0gPSBcIlpvZFR1cGxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVjb3JkXCJdID0gXCJab2RSZWNvcmRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RNYXBcIl0gPSBcIlpvZE1hcFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFNldFwiXSA9IFwiWm9kU2V0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRnVuY3Rpb25cIl0gPSBcIlpvZEZ1bmN0aW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTGF6eVwiXSA9IFwiWm9kTGF6eVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExpdGVyYWxcIl0gPSBcIlpvZExpdGVyYWxcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RFbnVtXCJdID0gXCJab2RFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRWZmZWN0c1wiXSA9IFwiWm9kRWZmZWN0c1wiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hdGl2ZUVudW1cIl0gPSBcIlpvZE5hdGl2ZUVudW1cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RPcHRpb25hbFwiXSA9IFwiWm9kT3B0aW9uYWxcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsYWJsZVwiXSA9IFwiWm9kTnVsbGFibGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2REZWZhdWx0XCJdID0gXCJab2REZWZhdWx0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQ2F0Y2hcIl0gPSBcIlpvZENhdGNoXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUHJvbWlzZVwiXSA9IFwiWm9kUHJvbWlzZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEJyYW5kZWRcIl0gPSBcIlpvZEJyYW5kZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RQaXBlbGluZVwiXSA9IFwiWm9kUGlwZWxpbmVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RSZWFkb25seVwiXSA9IFwiWm9kUmVhZG9ubHlcIjtcbn0pKFpvZEZpcnN0UGFydHlUeXBlS2luZCB8fCAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kID0ge30pKTtcbmNvbnN0IGluc3RhbmNlT2ZUeXBlID0gKFxuLy8gY29uc3QgaW5zdGFuY2VPZlR5cGUgPSA8VCBleHRlbmRzIG5ldyAoLi4uYXJnczogYW55W10pID0+IGFueT4oXG5jbHMsIHBhcmFtcyA9IHtcbiAgICBtZXNzYWdlOiBgSW5wdXQgbm90IGluc3RhbmNlIG9mICR7Y2xzLm5hbWV9YCxcbn0pID0+IGN1c3RvbSgoZGF0YSkgPT4gZGF0YSBpbnN0YW5jZW9mIGNscywgcGFyYW1zKTtcbmNvbnN0IHN0cmluZ1R5cGUgPSBab2RTdHJpbmcuY3JlYXRlO1xuY29uc3QgbnVtYmVyVHlwZSA9IFpvZE51bWJlci5jcmVhdGU7XG5jb25zdCBuYW5UeXBlID0gWm9kTmFOLmNyZWF0ZTtcbmNvbnN0IGJpZ0ludFR5cGUgPSBab2RCaWdJbnQuY3JlYXRlO1xuY29uc3QgYm9vbGVhblR5cGUgPSBab2RCb29sZWFuLmNyZWF0ZTtcbmNvbnN0IGRhdGVUeXBlID0gWm9kRGF0ZS5jcmVhdGU7XG5jb25zdCBzeW1ib2xUeXBlID0gWm9kU3ltYm9sLmNyZWF0ZTtcbmNvbnN0IHVuZGVmaW5lZFR5cGUgPSBab2RVbmRlZmluZWQuY3JlYXRlO1xuY29uc3QgbnVsbFR5cGUgPSBab2ROdWxsLmNyZWF0ZTtcbmNvbnN0IGFueVR5cGUgPSBab2RBbnkuY3JlYXRlO1xuY29uc3QgdW5rbm93blR5cGUgPSBab2RVbmtub3duLmNyZWF0ZTtcbmNvbnN0IG5ldmVyVHlwZSA9IFpvZE5ldmVyLmNyZWF0ZTtcbmNvbnN0IHZvaWRUeXBlID0gWm9kVm9pZC5jcmVhdGU7XG5jb25zdCBhcnJheVR5cGUgPSBab2RBcnJheS5jcmVhdGU7XG5jb25zdCBvYmplY3RUeXBlID0gWm9kT2JqZWN0LmNyZWF0ZTtcbmNvbnN0IHN0cmljdE9iamVjdFR5cGUgPSBab2RPYmplY3Quc3RyaWN0Q3JlYXRlO1xuY29uc3QgdW5pb25UeXBlID0gWm9kVW5pb24uY3JlYXRlO1xuY29uc3QgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSA9IFpvZERpc2NyaW1pbmF0ZWRVbmlvbi5jcmVhdGU7XG5jb25zdCBpbnRlcnNlY3Rpb25UeXBlID0gWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZTtcbmNvbnN0IHR1cGxlVHlwZSA9IFpvZFR1cGxlLmNyZWF0ZTtcbmNvbnN0IHJlY29yZFR5cGUgPSBab2RSZWNvcmQuY3JlYXRlO1xuY29uc3QgbWFwVHlwZSA9IFpvZE1hcC5jcmVhdGU7XG5jb25zdCBzZXRUeXBlID0gWm9kU2V0LmNyZWF0ZTtcbmNvbnN0IGZ1bmN0aW9uVHlwZSA9IFpvZEZ1bmN0aW9uLmNyZWF0ZTtcbmNvbnN0IGxhenlUeXBlID0gWm9kTGF6eS5jcmVhdGU7XG5jb25zdCBsaXRlcmFsVHlwZSA9IFpvZExpdGVyYWwuY3JlYXRlO1xuY29uc3QgZW51bVR5cGUgPSBab2RFbnVtLmNyZWF0ZTtcbmNvbnN0IG5hdGl2ZUVudW1UeXBlID0gWm9kTmF0aXZlRW51bS5jcmVhdGU7XG5jb25zdCBwcm9taXNlVHlwZSA9IFpvZFByb21pc2UuY3JlYXRlO1xuY29uc3QgZWZmZWN0c1R5cGUgPSBab2RFZmZlY3RzLmNyZWF0ZTtcbmNvbnN0IG9wdGlvbmFsVHlwZSA9IFpvZE9wdGlvbmFsLmNyZWF0ZTtcbmNvbnN0IG51bGxhYmxlVHlwZSA9IFpvZE51bGxhYmxlLmNyZWF0ZTtcbmNvbnN0IHByZXByb2Nlc3NUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcztcbmNvbnN0IHBpcGVsaW5lVHlwZSA9IFpvZFBpcGVsaW5lLmNyZWF0ZTtcbmNvbnN0IG9zdHJpbmcgPSAoKSA9PiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKTtcbmNvbnN0IG9udW1iZXIgPSAoKSA9PiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKTtcbmNvbnN0IG9ib29sZWFuID0gKCkgPT4gYm9vbGVhblR5cGUoKS5vcHRpb25hbCgpO1xuY29uc3QgY29lcmNlID0ge1xuICAgIHN0cmluZzogKChhcmcpID0+IFpvZFN0cmluZy5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG4gICAgbnVtYmVyOiAoKGFyZykgPT4gWm9kTnVtYmVyLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBib29sZWFuOiAoKGFyZykgPT4gWm9kQm9vbGVhbi5jcmVhdGUoe1xuICAgICAgICAuLi5hcmcsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICB9KSksXG4gICAgYmlnaW50OiAoKGFyZykgPT4gWm9kQmlnSW50LmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBkYXRlOiAoKGFyZykgPT4gWm9kRGF0ZS5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG59O1xuY29uc3QgTkVWRVIgPSBJTlZBTElEO1xuXG52YXIgeiA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgZGVmYXVsdEVycm9yTWFwOiBlcnJvck1hcCxcbiAgICBzZXRFcnJvck1hcDogc2V0RXJyb3JNYXAsXG4gICAgZ2V0RXJyb3JNYXA6IGdldEVycm9yTWFwLFxuICAgIG1ha2VJc3N1ZTogbWFrZUlzc3VlLFxuICAgIEVNUFRZX1BBVEg6IEVNUFRZX1BBVEgsXG4gICAgYWRkSXNzdWVUb0NvbnRleHQ6IGFkZElzc3VlVG9Db250ZXh0LFxuICAgIFBhcnNlU3RhdHVzOiBQYXJzZVN0YXR1cyxcbiAgICBJTlZBTElEOiBJTlZBTElELFxuICAgIERJUlRZOiBESVJUWSxcbiAgICBPSzogT0ssXG4gICAgaXNBYm9ydGVkOiBpc0Fib3J0ZWQsXG4gICAgaXNEaXJ0eTogaXNEaXJ0eSxcbiAgICBpc1ZhbGlkOiBpc1ZhbGlkLFxuICAgIGlzQXN5bmM6IGlzQXN5bmMsXG4gICAgZ2V0IHV0aWwgKCkgeyByZXR1cm4gdXRpbDsgfSxcbiAgICBnZXQgb2JqZWN0VXRpbCAoKSB7IHJldHVybiBvYmplY3RVdGlsOyB9LFxuICAgIFpvZFBhcnNlZFR5cGU6IFpvZFBhcnNlZFR5cGUsXG4gICAgZ2V0UGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZSxcbiAgICBab2RUeXBlOiBab2RUeXBlLFxuICAgIFpvZFN0cmluZzogWm9kU3RyaW5nLFxuICAgIFpvZE51bWJlcjogWm9kTnVtYmVyLFxuICAgIFpvZEJpZ0ludDogWm9kQmlnSW50LFxuICAgIFpvZEJvb2xlYW46IFpvZEJvb2xlYW4sXG4gICAgWm9kRGF0ZTogWm9kRGF0ZSxcbiAgICBab2RTeW1ib2w6IFpvZFN5bWJvbCxcbiAgICBab2RVbmRlZmluZWQ6IFpvZFVuZGVmaW5lZCxcbiAgICBab2ROdWxsOiBab2ROdWxsLFxuICAgIFpvZEFueTogWm9kQW55LFxuICAgIFpvZFVua25vd246IFpvZFVua25vd24sXG4gICAgWm9kTmV2ZXI6IFpvZE5ldmVyLFxuICAgIFpvZFZvaWQ6IFpvZFZvaWQsXG4gICAgWm9kQXJyYXk6IFpvZEFycmF5LFxuICAgIFpvZE9iamVjdDogWm9kT2JqZWN0LFxuICAgIFpvZFVuaW9uOiBab2RVbmlvbixcbiAgICBab2REaXNjcmltaW5hdGVkVW5pb246IFpvZERpc2NyaW1pbmF0ZWRVbmlvbixcbiAgICBab2RJbnRlcnNlY3Rpb246IFpvZEludGVyc2VjdGlvbixcbiAgICBab2RUdXBsZTogWm9kVHVwbGUsXG4gICAgWm9kUmVjb3JkOiBab2RSZWNvcmQsXG4gICAgWm9kTWFwOiBab2RNYXAsXG4gICAgWm9kU2V0OiBab2RTZXQsXG4gICAgWm9kRnVuY3Rpb246IFpvZEZ1bmN0aW9uLFxuICAgIFpvZExhenk6IFpvZExhenksXG4gICAgWm9kTGl0ZXJhbDogWm9kTGl0ZXJhbCxcbiAgICBab2RFbnVtOiBab2RFbnVtLFxuICAgIFpvZE5hdGl2ZUVudW06IFpvZE5hdGl2ZUVudW0sXG4gICAgWm9kUHJvbWlzZTogWm9kUHJvbWlzZSxcbiAgICBab2RFZmZlY3RzOiBab2RFZmZlY3RzLFxuICAgIFpvZFRyYW5zZm9ybWVyOiBab2RFZmZlY3RzLFxuICAgIFpvZE9wdGlvbmFsOiBab2RPcHRpb25hbCxcbiAgICBab2ROdWxsYWJsZTogWm9kTnVsbGFibGUsXG4gICAgWm9kRGVmYXVsdDogWm9kRGVmYXVsdCxcbiAgICBab2RDYXRjaDogWm9kQ2F0Y2gsXG4gICAgWm9kTmFOOiBab2ROYU4sXG4gICAgQlJBTkQ6IEJSQU5ELFxuICAgIFpvZEJyYW5kZWQ6IFpvZEJyYW5kZWQsXG4gICAgWm9kUGlwZWxpbmU6IFpvZFBpcGVsaW5lLFxuICAgIFpvZFJlYWRvbmx5OiBab2RSZWFkb25seSxcbiAgICBjdXN0b206IGN1c3RvbSxcbiAgICBTY2hlbWE6IFpvZFR5cGUsXG4gICAgWm9kU2NoZW1hOiBab2RUeXBlLFxuICAgIGxhdGU6IGxhdGUsXG4gICAgZ2V0IFpvZEZpcnN0UGFydHlUeXBlS2luZCAoKSB7IHJldHVybiBab2RGaXJzdFBhcnR5VHlwZUtpbmQ7IH0sXG4gICAgY29lcmNlOiBjb2VyY2UsXG4gICAgYW55OiBhbnlUeXBlLFxuICAgIGFycmF5OiBhcnJheVR5cGUsXG4gICAgYmlnaW50OiBiaWdJbnRUeXBlLFxuICAgIGJvb2xlYW46IGJvb2xlYW5UeXBlLFxuICAgIGRhdGU6IGRhdGVUeXBlLFxuICAgIGRpc2NyaW1pbmF0ZWRVbmlvbjogZGlzY3JpbWluYXRlZFVuaW9uVHlwZSxcbiAgICBlZmZlY3Q6IGVmZmVjdHNUeXBlLFxuICAgICdlbnVtJzogZW51bVR5cGUsXG4gICAgJ2Z1bmN0aW9uJzogZnVuY3Rpb25UeXBlLFxuICAgICdpbnN0YW5jZW9mJzogaW5zdGFuY2VPZlR5cGUsXG4gICAgaW50ZXJzZWN0aW9uOiBpbnRlcnNlY3Rpb25UeXBlLFxuICAgIGxhenk6IGxhenlUeXBlLFxuICAgIGxpdGVyYWw6IGxpdGVyYWxUeXBlLFxuICAgIG1hcDogbWFwVHlwZSxcbiAgICBuYW46IG5hblR5cGUsXG4gICAgbmF0aXZlRW51bTogbmF0aXZlRW51bVR5cGUsXG4gICAgbmV2ZXI6IG5ldmVyVHlwZSxcbiAgICAnbnVsbCc6IG51bGxUeXBlLFxuICAgIG51bGxhYmxlOiBudWxsYWJsZVR5cGUsXG4gICAgbnVtYmVyOiBudW1iZXJUeXBlLFxuICAgIG9iamVjdDogb2JqZWN0VHlwZSxcbiAgICBvYm9vbGVhbjogb2Jvb2xlYW4sXG4gICAgb251bWJlcjogb251bWJlcixcbiAgICBvcHRpb25hbDogb3B0aW9uYWxUeXBlLFxuICAgIG9zdHJpbmc6IG9zdHJpbmcsXG4gICAgcGlwZWxpbmU6IHBpcGVsaW5lVHlwZSxcbiAgICBwcmVwcm9jZXNzOiBwcmVwcm9jZXNzVHlwZSxcbiAgICBwcm9taXNlOiBwcm9taXNlVHlwZSxcbiAgICByZWNvcmQ6IHJlY29yZFR5cGUsXG4gICAgc2V0OiBzZXRUeXBlLFxuICAgIHN0cmljdE9iamVjdDogc3RyaWN0T2JqZWN0VHlwZSxcbiAgICBzdHJpbmc6IHN0cmluZ1R5cGUsXG4gICAgc3ltYm9sOiBzeW1ib2xUeXBlLFxuICAgIHRyYW5zZm9ybWVyOiBlZmZlY3RzVHlwZSxcbiAgICB0dXBsZTogdHVwbGVUeXBlLFxuICAgICd1bmRlZmluZWQnOiB1bmRlZmluZWRUeXBlLFxuICAgIHVuaW9uOiB1bmlvblR5cGUsXG4gICAgdW5rbm93bjogdW5rbm93blR5cGUsXG4gICAgJ3ZvaWQnOiB2b2lkVHlwZSxcbiAgICBORVZFUjogTkVWRVIsXG4gICAgWm9kSXNzdWVDb2RlOiBab2RJc3N1ZUNvZGUsXG4gICAgcXVvdGVsZXNzSnNvbjogcXVvdGVsZXNzSnNvbixcbiAgICBab2RFcnJvcjogWm9kRXJyb3Jcbn0pO1xuXG5leHBvcnQgeyBCUkFORCwgRElSVFksIEVNUFRZX1BBVEgsIElOVkFMSUQsIE5FVkVSLCBPSywgUGFyc2VTdGF0dXMsIFpvZFR5cGUgYXMgU2NoZW1hLCBab2RBbnksIFpvZEFycmF5LCBab2RCaWdJbnQsIFpvZEJvb2xlYW4sIFpvZEJyYW5kZWQsIFpvZENhdGNoLCBab2REYXRlLCBab2REZWZhdWx0LCBab2REaXNjcmltaW5hdGVkVW5pb24sIFpvZEVmZmVjdHMsIFpvZEVudW0sIFpvZEVycm9yLCBab2RGaXJzdFBhcnR5VHlwZUtpbmQsIFpvZEZ1bmN0aW9uLCBab2RJbnRlcnNlY3Rpb24sIFpvZElzc3VlQ29kZSwgWm9kTGF6eSwgWm9kTGl0ZXJhbCwgWm9kTWFwLCBab2ROYU4sIFpvZE5hdGl2ZUVudW0sIFpvZE5ldmVyLCBab2ROdWxsLCBab2ROdWxsYWJsZSwgWm9kTnVtYmVyLCBab2RPYmplY3QsIFpvZE9wdGlvbmFsLCBab2RQYXJzZWRUeXBlLCBab2RQaXBlbGluZSwgWm9kUHJvbWlzZSwgWm9kUmVhZG9ubHksIFpvZFJlY29yZCwgWm9kVHlwZSBhcyBab2RTY2hlbWEsIFpvZFNldCwgWm9kU3RyaW5nLCBab2RTeW1ib2wsIFpvZEVmZmVjdHMgYXMgWm9kVHJhbnNmb3JtZXIsIFpvZFR1cGxlLCBab2RUeXBlLCBab2RVbmRlZmluZWQsIFpvZFVuaW9uLCBab2RVbmtub3duLCBab2RWb2lkLCBhZGRJc3N1ZVRvQ29udGV4dCwgYW55VHlwZSBhcyBhbnksIGFycmF5VHlwZSBhcyBhcnJheSwgYmlnSW50VHlwZSBhcyBiaWdpbnQsIGJvb2xlYW5UeXBlIGFzIGJvb2xlYW4sIGNvZXJjZSwgY3VzdG9tLCBkYXRlVHlwZSBhcyBkYXRlLCB6IGFzIGRlZmF1bHQsIGVycm9yTWFwIGFzIGRlZmF1bHRFcnJvck1hcCwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBnZXRFcnJvck1hcCwgZ2V0UGFyc2VkVHlwZSwgaW5zdGFuY2VPZlR5cGUgYXMgaW5zdGFuY2VvZiwgaW50ZXJzZWN0aW9uVHlwZSBhcyBpbnRlcnNlY3Rpb24sIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbGF0ZSwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFrZUlzc3VlLCBtYXBUeXBlIGFzIG1hcCwgbmFuVHlwZSBhcyBuYW4sIG5hdGl2ZUVudW1UeXBlIGFzIG5hdGl2ZUVudW0sIG5ldmVyVHlwZSBhcyBuZXZlciwgbnVsbFR5cGUgYXMgbnVsbCwgbnVsbGFibGVUeXBlIGFzIG51bGxhYmxlLCBudW1iZXJUeXBlIGFzIG51bWJlciwgb2JqZWN0VHlwZSBhcyBvYmplY3QsIG9iamVjdFV0aWwsIG9ib29sZWFuLCBvbnVtYmVyLCBvcHRpb25hbFR5cGUgYXMgb3B0aW9uYWwsIG9zdHJpbmcsIHBpcGVsaW5lVHlwZSBhcyBwaXBlbGluZSwgcHJlcHJvY2Vzc1R5cGUgYXMgcHJlcHJvY2VzcywgcHJvbWlzZVR5cGUgYXMgcHJvbWlzZSwgcXVvdGVsZXNzSnNvbiwgcmVjb3JkVHlwZSBhcyByZWNvcmQsIHNldFR5cGUgYXMgc2V0LCBzZXRFcnJvck1hcCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdXRpbCwgdm9pZFR5cGUgYXMgdm9pZCwgeiB9O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlQW55RGVmID0gdm9pZCAwO1xuZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0cy5wYXJzZUFueURlZiA9IHBhcnNlQW55RGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlQXJyYXlEZWYgPSB2b2lkIDA7XG5jb25zdCB6b2RfMSA9IHJlcXVpcmUoXCJ6b2RcIik7XG5jb25zdCBlcnJvck1lc3NhZ2VzXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JNZXNzYWdlc1wiKTtcbmNvbnN0IHBhcnNlRGVmXzEgPSByZXF1aXJlKFwiLi4vcGFyc2VEZWZcIik7XG5mdW5jdGlvbiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgfTtcbiAgICBpZiAoKChfYiA9IChfYSA9IGRlZi50eXBlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX2RlZikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnR5cGVOYW1lKSAhPT0gem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSkge1xuICAgICAgICByZXMuaXRlbXMgPSAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoZGVmLnR5cGUuX2RlZiwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZWZzKSwgeyBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiaXRlbXNcIl0gfSkpO1xuICAgIH1cbiAgICBpZiAoZGVmLm1pbkxlbmd0aCkge1xuICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJtaW5JdGVtc1wiLCBkZWYubWluTGVuZ3RoLnZhbHVlLCBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLm1heExlbmd0aCkge1xuICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJtYXhJdGVtc1wiLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgICgwLCBlcnJvck1lc3NhZ2VzXzEuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycykocmVzLCBcIm1pbkl0ZW1zXCIsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJtYXhJdGVtc1wiLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbmV4cG9ydHMucGFyc2VBcnJheURlZiA9IHBhcnNlQXJyYXlEZWY7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyA9IGV4cG9ydHMuYWRkRXJyb3JNZXNzYWdlID0gdm9pZCAwO1xuZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcbiAgICBpZiAoIShyZWZzID09PSBudWxsIHx8IHJlZnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlZnMuZXJyb3JNZXNzYWdlcykpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHJlcy5lcnJvck1lc3NhZ2UgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlcy5lcnJvck1lc3NhZ2UpLCB7IFtrZXldOiBlcnJvck1lc3NhZ2UgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5hZGRFcnJvck1lc3NhZ2UgPSBhZGRFcnJvck1lc3NhZ2U7XG5mdW5jdGlvbiBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywga2V5LCB2YWx1ZSwgZXJyb3JNZXNzYWdlLCByZWZzKSB7XG4gICAgcmVzW2tleV0gPSB2YWx1ZTtcbiAgICBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcyk7XG59XG5leHBvcnRzLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgPSBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlQmlnaW50RGVmID0gdm9pZCAwO1xuY29uc3QgZXJyb3JNZXNzYWdlc18xID0gcmVxdWlyZShcIi4uL2Vycm9yTWVzc2FnZXNcIik7XG5mdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6IFwiaW50ZWdlclwiLFxuICAgICAgICBmb3JtYXQ6IFwiaW50NjRcIixcbiAgICB9O1xuICAgIGlmICghZGVmLmNoZWNrcylcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlIFwibWluXCI6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSBcImpzb25TY2hlbWE3XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGVycm9yTWVzc2FnZXNfMS5zZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKShyZXMsIFwibWluaW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJleGNsdXNpdmVNaW5pbXVtXCIsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJtaW5pbXVtXCIsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibWF4XCI6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSBcImpzb25TY2hlbWE3XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGVycm9yTWVzc2FnZXNfMS5zZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKShyZXMsIFwibWF4aW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJleGNsdXNpdmVNYXhpbXVtXCIsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNYXhpbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJtYXhpbXVtXCIsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibXVsdGlwbGVPZlwiOlxuICAgICAgICAgICAgICAgICgwLCBlcnJvck1lc3NhZ2VzXzEuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycykocmVzLCBcIm11bHRpcGxlT2ZcIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5leHBvcnRzLnBhcnNlQmlnaW50RGVmID0gcGFyc2VCaWdpbnREZWY7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VCb29sZWFuRGVmID0gdm9pZCAwO1xuZnVuY3Rpb24gcGFyc2VCb29sZWFuRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgIH07XG59XG5leHBvcnRzLnBhcnNlQm9vbGVhbkRlZiA9IHBhcnNlQm9vbGVhbkRlZjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZUJyYW5kZWREZWYgPSB2b2lkIDA7XG5jb25zdCBwYXJzZURlZl8xID0gcmVxdWlyZShcIi4uL3BhcnNlRGVmXCIpO1xuZnVuY3Rpb24gcGFyc2VCcmFuZGVkRGVmKF9kZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbmV4cG9ydHMucGFyc2VCcmFuZGVkRGVmID0gcGFyc2VCcmFuZGVkRGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlQ2F0Y2hEZWYgPSB2b2lkIDA7XG5jb25zdCBwYXJzZURlZl8xID0gcmVxdWlyZShcIi4uL3BhcnNlRGVmXCIpO1xuY29uc3QgcGFyc2VDYXRjaERlZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICByZXR1cm4gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuZXhwb3J0cy5wYXJzZUNhdGNoRGVmID0gcGFyc2VDYXRjaERlZjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZURhdGVEZWYgPSB2b2lkIDA7XG5jb25zdCBlcnJvck1lc3NhZ2VzXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JNZXNzYWdlc1wiKTtcbmZ1bmN0aW9uIHBhcnNlRGF0ZURlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5kYXRlU3RyYXRlZ3kgPT0gXCJpbnRlZ2VyXCIpIHtcbiAgICAgICAgcmV0dXJuIGludGVnZXJEYXRlUGFyc2VyKGRlZiwgcmVmcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIGZvcm1hdDogXCJkYXRlLXRpbWVcIixcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLnBhcnNlRGF0ZURlZiA9IHBhcnNlRGF0ZURlZjtcbmNvbnN0IGludGVnZXJEYXRlUGFyc2VyID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgdHlwZTogXCJpbnRlZ2VyXCIsXG4gICAgICAgIGZvcm1hdDogXCJ1bml4LXRpbWVcIixcbiAgICB9O1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgXCJtaW5cIjpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09IFwianNvblNjaGVtYTdcIikge1xuICAgICAgICAgICAgICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJtaW5pbXVtXCIsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibWF4XCI6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSBcImpzb25TY2hlbWE3XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGVycm9yTWVzc2FnZXNfMS5zZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKShyZXMsIFwibWF4aW11bVwiLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlRGVmYXVsdERlZiA9IHZvaWQgMDtcbmNvbnN0IHBhcnNlRGVmXzEgPSByZXF1aXJlKFwiLi4vcGFyc2VEZWZcIik7XG5mdW5jdGlvbiBwYXJzZURlZmF1bHREZWYoX2RlZiwgcmVmcykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sICgwLCBwYXJzZURlZl8xLnBhcnNlRGVmKShfZGVmLmlubmVyVHlwZS5fZGVmLCByZWZzKSksIHsgZGVmYXVsdDogX2RlZi5kZWZhdWx0VmFsdWUoKSB9KTtcbn1cbmV4cG9ydHMucGFyc2VEZWZhdWx0RGVmID0gcGFyc2VEZWZhdWx0RGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlRWZmZWN0c0RlZiA9IHZvaWQgMDtcbmNvbnN0IHBhcnNlRGVmXzEgPSByZXF1aXJlKFwiLi4vcGFyc2VEZWZcIik7XG5mdW5jdGlvbiBwYXJzZUVmZmVjdHNEZWYoX2RlZiwgcmVmcykge1xuICAgIHJldHVybiByZWZzLmVmZmVjdFN0cmF0ZWd5ID09PSBcImlucHV0XCJcbiAgICAgICAgPyAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoX2RlZi5zY2hlbWEuX2RlZiwgcmVmcylcbiAgICAgICAgOiB7fTtcbn1cbmV4cG9ydHMucGFyc2VFZmZlY3RzRGVmID0gcGFyc2VFZmZlY3RzRGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlRW51bURlZiA9IHZvaWQgMDtcbmZ1bmN0aW9uIHBhcnNlRW51bURlZihkZWYpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBlbnVtOiBkZWYudmFsdWVzLFxuICAgIH07XG59XG5leHBvcnRzLnBhcnNlRW51bURlZiA9IHBhcnNlRW51bURlZjtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICAgIHRbcF0gPSBzW3BdO1xuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZUludGVyc2VjdGlvbkRlZiA9IHZvaWQgMDtcbmNvbnN0IHBhcnNlRGVmXzEgPSByZXF1aXJlKFwiLi4vcGFyc2VEZWZcIik7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoXCJ0eXBlXCIgaW4gdHlwZSAmJiB0eXBlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gXCJhbGxPZlwiIGluIHR5cGU7XG59O1xuZnVuY3Rpb24gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgYWxsT2YgPSBbXG4gICAgICAgICgwLCBwYXJzZURlZl8xLnBhcnNlRGVmKShkZWYubGVmdC5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhbGxPZlwiLCBcIjBcIl0gfSkpLFxuICAgICAgICAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoZGVmLnJpZ2h0Ll9kZWYsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVmcyksIHsgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcImFsbE9mXCIsIFwiMVwiXSB9KSksXG4gICAgXS5maWx0ZXIoKHgpID0+ICEheCk7XG4gICAgbGV0IHVuZXZhbHVhdGVkUHJvcGVydGllcyA9IHJlZnMudGFyZ2V0ID09PSBcImpzb25TY2hlbWEyMDE5LTA5XCJcbiAgICAgICAgPyB7IHVuZXZhbHVhdGVkUHJvcGVydGllczogZmFsc2UgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBtZXJnZWRBbGxPZiA9IFtdO1xuICAgIC8vIElmIGVpdGhlciBvZiB0aGUgc2NoZW1hcyBpcyBhbiBhbGxPZiwgbWVyZ2UgdGhlbSBpbnRvIGEgc2luZ2xlIGFsbE9mXG4gICAgYWxsT2YuZm9yRWFjaCgoc2NoZW1hKSA9PiB7XG4gICAgICAgIGlmIChpc0pzb25TY2hlbWE3QWxsT2ZUeXBlKHNjaGVtYSkpIHtcbiAgICAgICAgICAgIG1lcmdlZEFsbE9mLnB1c2goLi4uc2NoZW1hLmFsbE9mKTtcbiAgICAgICAgICAgIGlmIChzY2hlbWEudW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBvbmUgb2YgdGhlIHNjaGVtYXMgaGFzIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXQsXG4gICAgICAgICAgICAgICAgLy8gdGhlIG1lcmdlZCBzY2hlbWEgc2hvdWxkIGFsc28gaGF2ZSBubyB1bmV2YWx1YXRlZFByb3BlcnRpZXMgc2V0XG4gICAgICAgICAgICAgICAgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG5lc3RlZFNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgICAgIGlmIChcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCIgaW4gc2NoZW1hICYmXG4gICAgICAgICAgICAgICAgc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYWRkaXRpb25hbFByb3BlcnRpZXMgfSA9IHNjaGVtYSwgcmVzdCA9IF9fcmVzdChzY2hlbWEsIFtcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCJdKTtcbiAgICAgICAgICAgICAgICBuZXN0ZWRTY2hlbWEgPSByZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQXMgc29vbiBhcyBvbmUgb2YgdGhlIHNjaGVtYXMgaGFzIGFkZGl0aW9uYWxQcm9wZXJ0aWVzIHNldCBub3QgdG8gZmFsc2UsIHdlIGFsbG93IHVuZXZhbHVhdGVkUHJvcGVydGllc1xuICAgICAgICAgICAgICAgIHVuZXZhbHVhdGVkUHJvcGVydGllcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lcmdlZEFsbE9mLnB1c2gobmVzdGVkU2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtZXJnZWRBbGxPZi5sZW5ndGhcbiAgICAgICAgPyBPYmplY3QuYXNzaWduKHsgYWxsT2Y6IG1lcmdlZEFsbE9mIH0sIHVuZXZhbHVhdGVkUHJvcGVydGllcykgOiB1bmRlZmluZWQ7XG59XG5leHBvcnRzLnBhcnNlSW50ZXJzZWN0aW9uRGVmID0gcGFyc2VJbnRlcnNlY3Rpb25EZWY7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VMaXRlcmFsRGVmID0gdm9pZCAwO1xuZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSBcImJpZ2ludFwiICYmXG4gICAgICAgIHBhcnNlZFR5cGUgIT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gXCJib29sZWFuXCIgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogQXJyYXkuaXNBcnJheShkZWYudmFsdWUpID8gXCJhcnJheVwiIDogXCJvYmplY3RcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSBcIm9wZW5BcGkzXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHBhcnNlZFR5cGUgPT09IFwiYmlnaW50XCIgPyBcImludGVnZXJcIiA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gXCJiaWdpbnRcIiA/IFwiaW50ZWdlclwiIDogcGFyc2VkVHlwZSxcbiAgICAgICAgY29uc3Q6IGRlZi52YWx1ZSxcbiAgICB9O1xufVxuZXhwb3J0cy5wYXJzZUxpdGVyYWxEZWYgPSBwYXJzZUxpdGVyYWxEZWY7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VNYXBEZWYgPSB2b2lkIDA7XG5jb25zdCBwYXJzZURlZl8xID0gcmVxdWlyZShcIi4uL3BhcnNlRGVmXCIpO1xuZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3Qga2V5cyA9ICgwLCBwYXJzZURlZl8xLnBhcnNlRGVmKShkZWYua2V5VHlwZS5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJpdGVtc1wiLCBcIml0ZW1zXCIsIFwiMFwiXSB9KSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKGRlZi52YWx1ZVR5cGUuX2RlZiwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZWZzKSwgeyBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiaXRlbXNcIiwgXCJpdGVtc1wiLCBcIjFcIl0gfSkpIHx8IHt9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgbWF4SXRlbXM6IDEyNSxcbiAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydHMucGFyc2VNYXBEZWYgPSBwYXJzZU1hcERlZjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZU5hdGl2ZUVudW1EZWYgPSB2b2lkIDA7XG5mdW5jdGlvbiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKSB7XG4gICAgY29uc3Qgb2JqZWN0ID0gZGVmLnZhbHVlcztcbiAgICBjb25zdCBhY3R1YWxLZXlzID0gT2JqZWN0LmtleXMoZGVmLnZhbHVlcykuZmlsdGVyKChrZXkpID0+IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmplY3Rbb2JqZWN0W2tleV1dICE9PSBcIm51bWJlclwiO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxXG4gICAgICAgICAgICA/IHBhcnNlZFR5cGVzWzBdID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgPyBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgOiBcIm51bWJlclwiXG4gICAgICAgICAgICA6IFtcInN0cmluZ1wiLCBcIm51bWJlclwiXSxcbiAgICAgICAgZW51bTogYWN0dWFsVmFsdWVzLFxuICAgIH07XG59XG5leHBvcnRzLnBhcnNlTmF0aXZlRW51bURlZiA9IHBhcnNlTmF0aXZlRW51bURlZjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZU5ldmVyRGVmID0gdm9pZCAwO1xuZnVuY3Rpb24gcGFyc2VOZXZlckRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBub3Q6IHt9LFxuICAgIH07XG59XG5leHBvcnRzLnBhcnNlTmV2ZXJEZWYgPSBwYXJzZU5ldmVyRGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlTnVsbERlZiA9IHZvaWQgMDtcbmZ1bmN0aW9uIHBhcnNlTnVsbERlZihyZWZzKSB7XG4gICAgcmV0dXJuIHJlZnMudGFyZ2V0ID09PSBcIm9wZW5BcGkzXCJcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBlbnVtOiBbXCJudWxsXCJdLFxuICAgICAgICAgICAgbnVsbGFibGU6IHRydWUsXG4gICAgICAgIH1cbiAgICAgICAgOiB7XG4gICAgICAgICAgICB0eXBlOiBcIm51bGxcIixcbiAgICAgICAgfTtcbn1cbmV4cG9ydHMucGFyc2VOdWxsRGVmID0gcGFyc2VOdWxsRGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlTnVsbGFibGVEZWYgPSB2b2lkIDA7XG5jb25zdCBwYXJzZURlZl8xID0gcmVxdWlyZShcIi4uL3BhcnNlRGVmXCIpO1xuY29uc3QgdW5pb25fMSA9IHJlcXVpcmUoXCIuL3VuaW9uXCIpO1xuZnVuY3Rpb24gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAoW1wiWm9kU3RyaW5nXCIsIFwiWm9kTnVtYmVyXCIsIFwiWm9kQmlnSW50XCIsIFwiWm9kQm9vbGVhblwiLCBcIlpvZE51bGxcIl0uaW5jbHVkZXMoZGVmLmlubmVyVHlwZS5fZGVmLnR5cGVOYW1lKSAmJlxuICAgICAgICAoIWRlZi5pbm5lclR5cGUuX2RlZi5jaGVja3MgfHwgIWRlZi5pbm5lclR5cGUuX2RlZi5jaGVja3MubGVuZ3RoKSkge1xuICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09IFwib3BlbkFwaTNcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiB1bmlvbl8xLnByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sXG4gICAgICAgICAgICAgICAgbnVsbGFibGU6IHRydWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBbXG4gICAgICAgICAgICAgICAgdW5pb25fMS5wcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIFwibnVsbFwiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSBcIm9wZW5BcGkzXCIpIHtcbiAgICAgICAgY29uc3QgYmFzZSA9ICgwLCBwYXJzZURlZl8xLnBhcnNlRGVmKShkZWYuaW5uZXJUeXBlLl9kZWYsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVmcyksIHsgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSB9KSk7XG4gICAgICAgIHJldHVybiBiYXNlICYmIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYmFzZSksIHsgbnVsbGFibGU6IHRydWUgfSk7XG4gICAgfVxuICAgIGNvbnN0IGJhc2UgPSAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoZGVmLmlubmVyVHlwZS5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhbnlPZlwiLCBcIjBcIl0gfSkpO1xuICAgIHJldHVybiBiYXNlICYmIHsgYW55T2Y6IFtiYXNlLCB7IHR5cGU6IFwibnVsbFwiIH1dIH07XG59XG5leHBvcnRzLnBhcnNlTnVsbGFibGVEZWYgPSBwYXJzZU51bGxhYmxlRGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlVW5pb25EZWYgPSBleHBvcnRzLnByaW1pdGl2ZU1hcHBpbmdzID0gdm9pZCAwO1xuY29uc3QgcGFyc2VEZWZfMSA9IHJlcXVpcmUoXCIuLi9wYXJzZURlZlwiKTtcbmV4cG9ydHMucHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiBcInN0cmluZ1wiLFxuICAgIFpvZE51bWJlcjogXCJudW1iZXJcIixcbiAgICBab2RCaWdJbnQ6IFwiaW50ZWdlclwiLFxuICAgIFpvZEJvb2xlYW46IFwiYm9vbGVhblwiLFxuICAgIFpvZE51bGw6IFwibnVsbFwiLFxufTtcbmZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSBcIm9wZW5BcGkzXCIpXG4gICAgICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucztcbiAgICAvLyBUaGlzIGJsb2NrcyB0cmllcyB0byBsb29rIGFoZWFkIGEgYml0IHRvIHByb2R1Y2UgbmljZXIgbG9va2luZyBzY2hlbWFzIHdpdGggdHlwZSBhcnJheSBpbnN0ZWFkIG9mIGFueU9mLlxuICAgIGlmIChvcHRpb25zLmV2ZXJ5KCh4KSA9PiB4Ll9kZWYudHlwZU5hbWUgaW4gZXhwb3J0cy5wcmltaXRpdmVNYXBwaW5ncyAmJlxuICAgICAgICAoIXguX2RlZi5jaGVja3MgfHwgIXguX2RlZi5jaGVja3MubGVuZ3RoKSkpIHtcbiAgICAgICAgLy8gYWxsIHR5cGVzIGluIHVuaW9uIGFyZSBwcmltaXRpdmUgYW5kIGxhY2sgY2hlY2tzLCBzbyBtaWdodCBhcyB3ZWxsIHNxdWFzaCBpbnRvIHt0eXBlOiBbLi4uXX1cbiAgICAgICAgY29uc3QgdHlwZXMgPSBvcHRpb25zLnJlZHVjZSgodHlwZXMsIHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBleHBvcnRzLnByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSBcIlpvZExpdGVyYWxcIiAmJiAheC5kZXNjcmlwdGlvbikpIHtcbiAgICAgICAgLy8gYWxsIG9wdGlvbnMgbGl0ZXJhbHNcbiAgICAgICAgY29uc3QgdHlwZXMgPSBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIHguX2RlZi52YWx1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsIHR5cGVdO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsIFwiaW50ZWdlclwiXTtcbiAgICAgICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICh4Ll9kZWYudmFsdWUgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgXCJudWxsXCJdO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgW10pO1xuICAgICAgICBpZiAodHlwZXMubGVuZ3RoID09PSBvcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gYWxsIHRoZSBsaXRlcmFscyBhcmUgcHJpbWl0aXZlLCBhcyBmYXIgYXMgbnVsbCBjYW4gYmUgY29uc2lkZXJlZCBwcmltaXRpdmVcbiAgICAgICAgICAgIGNvbnN0IHVuaXF1ZVR5cGVzID0gdHlwZXMuZmlsdGVyKCh4LCBpLCBhKSA9PiBhLmluZGV4T2YoeCkgPT09IGkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiB1bmlxdWVUeXBlcy5sZW5ndGggPiAxID8gdW5pcXVlVHlwZXMgOiB1bmlxdWVUeXBlc1swXSxcbiAgICAgICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2MuaW5jbHVkZXMoeC5fZGVmLnZhbHVlKSA/IGFjYyA6IFsuLi5hY2MsIHguX2RlZi52YWx1ZV07XG4gICAgICAgICAgICAgICAgfSwgW10pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb25zLmV2ZXJ5KCh4KSA9PiB4Ll9kZWYudHlwZU5hbWUgPT09IFwiWm9kRW51bVwiKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IFtcbiAgICAgICAgICAgICAgICAuLi5hY2MsXG4gICAgICAgICAgICAgICAgLi4ueC5fZGVmLnZhbHVlcy5maWx0ZXIoKHgpID0+ICFhY2MuaW5jbHVkZXMoeCkpLFxuICAgICAgICAgICAgXSwgW10pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xufVxuZXhwb3J0cy5wYXJzZVVuaW9uRGVmID0gcGFyc2VVbmlvbkRlZjtcbmNvbnN0IGFzQW55T2YgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgY29uc3QgYW55T2YgPSAoZGVmLm9wdGlvbnMgaW5zdGFuY2VvZiBNYXBcbiAgICAgICAgPyBBcnJheS5mcm9tKGRlZi5vcHRpb25zLnZhbHVlcygpKVxuICAgICAgICA6IGRlZi5vcHRpb25zKVxuICAgICAgICAubWFwKCh4LCBpKSA9PiAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoeC5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhbnlPZlwiLCBgJHtpfWBdIH0pKSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmXG4gICAgICAgICghcmVmcy5zdHJpY3RVbmlvbnMgfHxcbiAgICAgICAgICAgICh0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlTnVtYmVyRGVmID0gdm9pZCAwO1xuY29uc3QgZXJyb3JNZXNzYWdlc18xID0gcmVxdWlyZShcIi4uL2Vycm9yTWVzc2FnZXNcIik7XG5mdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgfTtcbiAgICBpZiAoIWRlZi5jaGVja3MpXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgZm9yIChjb25zdCBjaGVjayBvZiBkZWYuY2hlY2tzKSB7XG4gICAgICAgIHN3aXRjaCAoY2hlY2sua2luZCkge1xuICAgICAgICAgICAgY2FzZSBcImludFwiOlxuICAgICAgICAgICAgICAgIHJlcy50eXBlID0gXCJpbnRlZ2VyXCI7XG4gICAgICAgICAgICAgICAgKDAsIGVycm9yTWVzc2FnZXNfMS5hZGRFcnJvck1lc3NhZ2UpKHJlcywgXCJ0eXBlXCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm1pblwiOlxuICAgICAgICAgICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gXCJqc29uU2NoZW1hN1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBlcnJvck1lc3NhZ2VzXzEuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycykocmVzLCBcIm1pbmltdW1cIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGVycm9yTWVzc2FnZXNfMS5zZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKShyZXMsIFwiZXhjbHVzaXZlTWluaW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKDAsIGVycm9yTWVzc2FnZXNfMS5zZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKShyZXMsIFwibWluaW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm1heFwiOlxuICAgICAgICAgICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gXCJqc29uU2NoZW1hN1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBlcnJvck1lc3NhZ2VzXzEuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycykocmVzLCBcIm1heGltdW1cIiwgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGVycm9yTWVzc2FnZXNfMS5zZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKShyZXMsIFwiZXhjbHVzaXZlTWF4aW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZXhjbHVzaXZlTWF4aW11bSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKDAsIGVycm9yTWVzc2FnZXNfMS5zZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKShyZXMsIFwibWF4aW11bVwiLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm11bHRpcGxlT2ZcIjpcbiAgICAgICAgICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJtdWx0aXBsZU9mXCIsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuZXhwb3J0cy5wYXJzZU51bWJlckRlZiA9IHBhcnNlTnVtYmVyRGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlT2JqZWN0RGVmID0gZXhwb3J0cy5wYXJzZU9iamVjdERlZlggPSB2b2lkIDA7XG5jb25zdCBwYXJzZURlZl8xID0gcmVxdWlyZShcIi4uL3BhcnNlRGVmXCIpO1xuZnVuY3Rpb24gcGFyc2VPYmplY3REZWZYKGRlZiwgcmVmcykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgT2JqZWN0LmtleXMoZGVmLnNoYXBlKCkpLnJlZHVjZSgoc2NoZW1hLCBrZXkpID0+IHtcbiAgICAgICAgbGV0IHByb3AgPSBkZWYuc2hhcGUoKVtrZXldO1xuICAgICAgICBjb25zdCBpc09wdGlvbmFsID0gcHJvcC5pc09wdGlvbmFsKCk7XG4gICAgICAgIGlmICghaXNPcHRpb25hbCkge1xuICAgICAgICAgICAgcHJvcCA9IE9iamVjdC5hc3NpZ24oe30sIHByb3AuX2RlZi5pbm5lclNjaGVtYSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvcFNjaGVtYSA9ICgwLCBwYXJzZURlZl8xLnBhcnNlRGVmKShwcm9wLl9kZWYsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVmcyksIHsgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcInByb3BlcnRpZXNcIiwga2V5XSwgcHJvcGVydHlQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJwcm9wZXJ0aWVzXCIsIGtleV0gfSkpO1xuICAgICAgICBpZiAocHJvcFNjaGVtYSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzY2hlbWEucHJvcGVydGllc1trZXldID0gcHJvcFNjaGVtYTtcbiAgICAgICAgICAgIGlmICghaXNPcHRpb25hbCkge1xuICAgICAgICAgICAgICAgIGlmICghc2NoZW1hLnJlcXVpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYS5yZXF1aXJlZCA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzY2hlbWEucmVxdWlyZWQucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfSwge1xuICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGRlZi5jYXRjaGFsbC5fZGVmLnR5cGVOYW1lID09PSBcIlpvZE5ldmVyXCJcbiAgICAgICAgICAgID8gZGVmLnVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCJcbiAgICAgICAgICAgIDogKF9hID0gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKGRlZi5jYXRjaGFsbC5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiXSB9KSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRydWUsXG4gICAgfSk7XG4gICAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgdHlwZTogXCJvYmplY3RcIiB9LCBPYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgaWYgKHByb3BEZWYgPT09IHVuZGVmaW5lZCB8fCBwcm9wRGVmLl9kZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIGNvbnN0IHBhcnNlZERlZiA9ICgwLCBwYXJzZURlZl8xLnBhcnNlRGVmKShwcm9wRGVmLl9kZWYsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVmcyksIHsgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcInByb3BlcnRpZXNcIiwgcHJvcE5hbWVdLCBwcm9wZXJ0eVBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcInByb3BlcnRpZXNcIiwgcHJvcE5hbWVdIH0pKTtcbiAgICAgICAgaWYgKHBhcnNlZERlZiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYWNjLnByb3BlcnRpZXMpLCB7IFtwcm9wTmFtZV06IHBhcnNlZERlZiB9KSxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBwcm9wRGVmLmlzT3B0aW9uYWwoKVxuICAgICAgICAgICAgICAgID8gYWNjLnJlcXVpcmVkXG4gICAgICAgICAgICAgICAgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgIH07XG4gICAgfSwgeyBwcm9wZXJ0aWVzOiB7fSwgcmVxdWlyZWQ6IFtdIH0pKSwgeyBhZGRpdGlvbmFsUHJvcGVydGllczogZGVmLmNhdGNoYWxsLl9kZWYudHlwZU5hbWUgPT09IFwiWm9kTmV2ZXJcIlxuICAgICAgICAgICAgPyBkZWYudW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIlxuICAgICAgICAgICAgOiAoX2IgPSAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoZGVmLmNhdGNoYWxsLl9kZWYsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVmcyksIHsgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCJdIH0pKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdHJ1ZSB9KTtcbiAgICBpZiAoIXJlc3VsdC5yZXF1aXJlZC5sZW5ndGgpXG4gICAgICAgIGRlbGV0ZSByZXN1bHQucmVxdWlyZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydHMucGFyc2VPYmplY3REZWZYID0gcGFyc2VPYmplY3REZWZYO1xuZnVuY3Rpb24gcGFyc2VPYmplY3REZWYoZGVmLCByZWZzKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHJlc3VsdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IHR5cGU6IFwib2JqZWN0XCIgfSwgT2JqZWN0LmVudHJpZXMoZGVmLnNoYXBlKCkpLnJlZHVjZSgoYWNjLCBbcHJvcE5hbWUsIHByb3BEZWZdKSA9PiB7XG4gICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICBjb25zdCBwYXJzZWREZWYgPSAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikocHJvcERlZi5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJwcm9wZXJ0aWVzXCIsIHByb3BOYW1lXSwgcHJvcGVydHlQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJwcm9wZXJ0aWVzXCIsIHByb3BOYW1lXSB9KSk7XG4gICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGFjYy5wcm9wZXJ0aWVzKSwgeyBbcHJvcE5hbWVdOiBwYXJzZWREZWYgfSksXG4gICAgICAgICAgICByZXF1aXJlZDogcHJvcERlZi5pc09wdGlvbmFsKClcbiAgICAgICAgICAgICAgICA/IGFjYy5yZXF1aXJlZFxuICAgICAgICAgICAgICAgIDogWy4uLmFjYy5yZXF1aXJlZCwgcHJvcE5hbWVdLFxuICAgICAgICB9O1xuICAgIH0sIHsgcHJvcGVydGllczoge30sIHJlcXVpcmVkOiBbXSB9KSksIHsgYWRkaXRpb25hbFByb3BlcnRpZXM6IGRlZi5jYXRjaGFsbC5fZGVmLnR5cGVOYW1lID09PSBcIlpvZE5ldmVyXCJcbiAgICAgICAgICAgID8gZGVmLnVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCJcbiAgICAgICAgICAgIDogKF9hID0gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKGRlZi5jYXRjaGFsbC5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiXSB9KSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRydWUgfSk7XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnRzLnBhcnNlT2JqZWN0RGVmID0gcGFyc2VPYmplY3REZWY7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VPcHRpb25hbERlZiA9IHZvaWQgMDtcbmNvbnN0IHBhcnNlRGVmXzEgPSByZXF1aXJlKFwiLi4vcGFyc2VEZWZcIik7XG5jb25zdCBwYXJzZU9wdGlvbmFsRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHZhciBfYTtcbiAgICBpZiAocmVmcy5jdXJyZW50UGF0aC50b1N0cmluZygpID09PSAoKF9hID0gcmVmcy5wcm9wZXJ0eVBhdGgpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b1N0cmluZygpKSkge1xuICAgICAgICByZXR1cm4gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKGRlZi5pbm5lclR5cGUuX2RlZiwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZWZzKSwgeyBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwiYW55T2ZcIiwgXCIxXCJdIH0pKTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWFcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbmV4cG9ydHMucGFyc2VPcHRpb25hbERlZiA9IHBhcnNlT3B0aW9uYWxEZWY7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VQaXBlbGluZURlZiA9IHZvaWQgMDtcbmNvbnN0IHBhcnNlRGVmXzEgPSByZXF1aXJlKFwiLi4vcGFyc2VEZWZcIik7XG5jb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gXCJpbnB1dFwiKSB7XG4gICAgICAgIHJldHVybiAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBhID0gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKGRlZi5pbi5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhbGxPZlwiLCBcIjBcIl0gfSkpO1xuICAgIGNvbnN0IGIgPSAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoZGVmLm91dC5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhbGxPZlwiLCBhID8gXCIxXCIgOiBcIjBcIl0gfSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuZXhwb3J0cy5wYXJzZVBpcGVsaW5lRGVmID0gcGFyc2VQaXBlbGluZURlZjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZVByb21pc2VEZWYgPSB2b2lkIDA7XG5jb25zdCBwYXJzZURlZl8xID0gcmVxdWlyZShcIi4uL3BhcnNlRGVmXCIpO1xuZnVuY3Rpb24gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcykge1xuICAgIHJldHVybiAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG5leHBvcnRzLnBhcnNlUHJvbWlzZURlZiA9IHBhcnNlUHJvbWlzZURlZjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZVJlY29yZERlZiA9IHZvaWQgMDtcbmNvbnN0IHpvZF8xID0gcmVxdWlyZShcInpvZFwiKTtcbmNvbnN0IHBhcnNlRGVmXzEgPSByZXF1aXJlKFwiLi4vcGFyc2VEZWZcIik7XG5jb25zdCBzdHJpbmdfMSA9IHJlcXVpcmUoXCIuL3N0cmluZ1wiKTtcbmZ1bmN0aW9uIHBhcnNlUmVjb3JkRGVmKGRlZiwgcmVmcykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSBcIm9wZW5BcGkzXCIgJiZcbiAgICAgICAgKChfYSA9IGRlZi5rZXlUeXBlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX2RlZi50eXBlTmFtZSkgPT09IHpvZF8xLlpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLFxuICAgICAgICAgICAgcHJvcGVydGllczogZGVmLmtleVR5cGUuX2RlZi52YWx1ZXMucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYWNjKSwgeyBba2V5XTogKF9hID0gKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKGRlZi52YWx1ZVR5cGUuX2RlZiwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZWZzKSwgeyBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsIFwicHJvcGVydGllc1wiLCBrZXldIH0pKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30gfSkpO1xuICAgICAgICAgICAgfSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiAoX2IgPSAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoZGVmLnZhbHVlVHlwZS5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiXSB9KSkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHt9LFxuICAgIH07XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSBcIm9wZW5BcGkzXCIpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKCgoX2MgPSBkZWYua2V5VHlwZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLl9kZWYudHlwZU5hbWUpID09PSB6b2RfMS5ab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmXG4gICAgICAgICgoX2QgPSBkZWYua2V5VHlwZS5fZGVmLmNoZWNrcykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmxlbmd0aCkpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKCgwLCBzdHJpbmdfMS5wYXJzZVN0cmluZ0RlZikoZGVmLmtleVR5cGUuX2RlZiwgcmVmcykpLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IChrZXkgPT09IFwidHlwZVwiID8gYWNjIDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBhY2MpLCB7IFtrZXldOiB2YWx1ZSB9KSksIHt9KTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2NoZW1hKSwgeyBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICgoKF9lID0gZGVmLmtleVR5cGUpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5fZGVmLnR5cGVOYW1lKSA9PT0gem9kXzEuWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2NoZW1hKSwgeyBwcm9wZXJ0eU5hbWVzOiB7XG4gICAgICAgICAgICAgICAgZW51bTogZGVmLmtleVR5cGUuX2RlZi52YWx1ZXMsXG4gICAgICAgICAgICB9IH0pO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuZXhwb3J0cy5wYXJzZVJlY29yZERlZiA9IHBhcnNlUmVjb3JkRGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlU3RyaW5nRGVmID0gZXhwb3J0cy5lbW9qaVBhdHRlcm4gPSBleHBvcnRzLnVsaWRQYXR0ZXJuID0gZXhwb3J0cy5jdWlkMlBhdHRlcm4gPSBleHBvcnRzLmN1aWRQYXR0ZXJuID0gZXhwb3J0cy5lbWFpbFBhdHRlcm4gPSB2b2lkIDA7XG5jb25zdCBlcnJvck1lc3NhZ2VzXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JNZXNzYWdlc1wiKTtcbmV4cG9ydHMuZW1haWxQYXR0ZXJuID0gJ14oKFtePD4oKVtcXFxcXVxcXFxcXFxcLiw7OlxcXFxzQFxcXFxcIl0rKFxcXFwuW148PigpW1xcXFxdXFxcXFxcXFwuLDs6XFxcXHNAXFxcXFwiXSspKil8KFxcXFxcIi4rXFxcXFwiKSlAKChcXFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFxcXF0pfChcXFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFxcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpXFxcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXFxcLltBLVphLXpdezIsfSkrKSkkJztcbmV4cG9ydHMuY3VpZFBhdHRlcm4gPSBcIl5jW15cXFxccy1dezgsfSRcIjtcbmV4cG9ydHMuY3VpZDJQYXR0ZXJuID0gXCJeW2Etel1bYS16MC05XSokXCI7XG5leHBvcnRzLnVsaWRQYXR0ZXJuID0gXCIvWzAtOUEtSEpLTU5QLVRWLVpdezI2fS9cIjtcbmV4cG9ydHMuZW1vamlQYXR0ZXJuID0gXCIvXihwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318cHtFbW9qaV9Db21wb25lbnR9KSskL3VcIjtcbmZ1bmN0aW9uIHBhcnNlU3RyaW5nRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICB9O1xuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm1pblwiOlxuICAgICAgICAgICAgICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJtaW5MZW5ndGhcIiwgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09IFwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm1heFwiOlxuICAgICAgICAgICAgICAgICAgICAoMCwgZXJyb3JNZXNzYWdlc18xLnNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMpKHJlcywgXCJtYXhMZW5ndGhcIiwgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09IFwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVtYWlsXCI6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZm9ybWF0OmVtYWlsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJlbWFpbFwiLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmb3JtYXQ6aWRuLWVtYWlsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJpZG4tZW1haWxcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGF0dGVybjp6b2RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgZXhwb3J0cy5lbWFpbFBhdHRlcm4sIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ1cmxcIjpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJ1cmlcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ1dWlkXCI6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsIFwidXVpZFwiLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInJlZ2V4XCI6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBjaGVjay5yZWdleC5zb3VyY2UsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3VpZFwiOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgZXhwb3J0cy5jdWlkUGF0dGVybiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjdWlkMlwiOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgZXhwb3J0cy5jdWlkMlBhdHRlcm4sIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhcnRzV2l0aFwiOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgXCJeXCIgKyBlc2NhcGVOb25BbHBoYU51bWVyaWMoY2hlY2sudmFsdWUpLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVuZHNXaXRoXCI6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBlc2NhcGVOb25BbHBoYU51bWVyaWMoY2hlY2sudmFsdWUpICsgXCIkXCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGF0ZXRpbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJkYXRlLXRpbWVcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsZW5ndGhcIjpcbiAgICAgICAgICAgICAgICAgICAgKDAsIGVycm9yTWVzc2FnZXNfMS5zZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKShyZXMsIFwibWluTGVuZ3RoXCIsIHR5cGVvZiByZXMubWluTGVuZ3RoID09PSBcIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IE1hdGgubWF4KHJlcy5taW5MZW5ndGgsIGNoZWNrLnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICgwLCBlcnJvck1lc3NhZ2VzXzEuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycykocmVzLCBcIm1heExlbmd0aFwiLCB0eXBlb2YgcmVzLm1heExlbmd0aCA9PT0gXCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyBNYXRoLm1pbihyZXMubWF4TGVuZ3RoLCBjaGVjay52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaW5jbHVkZXNcIjoge1xuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgZXNjYXBlTm9uQWxwaGFOdW1lcmljKGNoZWNrLnZhbHVlKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwiaXBcIjoge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2sudmVyc2lvbiAhPT0gXCJ2NlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCBcImlwdjRcIiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09IFwidjRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgXCJpcHY2XCIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwiZW1vamlcIjpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIGV4cG9ydHMuZW1vamlQYXR0ZXJuLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInVsaWRcIjoge1xuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgZXhwb3J0cy51bGlkUGF0dGVybiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIFwidG9Mb3dlckNhc2VcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwidG9VcHBlckNhc2VcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwidHJpbVwiOlxuICAgICAgICAgICAgICAgICAgICAvLyBJIGhhdmUgbm8gaWRlYSB3aHkgdGhlc2UgYXJlIGNoZWNrcyBpbiBab2Qg8J+kt1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5leHBvcnRzLnBhcnNlU3RyaW5nRGVmID0gcGFyc2VTdHJpbmdEZWY7XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbihcIlwiKTtcbmNvbnN0IGFkZEZvcm1hdCA9IChzY2hlbWEsIHZhbHVlLCBtZXNzYWdlLCByZWZzKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8ICgoX2EgPSBzY2hlbWEuYW55T2YpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zb21lKCh4KSA9PiB4LmZvcm1hdCkpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goT2JqZWN0LmFzc2lnbih7IGZvcm1hdDogc2NoZW1hLmZvcm1hdCB9LCAoc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiB7IGZvcm1hdDogc2NoZW1hLmVycm9yTWVzc2FnZS5mb3JtYXQgfSxcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKE9iamVjdC5hc3NpZ24oeyBmb3JtYXQ6IHZhbHVlIH0sIChtZXNzYWdlICYmXG4gICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICgwLCBlcnJvck1lc3NhZ2VzXzEuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycykoc2NoZW1hLCBcImZvcm1hdFwiLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIHZhciBfYTtcbiAgICBpZiAoc2NoZW1hLnBhdHRlcm4gfHwgKChfYSA9IHNjaGVtYS5hbGxPZikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNvbWUoKHgpID0+IHgucGF0dGVybikpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFsbE9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYWxsT2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLnBhdHRlcm4pIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKE9iamVjdC5hc3NpZ24oeyBwYXR0ZXJuOiBzY2hlbWEucGF0dGVybiB9LCAoc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IHNjaGVtYS5lcnJvck1lc3NhZ2UucGF0dGVybiB9LFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEucGF0dGVybjtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UucGF0dGVybjtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2NoZW1hLmVycm9yTWVzc2FnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuYWxsT2YucHVzaChPYmplY3QuYXNzaWduKHsgcGF0dGVybjogdmFsdWUgfSwgKG1lc3NhZ2UgJiZcbiAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7IGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBtZXNzYWdlIH0gfSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICgwLCBlcnJvck1lc3NhZ2VzXzEuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycykoc2NoZW1hLCBcInBhdHRlcm5cIiwgdmFsdWUsIG1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VTZXREZWYgPSB2b2lkIDA7XG5jb25zdCBlcnJvck1lc3NhZ2VzXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JNZXNzYWdlc1wiKTtcbmNvbnN0IHBhcnNlRGVmXzEgPSByZXF1aXJlKFwiLi4vcGFyc2VEZWZcIik7XG5mdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9ICgwLCBwYXJzZURlZl8xLnBhcnNlRGVmKShkZWYudmFsdWVUeXBlLl9kZWYsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVmcyksIHsgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcIml0ZW1zXCJdIH0pKTtcbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgICgwLCBlcnJvck1lc3NhZ2VzXzEuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycykoc2NoZW1hLCBcIm1pbkl0ZW1zXCIsIGRlZi5taW5TaXplLnZhbHVlLCBkZWYubWluU2l6ZS5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgaWYgKGRlZi5tYXhTaXplKSB7XG4gICAgICAgICgwLCBlcnJvck1lc3NhZ2VzXzEuc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycykoc2NoZW1hLCBcIm1heEl0ZW1zXCIsIGRlZi5tYXhTaXplLnZhbHVlLCBkZWYubWF4U2l6ZS5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbmV4cG9ydHMucGFyc2VTZXREZWYgPSBwYXJzZVNldERlZjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZVR1cGxlRGVmID0gdm9pZCAwO1xuY29uc3QgcGFyc2VEZWZfMSA9IHJlcXVpcmUoXCIuLi9wYXJzZURlZlwiKTtcbmZ1bmN0aW9uIHBhcnNlVHVwbGVEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKGRlZi5yZXN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICBtaW5JdGVtczogZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIGl0ZW1zOiBkZWYuaXRlbXNcbiAgICAgICAgICAgICAgICAubWFwKCh4LCBpKSA9PiAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoeC5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJpdGVtc1wiLCBgJHtpfWBdIH0pKSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxJdGVtczogKDAsIHBhcnNlRGVmXzEucGFyc2VEZWYpKGRlZi5yZXN0Ll9kZWYsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVmcyksIHsgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCBcImFkZGl0aW9uYWxJdGVtc1wiXSB9KSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgbWluSXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBtYXhJdGVtczogZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIGl0ZW1zOiBkZWYuaXRlbXNcbiAgICAgICAgICAgICAgICAubWFwKCh4LCBpKSA9PiAoMCwgcGFyc2VEZWZfMS5wYXJzZURlZikoeC5fZGVmLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlZnMpLCB7IGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgXCJpdGVtc1wiLCBgJHtpfWBdIH0pKSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLnBhcnNlVHVwbGVEZWYgPSBwYXJzZVR1cGxlRGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlVW5kZWZpbmVkRGVmID0gdm9pZCAwO1xuZnVuY3Rpb24gcGFyc2VVbmRlZmluZWREZWYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbm90OiB7fSxcbiAgICB9O1xufVxuZXhwb3J0cy5wYXJzZVVuZGVmaW5lZERlZiA9IHBhcnNlVW5kZWZpbmVkRGVmO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlVW5rbm93bkRlZiA9IHZvaWQgMDtcbmZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG5leHBvcnRzLnBhcnNlVW5rbm93bkRlZiA9IHBhcnNlVW5rbm93bkRlZjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRSZWZzID0gdm9pZCAwO1xuY29uc3QgT3B0aW9uc18xID0gcmVxdWlyZShcIi4vT3B0aW9uc1wiKTtcbmNvbnN0IGdldFJlZnMgPSAob3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IF9vcHRpb25zID0gKDAsIE9wdGlvbnNfMS5nZXREZWZhdWx0T3B0aW9ucykob3B0aW9ucyk7XG4gICAgY29uc3QgY3VycmVudFBhdGggPSBfb3B0aW9ucy5uYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBfb3B0aW9ucy5uYW1lXVxuICAgICAgICA6IF9vcHRpb25zLmJhc2VQYXRoO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIF9vcHRpb25zKSwgeyBjdXJyZW50UGF0aDogY3VycmVudFBhdGgsIHByb3BlcnR5UGF0aDogdW5kZWZpbmVkLCBzZWVuOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKF9vcHRpb25zLmRlZmluaXRpb25zKS5tYXAoKFtuYW1lLCBkZWZdKSA9PiBbXG4gICAgICAgICAgICBkZWYuX2RlZixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWY6IGRlZi5fZGVmLFxuICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5fb3B0aW9ucy5iYXNlUGF0aCwgX29wdGlvbnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLFxuICAgICAgICAgICAgICAgIC8vIFJlc29sdXRpb24gb2YgcmVmZXJlbmNlcyB3aWxsIGJlIGZvcmNlZCBldmVuIHRob3VnaCBzZWVuLCBzbyBpdCdzIG9rIHRoYXQgdGhlIHNjaGVtYSBpcyB1bmRlZmluZWQgaGVyZSBmb3Igbm93LlxuICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pKSB9KTtcbn07XG5leHBvcnRzLmdldFJlZnMgPSBnZXRSZWZzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldERlZmF1bHRPcHRpb25zID0gZXhwb3J0cy5kZWZhdWx0T3B0aW9ucyA9IHZvaWQgMDtcbmV4cG9ydHMuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICRyZWZTdHJhdGVneTogXCJyb290XCIsXG4gICAgYmFzZVBhdGg6IFtcIiNcIl0sXG4gICAgZWZmZWN0U3RyYXRlZ3k6IFwiaW5wdXRcIixcbiAgICBwaXBlU3RyYXRlZ3k6IFwiYWxsXCIsXG4gICAgZGF0ZVN0cmF0ZWd5OiBcInN0cmluZ1wiLFxuICAgIGRlZmluaXRpb25QYXRoOiBcImRlZmluaXRpb25zXCIsXG4gICAgdGFyZ2V0OiBcImpzb25TY2hlbWE3XCIsXG4gICAgc3RyaWN0VW5pb25zOiBmYWxzZSxcbiAgICBkZWZpbml0aW9uczoge30sXG4gICAgZXJyb3JNZXNzYWdlczogZmFsc2UsXG4gICAgbWFya2Rvd25EZXNjcmlwdGlvbjogZmFsc2UsXG4gICAgZW1haWxTdHJhdGVneTogXCJmb3JtYXQ6ZW1haWxcIixcbn07XG5jb25zdCBnZXREZWZhdWx0T3B0aW9ucyA9IChvcHRpb25zKSA9PiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCJcbiAgICA/IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZXhwb3J0cy5kZWZhdWx0T3B0aW9ucyksIHsgbmFtZTogb3B0aW9ucyB9KSA6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZXhwb3J0cy5kZWZhdWx0T3B0aW9ucyksIG9wdGlvbnMpKTtcbmV4cG9ydHMuZ2V0RGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucztcbiIsIi8qKlxuICogVGhpcyBmdW5jdGlvbiBnZW5lcmF0ZXMgYW4gZW5kcG9pbnQgVVJMIGZvciAoQXp1cmUpIE9wZW5BSVxuICogYmFzZWQgb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0ge09wZW5BSUVuZHBvaW50Q29uZmlnfSBjb25maWcgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHRoZSAoQXp1cmUpIGVuZHBvaW50LlxuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjb25maWcuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSAtIFRoZSBkZXBsb3ltZW50IG5hbWUgb2YgQXp1cmUgT3BlbkFJLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvbmZpZy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSAtIFRoZSBpbnN0YW5jZSBuYW1lIG9mIEF6dXJlIE9wZW5BSS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjb25maWcuYXp1cmVPcGVuQUlBcGlLZXkgLSBUaGUgQVBJIEtleSBmb3IgQXp1cmUgT3BlbkFJLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvbmZpZy5henVyZU9wZW5BSUJhc2VQYXRoIC0gVGhlIGJhc2UgcGF0aCBmb3IgQXp1cmUgT3BlbkFJLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvbmZpZy5iYXNlVVJMIC0gU29tZSBvdGhlciBjdXN0b20gYmFzZSBwYXRoIFVSTC5cbiAqXG4gKiBUaGUgZnVuY3Rpb24gb3BlcmF0ZXMgYXMgZm9sbG93czpcbiAqIC0gSWYgYm90aCBgYXp1cmVPcGVuQUlCYXNlUGF0aGAgYW5kIGBhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lYCAocGx1cyBgYXp1cmVPcGVuQUlBcGlLZXlgKSBhcmUgcHJvdmlkZWQsIGl0IHJldHVybnMgYW4gVVJMIGNvbWJpbmluZyB0aGVzZSB0d28gcGFyYW1ldGVycyAoYCR7YXp1cmVPcGVuQUlCYXNlUGF0aH0vJHthenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lfWApLlxuICogLSBJZiBgYXp1cmVPcGVuQUlBcGlLZXlgIGlzIHByb3ZpZGVkLCBpdCBjaGVja3MgZm9yIGBhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZWAgYW5kIGBhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lYCBhbmQgdGhyb3dzIGFuIGVycm9yIGlmIGFueSBvZiB0aGVzZSBpcyBtaXNzaW5nLiBJZiBib3RoIGFyZSBwcm92aWRlZCwgaXQgZ2VuZXJhdGVzIGFuIFVSTCBpbmNvcnBvcmF0aW5nIHRoZXNlIHBhcmFtZXRlcnMuXG4gKiAtIElmIG5vbmUgb2YgdGhlIGFib3ZlIGNvbmRpdGlvbnMgYXJlIG1ldCwgcmV0dXJuIGFueSBjdXN0b20gYGJhc2VVUkxgLlxuICogLSBUaGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgZ2VuZXJhdGVkIFVSTCBhcyBhIHN0cmluZywgb3IgdW5kZWZpbmVkIGlmIG5vIGN1c3RvbSBwYXRocyBhcmUgc3BlY2lmaWVkLlxuICpcbiAqIEB0aHJvd3MgV2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgbmVjZXNzYXJ5IHBhcmFtZXRlcnMgZm9yIGdlbmVyYXRpbmcgdGhlIFVSTCBhcmUgbWlzc2luZy5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nIHwgdW5kZWZpbmVkfSBUaGUgZ2VuZXJhdGVkIChBenVyZSkgT3BlbkFJIGVuZHBvaW50IFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVuZHBvaW50KGNvbmZpZykge1xuICAgIGNvbnN0IHsgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSwgYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUsIGF6dXJlT3BlbkFJQXBpS2V5LCBhenVyZU9wZW5BSUJhc2VQYXRoLCBiYXNlVVJMLCB9ID0gY29uZmlnO1xuICAgIGlmIChhenVyZU9wZW5BSUFwaUtleSAmJlxuICAgICAgICBhenVyZU9wZW5BSUJhc2VQYXRoICYmXG4gICAgICAgIGF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGAke2F6dXJlT3BlbkFJQmFzZVBhdGh9LyR7YXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZX1gO1xuICAgIH1cbiAgICBpZiAoYXp1cmVPcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgaWYgKCFhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgaXMgcmVxdWlyZWQgd2hlbiB1c2luZyBhenVyZU9wZW5BSUFwaUtleVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXIgd2hlbiB1c2luZyBhenVyZU9wZW5BSUFwaUtleVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYGh0dHBzOi8vJHthenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZX0ub3BlbmFpLmF6dXJlLmNvbS9vcGVuYWkvZGVwbG95bWVudHMvJHthenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lfWA7XG4gICAgfVxuICAgIHJldHVybiBiYXNlVVJMO1xufVxuIiwiZXhwb3J0IGNvbnN0IHByb21wdExheWVyVHJhY2tSZXF1ZXN0ID0gYXN5bmMgKGNhbGxlckZ1bmMsIGZ1bmN0aW9uTmFtZSwga3dhcmdzLCBwbFRhZ3MsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnJlcXVlc3RSZXNwb25zZSwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhcGlLZXkpID0+IHtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWFnbml2T3JnL3Byb21wdGxheWVyLWpzLWhlbHBlclxuICAgIGNvbnN0IHByb21wdExheWVyUmVzcCA9IGF3YWl0IGNhbGxlckZ1bmMuY2FsbChmZXRjaCwgXCJodHRwczovL2FwaS5wcm9tcHRsYXllci5jb20vdHJhY2stcmVxdWVzdFwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZnVuY3Rpb25fbmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgcHJvdmlkZXI6IFwibGFuZ2NoYWluXCIsXG4gICAgICAgICAgICBrd2FyZ3MsXG4gICAgICAgICAgICB0YWdzOiBwbFRhZ3MsXG4gICAgICAgICAgICByZXF1ZXN0X3Jlc3BvbnNlOiByZXF1ZXN0UmVzcG9uc2UsXG4gICAgICAgICAgICByZXF1ZXN0X3N0YXJ0X3RpbWU6IE1hdGguZmxvb3Ioc3RhcnRUaW1lIC8gMTAwMCksXG4gICAgICAgICAgICByZXF1ZXN0X2VuZF90aW1lOiBNYXRoLmZsb29yKGVuZFRpbWUgLyAxMDAwKSxcbiAgICAgICAgICAgIGFwaV9rZXk6IGFwaUtleSxcbiAgICAgICAgfSksXG4gICAgfSk7XG4gICAgcmV0dXJuIHByb21wdExheWVyUmVzcC5qc29uKCk7XG59O1xuIiwiaW1wb3J0IHsgQUlNZXNzYWdlLCBIdW1hbk1lc3NhZ2UsIFJVTl9LRVksIGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlLCB9IGZyb20gXCIuLi9zY2hlbWEvaW5kZXguanNcIjtcbmltcG9ydCB7IEJhc2VMYW5ndWFnZU1vZGVsLCB9IGZyb20gXCIuLi9iYXNlX2xhbmd1YWdlL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG4vKipcbiAqIENyZWF0ZXMgYSB0cmFuc2Zvcm0gc3RyZWFtIGZvciBlbmNvZGluZyBjaGF0IG1lc3NhZ2UgY2h1bmtzLlxuICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBCeXRlc091dHB1dFBhcnNlcn0gaW5zdGVhZFxuICogQHJldHVybnMgQSBUcmFuc2Zvcm1TdHJlYW0gaW5zdGFuY2UgdGhhdCBlbmNvZGVzIGNoYXQgbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDaGF0TWVzc2FnZUNodW5rRW5jb2RlclN0cmVhbSgpIHtcbiAgICBjb25zdCB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIHJldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtcbiAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodGV4dEVuY29kZXIuZW5jb2RlKGNodW5rLmNvbnRlbnQpKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgY2hhdCBtb2RlbHMuIEl0IGV4dGVuZHMgdGhlIEJhc2VMYW5ndWFnZU1vZGVsIGNsYXNzIGFuZFxuICogcHJvdmlkZXMgbWV0aG9kcyBmb3IgZ2VuZXJhdGluZyBjaGF0IGJhc2VkIG9uIGlucHV0IG1lc3NhZ2VzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUNoYXRNb2RlbCBleHRlbmRzIEJhc2VMYW5ndWFnZU1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJjaGF0X21vZGVsc1wiLCB0aGlzLl9sbG1UeXBlKCldXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdID0gc3VwZXIuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGlmIChjYWxsT3B0aW9ucz8udGltZW91dCAmJiAhY2FsbE9wdGlvbnMuc2lnbmFsKSB7XG4gICAgICAgICAgICBjYWxsT3B0aW9ucy5zaWduYWwgPSBBYm9ydFNpZ25hbC50aW1lb3V0KGNhbGxPcHRpb25zLnRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgY2hhdCBtb2RlbCB3aXRoIGEgc2luZ2xlIGlucHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2VDaHVuay5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0VmFsdWUgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGlucHV0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVByb21wdChbcHJvbXB0VmFsdWVdLCBvcHRpb25zLCBvcHRpb25zPy5jYWxsYmFja3MpO1xuICAgICAgICBjb25zdCBjaGF0R2VuZXJhdGlvbiA9IHJlc3VsdC5nZW5lcmF0aW9uc1swXVswXTtcbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIGNhc3QgYWZ0ZXIgZmlndXJpbmcgb3V0IGluaGVyaXRhbmNlXG4gICAgICAgIHJldHVybiBjaGF0R2VuZXJhdGlvbi5tZXNzYWdlO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS15aWVsZFxuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MoX21lc3NhZ2VzLCBfb3B0aW9ucywgX3J1bk1hbmFnZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBTdWJjbGFzcyBjaGVjayByZXF1aXJlZCB0byBhdm9pZCBkb3VibGUgY2FsbGJhY2tzIHdpdGggZGVmYXVsdCBpbXBsZW1lbnRhdGlvblxuICAgICAgICBpZiAodGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MgPT09XG4gICAgICAgICAgICBCYXNlQ2hhdE1vZGVsLnByb3RvdHlwZS5fc3RyZWFtUmVzcG9uc2VDaHVua3MpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IEJhc2VDaGF0TW9kZWwuX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoaW5wdXQpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBwcm9tcHQudG9DaGF0TWVzc2FnZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdID0gdGhpcy5fc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIHJ1bm5hYmxlQ29uZmlnLnRhZ3MsIHRoaXMudGFncywgcnVubmFibGVDb25maWcubWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuICAgICAgICAgICAgY29uc3QgZXh0cmEgPSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uczogY2FsbE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMoY2FsbE9wdGlvbnMpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhdE1vZGVsU3RhcnQodGhpcy50b0pTT04oKSwgW21lc3NhZ2VzXSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGV4dHJhKTtcbiAgICAgICAgICAgIGxldCBnZW5lcmF0aW9uQ2h1bms7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgdGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MobWVzc2FnZXMsIGNhbGxPcHRpb25zLCBydW5NYW5hZ2Vycz8uWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBjaHVuay5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWdlbmVyYXRpb25DaHVuaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNodW5rID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ2h1bmsgPSBnZW5lcmF0aW9uQ2h1bmsuY29uY2F0KGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IoZXJyKSkpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKChydW5NYW5hZ2VycyA/PyBbXSkubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoe1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IFJlbW92ZSBjYXN0IGFmdGVyIGZpZ3VyaW5nIG91dCBpbmhlcml0YW5jZVxuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbW2dlbmVyYXRpb25DaHVua11dLFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgY2hhdCBiYXNlZCBvbiB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIGFycmF5cyBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBMTE1SZXN1bHQuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICAvLyBwYXJzZSBjYWxsIG9wdGlvbnNcbiAgICAgICAgbGV0IHBhcnNlZE9wdGlvbnM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0geyBzdG9wOiBvcHRpb25zIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0KSA9PiBtZXNzYWdlTGlzdC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgY29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSB0aGlzLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKHBhcnNlZE9wdGlvbnMpO1xuICAgICAgICAvLyBjcmVhdGUgY2FsbGJhY2sgbWFuYWdlciBhbmQgc3RhcnQgcnVuXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcyA/PyBjYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBydW5uYWJsZUNvbmZpZy50YWdzLCB0aGlzLnRhZ3MsIHJ1bm5hYmxlQ29uZmlnLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgY29uc3QgZXh0cmEgPSB7XG4gICAgICAgICAgICBvcHRpb25zOiBjYWxsT3B0aW9ucyxcbiAgICAgICAgICAgIGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKHBhcnNlZE9wdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYXRNb2RlbFN0YXJ0KHRoaXMudG9KU09OKCksIGJhc2VNZXNzYWdlcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGV4dHJhKTtcbiAgICAgICAgLy8gZ2VuZXJhdGUgcmVzdWx0c1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGJhc2VNZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0LCBpKSA9PiB0aGlzLl9nZW5lcmF0ZShtZXNzYWdlTGlzdCwgeyAuLi5jYWxsT3B0aW9ucywgcHJvbXB0SW5kZXg6IGkgfSwgcnVuTWFuYWdlcnM/LltpXSkpKTtcbiAgICAgICAgLy8gaGFuZGxlIHJlc3VsdHNcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgY29uc3QgbGxtT3V0cHV0cyA9IFtdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXN1bHRzLm1hcChhc3luYyAocFJlc3VsdCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKHBSZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcFJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uc1tpXSA9IHJlc3VsdC5nZW5lcmF0aW9ucztcbiAgICAgICAgICAgICAgICBsbG1PdXRwdXRzW2ldID0gcmVzdWx0LmxsbU91dHB1dDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVuTWFuYWdlcnM/LltpXT8uaGFuZGxlTExNRW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtyZXN1bHQuZ2VuZXJhdGlvbnNdLFxuICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXQ6IHJlc3VsdC5sbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzdGF0dXMgPT09IFwicmVqZWN0ZWRcIlxuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXJzPy5baV0/LmhhbmRsZUxMTUVycm9yKHBSZXN1bHQucmVhc29uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocFJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGNyZWF0ZSBjb21iaW5lZCBvdXRwdXRcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgICAgICAgZ2VuZXJhdGlvbnMsXG4gICAgICAgICAgICBsbG1PdXRwdXQ6IGxsbU91dHB1dHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyB0aGlzLl9jb21iaW5lTExNT3V0cHV0Py4oLi4ubGxtT3V0cHV0cylcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dCwgUlVOX0tFWSwge1xuICAgICAgICAgICAgdmFsdWU6IHJ1bk1hbmFnZXJzXG4gICAgICAgICAgICAgICAgPyB7IHJ1bklkczogcnVuTWFuYWdlcnM/Lm1hcCgobWFuYWdlcikgPT4gbWFuYWdlci5ydW5JZCkgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwYXJhbWV0ZXJzIHVzZWQgdG8gaW52b2tlIHRoZSBtb2RlbFxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaW52b2NhdGlvblBhcmFtcyhfb3B0aW9ucykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIF9tb2RlbFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImJhc2VfY2hhdF9tb2RlbFwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBwcm9tcHQgYmFzZWQgb24gdGhlIGlucHV0IHByb21wdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHByb21wdFZhbHVlcyBBbiBhcnJheSBvZiBCYXNlUHJvbXB0VmFsdWUgaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gTExNUmVzdWx0LlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlUHJvbXB0KHByb21wdFZhbHVlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHByb21wdE1lc3NhZ2VzID0gcHJvbXB0VmFsdWVzLm1hcCgocHJvbXB0VmFsdWUpID0+IHByb21wdFZhbHVlLnRvQ2hhdE1lc3NhZ2VzKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZShwcm9tcHRNZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBzaW5nbGUgY2FsbCB0byB0aGUgY2hhdCBtb2RlbC5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgQW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2UgaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBCYXNlTWVzc2FnZS5cbiAgICAgKi9cbiAgICBhc3luYyBjYWxsKG1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZShbbWVzc2FnZXMubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKV0sIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gcmVzdWx0LmdlbmVyYXRpb25zO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGlvbnNbMF1bMF0ubWVzc2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBzaW5nbGUgY2FsbCB0byB0aGUgY2hhdCBtb2RlbCB3aXRoIGEgcHJvbXB0IHZhbHVlLlxuICAgICAqIEBwYXJhbSBwcm9tcHRWYWx1ZSBUaGUgdmFsdWUgb2YgdGhlIHByb21wdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2UuXG4gICAgICovXG4gICAgYXN5bmMgY2FsbFByb21wdChwcm9tcHRWYWx1ZSwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHByb21wdE1lc3NhZ2VzID0gcHJvbXB0VmFsdWUudG9DaGF0TWVzc2FnZXMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbChwcm9tcHRNZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlZGljdHMgdGhlIG5leHQgbWVzc2FnZSBiYXNlZCBvbiB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIEJhc2VNZXNzYWdlIGluc3RhbmNlcy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2UuXG4gICAgICovXG4gICAgYXN5bmMgcHJlZGljdE1lc3NhZ2VzKG1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbChtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlZGljdHMgdGhlIG5leHQgbWVzc2FnZSBiYXNlZCBvbiBhIHRleHQgaW5wdXQuXG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgaW5wdXQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZy5cbiAgICAgKi9cbiAgICBhc3luYyBwcmVkaWN0KHRleHQsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gbmV3IEh1bWFuTWVzc2FnZSh0ZXh0KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jYWxsKFttZXNzYWdlXSwgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5jb250ZW50O1xuICAgIH1cbn1cbi8qKlxuICogQW4gYWJzdHJhY3QgY2xhc3MgdGhhdCBleHRlbmRzIEJhc2VDaGF0TW9kZWwgYW5kIHByb3ZpZGVzIGEgc2ltcGxlXG4gKiBpbXBsZW1lbnRhdGlvbiBvZiBfZ2VuZXJhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTaW1wbGVDaGF0TW9kZWwgZXh0ZW5kcyBCYXNlQ2hhdE1vZGVsIHtcbiAgICBhc3luYyBfZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHRoaXMuX2NhbGwobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gbmV3IEFJTWVzc2FnZSh0ZXh0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIH0gZnJvbSBcIi4uL3NjaGVtYS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi4vdXRpbC9hc3luY19jYWxsZXIuanNcIjtcbmltcG9ydCB7IGdldE1vZGVsTmFtZUZvclRpa3Rva2VuIH0gZnJvbSBcIi4vY291bnRfdG9rZW5zLmpzXCI7XG5pbXBvcnQgeyBlbmNvZGluZ0Zvck1vZGVsIH0gZnJvbSBcIi4uL3V0aWwvdGlrdG9rZW4uanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3NjaGVtYS9ydW5uYWJsZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgU3RyaW5nUHJvbXB0VmFsdWUgfSBmcm9tIFwiLi4vcHJvbXB0cy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDaGF0UHJvbXB0VmFsdWUgfSBmcm9tIFwiLi4vcHJvbXB0cy9jaGF0LmpzXCI7XG5jb25zdCBnZXRWZXJib3NpdHkgPSAoKSA9PiBmYWxzZTtcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgbGFuZ3VhZ2UgbW9kZWxzLCBjaGFpbnMsIHRvb2xzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUxhbmdDaGFpbiBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBnZXQgbGNfYXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhbGxiYWNrczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdmVyYm9zZTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgc3VwZXIocGFyYW1zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdG8gcHJpbnQgb3V0IHJlc3BvbnNlIHRleHQuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZXJib3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxiYWNrc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudmVyYm9zZSA9IHBhcmFtcy52ZXJib3NlID8/IGdldFZlcmJvc2l0eSgpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHBhcmFtcy5jYWxsYmFja3M7XG4gICAgICAgIHRoaXMudGFncyA9IHBhcmFtcy50YWdzID8/IFtdO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gcGFyYW1zLm1ldGFkYXRhID8/IHt9O1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgbGFuZ3VhZ2UgbW9kZWxzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUxhbmd1YWdlTW9kZWwgZXh0ZW5kcyBCYXNlTGFuZ0NoYWluIHtcbiAgICAvKipcbiAgICAgKiBLZXlzIHRoYXQgdGhlIGxhbmd1YWdlIG1vZGVsIGFjY2VwdHMgYXMgY2FsbCBvcHRpb25zLlxuICAgICAqL1xuICAgIGdldCBjYWxsS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFtcInN0b3BcIiwgXCJ0aW1lb3V0XCIsIFwic2lnbmFsXCIsIFwidGFnc1wiLCBcIm1ldGFkYXRhXCIsIFwiY2FsbGJhY2tzXCJdO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih7IGNhbGxiYWNrcywgY2FsbGJhY2tNYW5hZ2VyLCAuLi5wYXJhbXMgfSkge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBjYWxsYmFja3M6IGNhbGxiYWNrcyA/PyBjYWxsYmFja01hbmFnZXIsXG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFzeW5jIGNhbGxlciBzaG91bGQgYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIG1ha2UgYW55IGFzeW5jIGNhbGxzLFxuICAgICAgICAgKiB3aGljaCB3aWxsIHRodXMgYmVuZWZpdCBmcm9tIHRoZSBjb25jdXJyZW5jeSBhbmQgcmV0cnkgbG9naWMuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX2VuY29kaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKHBhcmFtcyA/PyB7fSk7XG4gICAgfVxuICAgIGFzeW5jIGdldE51bVRva2Vucyh0ZXh0KSB7XG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIGFwcHJveGltYXRlIGNhbGN1bGF0aW9uIGlmIHRpa3Rva2VuIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgbGV0IG51bVRva2VucyA9IE1hdGguY2VpbCh0ZXh0Lmxlbmd0aCAvIDQpO1xuICAgICAgICBpZiAoIXRoaXMuX2VuY29kaW5nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VuY29kaW5nID0gYXdhaXQgZW5jb2RpbmdGb3JNb2RlbChcIm1vZGVsTmFtZVwiIGluIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgPyBnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbih0aGlzLm1vZGVsTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgOiBcImdwdDJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2VuY29kaW5nKSB7XG4gICAgICAgICAgICBudW1Ub2tlbnMgPSB0aGlzLl9lbmNvZGluZy5lbmNvZGUodGV4dCkubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudW1Ub2tlbnM7XG4gICAgfVxuICAgIHN0YXRpYyBfY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1Byb21wdFZhbHVlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0UHJvbXB0VmFsdWUoaW5wdXQubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpZGVudGlmeWluZyBwYXJhbWV0ZXJzIG9mIHRoZSBMTE0uXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBfaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIExMTS5cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi50aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLFxuICAgICAgICAgICAgX3R5cGU6IHRoaXMuX2xsbVR5cGUoKSxcbiAgICAgICAgICAgIF9tb2RlbDogdGhpcy5fbW9kZWxUeXBlKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogTG9hZCBhbiBMTE0gZnJvbSBhIGpzb24tbGlrZSBvYmplY3QgZGVzY3JpYmluZyBpdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoZGF0YSkge1xuICAgICAgICBjb25zdCB7IF90eXBlLCBfbW9kZWwsIC4uLnJlc3QgfSA9IGRhdGE7XG4gICAgICAgIGlmIChfbW9kZWwgJiYgX21vZGVsICE9PSBcImJhc2VfY2hhdF9tb2RlbFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBsb2FkIExMTSB3aXRoIG1vZGVsICR7X21vZGVsfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IENscyA9IHtcbiAgICAgICAgICAgIG9wZW5haTogKGF3YWl0IGltcG9ydChcIi4uL2NoYXRfbW9kZWxzL29wZW5haS5qc1wiKSkuQ2hhdE9wZW5BSSxcbiAgICAgICAgfVtfdHlwZV07XG4gICAgICAgIGlmIChDbHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgbG9hZCBMTE0gd2l0aCB0eXBlICR7X3R5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDbHMocmVzdCk7XG4gICAgfVxufVxuLypcbiAqIENhbGN1bGF0ZSBtYXggdG9rZW5zIGZvciBnaXZlbiBtb2RlbCBhbmQgcHJvbXB0LlxuICogVGhhdCBpcyB0aGUgbW9kZWwgc2l6ZSAtIG51bWJlciBvZiB0b2tlbnMgaW4gcHJvbXB0LlxuICovXG5leHBvcnQgeyBjYWxjdWxhdGVNYXhUb2tlbnMgfSBmcm9tIFwiLi9jb3VudF90b2tlbnMuanNcIjtcbiIsIi8vIERlZmF1bHQgZ2VuZXJpYyBcImFueVwiIHZhbHVlcyBhcmUgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuLy8gUmVwbGFjZSB3aXRoIFwic3RyaW5nXCIgd2hlbiB3ZSBhcmUgY29tZm9ydGFibGUgd2l0aCBhIGJyZWFraW5nIGNoYW5nZS5cbmltcG9ydCB7IEFJTWVzc2FnZSwgQmFzZU1lc3NhZ2UsIEJhc2VQcm9tcHRWYWx1ZSwgQ2hhdE1lc3NhZ2UsIEh1bWFuTWVzc2FnZSwgU3lzdGVtTWVzc2FnZSwgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIGlzQmFzZU1lc3NhZ2UsIH0gZnJvbSBcIi4uL3NjaGVtYS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGUgfSBmcm9tIFwiLi4vc2NoZW1hL3J1bm5hYmxlL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBCYXNlUHJvbXB0VGVtcGxhdGUsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9wcm9tcHQuanNcIjtcbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBiYXNlIGZvciBjcmVhdGluZyBtZXNzYWdlIHByb21wdFxuICogdGVtcGxhdGVzLiBJdCBkZWZpbmVzIGhvdyB0byBmb3JtYXQgbWVzc2FnZXMgZm9yIGRpZmZlcmVudCByb2xlcyBpbiBhXG4gKiBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpblwiLCBcInByb21wdHNcIiwgXCJjaGF0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBmb3JtYXRNZXNzYWdlcyBtZXRob2Qgd2l0aCB0aGUgcHJvdmlkZWQgaW5wdXQgYW5kIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIGlucHV0IElucHV0IGZvciB0aGUgZm9ybWF0TWVzc2FnZXMgbWV0aG9kXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgQmFzZUNhbGxiYWNrQ29uZmlnXG4gICAgICogQHJldHVybnMgRm9ybWF0dGVkIG91dHB1dCBtZXNzYWdlc1xuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcoKGlucHV0KSA9PiB0aGlzLmZvcm1hdE1lc3NhZ2VzKGlucHV0KSwgaW5wdXQsIHsgLi4ub3B0aW9ucywgcnVuVHlwZTogXCJwcm9tcHRcIiB9KTtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIGNoYXQgcHJvbXB0IHZhbHVlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZVByb21wdFZhbHVlIGFuZCBpbmNsdWRlcyBhbiBhcnJheSBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0UHJvbXB0VmFsdWUgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0UHJvbXB0VmFsdWVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBtZXNzYWdlczogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJwcm9tcHRzXCIsIFwiY2hhdFwiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXNzYWdlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gZmllbGRzLm1lc3NhZ2VzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMubWVzc2FnZXMpO1xuICAgIH1cbiAgICB0b0NoYXRNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXM7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBwbGFjZWhvbGRlciBmb3IgbWVzc2FnZXMgaW4gYSBjaGF0IHByb21wdC4gSXRcbiAqIGV4dGVuZHMgdGhlIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNzYWdlc1BsYWNlaG9sZGVyIGV4dGVuZHMgQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIk1lc3NhZ2VzUGxhY2Vob2xkZXJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgdmFyaWFibGVOYW1lOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YXJpYWJsZU5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52YXJpYWJsZU5hbWUgPSBmaWVsZHMudmFyaWFibGVOYW1lO1xuICAgIH1cbiAgICBnZXQgaW5wdXRWYXJpYWJsZXMoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy52YXJpYWJsZU5hbWVdO1xuICAgIH1cbiAgICBmb3JtYXRNZXNzYWdlcyh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZXNbdGhpcy52YXJpYWJsZU5hbWVdKTtcbiAgICB9XG59XG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHRoYXQgc2VydmVzIGFzIGEgYmFzZSBmb3IgY3JlYXRpbmcgbWVzc2FnZSBzdHJpbmcgcHJvbXB0XG4gKiB0ZW1wbGF0ZXMuIEl0IGV4dGVuZHMgdGhlIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmICghKFwicHJvbXB0XCIgaW4gZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IHByb21wdDogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvbXB0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvbXB0ID0gZmllbGRzLnByb21wdDtcbiAgICB9XG4gICAgZ2V0IGlucHV0VmFyaWFibGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQuaW5wdXRWYXJpYWJsZXM7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdE1lc3NhZ2VzKHZhbHVlcykge1xuICAgICAgICByZXR1cm4gW2F3YWl0IHRoaXMuZm9ybWF0KHZhbHVlcyldO1xuICAgIH1cbn1cbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBiYXNlIGZvciBjcmVhdGluZyBjaGF0IHByb21wdFxuICogdGVtcGxhdGVzLiBJdCBleHRlbmRzIHRoZSBCYXNlUHJvbXB0VGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ2hhdFByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZVByb21wdFRlbXBsYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBzdXBlcihpbnB1dCk7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdCh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLmZvcm1hdFByb21wdFZhbHVlKHZhbHVlcykpLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdFByb21wdFZhbHVlKHZhbHVlcykge1xuICAgICAgICBjb25zdCByZXN1bHRNZXNzYWdlcyA9IGF3YWl0IHRoaXMuZm9ybWF0TWVzc2FnZXModmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0UHJvbXB0VmFsdWUocmVzdWx0TWVzc2FnZXMpO1xuICAgIH1cbn1cbi8qKlxuICogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgY2hhdCBtZXNzYWdlIHByb21wdCB0ZW1wbGF0ZS4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZU1lc3NhZ2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCByb2xlKSB7XG4gICAgICAgIGlmICghKFwicHJvbXB0XCIgaW4gZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IHByb21wdDogZmllbGRzLCByb2xlOiByb2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSBmaWVsZHMucm9sZTtcbiAgICB9XG4gICAgYXN5bmMgZm9ybWF0KHZhbHVlcykge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlKGF3YWl0IHRoaXMucHJvbXB0LmZvcm1hdCh2YWx1ZXMpLCB0aGlzLnJvbGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRlbXBsYXRlKHRlbXBsYXRlLCByb2xlKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyhQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUodGVtcGxhdGUpLCByb2xlKTtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIGh1bWFuIG1lc3NhZ2UgcHJvbXB0IHRlbXBsYXRlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZU1lc3NhZ2VTdHJpbmdQcm9tcHRUZW1wbGF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZU1lc3NhZ2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlXCI7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdCh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UoYXdhaXQgdGhpcy5wcm9tcHQuZm9ybWF0KHZhbHVlcykpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRlbXBsYXRlKHRlbXBsYXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyhQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUodGVtcGxhdGUpKTtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhbiBBSSBtZXNzYWdlIHByb21wdCB0ZW1wbGF0ZS4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBBSU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSBleHRlbmRzIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJBSU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZVwiO1xuICAgIH1cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKGF3YWl0IHRoaXMucHJvbXB0LmZvcm1hdCh2YWx1ZXMpKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKHRlbXBsYXRlKSk7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBzeXN0ZW0gbWVzc2FnZSBwcm9tcHQgdGVtcGxhdGUuIEl0IGV4dGVuZHMgdGhlXG4gKiBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlLlxuICovXG5leHBvcnQgY2xhc3MgU3lzdGVtTWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZU1lc3NhZ2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZVwiO1xuICAgIH1cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZShhd2FpdCB0aGlzLnByb21wdC5mb3JtYXQodmFsdWVzKSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9pc0Jhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUoYmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBiYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZVxuICAgICAgICAuZm9ybWF0TWVzc2FnZXMgPT09IFwiZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBfY29lcmNlTWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZShtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlKSB7XG4gICAgaWYgKF9pc0Jhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUobWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZSkgfHxcbiAgICAgICAgaXNCYXNlTWVzc2FnZShtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZTtcbiAgICB9XG4gICAgY29uc3QgbWVzc2FnZSA9IGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKG1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UpO1xuICAgIGlmIChtZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwiaHVtYW5cIikge1xuICAgICAgICByZXR1cm4gSHVtYW5NZXNzYWdlUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKG1lc3NhZ2UuY29udGVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJhaVwiKSB7XG4gICAgICAgIHJldHVybiBBSU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUobWVzc2FnZS5jb250ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIHJldHVybiBTeXN0ZW1NZXNzYWdlUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKG1lc3NhZ2UuY29udGVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKENoYXRNZXNzYWdlLmlzSW5zdGFuY2UobWVzc2FnZSkpIHtcbiAgICAgICAgcmV0dXJuIENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKG1lc3NhZ2UuY29udGVudCwgbWVzc2FnZS5yb2xlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGNvZXJjZSBtZXNzYWdlIHByb21wdCB0ZW1wbGF0ZSBmcm9tIGlucHV0LiBSZWNlaXZlZCBtZXNzYWdlIHR5cGU6IFwiJHttZXNzYWdlLl9nZXRUeXBlKCl9XCIuYCk7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBjaGF0IHByb21wdC4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VDaGF0UHJvbXB0VGVtcGxhdGUgYW5kIHVzZXMgYW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZVxuICogaW5zdGFuY2VzIHRvIGZvcm1hdCBhIHNlcmllcyBvZiBtZXNzYWdlcyBmb3IgYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0UHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlQ2hhdFByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdFByb21wdFRlbXBsYXRlXCI7XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvbXB0TWVzc2FnZXM6IFwibWVzc2FnZXNcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoaW5wdXQpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9tcHRNZXNzYWdlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWxpZGF0ZVRlbXBsYXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGlucHV0KTtcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVUZW1wbGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRWYXJpYWJsZXNNZXNzYWdlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvbXB0TWVzc2FnZSBvZiB0aGlzLnByb21wdE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgIGlmIChwcm9tcHRNZXNzYWdlIGluc3RhbmNlb2YgQmFzZU1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaW5wdXRWYXJpYWJsZSBvZiBwcm9tcHRNZXNzYWdlLmlucHV0VmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFyaWFibGVzTWVzc2FnZXMuYWRkKGlucHV0VmFyaWFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRvdGFsSW5wdXRWYXJpYWJsZXMgPSB0aGlzLmlucHV0VmFyaWFibGVzO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRWYXJpYWJsZXNJbnN0YW5jZSA9IG5ldyBTZXQodGhpcy5wYXJ0aWFsVmFyaWFibGVzXG4gICAgICAgICAgICAgICAgPyB0b3RhbElucHV0VmFyaWFibGVzLmNvbmNhdChPYmplY3Qua2V5cyh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpKVxuICAgICAgICAgICAgICAgIDogdG90YWxJbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgICAgICBjb25zdCBkaWZmZXJlbmNlID0gbmV3IFNldChbLi4uaW5wdXRWYXJpYWJsZXNJbnN0YW5jZV0uZmlsdGVyKCh4KSA9PiAhaW5wdXRWYXJpYWJsZXNNZXNzYWdlcy5oYXMoeCkpKTtcbiAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnB1dCB2YXJpYWJsZXMgXFxgJHtbXG4gICAgICAgICAgICAgICAgICAgIC4uLmRpZmZlcmVuY2UsXG4gICAgICAgICAgICAgICAgXX1cXGAgYXJlIG5vdCB1c2VkIGluIGFueSBvZiB0aGUgcHJvbXB0IG1lc3NhZ2VzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3RoZXJEaWZmZXJlbmNlID0gbmV3IFNldChbLi4uaW5wdXRWYXJpYWJsZXNNZXNzYWdlc10uZmlsdGVyKCh4KSA9PiAhaW5wdXRWYXJpYWJsZXNJbnN0YW5jZS5oYXMoeCkpKTtcbiAgICAgICAgICAgIGlmIChvdGhlckRpZmZlcmVuY2Uuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYElucHV0IHZhcmlhYmxlcyBcXGAke1tcbiAgICAgICAgICAgICAgICAgICAgLi4ub3RoZXJEaWZmZXJlbmNlLFxuICAgICAgICAgICAgICAgIF19XFxgIGFyZSB1c2VkIGluIHByb21wdCBtZXNzYWdlcyBidXQgbm90IGluIHRoZSBwcm9tcHQgdGVtcGxhdGUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldFByb21wdFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImNoYXRcIjtcbiAgICB9XG4gICAgYXN5bmMgZm9ybWF0TWVzc2FnZXModmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGFsbFZhbHVlcyA9IGF3YWl0IHRoaXMubWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyh2YWx1ZXMpO1xuICAgICAgICBsZXQgcmVzdWx0TWVzc2FnZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9tcHRNZXNzYWdlIG9mIHRoaXMucHJvbXB0TWVzc2FnZXMpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgIGlmIChwcm9tcHRNZXNzYWdlIGluc3RhbmNlb2YgQmFzZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlcy5wdXNoKHByb21wdE1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSBwcm9tcHRNZXNzYWdlLmlucHV0VmFyaWFibGVzLnJlZHVjZSgoYWNjLCBpbnB1dFZhcmlhYmxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGlucHV0VmFyaWFibGUgaW4gYWxsVmFsdWVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHZhbHVlIGZvciBpbnB1dCB2YXJpYWJsZSBcXGAke2lucHV0VmFyaWFibGUudG9TdHJpbmcoKX1cXGBgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhY2NbaW5wdXRWYXJpYWJsZV0gPSBhbGxWYWx1ZXNbaW5wdXRWYXJpYWJsZV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBwcm9tcHRNZXNzYWdlLmZvcm1hdE1lc3NhZ2VzKGlucHV0VmFsdWVzKTtcbiAgICAgICAgICAgICAgICByZXN1bHRNZXNzYWdlcyA9IHJlc3VsdE1lc3NhZ2VzLmNvbmNhdChtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0TWVzc2FnZXM7XG4gICAgfVxuICAgIGFzeW5jIHBhcnRpYWwodmFsdWVzKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgaW1wbGVtZW50ZWQgaW4gYSB3YXkgaXQgZG9lc24ndCByZXF1aXJlIG1ha2luZ1xuICAgICAgICAvLyBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlIGF3YXJlIG9mIC5wYXJ0aWFsKClcbiAgICAgICAgY29uc3QgbmV3SW5wdXRWYXJpYWJsZXMgPSB0aGlzLmlucHV0VmFyaWFibGVzLmZpbHRlcigoaXYpID0+ICEoaXYgaW4gdmFsdWVzKSk7XG4gICAgICAgIGNvbnN0IG5ld1BhcnRpYWxWYXJpYWJsZXMgPSB7XG4gICAgICAgICAgICAuLi4odGhpcy5wYXJ0aWFsVmFyaWFibGVzID8/IHt9KSxcbiAgICAgICAgICAgIC4uLnZhbHVlcyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcHJvbXB0RGljdCA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMsXG4gICAgICAgICAgICBpbnB1dFZhcmlhYmxlczogbmV3SW5wdXRWYXJpYWJsZXMsXG4gICAgICAgICAgICBwYXJ0aWFsVmFyaWFibGVzOiBuZXdQYXJ0aWFsVmFyaWFibGVzLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IENoYXRQcm9tcHRUZW1wbGF0ZShwcm9tcHREaWN0KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgZnJvbVByb21wdE1lc3NhZ2VzKHByb21wdE1lc3NhZ2VzKSB7XG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZE1lc3NhZ2VzID0gcHJvbXB0TWVzc2FnZXMucmVkdWNlKChhY2MsIHByb21wdE1lc3NhZ2UpID0+IGFjYy5jb25jYXQoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgcHJvbXB0TWVzc2FnZSBpbnN0YW5jZW9mIENoYXRQcm9tcHRUZW1wbGF0ZVxuICAgICAgICAgICAgPyBwcm9tcHRNZXNzYWdlLnByb21wdE1lc3NhZ2VzXG4gICAgICAgICAgICA6IFtfY29lcmNlTWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZShwcm9tcHRNZXNzYWdlKV0pLCBbXSk7XG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZFBhcnRpYWxWYXJpYWJsZXMgPSBwcm9tcHRNZXNzYWdlcy5yZWR1Y2UoKGFjYywgcHJvbXB0TWVzc2FnZSkgPT4gXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgcHJvbXB0TWVzc2FnZSBpbnN0YW5jZW9mIENoYXRQcm9tcHRUZW1wbGF0ZVxuICAgICAgICAgICAgPyBPYmplY3QuYXNzaWduKGFjYywgcHJvbXB0TWVzc2FnZS5wYXJ0aWFsVmFyaWFibGVzKVxuICAgICAgICAgICAgOiBhY2MsIE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICAgICAgICBjb25zdCBpbnB1dFZhcmlhYmxlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9tcHRNZXNzYWdlIG9mIGZsYXR0ZW5lZE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICBpZiAocHJvbXB0TWVzc2FnZSBpbnN0YW5jZW9mIEJhc2VNZXNzYWdlKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpbnB1dFZhcmlhYmxlIG9mIHByb21wdE1lc3NhZ2UuaW5wdXRWYXJpYWJsZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRWYXJpYWJsZSBpbiBmbGF0dGVuZWRQYXJ0aWFsVmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcy5hZGQoaW5wdXRWYXJpYWJsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0UHJvbXB0VGVtcGxhdGUoe1xuICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXM6IFsuLi5pbnB1dFZhcmlhYmxlc10sXG4gICAgICAgICAgICBwcm9tcHRNZXNzYWdlczogZmxhdHRlbmVkTWVzc2FnZXMsXG4gICAgICAgICAgICBwYXJ0aWFsVmFyaWFibGVzOiBmbGF0dGVuZWRQYXJ0aWFsVmFyaWFibGVzLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IFByb21pc2UuYWxsKFtyZXF1aXJlKFwiLi9oZWxwZXJzL2Jyb3dzZXIvanMtbG9hZGVyXCIpKHJlcXVpcmUoJy4vaGVscGVycy9idW5kbGUtdXJsJykuZ2V0QnVuZGxlVVJMKCdneXZYQycpICsgXCJwcm9tcHQuZjY2NmY4MjEuanNcIiArIFwiP1wiICsgRGF0ZS5ub3coKSkuY2F0Y2goZXJyID0+IHtkZWxldGUgbW9kdWxlLmJ1bmRsZS5jYWNoZVttb2R1bGUuaWRdOyB0aHJvdyBlcnI7fSksIHJlcXVpcmUoXCIuL2hlbHBlcnMvYnJvd3Nlci9qcy1sb2FkZXJcIikocmVxdWlyZSgnLi9oZWxwZXJzL2J1bmRsZS11cmwnKS5nZXRCdW5kbGVVUkwoJ2d5dlhDJykgKyBcIm9wZW5haS5mMTM4NWVlYy5qc1wiICsgXCI/XCIgKyBEYXRlLm5vdygpKS5jYXRjaChlcnIgPT4ge2RlbGV0ZSBtb2R1bGUuYnVuZGxlLmNhY2hlW21vZHVsZS5pZF07IHRocm93IGVycjt9KV0pLnRoZW4oKCkgPT4gbW9kdWxlLmJ1bmRsZS5yb290KCczQ3hYSCcpKTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGNhY2hlTG9hZGVyID0gcmVxdWlyZSgnLi4vY2FjaGVMb2FkZXInKTtcbm1vZHVsZS5leHBvcnRzID0gY2FjaGVMb2FkZXIoZnVuY3Rpb24gKGJ1bmRsZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIC8vIERvbid0IGluc2VydCB0aGUgc2FtZSBzY3JpcHQgdHdpY2UgKGUuZy4gaWYgaXQgd2FzIGFscmVhZHkgaW4gdGhlIEhUTUwpXG4gICAgdmFyIGV4aXN0aW5nU2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgICBpZiAoW10uY29uY2F0KGV4aXN0aW5nU2NyaXB0cykuc29tZShmdW5jdGlvbiBpc0N1cnJlbnRCdW5kbGUoc2NyaXB0KSB7XG4gICAgICByZXR1cm4gc2NyaXB0LnNyYyA9PT0gYnVuZGxlO1xuICAgIH0pKSB7XG4gICAgICByZXNvbHZlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwcmVsb2FkTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICBwcmVsb2FkTGluay5ocmVmID0gYnVuZGxlO1xuICAgIHByZWxvYWRMaW5rLnJlbCA9ICdwcmVsb2FkJztcbiAgICBwcmVsb2FkTGluay5hcyA9ICdzY3JpcHQnO1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocHJlbG9hZExpbmspO1xuICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgc2NyaXB0LnNyYyA9IGJ1bmRsZTtcbiAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgZXJyb3IgPSBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGR5bmFtaWNhbGx5IGltcG9ydGVkIG1vZHVsZTogXCIuY29uY2F0KGJ1bmRsZSwgXCIuIEVycm9yOiBcIikuY29uY2F0KGUubWVzc2FnZSkpO1xuICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcbiAgICAgIHNjcmlwdC5yZW1vdmUoKTtcbiAgICAgIHJlamVjdChlcnJvcik7XG4gICAgfTtcbiAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9O1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgfSk7XG59KTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGNhY2hlZEJ1bmRsZXMgPSB7fTtcbnZhciBjYWNoZWRQcmVsb2FkcyA9IHt9O1xudmFyIGNhY2hlZFByZWZldGNoZXMgPSB7fTtcbmZ1bmN0aW9uIGdldENhY2hlKHR5cGUpIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAncHJlbG9hZCc6XG4gICAgICByZXR1cm4gY2FjaGVkUHJlbG9hZHM7XG4gICAgY2FzZSAncHJlZmV0Y2gnOlxuICAgICAgcmV0dXJuIGNhY2hlZFByZWZldGNoZXM7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBjYWNoZWRCdW5kbGVzO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsb2FkZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChidW5kbGUpIHtcbiAgICB2YXIgY2FjaGUgPSBnZXRDYWNoZSh0eXBlKTtcbiAgICBpZiAoY2FjaGVbYnVuZGxlXSkge1xuICAgICAgcmV0dXJuIGNhY2hlW2J1bmRsZV07XG4gICAgfVxuICAgIHJldHVybiBjYWNoZVtidW5kbGVdID0gbG9hZGVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cykuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRlbGV0ZSBjYWNoZVtidW5kbGVdO1xuICAgICAgdGhyb3cgZTtcbiAgICB9KTtcbiAgfTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBidW5kbGVVUkwgPSB7fTtcbmZ1bmN0aW9uIGdldEJ1bmRsZVVSTENhY2hlZChpZCkge1xuICB2YXIgdmFsdWUgPSBidW5kbGVVUkxbaWRdO1xuICBpZiAoIXZhbHVlKSB7XG4gICAgdmFsdWUgPSBnZXRCdW5kbGVVUkwoKTtcbiAgICBidW5kbGVVUkxbaWRdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gZ2V0QnVuZGxlVVJMKCkge1xuICB0cnkge1xuICAgIHRocm93IG5ldyBFcnJvcigpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB2YXIgbWF0Y2hlcyA9ICgnJyArIGVyci5zdGFjaykubWF0Y2goLyhodHRwcz98ZmlsZXxmdHB8KGNocm9tZXxtb3p8c2FmYXJpLXdlYiktZXh0ZW5zaW9uKTpcXC9cXC9bXilcXG5dKy9nKTtcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgLy8gVGhlIGZpcnN0IHR3byBzdGFjayBmcmFtZXMgd2lsbCBiZSB0aGlzIGZ1bmN0aW9uIGFuZCBnZXRCdW5kbGVVUkxDYWNoZWQuXG4gICAgICAvLyBVc2UgdGhlIDNyZCBvbmUsIHdoaWNoIHdpbGwgYmUgYSBydW50aW1lIGluIHRoZSBvcmlnaW5hbCBidW5kbGUuXG4gICAgICByZXR1cm4gZ2V0QmFzZVVSTChtYXRjaGVzWzJdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcvJztcbn1cbmZ1bmN0aW9uIGdldEJhc2VVUkwodXJsKSB7XG4gIHJldHVybiAoJycgKyB1cmwpLnJlcGxhY2UoL14oKD86aHR0cHM/fGZpbGV8ZnRwfChjaHJvbWV8bW96fHNhZmFyaS13ZWIpLWV4dGVuc2lvbik6XFwvXFwvLispXFwvW14vXSskLywgJyQxJykgKyAnLyc7XG59XG5cbi8vIFRPRE86IFJlcGxhY2UgdXNlcyB3aXRoIGBuZXcgVVJMKHVybCkub3JpZ2luYCB3aGVuIGllMTEgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5cbmZ1bmN0aW9uIGdldE9yaWdpbih1cmwpIHtcbiAgdmFyIG1hdGNoZXMgPSAoJycgKyB1cmwpLm1hdGNoKC8oaHR0cHM/fGZpbGV8ZnRwfChjaHJvbWV8bW96fHNhZmFyaS13ZWIpLWV4dGVuc2lvbik6XFwvXFwvW14vXSsvKTtcbiAgaWYgKCFtYXRjaGVzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdPcmlnaW4gbm90IGZvdW5kJyk7XG4gIH1cbiAgcmV0dXJuIG1hdGNoZXNbMF07XG59XG5leHBvcnRzLmdldEJ1bmRsZVVSTCA9IGdldEJ1bmRsZVVSTENhY2hlZDtcbmV4cG9ydHMuZ2V0QmFzZVVSTCA9IGdldEJhc2VVUkw7XG5leHBvcnRzLmdldE9yaWdpbiA9IGdldE9yaWdpbjsiLCJpbXBvcnQgeyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yLCBBUElVc2VyQWJvcnRFcnJvciB9IGZyb20gXCJvcGVuYWlcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gd3JhcE9wZW5BSUNsaWVudEVycm9yKGUpIHtcbiAgICBsZXQgZXJyb3I7XG4gICAgaWYgKGUuY29uc3RydWN0b3IubmFtZSA9PT0gQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvci5uYW1lKSB7XG4gICAgICAgIGVycm9yID0gbmV3IEVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgIGVycm9yLm5hbWUgPSBcIlRpbWVvdXRFcnJvclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChlLmNvbnN0cnVjdG9yLm5hbWUgPT09IEFQSVVzZXJBYm9ydEVycm9yLm5hbWUpIHtcbiAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgZXJyb3IubmFtZSA9IFwiQWJvcnRFcnJvclwiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXJyb3IgPSBlO1xuICAgIH1cbiAgICByZXR1cm4gZXJyb3I7XG59XG4iXSwibmFtZXMiOltdLCJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLmYxMzg1ZWVjLmpzLm1hcCJ9
 globalThis.define=__define;  })(globalThis.define);