var m=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var _=Object.prototype.hasOwnProperty;var I=(t,e)=>{for(var r in e)m(t,r,{get:e[r],enumerable:!0})},N=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of A(e))!_.call(t,s)&&s!==r&&m(t,s,{get:()=>e[s],enumerable:!(n=j(e,s))||n.enumerable});return t};var K=t=>N(m({},"__esModule",{value:!0}),t);var tt={};I(tt,{default:()=>Z});module.exports=K(tt);var W=require("@parcel/plugin");async function x({specifier:t,dependency:e}){switch(t){default:return null}}var V=new Set(["firebase-admin","svelte","ai"]);async function R({specifier:t,dependency:e}){if(t.startsWith("./")||t.startsWith("../"))return null;try{let r=t.split("/");if(r.length>2||V.has(r[0]))return{filePath:require.resolve(t,{paths:[e.resolveFrom]})}}catch{}return null}var o=require("path"),k=require("@parcel/utils");var S=require("fs"),p=require("fs/promises");var h=typeof globalThis.process<"u"?globalThis.process.argv:[];var P=()=>typeof globalThis.process<"u"?globalThis.process.env:{};var H=new Set(h),w=t=>H.has(t),lt=h.filter(t=>t.startsWith("--")&&t.includes("=")).map(t=>t.split("=")).reduce((t,[e,r])=>(t[e]=r,t),{});var ct=w("--dry-run"),E=()=>w("--verbose")||P().VERBOSE==="true",pt=E();async function U(t,e){try{return await(0,p.access)(t,e),!0}catch{return!1}}async function b(t){return U(t,S.constants.R_OK)}var T=require("fs"),d=require("path");var y=[".ts",".tsx",".svelte",".vue",".json",".js",".jsx"],dt=new Set(y);var q=/\S+-loader\S*!\S+/g;function F(t=""){if(q.test(t))throw new Error(`The import path: ${t} is using webpack specific loader import syntax, which isn't supported by Parcel.`)}function v(t){return B(t,"*")}function B(t,e){return t.endsWith(e)&&(t=t.substring(0,t.length-e.length)),t}var G=t=>{try{return(0,T.statSync)(t).isFile()}catch{return!1}};function M(t,e=y){return e.flatMap(r=>[(0,d.resolve)(`${t}${r}`),(0,d.resolve)(t,`index${r}`)]).find(G)}var X=/\.(tsx?)|vue|svelte$/,C=[".ts",".tsx",".svelte",".vue",".json",".css",".scss",".sass",".less",".svg",".js",".jsx"],J=new Set(C),f={pathsMap:null,pathsMapRegex:null};async function $(t){try{let{dependency:e}=t;if(F(e.specifier),!X.test(e.resolveFrom))return null;let n=await L(t);if(n.length===0)return null;z(n);let s=Y(t);return s?{filePath:s}:null}catch{return null}}function z(t){if(f.pathsMap)return;let e=new Map;t.forEach(r=>Q(r,e)),f.pathsMap=e,f.pathsMapRegex=Array.from(e.entries()).map(r=>[...r,new RegExp(`^${r[0].replace("*",".*")}$`)])}function Q(t,e){let{filePath:r,compilerOptions:n}=t,s=n.baseUrl||".",a=n.paths||{},l=(0,o.join)((0,o.dirname)((0,o.join)(r)),s);for(let i in a)e.set(i,a[i].map(c=>(0,o.join)(l,c)))}function Y({specifier:t,dependency:e}){let{pathsMap:r,pathsMapRegex:n}=f;if(r.has(t))return O(t,t,r.get(t),e.resolveFrom);let s=n.find(([,,a])=>a.test(t));return s?O(t,s[0],s[1],e.resolveFrom):null}function O(t,e,r,n){for(let s of r){let a=(0,o.resolve)(t.replace(v(e),v(s))),l=(0,o.extname)(a);if(l.length>0&&J.has(l))return a;let i=(0,o.extname)(n),c=[i,...C.filter(g=>g!==i)],u=M(a,c);if(u!==null)return u}return null}async function L(t,e=[],r=0){if(r>42)throw new Error("Something went wrong in loading tsconfig (depth > 42). Circular dependency?");let{options:n,dependency:s,tsconfigPath:a}=t,l=a?[a]:["tsconfig.json","tsconfig.js"],i=await(0,k.loadConfig)(n.inputFS,s.resolveFrom,l,(0,o.join)(process.env.PLASMO_PROJECT_DIR,"lab")),c=i?.config?.compilerOptions;if(!c)return e;let u=i.files[0].filePath,g={compilerOptions:c,filePath:u};try{if(i.config.extends){let D=await b((0,o.resolve)(i.config.extends))?(0,o.resolve)(i.config.extends):require.resolve(i.config.extends,{paths:[s.resolveFrom]});return await L({...t,tsconfigPath:D},[g,...e],++r)}}catch{}return[g,...e]}var Z=new W.Resolver({async resolve(t){return await $(t)||await R(t)||await x(t)||null}});
